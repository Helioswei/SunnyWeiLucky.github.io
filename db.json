{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/Staticfile","path":"Staticfile","modified":0,"renderable":0},{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/robots.txt","path":"robots.txt","modified":0,"renderable":0},{"_id":"source/images/P11.png","path":"images/P11.png","modified":0,"renderable":0},{"_id":"source/images/access_key.png","path":"images/access_key.png","modified":0,"renderable":0},{"_id":"source/images/bar.png","path":"images/bar.png","modified":0,"renderable":0},{"_id":"source/images/codecopy.png","path":"images/codecopy.png","modified":0,"renderable":0},{"_id":"source/images/cuvid.png","path":"images/cuvid.png","modified":0,"renderable":0},{"_id":"source/images/dnssec.png","path":"images/dnssec.png","modified":0,"renderable":0},{"_id":"source/images/drive.png","path":"images/drive.png","modified":0,"renderable":0},{"_id":"source/images/gmp.png","path":"images/gmp.png","modified":0,"renderable":0},{"_id":"source/images/gnutls.png","path":"images/gnutls.png","modified":0,"renderable":0},{"_id":"source/images/go.png","path":"images/go.png","modified":0,"renderable":0},{"_id":"source/images/host_bucket.png","path":"images/host_bucket.png","modified":0,"renderable":0},{"_id":"source/images/ladspa.png","path":"images/ladspa.png","modified":0,"renderable":0},{"_id":"source/images/libass.png","path":"images/libass.png","modified":0,"renderable":0},{"_id":"source/images/libgsm.png","path":"images/libgsm.png","modified":0,"renderable":0},{"_id":"source/images/libmp3lame.png","path":"images/libmp3lame.png","modified":0,"renderable":0},{"_id":"source/images/libopencore_amrnb.png","path":"images/libopencore_amrnb.png","modified":0,"renderable":0},{"_id":"source/images/libopenjp2.png","path":"images/libopenjp2.png","modified":0,"renderable":0},{"_id":"source/images/libsoxr.png","path":"images/libsoxr.png","modified":0,"renderable":0},{"_id":"source/images/libtasn1.png","path":"images/libtasn1.png","modified":0,"renderable":0},{"_id":"source/images/libtheora.png","path":"images/libtheora.png","modified":0,"renderable":0},{"_id":"source/images/libx264.png","path":"images/libx264.png","modified":0,"renderable":0},{"_id":"source/images/libxcb.png","path":"images/libxcb.png","modified":0,"renderable":0},{"_id":"source/images/libxvid.png","path":"images/libxvid.png","modified":0,"renderable":0},{"_id":"source/images/ogg.png","path":"images/ogg.png","modified":0,"renderable":0},{"_id":"source/images/openal.png","path":"images/openal.png","modified":0,"renderable":0},{"_id":"source/images/openh264.png","path":"images/openh264.png","modified":0,"renderable":0},{"_id":"source/images/opus.png","path":"images/opus.png","modified":0,"renderable":0},{"_id":"source/images/secret_key.png","path":"images/secret_key.png","modified":0,"renderable":0},{"_id":"source/images/speex.png","path":"images/speex.png","modified":0,"renderable":0},{"_id":"source/images/unistring.png","path":"images/unistring.png","modified":0,"renderable":0},{"_id":"source/images/vga.png","path":"images/vga.png","modified":0,"renderable":0},{"_id":"source/images/vorbis.png","path":"images/vorbis.png","modified":0,"renderable":0},{"_id":"source/images/x265.png","path":"images/x265.png","modified":0,"renderable":0},{"_id":"source/images/xvid.png","path":"images/xvid.png","modified":0,"renderable":0},{"_id":"source/images/hw.png","path":"images/hw.png","modified":0,"renderable":0},{"_id":"source/images/readme.png","path":"images/readme.png","modified":0,"renderable":0},{"_id":"source/images/blog/baidu.png","path":"images/blog/baidu.png","modified":0,"renderable":0},{"_id":"source/images/blog/gitee.png","path":"images/blog/gitee.png","modified":0,"renderable":0},{"_id":"source/images/cuda/nouveau.png","path":"images/cuda/nouveau.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片1.png","path":"images/cuda/图片1.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片10.png","path":"images/cuda/图片10.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片11.png","path":"images/cuda/图片11.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片12.png","path":"images/cuda/图片12.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片13.png","path":"images/cuda/图片13.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片14.png","path":"images/cuda/图片14.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片15.png","path":"images/cuda/图片15.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片16.png","path":"images/cuda/图片16.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片17.png","path":"images/cuda/图片17.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片3.png","path":"images/cuda/图片3.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片4.png","path":"images/cuda/图片4.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片5.png","path":"images/cuda/图片5.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片6.png","path":"images/cuda/图片6.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片7.png","path":"images/cuda/图片7.png","modified":0,"renderable":0},{"_id":"source/images/cuda/图片8.png","path":"images/cuda/图片8.png","modified":0,"renderable":0},{"_id":"source/images/docker/docker.png","path":"images/docker/docker.png","modified":0,"renderable":0},{"_id":"source/images/linux/syss.png","path":"images/linux/syss.png","modified":0,"renderable":0},{"_id":"source/images/linux/sysv.png","path":"images/linux/sysv.png","modified":0,"renderable":0},{"_id":"source/images/openoffice/openoffice.png","path":"images/openoffice/openoffice.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"source/images/cpp/html.png","path":"images/cpp/html.png","modified":0,"renderable":0},{"_id":"source/images/cpp/gcno.png","path":"images/cpp/gcno.png","modified":0,"renderable":0},{"_id":"source/images/ffmpeg/file.png","path":"images/ffmpeg/file.png","modified":0,"renderable":0},{"_id":"source/images/ffmpeg/stream/fmp4.png","path":"images/ffmpeg/stream/fmp4.png","modified":0,"renderable":0},{"_id":"source/images/ffmpeg/stream.png","path":"images/ffmpeg/stream.png","modified":0,"renderable":0},{"_id":"themes/next/source/images/avatar.jpeg","path":"images/avatar.jpeg","modified":0,"renderable":1},{"_id":"themes/next/source/images/alipay.jpg","path":"images/alipay.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/clicklove.js","path":"js/src/clicklove.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"source/images/ffmpeg/readstream.png","path":"images/ffmpeg/readstream.png","modified":0,"renderable":0},{"_id":"source/images/ffmpeg/stream/avio.png","path":"images/ffmpeg/stream/avio.png","modified":0,"renderable":0},{"_id":"source/images/ffmpeg/stream/avio1.png","path":"images/ffmpeg/stream/avio1.png","modified":0,"renderable":0},{"_id":"source/images/ffmpeg/stream/output.png","path":"images/ffmpeg/stream/output.png","modified":0,"renderable":0},{"_id":"source/images/linux/cache.png","path":"images/linux/cache.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"source/images/cuda/图片2.png","path":"images/cuda/图片2.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"source/images/ffmpeg/stream/input.png","path":"images/ffmpeg/stream/input.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/Staticfile","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224021},{"_id":"source/CNAME","hash":"865b6311f1d44e8e9dd22fd80260601a73be349c","modified":1612763224021},{"_id":"source/robots.txt","hash":"d3c057dee5705e21e0e319465211e37d823ffa9b","modified":1612763224079},{"_id":"themes/next/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1612763224166},{"_id":"themes/next/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1612763224168},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1612763224167},{"_id":"themes/next/.gitignore","hash":"ee0b13c268cc8695d3883a5da84930af02d4ed08","modified":1612763224180},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1612763224180},{"_id":"themes/next/.javascript_ignore","hash":"cd250ad74ca22bd2c054476456a73d9687f05f87","modified":1612763224183},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1612763224183},{"_id":"themes/next/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1612763224184},{"_id":"themes/next/.travis.yml","hash":"6674fbdfe0d0c03b8a04527ffb8ab66a94253acd","modified":1612763224184},{"_id":"themes/next/LICENSE","hash":"ec44503d7e617144909e54533754f0147845f0c5","modified":1612763224188},{"_id":"themes/next/README.cn.md","hash":"23e92a2599725db2f8dbd524fbef2087c6d11c7b","modified":1612763224188},{"_id":"themes/next/README.md","hash":"50abff86ffe4113051a409c1ed9261195d2aead0","modified":1612763224189},{"_id":"themes/next/bower.json","hash":"486ebd72068848c97def75f36b71cbec9bb359c5","modified":1612763224193},{"_id":"themes/next/gulpfile.coffee","hash":"412defab3d93d404b7c26aaa0279e2e586e97454","modified":1612763224193},{"_id":"themes/next/_config.yml","hash":"ceccfd926a92d780cbdc84ab8d7b8640e88da70f","modified":1612763224189},{"_id":"themes/next/package.json","hash":"3963ad558a24c78a3fd4ef23cf5f73f421854627","modified":1612763224393},{"_id":"source/_posts/AI-PaddleHub的体验使用.md","hash":"3ab42166ab424a1ce5838cb809e856c1a2b83dd4","modified":1612763224022},{"_id":"source/_posts/centos7-163yum源下载.md","hash":"72535560e498948705693929566076a6e901d937","modified":1612765185365},{"_id":"source/_posts/centos7-epel源下载.md","hash":"a6c5e5c3a689f549ab6cb867f9f466bee20fecfa","modified":1612765194261},{"_id":"source/_posts/centos7-libreoffice安装和启动.md","hash":"67a95a2ad705b0d8410cd231ffa4c9913b309e17","modified":1612766638834},{"_id":"source/_posts/centos7-openoffice安装和启动.md","hash":"d375025f2fc8771d11ebf4378bc7ab76c2b5f3fc","modified":1612766653345},{"_id":"source/_posts/centos7-yum的使用.md","hash":"ffd91267eade9d55722cf4891c8ffb94e517cccf","modified":1612765208150},{"_id":"source/_posts/centos7-zsh的使用和配置.md","hash":"281764f71f8274c3b420d24c1adc31e2eddf7e53","modified":1612765219896},{"_id":"source/_posts/centos7-常用的命令.md","hash":"0e6b593f2ea556a39b1bca989bc1bf2cdb772cff","modified":1612765234223},{"_id":"source/_posts/centos7-控制系统的CPU.md","hash":"ed048bc456505b9e2f44fe61670f985e54f1e87c","modified":1612765286636},{"_id":"source/_posts/centos7-网络设置.md","hash":"ea146ca3a66abd18e5421f2b2b9afd73f9a1a631","modified":1612765294742},{"_id":"source/_posts/cpp-centos7常用环境变量的设置.md","hash":"670475d6ef24df660b69d6ec2bb6132afb756ec0","modified":1612767603334},{"_id":"source/_posts/cpp-devtoolset切换gcc的版本.md","hash":"0e23c5d38bd567f079a2e1c53617aa7bacc0040e","modified":1612767615685},{"_id":"source/_posts/cpp-gtest集成Lcov代码覆盖率测试.md","hash":"5042c93c9354fe82e6d0b482ddc0a3227c811f65","modified":1612768364903},{"_id":"source/_posts/cpp-日志库LOG的使用.md","hash":"145b4bc393bd5241723296257240f9d59626ae63","modified":1612767458499},{"_id":"source/_posts/cpp-pistache源码编译之实现cpp-restful接口.md","hash":"13a1c0b744d69e7b23bfb84e8f702b71ccbd5053","modified":1612767572858},{"_id":"source/_posts/cuda-cuda10-0安装.md","hash":"08d588d66d8635a265a9885c95bc2e83c9eb91da","modified":1612766801414},{"_id":"source/_posts/docker-docker常用命令.md","hash":"eae9c47a49246b288fc71ead301a16fd9f4b5277","modified":1612763224028},{"_id":"source/_posts/ffmpeg-avfilter的使用详解.md","hash":"4e4a3df04651955b236244c0c8dd28ec9b80d2bc","modified":1612766689677},{"_id":"source/_posts/ffmpeg-内存io模式-内存区做输入或输出.md","hash":"6b6f97d1b3f5d6e33691fedd0fd4ac23603fac6f","modified":1612766733954},{"_id":"source/_posts/ffmpeg-源码编译支持GPU.md","hash":"f37a19046ab0f32aeb15eb814ea1074b243fa57f","modified":1612766758209},{"_id":"source/_posts/ffmpeg-编码的步骤.md","hash":"6fdfa7ab0224e3db04186ffe17d82e2deef7213b","modified":1612766714257},{"_id":"source/_posts/ffmpeg-转码后丢帧的问题.md","hash":"3da7243e49e97e2b13d4b1a9b80bd23cbe5ec03d","modified":1612766774993},{"_id":"source/_posts/gcc-5-1-0源码安装.md","hash":"ede92594aae4bf45ef744c6978d4746d0141519d","modified":1612767671416},{"_id":"source/_posts/git-大文件上传管理.md","hash":"ec11090d796f78c82c5879e4d0709529737a0b71","modified":1612767296364},{"_id":"source/_posts/git-常用的命令.md","hash":"251a48576d42b2cd0bfd0a1d120aab6703b46296","modified":1612767282439},{"_id":"source/_posts/github-解决GitHub-clone慢的问题.md","hash":"cb230108c30e8d0452fefc38e504b4bf65e615ae","modified":1612767262385},{"_id":"source/_posts/grpc编译.md","hash":"efabde56a6223a0b1688fed50ddfaf146cf473e2","modified":1612767694568},{"_id":"source/_posts/hello-world.md","hash":"8013042677b4e0d83c78798d126a78db80005483","modified":1612763224033},{"_id":"source/_posts/hexo-gulp压缩.md","hash":"aee5c2f4e2884e6500d4aaaaa1ab09670ea7919f","modified":1612767320795},{"_id":"source/_posts/hexo-next主题配置.md","hash":"5e63e41eb6f55bd1ff792be400460a545c3640a2","modified":1612767352268},{"_id":"source/_posts/hexo-代码块添加复制功能.md","hash":"2d56c8d2683b743f4aa3c7b6739ec6a999f96eda","modified":1612767367622},{"_id":"source/_posts/hexo-常用命令.md","hash":"bb5ff373d47c8b376f77c5fb626fc93b93cbf931","modified":1612767336925},{"_id":"source/_posts/image-libraw相机图片库源码编译.md","hash":"3455d1a02a8275c80132dde0f273740bea1edd5d","modified":1612766891931},{"_id":"source/_posts/image-libvips图片处理库源码编译.md","hash":"4aff2e6e0a0875a7f7d2899fa9b42fb12f432962","modified":1612766916310},{"_id":"source/_posts/image-图片处理库总结.md","hash":"ce400d6342fdd629b7df2d2bd4359306f1890d2b","modified":1612766935353},{"_id":"source/_posts/json-cpp处理json.md","hash":"ed4b1593f93c883c95f4300430eb2e5f4f29cfab","modified":1612767650448},{"_id":"source/_posts/mupdf-源码安装.md","hash":"82905e2d38b0563cf24163d53ecb6e9c10d4fd18","modified":1612766833548},{"_id":"source/_posts/mysql-centos7源码安装mysql8-0.md","hash":"900fa912d7caf4e1076e6f61fac92254b733f4a7","modified":1612767028210},{"_id":"source/_posts/mysql-mysql常用命令.md","hash":"c03241e32d5646c48e992066757d946d4475782b","modified":1612767128073},{"_id":"source/_posts/opencv-源码安装.md","hash":"c37b4bbefe7abfb2039b6a02d05645c4515990c8","modified":1612766865581},{"_id":"source/_posts/poco-源码编译包含mysql.md","hash":"17b197ea9f2298bb261f74881749384b214a1239","modified":1612765780426},{"_id":"source/_posts/rabbitmq-AMQPCPP使用问题记录.md","hash":"f47c6d019108d6499a891479574f9a8a75680d4f","modified":1612766573641},{"_id":"source/_posts/rabbitmq-AMQPCPP的编译.md","hash":"086f6be375732e96d174138b9b0ec9c0bd065cac","modified":1612766562846},{"_id":"source/_posts/s3-libs3源码编译.md","hash":"015d9bd7a43f35e0a530f82d02bd554292589ce6","modified":1612766436257},{"_id":"source/_posts/s3-关于s3cmd的下载.md","hash":"8c3dc0e84ba67299b9152958db5d7f63c71e51e5","modified":1612766448913},{"_id":"source/_posts/spider-centos7安装selenium模拟浏览器请求.md","hash":"d1fefc69809242332c7eb32fc150c1d3eefb953e","modified":1612767234113},{"_id":"source/_posts/博客的分类.md","hash":"5620eec6cc1171106e9bea196a5e5e0925434d0a","modified":1612768091785},{"_id":"source/_posts/相机底片的解析.md","hash":"c6097dbb41ac2522feefce08e6895a7ceaa1bc03","modified":1612766043016},{"_id":"source/_posts/系统io状态排查.md","hash":"8dd1e42927512ea08fbabaa4732f7c95a43a1458","modified":1612766001765},{"_id":"source/about/index.md","hash":"393bc7fb0b0cf63bbc14c554366ad700e6e9dc86","modified":1612763224041},{"_id":"source/categories/index.md","hash":"790f053361f365de43e68db2ffae4885badd72a1","modified":1612763224042},{"_id":"source/images/P11.png","hash":"becbae28b163501e5e40f8c58eae1a898c1e0584","modified":1612763224043},{"_id":"source/images/access_key.png","hash":"fb35be6c02f500daf7f475791a3523db3ac181bd","modified":1612763224043},{"_id":"source/images/bar.png","hash":"7e42c75e58dbf4a20b48d49e8d82d2cde85b7e0f","modified":1612763224044},{"_id":"source/images/codecopy.png","hash":"3a73cd1470a13cd8a7f53ba1a10a3489db326863","modified":1612763224046},{"_id":"source/images/cuvid.png","hash":"258a07fcf89ab7e2bb853ca9bc1395296be26041","modified":1612763224055},{"_id":"source/images/dnssec.png","hash":"8d07dbfe14865c860e97fcc9a99c273ffc83152b","modified":1612763224055},{"_id":"source/images/drive.png","hash":"d7c3e1608480e91cb046bbb435ec49e374a69be3","modified":1612763224056},{"_id":"source/images/gmp.png","hash":"f7257b5275b181890640dc52552ae71d0d24d902","modified":1612763224065},{"_id":"source/images/gnutls.png","hash":"37fc5622167d7155c47767ef620f0157121a56b7","modified":1612763224066},{"_id":"source/images/go.png","hash":"e96d5d377a2bcabc48c1781f53e0c465affa0c55","modified":1612763224066},{"_id":"source/images/host_bucket.png","hash":"425d3304be44d15d0299450406d006ee37db9373","modified":1612763224066},{"_id":"source/images/ladspa.png","hash":"daf33c329560e4f341096d8cbaf7c1c11777ac07","modified":1612763224067},{"_id":"source/images/libass.png","hash":"c567d42012eae7522ef4f478ea29045d294946c6","modified":1612763224068},{"_id":"source/images/libgsm.png","hash":"a56794bd89e436de9e3bd2e52c5a046f6daa752b","modified":1612763224068},{"_id":"source/images/libmp3lame.png","hash":"d884d3159c055e72bf50782330bb6fc59d483a7c","modified":1612763224068},{"_id":"source/images/libopencore_amrnb.png","hash":"e13b2ca682399ca156b7ed2762b4cdcef51b416d","modified":1612763224069},{"_id":"source/images/libopenjp2.png","hash":"4c929a02a420b2f8711aa6238ec78dae15ae5ebf","modified":1612763224069},{"_id":"source/images/libsoxr.png","hash":"2f2a33b93e6a4679a07a7f8c757cfd2d3e2978ca","modified":1612763224069},{"_id":"source/images/libtasn1.png","hash":"242e9f4bc560b036cb79a38ed1d4890a1025e091","modified":1612763224069},{"_id":"source/images/libtheora.png","hash":"f1df4385281801737b726bfc6be6a3b3da785b2c","modified":1612763224070},{"_id":"source/images/libx264.png","hash":"a31455fe74c536dfa08f3230b3407271e96b12c7","modified":1612763224070},{"_id":"source/images/libxcb.png","hash":"2a93ed117daf5ce3b39d56a02009b94db0baba08","modified":1612763224070},{"_id":"source/images/libxvid.png","hash":"6e4c6608caddd01829bde91f8efeb97d3f162cbc","modified":1612763224071},{"_id":"source/images/ogg.png","hash":"0ba07d4e5f4c8a68bbc97e2b24fe4f227e201212","modified":1612763224073},{"_id":"source/images/openal.png","hash":"81ce7dc794bf77ecfbb6a264cb5b2eca57309908","modified":1612763224073},{"_id":"source/images/openh264.png","hash":"dc9d49ef722465454d9fd26b4587168d148b4e18","modified":1612763224073},{"_id":"source/images/opus.png","hash":"1061912cba044ddc4bf223736ad09d0843e850c1","modified":1612763224075},{"_id":"source/images/secret_key.png","hash":"b87eaeb261cee2f46ea801fe07b1a16d9689441d","modified":1612763224076},{"_id":"source/images/speex.png","hash":"220ebd5232ef0676756a205e178b0297e409aecc","modified":1612763224076},{"_id":"source/images/unistring.png","hash":"aa761485590b42d8277d5c4e01f61c6d28660d70","modified":1612763224077},{"_id":"source/images/vga.png","hash":"0d7c6f7bda3996f479fc9be30739c56dddc35f41","modified":1612763224077},{"_id":"source/images/vorbis.png","hash":"7f8d8ad8175e85d7e0d9dff556c1785e4d10aaa2","modified":1612763224077},{"_id":"source/images/x265.png","hash":"80318f294e3ce4f97016703b4d3e8e2f1367fe7b","modified":1612763224079},{"_id":"source/images/xvid.png","hash":"f713c592a99b96dbce968c6e5e36a69826e91948","modified":1612763224079},{"_id":"source/tags/index.md","hash":"84d063fa42aba4bb60bde1bc746e0d5d7cac768f","modified":1612763224080},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5adfad3ef1b870063e621bc0838268eb2c7c697a","modified":1612763224171},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"a0a82dbfabdef9a9d7c17a08ceebfb4052d98d81","modified":1612763224172},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"1228506a940114288d61812bfe60c045a0abeac1","modified":1612763224179},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1612763224179},{"_id":"themes/next/languages/de.yml","hash":"fd02d9c2035798d5dc7c1a96b4c3e24b05b31a47","modified":1612763224193},{"_id":"themes/next/languages/default.yml","hash":"b3bcd8934327448a43d9bfada5dd11b1b8c1402e","modified":1612763224194},{"_id":"themes/next/languages/en.yml","hash":"2f4b4776ca1a08cc266a19afb0d1350a3926f42c","modified":1612763224195},{"_id":"themes/next/languages/fr-FR.yml","hash":"efeeb55d5c4add54ad59a612fc0630ee1300388c","modified":1612763224195},{"_id":"themes/next/languages/id.yml","hash":"dccae33e2a5b3c9f11c0e05ec4a7201af1b25745","modified":1612763224195},{"_id":"themes/next/languages/it.yml","hash":"a215d016146b1bd92cef046042081cbe0c7f976f","modified":1612763224201},{"_id":"themes/next/languages/ja.yml","hash":"37f954e47a3bc669620ca559e3edb3b0072a4be5","modified":1612763224201},{"_id":"themes/next/languages/ko.yml","hash":"dc8f3e8c64eb7c4bb2385025b3006b8efec8b31d","modified":1612763224202},{"_id":"themes/next/languages/nl-NL.yml","hash":"213e7a002b82fb265f69dabafbbc382cfd460030","modified":1612763224202},{"_id":"themes/next/languages/pt-BR.yml","hash":"568d494a1f37726a5375b11452a45c71c3e2852d","modified":1612763224205},{"_id":"themes/next/languages/pt.yml","hash":"2efcd240c66ab1a122f061505ca0fb1e8819877b","modified":1612763224205},{"_id":"themes/next/languages/ru.yml","hash":"e33ee44e80f82e329900fc41eb0bb6823397a4d6","modified":1612763224206},{"_id":"themes/next/languages/vi.yml","hash":"a9b89ebd3e5933033d1386c7c56b66c44aca299a","modified":1612763224206},{"_id":"themes/next/languages/zh-Hans.yml","hash":"99b77a53e5a10ed5cf78a32a146e179cf05688cd","modified":1612763224281},{"_id":"themes/next/languages/zh-hk.yml","hash":"fe0d45807d015082049f05b54714988c244888da","modified":1612763224282},{"_id":"themes/next/languages/zh-tw.yml","hash":"432463b481e105073accda16c3e590e54c8e7b74","modified":1612763224283},{"_id":"themes/next/layout/_layout.swig","hash":"bf5707f40f0842debac7ee4707bcc834fe5ade3d","modified":1612763224292},{"_id":"themes/next/layout/archive.swig","hash":"9a2c14874a75c7085d2bada5e39201d3fc4fd2b4","modified":1612763224386},{"_id":"themes/next/layout/category.swig","hash":"3cbb3f72429647411f9e85f2544bdf0e3ad2e6b2","modified":1612763224387},{"_id":"themes/next/layout/index.swig","hash":"555a357ecf17128db4e29346c92bb6298e66547a","modified":1612763224387},{"_id":"themes/next/layout/page.swig","hash":"e8fcaa641d46930237675d2ad4b56964d9e262e9","modified":1612763224387},{"_id":"themes/next/layout/post.swig","hash":"7a6ce102ca82c3a80f776e555dddae1a9981e1ed","modified":1612763224392},{"_id":"themes/next/layout/schedule.swig","hash":"87ad6055df01fa2e63e51887d34a2d8f0fbd2f5a","modified":1612763224392},{"_id":"themes/next/layout/tag.swig","hash":"34e1c016cbdf94a31f9c5d494854ff46b2a182e9","modified":1612763224393},{"_id":"themes/next/scripts/merge-configs.js","hash":"38d86aab4fc12fb741ae52099be475196b9db972","modified":1612763224397},{"_id":"themes/next/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1612763224397},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1612763224575},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1612763224575},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1612763224575},{"_id":"source/images/hw.png","hash":"eaf6e78864c94e48939501ed8dc499c213eaa958","modified":1612763224067},{"_id":"source/images/readme.png","hash":"75859f1a68138b7dc28d6c3a2988f62ffb9072e0","modified":1612763224076},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224499},{"_id":"source/images/blog/baidu.png","hash":"7d69aee17bc1498f2e82465d44f280b4792c66cb","modified":1612763224044},{"_id":"source/images/blog/gitee.png","hash":"0be6e9b391c630702e3d86f5c1a8902c997b8e5b","modified":1612763224045},{"_id":"source/images/cuda/nouveau.png","hash":"f60588dabac60dc43f215d09b466d5232eae7044","modified":1612763224047},{"_id":"source/images/cuda/图片1.png","hash":"31f184c16554ba2607d7c1d8a2385f34439f3437","modified":1612763224048},{"_id":"source/images/cuda/图片10.png","hash":"311619e056b73466a150363be0f1e18ffa9400a8","modified":1612763224048},{"_id":"source/images/cuda/图片11.png","hash":"5c0fbe191d08d87d7d078560fc6e4997a638c86c","modified":1612763224049},{"_id":"source/images/cuda/图片12.png","hash":"627a07b9f0748605cb30cd0b8d280fe942f8cf6e","modified":1612763224049},{"_id":"source/images/cuda/图片13.png","hash":"709f1d871ec7beb759748beaf8df3fddef3f810c","modified":1612763224049},{"_id":"source/images/cuda/图片14.png","hash":"2bc504c0dfc7b3862e5a6817b02fe20815e5018d","modified":1612763224050},{"_id":"source/images/cuda/图片15.png","hash":"badd25bdb39aa5ec973bdf11b606f7aab4eb9222","modified":1612763224050},{"_id":"source/images/cuda/图片16.png","hash":"4b8be5cc8527e1f671fea3598a64c75df90f9e13","modified":1612763224051},{"_id":"source/images/cuda/图片17.png","hash":"6e9c09d24f283df5f0f3573618b3135831ec1737","modified":1612763224051},{"_id":"source/images/cuda/图片3.png","hash":"a30910cadc4b922fa5b115b36186e1ded72f6969","modified":1612763224053},{"_id":"source/images/cuda/图片4.png","hash":"a3d5e4cc62bb642adc931a832f453f16a516ba79","modified":1612763224053},{"_id":"source/images/cuda/图片5.png","hash":"aa2d324ee51f2f0939ff3fed01b4c976ce1354c1","modified":1612763224054},{"_id":"source/images/cuda/图片6.png","hash":"d074718f501212ba05445a5eaa779c49a9549658","modified":1612763224054},{"_id":"source/images/cuda/图片7.png","hash":"ecfade1fc5b77b643339b7d2acf828410a42f52c","modified":1612763224054},{"_id":"source/images/cuda/图片8.png","hash":"40bfec8f83069a52b30cf29a5f4984cfbff65915","modified":1612763224054},{"_id":"source/images/docker/docker.png","hash":"36aad6b8874196063fb1b7591ce352a989c2d5bd","modified":1612763224056},{"_id":"source/images/linux/syss.png","hash":"5f76faff3713bab3eaf8f461bbc23c8a98812fb2","modified":1612763224072},{"_id":"source/images/linux/sysv.png","hash":"aa96c57b2c41bb6321db22b82e39b769be863036","modified":1612763224072},{"_id":"source/images/openoffice/openoffice.png","hash":"92aecfe99c8b1a2f0c59003549d43aa1406ca367","modified":1612763224074},{"_id":"themes/next/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1612763224290},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1612763224291},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"8c56dd26157cbc580ae41d97ac34b90ab48ced3f","modified":1612763224296},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"f83befdc740beb8dc88805efd7fbb0fef9ed19be","modified":1612763224297},{"_id":"themes/next/layout/_macro/post.swig","hash":"4ba938822d56c597490f0731893eaa2443942e0f","modified":1612763224298},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"9c7343fd470e0943ebd75f227a083a980816290b","modified":1612763224302},{"_id":"themes/next/layout/_macro/reward.swig","hash":"357d86ec9586705bfbb2c40a8c7d247a407db21a","modified":1612763224302},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"e2e4eae391476da994045ed4c7faf5e05aca2cd7","modified":1612763224303},{"_id":"themes/next/layout/_partials/comments.swig","hash":"b79bf64dde56f34a85ee5346a59274db71314ad9","modified":1612763224306},{"_id":"themes/next/layout/_partials/footer.swig","hash":"81f0d8c0e43fda83e4097fdc37a5de355df2f80f","modified":1612763224307},{"_id":"themes/next/layout/_partials/head.swig","hash":"f14a39dad1ddd98e6d3ceb25dda092ba80d391b5","modified":1612763224309},{"_id":"themes/next/layout/_partials/header.swig","hash":"c54b32263bc8d75918688fb21f795103b3f57f03","modified":1612763224312},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"77c61e0baea3544df361b7338c3cd13dc84dde22","modified":1612763224312},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1612763224317},{"_id":"themes/next/layout/_partials/search.swig","hash":"b4ebe4a52a3b51efe549dd1cdee846103664f5eb","modified":1612763224317},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1612763224333},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1612763224333},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9be624634703be496a5d2535228bc568a8373af9","modified":1612763224343},{"_id":"themes/next/layout/_third-party/copy-code.swig","hash":"35940084be269ce2a74741303ce00333802b2282","modified":1612763224367},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1612763224372},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"8301c9600bb3e47f7fb98b0e0332ef3c51bb1688","modified":1612763224372},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"a0bd3388587fd943baae0d84ca779a707fbcad89","modified":1612763224372},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"fa882641da3bd83d9a58a8a97f9d4c62a9ee7b5c","modified":1612763224372},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"554ec568e9d2c71e4a624a8de3cb5929050811d6","modified":1612763224376},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1612763224376},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"9a188938d46931d5f3882a140aa1c48b3a893f0c","modified":1612763224376},{"_id":"themes/next/scripts/tags/button.js","hash":"eddbb612c15ac27faf11c59c019ce188f33dec2c","modified":1612763224401},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1612763224401},{"_id":"themes/next/scripts/tags/exturl.js","hash":"5022c0ba9f1d13192677cf1fd66005c57c3d0f53","modified":1612763224401},{"_id":"themes/next/scripts/tags/full-image.js","hash":"c9f833158c66bd72f627a0559cf96550e867aa72","modified":1612763224401},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1612763224410},{"_id":"themes/next/scripts/tags/label.js","hash":"6f00952d70aadece844ce7fd27adc52816cc7374","modified":1612763224410},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"bcba2ff25cd7850ce6da322d8bd85a8dd00b5ceb","modified":1612763224410},{"_id":"themes/next/scripts/tags/note.js","hash":"f7eae135f35cdab23728e9d0d88b76e00715faa0","modified":1612763224410},{"_id":"themes/next/scripts/tags/tabs.js","hash":"aa7fc94a5ec27737458d9fe1a75c0db7593352fd","modified":1612763224412},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1612763224496},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1612763224499},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1612763224501},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1612763224502},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1612763224503},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1612763224505},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1612763224505},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1612763224505},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1612763224507},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1612763224507},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1612763224507},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1612763224507},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1612763224509},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1612763224507},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1612763224509},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1612763224509},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1612763224510},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1612763224509},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1612763224510},{"_id":"source/images/cpp/html.png","hash":"f27b408815d4d54fc55ed4c631a18a89bed928ca","modified":1611122690810},{"_id":"source/images/cpp/gcno.png","hash":"5c26e89523511f941ce2a255c08b5ac7710f1916","modified":1611121692016},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224336},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224336},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224480},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224481},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224483},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224494},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612763224496},{"_id":"source/images/ffmpeg/file.png","hash":"d93ab47f0d01c0c3ff3545ba34676bbf187be7d1","modified":1612763224057},{"_id":"source/images/ffmpeg/stream/fmp4.png","hash":"f909f271e2392908cddf9ed563be939d9ac3bea1","modified":1612763224063},{"_id":"source/images/ffmpeg/stream.png","hash":"cb7d3891833982826708af629d5676945217c656","modified":1612763224060},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1612763224311},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1612763224311},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"b2f0d247b213e4cf8de47af6a304d98070cc7256","modified":1612763224318},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1612763224321},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1612763224321},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1612763224322},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1612763224324},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1612763224324},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"0a9cdd6958395fcdffc80ab60f0c6301b63664a5","modified":1612763224326},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1612763224334},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1612763224336},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1612763224339},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"0c4a658a4e49a7da6434de408ee8f2fdfbb6e309","modified":1612763224344},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1612763224345},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1612763224347},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1612763224347},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"7d94845f96197d9d84a405fa5d4ede75fb81b225","modified":1612763224353},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"ccc443b22bd4f8c7ac4145664686c756395b90e0","modified":1612763224353},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b1e13df83fb2b1d5d513b30b7aa6158b0837daab","modified":1612763224353},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"45f3f629c2aacc381095750e1c8649041a71a84b","modified":1612763224353},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"b92063aee0d07166f56332c424dc02bdf0bdf978","modified":1612763224355},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1612763224355},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"5a8027328f060f965b3014060bebec1d7cf149c1","modified":1612763224355},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1612763224356},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1612763224358},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b83a51bbe0f1e2ded9819070840b0ea145f003a6","modified":1612763224358},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"1600f340e0225361580c44890568dc07dbcf2c89","modified":1612763224358},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"9c818f8f966fc7f76706e9cda2db543c12d2ae89","modified":1612763224363},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"4dcc3213c033994d342d02b800b6229295433d30","modified":1612763224363},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"af7f3e43cbdc4f88c13f101f0f341af96ace3383","modified":1612763224363},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"75d973fc442af673a15b253379a1839df29b1a32","modified":1612763224363},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"9246162d4bc7e949ce1d12d135cbbaf5dc3024ec","modified":1612763224367},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"55e8a8834b6b1e32ff90bb0060b368f7828c53fd","modified":1612763224367},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"7e65ff8fe586cd655b0e9d1ad2912663ff9bd36c","modified":1612763224367},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1612763224379},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"93479642fd076a1257fecc25fcf5d20ccdefe509","modified":1612763224381},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1612763224385},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1612763224385},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"3403fdd8efde1a0afd11ae8a5a97673f5903087f","modified":1612763224480},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"07f7da320689f828f6e36a6123807964a45157a0","modified":1612763224480},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"7896c3ee107e1a8b9108b6019f1c070600a1e8cc","modified":1612763224481},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"0e55cbd93852dc3f8ccb44df74d35d9918f847e0","modified":1612763224481},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"58e7dd5947817d9fc30770712fc39b2f52230d1e","modified":1612763224494},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"a25408534f8fe6e321db4bbf9dd03335d648fe17","modified":1612763224494},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4069f918ccc312da86db6c51205fc6c6eaabb116","modified":1612763224495},{"_id":"themes/next/source/css/_variables/base.styl","hash":"b1f6ea881a4938a54603d68282b0f8efb4d7915d","modified":1612763224496},{"_id":"themes/next/source/images/avatar.jpeg","hash":"b9903fab4f07532d6d07244ee41a3dc228de4d60","modified":1612763224503},{"_id":"themes/next/source/images/alipay.jpg","hash":"0abddda1b8657bd54adea23b9fd0cdc104b8c8d7","modified":1612763224500},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1612763224511},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"0289031200c3d4c2bdd801ee10fff13bb2c353e4","modified":1612763224512},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"cb431b54ba9c692165a1f5a12e4c564a560f8058","modified":1612763224512},{"_id":"themes/next/source/js/src/exturl.js","hash":"a2a0f0de07e46211f74942a468f42ee270aa555c","modified":1612763224513},{"_id":"themes/next/source/js/src/clicklove.js","hash":"1fa1ccff37b6ff57c906dd3ca2edce14a715d86f","modified":1612763224512},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1612763224514},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1612763224514},{"_id":"themes/next/source/js/src/motion.js","hash":"885176ed51d468f662fbf0fc09611f45c7e5a3b1","modified":1612763224514},{"_id":"themes/next/source/js/src/post-details.js","hash":"93a18271b4123dd8f94f09d1439b47c3c19a8712","modified":1612763224515},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"02cf91514e41200bc9df5d8bdbeb58575ec06074","modified":1612763224515},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1612763224516},{"_id":"themes/next/source/js/src/utils.js","hash":"b3e9eca64aba59403334f3fa821f100d98d40337","modified":1612763224516},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1612763224524},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1612763224526},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"b02737510e9b89aeed6b54f89f602a9c24b06ff2","modified":1612763224528},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1612763224537},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1612763224537},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1612763224537},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1612763224538},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1612763224540},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1612763224540},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1612763224541},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1612763224542},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1612763224542},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1612763224551},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"14264a210bf94232d58d7599ea2ba93bfa4fb458","modified":1612763224556},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"e33aa8fa48b6639d8d8b937d13261597dd473b3a","modified":1612763224556},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"2ce5f3bf15c523b9bfc97720d8884bb22602a454","modified":1612763224557},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1612763224552},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1612763224553},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1612763224553},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1612763224554},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1612763224555},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1612763224555},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1612763224557},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1612763224558},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1612763224558},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1612763224559},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1612763224559},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1612763224559},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1612763224559},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1612763224560},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1612763224560},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1612763224561},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1612763224561},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1612763224561},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1612763224563},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"8aaa675f577d5501f5f22d5ccb07c2b76310b690","modified":1612763224563},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"2d9a9f38c493fdf7c0b833bb9184b6a1645c11b2","modified":1612763224563},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"46a50b91c98b639c9a2b9265c5a1e66a5c656881","modified":1612763224564},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"8148492dd49aa876d32bb7d5b728d3f5bf6f5074","modified":1612763224564},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1612763224570},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1612763224570},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1612763224573},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1612763224574},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1612763224574},{"_id":"source/images/ffmpeg/readstream.png","hash":"7d145e1b28f6ead2fb42b86a2a35f854c21a2d26","modified":1612763224058},{"_id":"source/images/ffmpeg/stream/avio.png","hash":"b4c1b869696b0c07f84cbbaaa17a09c3db949589","modified":1612763224061},{"_id":"source/images/ffmpeg/stream/avio1.png","hash":"1775e054e5f600e4280cee41cec4eea2fd2598c7","modified":1612763224062},{"_id":"source/images/ffmpeg/stream/output.png","hash":"3030aff651e6d0b433938b28bbc0d4f6d1bc11ac","modified":1612763224065},{"_id":"source/images/linux/cache.png","hash":"a4caf7beabb4eed210626e9266f7b2b0e27c3dd7","modified":1612763224072},{"_id":"themes/next/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1612763224552},{"_id":"source/images/cuda/图片2.png","hash":"b620c0b301c54df216f59d1dd9f4280efa27c797","modified":1612763224052},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"218cc936ba3518a3591b2c9eda46bc701edf7710","modified":1612763224378},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1612763224378},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"8f86f694c0749a18ab3ad6f6df75466ca137a4bc","modified":1612763224419},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"237d185ac62ec9877e300947fa0109c44fb8db19","modified":1612763224419},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1612763224424},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1612763224424},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"8b32928686c327151e13d3ab100157f9a03cd59f","modified":1612763224422},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"4f2801fc4cf3f31bf2069f41db8c6ce0e3da9e39","modified":1612763224447},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1612763224468},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"24ee4b356ff55fc6e58f26a929fa07750002cf29","modified":1612763224477},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1612763224477},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"91ca75492cd51f2553f4d294ed2f48239fcd55eb","modified":1612763224478},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"ea9069645696f86c5df64208490876fe150c8cae","modified":1612763224478},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1612763224478},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a17e2b871a335f290afb392a08f94fd35f59c715","modified":1612763224478},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1612763224476},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1612763224484},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"60fa84aa7731760f05f52dd7d8f79b5f74ac478d","modified":1612763224483},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1612763224484},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1612763224484},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1612763224486},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1612763224486},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9b913b73d31d21f057f97115ffab93cfa578b884","modified":1612763224486},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"9c99034f8e00d47e978b3959f51eb4a9ded0fcc8","modified":1612763224486},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1612763224491},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"416988dca389e6e2fdfa51fa7f4ee07eb53f82fb","modified":1612763224491},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"4642e30010af8b2b037f5b43146b10a934941958","modified":1612763224491},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1612763224493},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"86197902dfd3bededba10ba62b8f9f22e0420bde","modified":1612763224493},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1612763224489},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"ad2dcedf393ed1f3f5afd2508d24969c916d02fc","modified":1612763224493},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1612763224489},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"e695e58f714129ca292c2e54cd62c251aca7f7fe","modified":1612763224489},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1612763224490},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"5dbc0d0c897e46760e5dbee416530d485c747bba","modified":1612763224490},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"f1d0b5d7af32c423eaa8bb93ab6a0b45655645dc","modified":1612763224515},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"6d586bfcfb7ae48f1b12f76eec82d3ad31947501","modified":1612763224522},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1612763224529},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1612763224529},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1612763224530},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1612763224530},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1612763224532},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1612763224533},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1612763224536},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1612763224536},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1612763224536},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1612763224539},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1612763224539},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1612763224543},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1612763224544},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1612763224544},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1612763224569},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1612763224569},{"_id":"source/images/ffmpeg/stream/input.png","hash":"08af8dff1daa6fe6159e9e2ee068e555f6ddbf85","modified":1612763224064},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"4ac683b2bc8531c84d98f51b86957be0e6f830f3","modified":1612763224522},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1612763224571},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"9f73c4696f0907aa451a855444f88fc0698fa472","modified":1612763224424},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1612763224428},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1612763224433},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1612763224428},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1612763224428},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1612763224433},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"50450d9fdc8a2b2be8cfca51e3e1a01ffd636c0b","modified":1612763224437},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1612763224433},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1612763224441},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"b6f3a06a94a6ee5470c956663164d58eda818a64","modified":1612763224441},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1612763224443},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1612763224445},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"f9760ecf186954cee3ba4a149be334e9ba296b89","modified":1612763224443},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1612763224445},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"62fbbd32cf5a99ae550c45c763a2c4813a138d01","modified":1612763224447},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"875cbe88d5c7f6248990e2beb97c9828920e7e24","modified":1612763224447},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"a6c6eb8adba0a090ad1f4b9124e866887f20d10d","modified":1612763224451},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1612763224451},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1612763224451},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1612763224451},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"d0d7a5c90d62b685520d2b47fea8ba6019ff5402","modified":1612763224453},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1612763224453},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"ca88ea6999a61fb905eb6e72eba5f92d4ee31e6e","modified":1612763224453},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"b2495ae5e04dcca610aacadc47881d9e716cd440","modified":1612763224453},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1612763224458},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"ccb34c52be8adba5996c6b94f9e723bd07d34c16","modified":1612763224458},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1612763224458},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"7968343e41f8b94b318c36289dff1196c3eb1791","modified":1612763224458},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"89d6c3b697efc63de42afd2e89194b1be14152af","modified":1612763224460},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-daf.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1612763224460},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"39f04c4c7237a4e10acd3002331992b79945d241","modified":1612763224460},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"8dd9a1c6f4f6baa00c2cf01837e7617120cf9660","modified":1612763224465},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"57427e0239d2da82ded80185bf6d54b630a2d1d5","modified":1612763224465},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1612763224465},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1612763224466},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"11c22f0fb3f6beb13e5a425ec064a4ff974c13b7","modified":1612763224465},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"c8fe49a4bc014c24dead05b782a7082411a4abc5","modified":1612763224466},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a1521d48bb06d8d703753f52a198baa197af7da2","modified":1612763224466},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"5ef6343835f484a2c0770bd1eb9cc443609e4c39","modified":1612763224467},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1612763224468},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1612763224469},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"a3bdd71237afc112b2aa255f278cab6baeb25351","modified":1612763224469},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"f825da191816eef69ea8efb498a7f756d5ebb498","modified":1612763224469},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1612763224471},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"b7076e58d647265ee0ad2b461fe8ce72c9373bc5","modified":1612763224471},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"9a409b798decdefdaf7a23f0b11004a8c27e82f3","modified":1612763224471},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"154a87a32d2fead480d5e909c37f6c476671c5e6","modified":1612763224471},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"2ab1322fe52ab5aafd49e68f5bd890e8380ee927","modified":1612763224471},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"b80604868e4f5cf20fccafd7ee415c20c804f700","modified":1612763224471},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"bba4f3bdb7517cd85376df3e1209b570c0548c69","modified":1612763224472},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1612763224472},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1612763224474},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1612763224474},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"874278147115601d2abf15987f5f7a84ada1ac6b","modified":1612763224474},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1612763224475},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1612763224475},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1612763224475},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"9c8196394a89dfa40b87bf0019e80144365a9c93","modified":1612763224476},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"28825ae15fa20ae3942cdaa7bcc1f3523ce59acc","modified":1612763224475},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1612763224488},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1612763224488},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1612763224490},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1612763224517},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1612763224517},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1612763224520},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1612763224519},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1612763224520},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"6c26cdb36687d4f0a11dabf5290a909c3506be5c","modified":1612763224520},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1612763224533},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1612763224533},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1612763224535},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1612763224535},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1612763224535},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1612763224536},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1612763224545},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1612763224550},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1612763224551},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1612763224549},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"16b03db23a52623348f37c04544f2792032c1fb6","modified":1612763224523},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1612763224546},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"90a1b22129efc172e2dfcceeeb76bff58bc3192f","modified":1612763224526},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1612763224548},{"_id":"themes/next/source/lib/three/three.min.js","hash":"26273b1cb4914850a89529b48091dc584f2c57b8","modified":1612763224568},{"_id":"public/atom.xml","hash":"b6a051ab7af8172e6fcff7f1eae62db17e694f5d","modified":1612768591805},{"_id":"public/sitemap.xml","hash":"ac19c17b023fa0364d4e53bd56057111dbd56770","modified":1612768591888},{"_id":"public/search.xml","hash":"c4e574e5d422b1c1db0f7baf36a51db9221f9905","modified":1612768591890},{"_id":"public/Staticfile","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1612768591922},{"_id":"public/about/index.html","hash":"76a5a3eabb3e71b2cf28690b785ac80f08c8150a","modified":1612768591944},{"_id":"public/categories/index.html","hash":"b88c6de6acf63cdf8410312ffd5a3b53b574d83b","modified":1612768591944},{"_id":"public/tags/index.html","hash":"6f99216c85077d079b6dbfe3eb7c93d6e9d952d7","modified":1612768591944},{"_id":"public/article/3264464113.html","hash":"69f4801072c6b97d24f2ca063c41030ba50964b2","modified":1612768591944},{"_id":"public/article/1243066710.html","hash":"a107dd17f997f2bd73b5c2da333faf290875d6f4","modified":1612768591944},{"_id":"public/article/2992991387.html","hash":"f51bd01fdf4a713590bdb92f8f82c0fe64773774","modified":1612768591944},{"_id":"public/article/192192511.html","hash":"9d84fb9dfee8f5837eda6e5e9d1b4f305826b2f2","modified":1612768591944},{"_id":"public/article/1959613013.html","hash":"46ddf2a1d5c65dc2988972c7f2ccdecc3edb12b1","modified":1612768591944},{"_id":"public/article/3025513893.html","hash":"9ee120de2d2dacad7e2a88d8e91f636dcf511d3c","modified":1612768591944},{"_id":"public/article/1736132591.html","hash":"2972047b257db0a7d9cddbcf68b9a00333845b48","modified":1612768591944},{"_id":"public/article/1714992348.html","hash":"8618386b2710d6943db29b2cf7a6ec0752afceb2","modified":1612768591944},{"_id":"public/article/2452888490.html","hash":"6f1ccd1b3ba2a28abbcf8ea74c778d0741054d69","modified":1612768591944},{"_id":"public/article/3077642244.html","hash":"e3251aa19eaf3605738eb7ea84c629ac3eb0b24a","modified":1612768591944},{"_id":"public/article/3032443121.html","hash":"9125c7c743c990dbcb62a78883ffa9e48fa2754a","modified":1612768591944},{"_id":"public/article/1373770285.html","hash":"5e3c4046b286663b48c0135ba1bc65b6a011d2cc","modified":1612768591944},{"_id":"public/article/3142310907.html","hash":"317c7ff4de8b5410d4fc3ca54c9f0d884d419872","modified":1612768591944},{"_id":"public/article/933612194.html","hash":"81f7debcf4970bf1e5f134a40c0d3bee7bdf789c","modified":1612768591944},{"_id":"public/article/3714481837.html","hash":"77ad98fe1e19f266759037fb36647d765f541862","modified":1612768591944},{"_id":"public/article/2538200340.html","hash":"cfff273a91adddecca2c31ec394014d9adf2dd96","modified":1612768591944},{"_id":"public/article/2728951675.html","hash":"92a201f6724fa1e82b9cce7fd76c4159332a4dab","modified":1612768591944},{"_id":"public/article/1768093973.html","hash":"d6db3624c69ece8fd5440932a8c0ff048d51ca7f","modified":1612768591944},{"_id":"public/article/3190039070.html","hash":"eff221e80c957190e6fd6caa712ee86fbf7ebcb5","modified":1612768591944},{"_id":"public/article/3594159119.html","hash":"0847d03e31d032590ec6ff376b61be2400c29dbe","modified":1612768591944},{"_id":"public/article/814027255.html","hash":"e047ba354952130fdd1726248bccc3e2eb29a8e2","modified":1612768591944},{"_id":"public/article/4107582643.html","hash":"30a5619a0b75ef3deccb8931501ac1f51c402acf","modified":1612768591944},{"_id":"public/article/2019996800.html","hash":"0d9cde4dee4b5607110f3c38e47bc7ca8104d1c1","modified":1612768591945},{"_id":"public/article/853195356.html","hash":"a402bd238424b2eb600cb829ea3d990120f32d1e","modified":1612768591945},{"_id":"public/article/2127593710.html","hash":"9835e784d3e4535095e0e7f9e7b93d201ebd0597","modified":1612768591945},{"_id":"public/article/3538252460.html","hash":"b0e812fe242e4a919828a09623cb0e048378c374","modified":1612768591945},{"_id":"public/article/1968653668.html","hash":"dcb4c550a563b35e4588a958fdefd4b0876df294","modified":1612768591945},{"_id":"public/article/2055195890.html","hash":"e7039e462e75cebce8c6b10db77505b000f0a509","modified":1612768591945},{"_id":"public/article/2689943165.html","hash":"4650b7dc64fa48609a8050d3b56fce6d94564f58","modified":1612768591945},{"_id":"public/article/3859923575.html","hash":"5a04e567a41bcd046eddca93575abc2cd96d78ed","modified":1612768591945},{"_id":"public/article/2361785990.html","hash":"29f6b94a46bf8c12a1819c520c66be377c3e83c4","modified":1612768591945},{"_id":"public/article/3549577056.html","hash":"c8984208fb28c97c987a8ef2a5cd3e81ac083a1a","modified":1612768591945},{"_id":"public/article/3084764285.html","hash":"b8e3c25ebe112955e238c288a31f7637254864d3","modified":1612768591945},{"_id":"public/article/1044847951.html","hash":"051f947d9339942177cdfaa694893299a6f915ea","modified":1612768591945},{"_id":"public/article/2230395924.html","hash":"a0b56839d0e879591af7780f8be0a15eecd8795d","modified":1612768591945},{"_id":"public/article/3587508548.html","hash":"c399934b1254ee42a95cf23befcbea21d91cc7b2","modified":1612768591945},{"_id":"public/article/1731984249.html","hash":"2d063f5741660a48c46580c618238fe1e6fc3e77","modified":1612768591945},{"_id":"public/article/3226112650.html","hash":"c8c85a265a3af3488f2befc4905a71365c458b80","modified":1612768591945},{"_id":"public/article/3448999942.html","hash":"3e2471b36fd0ce713e200fb561ad879daf1ca592","modified":1612768591945},{"_id":"public/article/2764140538.html","hash":"6d2abc251aadeebd961ceb5c59a280733672c739","modified":1612768591945},{"_id":"public/article/1473358207.html","hash":"dcc282bf039c4a1a1a0d96c406c95a1f4fdd4821","modified":1612768591945},{"_id":"public/article/3394448682.html","hash":"d0df4d1c43ecfcaf8583fb5d537c81b15933ff1f","modified":1612768591945},{"_id":"public/article/4148759935.html","hash":"c09a915536cb6753129195523f969d9588bfe315","modified":1612768591945},{"_id":"public/article/4054922039.html","hash":"188215b39c0f76d44e20fb34bb832df5f8519447","modified":1612768591945},{"_id":"public/article/3973852728.html","hash":"e826fc33e9cf5cb42b7e38e434fed13210e7ee04","modified":1612768591945},{"_id":"public/article/4030313287.html","hash":"fc87b5b701bf8ee7d8b6f80987c320e95aa94f61","modified":1612768591945},{"_id":"public/article/3778876136.html","hash":"d569650b9d6ae73c55d4b66245969f4bd85e8d56","modified":1612768591945},{"_id":"public/article/2063445917.html","hash":"297897e8c59086c381580a58795b42aae6ccf411","modified":1612768591945},{"_id":"public/article/3687663458.html","hash":"a542d11e19ebc562549fcde4264dc3db7f0c0150","modified":1612768591945},{"_id":"public/categories/Centos7/index.html","hash":"5e9fb258241fb2cc069933cd0f0388ad41fa63fb","modified":1612768591945},{"_id":"public/categories/AI/index.html","hash":"5a422e8b60c1317aab94debc9bbf38835a0026a2","modified":1612768591945},{"_id":"public/categories/Media/index.html","hash":"19c5cfd743713059b779e98282691855cb622ac9","modified":1612768591945},{"_id":"public/categories/Media/page/2/index.html","hash":"5ac85e01269b880f62236d1e5d01b2c0e9728e83","modified":1612768591945},{"_id":"public/categories/AI/PaddleHub/index.html","hash":"81e3d86f964e3bdb6b1bdf9d3daf887205bf45b6","modified":1612768591945},{"_id":"public/categories/Media/doc/index.html","hash":"ea72649887cdd62d855e5f3adffcf10e455c2a6e","modified":1612768591945},{"_id":"public/categories/Cpp/index.html","hash":"b92ab324d089198744908ff55652d61c98c37a7d","modified":1612768591945},{"_id":"public/categories/Docker/index.html","hash":"458e9d4e03ce0a2242981824efd286a733bdf7e6","modified":1612768591945},{"_id":"public/categories/Media/video/index.html","hash":"0a0a431d13c068a880a2eebde782bdd876c6325c","modified":1612768591945},{"_id":"public/categories/Cpp/gcc/index.html","hash":"2aadab4fb8dc0e39e018be1da823208cfd17e291","modified":1612768591946},{"_id":"public/categories/Cpp/log/index.html","hash":"c9874cf316aefd5fb2ef8a53ce7440658a9bc21e","modified":1612768591946},{"_id":"public/categories/Cpp/unitTest/index.html","hash":"ccd8ebe9a9f09230a4b8b9b03f46ee107aa6e779","modified":1612768591946},{"_id":"public/categories/Tool/index.html","hash":"d9603ac462d6ba77c8d6c941bec623ebd908e5b8","modified":1612768591946},{"_id":"public/categories/Cpp/restful/index.html","hash":"7d646c7bd7e33f6bc19e8e9bd1bc32441807d967","modified":1612768591946},{"_id":"public/categories/Cpp/protocol/index.html","hash":"dc8afe7b19e88a72d609874d77eb758f5752b4eb","modified":1612768591946},{"_id":"public/categories/Media/image/index.html","hash":"2d7d66bda4bbd17457966392f08795addd7a0b2f","modified":1612768591946},{"_id":"public/categories/Database/index.html","hash":"ccaee4ef4d368d702176c781973d3f1519668b49","modified":1612768591946},{"_id":"public/categories/Blog/index.html","hash":"7866dcc7822354a57d2d728c0fd90916bd942af5","modified":1612768591946},{"_id":"public/categories/Tool/git/index.html","hash":"1fb0d16f58452167e9b721027b3fa086ab94b115","modified":1612768591946},{"_id":"public/categories/Tool/hexo/index.html","hash":"6eb68fab1ce792b20dc2c4f00da19d17cfa4cb45","modified":1612768591946},{"_id":"public/categories/Database/mysql/index.html","hash":"51e01e8899458630f7d9a71e947117cf94e5386b","modified":1612768591946},{"_id":"public/categories/Database/rabbitmq/index.html","hash":"d6a1adc8a421d19fe77f80e6d075f156bddfc433","modified":1612768591946},{"_id":"public/categories/Database/s3/index.html","hash":"79457b66cf9686a5c68e93327af39231f07faf14","modified":1612768591946},{"_id":"public/categories/Tool/spider/index.html","hash":"d948bce49fda7eb7466458aaa8b3b14a8259ce47","modified":1612768591946},{"_id":"public/archives/index.html","hash":"c30e88ac6e90a3c934969f936adc560479b24812","modified":1612768591946},{"_id":"public/archives/page/2/index.html","hash":"217194e61fd42f7a01c774218b210201d6cd3030","modified":1612768591946},{"_id":"public/archives/page/4/index.html","hash":"16fa7f0a36d41aba6ef6f4958886ce021900eb18","modified":1612768591946},{"_id":"public/archives/page/3/index.html","hash":"40d5fa6e713f7c70ca8b05973c68bc27e8cba05e","modified":1612768591946},{"_id":"public/archives/page/5/index.html","hash":"bf61bf3f7bd2b9171ed7276a76f979b631475dd9","modified":1612768591946},{"_id":"public/archives/2019/index.html","hash":"f7a4cc599e6b02df7ff413362acc83b2d73f2029","modified":1612768591946},{"_id":"public/archives/2019/03/index.html","hash":"fc21af5cab91728ae04cf60845184dab9f7fa6c9","modified":1612768591946},{"_id":"public/archives/2019/04/index.html","hash":"3a881d25c02541b6f078086ed119cdedcc622753","modified":1612768591946},{"_id":"public/archives/2019/05/index.html","hash":"2974c76fd0defb8435350d163be7cf1725004daa","modified":1612768591946},{"_id":"public/archives/2020/index.html","hash":"4cd6c7a3e9e15767430ec94133f71715818a23a9","modified":1612768591946},{"_id":"public/archives/2020/page/2/index.html","hash":"bd5679e1b6d5b0e0ed56ec5eaf4f81e63c1a5805","modified":1612768591946},{"_id":"public/archives/2020/page/3/index.html","hash":"15f0e6d27b5c1efd8fcb42e36d05e336a3fa4f57","modified":1612768591946},{"_id":"public/archives/2020/page/4/index.html","hash":"b6062f69f461e39fdf6de3467e9a0440f1bf06ad","modified":1612768591946},{"_id":"public/archives/2020/01/index.html","hash":"898a01ae4955728eed6fa2320ea42a366e84ae0f","modified":1612768591946},{"_id":"public/archives/2020/04/index.html","hash":"19d766efe2095ee9bec756828d668997f18c05d0","modified":1612768591946},{"_id":"public/archives/2020/05/index.html","hash":"27bc36ab8d78ff7f2fbb891bacb68b1be262bb5d","modified":1612768591946},{"_id":"public/archives/2020/06/index.html","hash":"1e767962c1ec4f0d154122efe5680d3765a23a20","modified":1612768591946},{"_id":"public/archives/2020/07/index.html","hash":"f065eea0aa528312020ef018c0370aaf752bed42","modified":1612768591946},{"_id":"public/archives/2020/09/index.html","hash":"05243f34c8036a12b6a577376b1f092b50ef7998","modified":1612768591946},{"_id":"public/archives/2020/10/index.html","hash":"fc81b9a6a66c4ca8982bf719e92093597033ad65","modified":1612768591946},{"_id":"public/archives/2020/11/index.html","hash":"75473315a2ffd0281ff49f86fb951130d8e79fa8","modified":1612768591946},{"_id":"public/archives/2020/12/index.html","hash":"802796a547550a78d52d4168e99d1592bfb73eb0","modified":1612768591946},{"_id":"public/archives/2021/index.html","hash":"77881a9b79017b1ac9543fc9065be6601e196210","modified":1612768591947},{"_id":"public/archives/2021/01/index.html","hash":"d128c380c0fdf85f0774b141a76d5c47e4e8a73f","modified":1612768591947},{"_id":"public/archives/2021/02/index.html","hash":"ccd6034db709fde013ba88e4aaacda1acb334ae0","modified":1612768591947},{"_id":"public/tags/yum/index.html","hash":"a46c5c80dd58ffd45d24c8abf95b40ef586c9336","modified":1612768591947},{"_id":"public/tags/PaddleHub/index.html","hash":"77566b46760480572071e8573a2b5e1d35f7dd32","modified":1612768591947},{"_id":"public/tags/libreoffice/index.html","hash":"299bd57af0f761094a802c32c4410e063358cb42","modified":1612768591947},{"_id":"public/tags/openoffice/index.html","hash":"09ca9e81a59767ad3f7f85baa20c0c1fb6b7fb9b","modified":1612768591947},{"_id":"public/tags/zsh/index.html","hash":"539cf1858dc106a00b573c919dbfb12cee63b9c8","modified":1612768591947},{"_id":"public/tags/cmd/index.html","hash":"31d4cc914350c3cd04e9302822d806320f9d17a4","modified":1612768591947},{"_id":"public/tags/network/index.html","hash":"07716dddc97cf4077f29626942e2a950fbe33bfd","modified":1612768591947},{"_id":"public/tags/gcc/index.html","hash":"2bd7e5acc4e1c4c601c9943fef01fa8d57e34993","modified":1612768591947},{"_id":"public/tags/devtoolset/index.html","hash":"304fcf12914179456e680e8d61b4c0189dac96bf","modified":1612768591947},{"_id":"public/tags/env/index.html","hash":"45d587f32e4be76794b285b113a68c787ef8c1b7","modified":1612768591947},{"_id":"public/tags/gtest/index.html","hash":"4ade8bd8b6ab40e7e2cb418dc306fb2489e83672","modified":1612768591947},{"_id":"public/tags/lcov/index.html","hash":"2f4bb0c95fe1188ef00c6c07f62e58ab3bed42b6","modified":1612768591947},{"_id":"public/tags/pistache/index.html","hash":"77869add31902abeec5e9b69c531f4559fa01653","modified":1612768591947},{"_id":"public/tags/cuda/index.html","hash":"9ee5949ad43cf22f384d85aeb3535d1a178775a0","modified":1612768591947},{"_id":"public/tags/ffmpeg/index.html","hash":"61d13b62c4ebcd97b2a697dd7073ba1457b5659e","modified":1612768591947},{"_id":"public/tags/easyloggingcpp/index.html","hash":"740e5508b9f736495f14fbbb27050f27624fffe3","modified":1612768591947},{"_id":"public/tags/io/index.html","hash":"674bf3e819b3ea95a8acf3ab955f08651b92e385","modified":1612768591947},{"_id":"public/tags/GPU/index.html","hash":"12fa3adce77c5254f8eaf8a0322a6e9d0dfffc1f","modified":1612768591947},{"_id":"public/tags/lfs/index.html","hash":"2f50b620e5ff0fc97f174d845771390440dfe164","modified":1612768591947},{"_id":"public/tags/git/index.html","hash":"195acfee84d5e2699fcd029aaa738e731460b253","modified":1612768591948},{"_id":"public/tags/grpc/index.html","hash":"77d8c43642f7094659336a5e97d8444ceb80daa8","modified":1612768591948},{"_id":"public/tags/gulp/index.html","hash":"ed4d91120a3da58a5a0bb3e4abddff0e25abc9a0","modified":1612768591948},{"_id":"public/tags/next/index.html","hash":"7a60b5392d7d4659d25595c740d25d1660bba3f9","modified":1612768591948},{"_id":"public/tags/hexo/index.html","hash":"be55b13a60c0fd57e46c1e60e3163d1738e6f77d","modified":1612768591948},{"_id":"public/tags/libraw/index.html","hash":"8af3e7107c497092d1a049cd4227183de40c1a36","modified":1612768591948},{"_id":"public/tags/libvips/index.html","hash":"6b5772f76481e5765ec1aa7c2139f15dc999a70e","modified":1612768591948},{"_id":"public/tags/json/index.html","hash":"6ba3e2a5bcb047c8045d85bdb7a7891eb29d3fd1","modified":1612768591948},{"_id":"public/tags/mupdf/index.html","hash":"d3a077197558204df8518983312a6e8f2ad389f7","modified":1612768591948},{"_id":"public/tags/mysql/index.html","hash":"10c293cba307e5482cff4c9a874fce8c0c29f635","modified":1612768591948},{"_id":"public/tags/opencv/index.html","hash":"7691787ac47cf31d1d4e3024e7bc78dbd34944b2","modified":1612768591948},{"_id":"public/tags/poco/index.html","hash":"1aea31bacf94e7aea67d33a8ee10b50554e97105","modified":1612768591948},{"_id":"public/tags/rabbitmq/index.html","hash":"4056499acaf41fe1b934e21380526cd07b6da165","modified":1612768591948},{"_id":"public/tags/s3/index.html","hash":"2b61e98e37aded34510d87840b04f7f29c273994","modified":1612768591948},{"_id":"public/tags/selenium/index.html","hash":"b40a171f42722b6021018121c06e9156e240327d","modified":1612768591948},{"_id":"public/tags/Blog/index.html","hash":"68e11455ac5f35ce2241e18f0b039b80e23e7091","modified":1612768591948},{"_id":"public/index.html","hash":"cfe090ab98ced7fb75a30f13829caed8724680a8","modified":1612768591948},{"_id":"public/tags/image/index.html","hash":"3cb42844ac3bb2c70a55ee2b0521dbb9141751a6","modified":1612768591948},{"_id":"public/tags/RAW/index.html","hash":"c9839618b6c06603a3bd0a1d0b0987092df73cd8","modified":1612768591948},{"_id":"public/page/2/index.html","hash":"a215f49bf71454320f03b7d9aaed370bc245a406","modified":1612768591948},{"_id":"public/page/3/index.html","hash":"89ce92376111cd39872496456a713b00156b13dd","modified":1612768591948},{"_id":"public/page/4/index.html","hash":"941979c905346551f3ce88ca7c9f1eaab6e7c458","modified":1612768591948},{"_id":"public/page/5/index.html","hash":"14521141767351022838dfac4c8bc03ef18f24ae","modified":1612768591948},{"_id":"public/CNAME","hash":"865b6311f1d44e8e9dd22fd80260601a73be349c","modified":1612768591948},{"_id":"public/robots.txt","hash":"d3c057dee5705e21e0e319465211e37d823ffa9b","modified":1612768591948},{"_id":"public/images/access_key.png","hash":"fb35be6c02f500daf7f475791a3523db3ac181bd","modified":1612768591948},{"_id":"public/images/P11.png","hash":"becbae28b163501e5e40f8c58eae1a898c1e0584","modified":1612768591948},{"_id":"public/images/bar.png","hash":"7e42c75e58dbf4a20b48d49e8d82d2cde85b7e0f","modified":1612768591948},{"_id":"public/images/cuvid.png","hash":"258a07fcf89ab7e2bb853ca9bc1395296be26041","modified":1612768591948},{"_id":"public/images/codecopy.png","hash":"3a73cd1470a13cd8a7f53ba1a10a3489db326863","modified":1612768591948},{"_id":"public/images/dnssec.png","hash":"8d07dbfe14865c860e97fcc9a99c273ffc83152b","modified":1612768591949},{"_id":"public/images/drive.png","hash":"d7c3e1608480e91cb046bbb435ec49e374a69be3","modified":1612768591949},{"_id":"public/images/gmp.png","hash":"f7257b5275b181890640dc52552ae71d0d24d902","modified":1612768591949},{"_id":"public/images/gnutls.png","hash":"37fc5622167d7155c47767ef620f0157121a56b7","modified":1612768591949},{"_id":"public/images/go.png","hash":"e96d5d377a2bcabc48c1781f53e0c465affa0c55","modified":1612768591949},{"_id":"public/images/host_bucket.png","hash":"425d3304be44d15d0299450406d006ee37db9373","modified":1612768591949},{"_id":"public/images/libass.png","hash":"c567d42012eae7522ef4f478ea29045d294946c6","modified":1612768591949},{"_id":"public/images/ladspa.png","hash":"daf33c329560e4f341096d8cbaf7c1c11777ac07","modified":1612768591949},{"_id":"public/images/libgsm.png","hash":"a56794bd89e436de9e3bd2e52c5a046f6daa752b","modified":1612768591949},{"_id":"public/images/libmp3lame.png","hash":"d884d3159c055e72bf50782330bb6fc59d483a7c","modified":1612768591949},{"_id":"public/images/libopencore_amrnb.png","hash":"e13b2ca682399ca156b7ed2762b4cdcef51b416d","modified":1612768591949},{"_id":"public/images/libopenjp2.png","hash":"4c929a02a420b2f8711aa6238ec78dae15ae5ebf","modified":1612768591949},{"_id":"public/images/libsoxr.png","hash":"2f2a33b93e6a4679a07a7f8c757cfd2d3e2978ca","modified":1612768591949},{"_id":"public/images/libtasn1.png","hash":"242e9f4bc560b036cb79a38ed1d4890a1025e091","modified":1612768591949},{"_id":"public/images/libtheora.png","hash":"f1df4385281801737b726bfc6be6a3b3da785b2c","modified":1612768591949},{"_id":"public/images/libx264.png","hash":"a31455fe74c536dfa08f3230b3407271e96b12c7","modified":1612768591949},{"_id":"public/images/libxcb.png","hash":"2a93ed117daf5ce3b39d56a02009b94db0baba08","modified":1612768591949},{"_id":"public/images/libxvid.png","hash":"6e4c6608caddd01829bde91f8efeb97d3f162cbc","modified":1612768591949},{"_id":"public/images/ogg.png","hash":"0ba07d4e5f4c8a68bbc97e2b24fe4f227e201212","modified":1612768591949},{"_id":"public/images/openh264.png","hash":"dc9d49ef722465454d9fd26b4587168d148b4e18","modified":1612768591949},{"_id":"public/images/opus.png","hash":"1061912cba044ddc4bf223736ad09d0843e850c1","modified":1612768591949},{"_id":"public/images/secret_key.png","hash":"b87eaeb261cee2f46ea801fe07b1a16d9689441d","modified":1612768591949},{"_id":"public/images/speex.png","hash":"220ebd5232ef0676756a205e178b0297e409aecc","modified":1612768591949},{"_id":"public/images/vga.png","hash":"0d7c6f7bda3996f479fc9be30739c56dddc35f41","modified":1612768591949},{"_id":"public/images/unistring.png","hash":"aa761485590b42d8277d5c4e01f61c6d28660d70","modified":1612768591949},{"_id":"public/images/vorbis.png","hash":"7f8d8ad8175e85d7e0d9dff556c1785e4d10aaa2","modified":1612768591949},{"_id":"public/images/xvid.png","hash":"f713c592a99b96dbce968c6e5e36a69826e91948","modified":1612768591949},{"_id":"public/images/x265.png","hash":"80318f294e3ce4f97016703b4d3e8e2f1367fe7b","modified":1612768591949},{"_id":"public/images/blog/gitee.png","hash":"0be6e9b391c630702e3d86f5c1a8902c997b8e5b","modified":1612768591949},{"_id":"public/images/blog/baidu.png","hash":"7d69aee17bc1498f2e82465d44f280b4792c66cb","modified":1612768591950},{"_id":"public/images/cuda/图片1.png","hash":"31f184c16554ba2607d7c1d8a2385f34439f3437","modified":1612768591950},{"_id":"public/images/cuda/nouveau.png","hash":"f60588dabac60dc43f215d09b466d5232eae7044","modified":1612768591950},{"_id":"public/images/cuda/图片10.png","hash":"311619e056b73466a150363be0f1e18ffa9400a8","modified":1612768591950},{"_id":"public/images/cuda/图片11.png","hash":"5c0fbe191d08d87d7d078560fc6e4997a638c86c","modified":1612768591950},{"_id":"public/images/cuda/图片12.png","hash":"627a07b9f0748605cb30cd0b8d280fe942f8cf6e","modified":1612768591950},{"_id":"public/images/cuda/图片13.png","hash":"709f1d871ec7beb759748beaf8df3fddef3f810c","modified":1612768591950},{"_id":"public/images/cuda/图片14.png","hash":"2bc504c0dfc7b3862e5a6817b02fe20815e5018d","modified":1612768591950},{"_id":"public/images/cuda/图片15.png","hash":"badd25bdb39aa5ec973bdf11b606f7aab4eb9222","modified":1612768591950},{"_id":"public/images/cuda/图片16.png","hash":"4b8be5cc8527e1f671fea3598a64c75df90f9e13","modified":1612768591950},{"_id":"public/images/cuda/图片17.png","hash":"6e9c09d24f283df5f0f3573618b3135831ec1737","modified":1612768591950},{"_id":"public/images/cuda/图片3.png","hash":"a30910cadc4b922fa5b115b36186e1ded72f6969","modified":1612768591950},{"_id":"public/images/cuda/图片4.png","hash":"a3d5e4cc62bb642adc931a832f453f16a516ba79","modified":1612768591950},{"_id":"public/images/cuda/图片5.png","hash":"aa2d324ee51f2f0939ff3fed01b4c976ce1354c1","modified":1612768591950},{"_id":"public/images/cuda/图片6.png","hash":"d074718f501212ba05445a5eaa779c49a9549658","modified":1612768591950},{"_id":"public/images/cuda/图片7.png","hash":"ecfade1fc5b77b643339b7d2acf828410a42f52c","modified":1612768591950},{"_id":"public/images/cuda/图片8.png","hash":"40bfec8f83069a52b30cf29a5f4984cfbff65915","modified":1612768591950},{"_id":"public/images/docker/docker.png","hash":"36aad6b8874196063fb1b7591ce352a989c2d5bd","modified":1612768591950},{"_id":"public/images/linux/syss.png","hash":"5f76faff3713bab3eaf8f461bbc23c8a98812fb2","modified":1612768591950},{"_id":"public/images/linux/sysv.png","hash":"aa96c57b2c41bb6321db22b82e39b769be863036","modified":1612768591950},{"_id":"public/images/openoffice/openoffice.png","hash":"92aecfe99c8b1a2f0c59003549d43aa1406ca367","modified":1612768591950},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1612768591950},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1612768591950},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1612768591950},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1612768591950},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1612768591950},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1612768591950},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1612768591950},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1612768591950},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1612768591950},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1612768591950},{"_id":"public/images/openal.png","hash":"81ce7dc794bf77ecfbb6a264cb5b2eca57309908","modified":1612768592406},{"_id":"public/images/hw.png","hash":"eaf6e78864c94e48939501ed8dc499c213eaa958","modified":1612768592406},{"_id":"public/images/readme.png","hash":"75859f1a68138b7dc28d6c3a2988f62ffb9072e0","modified":1612768592406},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1612768592406},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1612768592406},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1612768592406},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1612768592406},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1612768592406},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1612768592406},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1612768592406},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1612768592406},{"_id":"public/images/ffmpeg/stream/fmp4.png","hash":"f909f271e2392908cddf9ed563be939d9ac3bea1","modified":1612768592406},{"_id":"public/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1612768592406},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1612768592406},{"_id":"public/images/ffmpeg/stream/output.png","hash":"3030aff651e6d0b433938b28bbc0d4f6d1bc11ac","modified":1612768592406},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1612768592406},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1612768592406},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1612768592406},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1612768592407},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1612768592407},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1612768592407},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1612768592407},{"_id":"public/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1612768592407},{"_id":"public/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1612768592407},{"_id":"public/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1612768592407},{"_id":"public/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1612768592407},{"_id":"public/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1612768592407},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1612768592407},{"_id":"public/live2dw/assets/hijiki.model.json","hash":"feff43bf7498d213982c3736c2c029664e4bcbd2","modified":1612768592407},{"_id":"public/live2dw/assets/hijiki.pose.json","hash":"81438bf69b32c7c11e311b4fe043730cdc7b7ec2","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/01.mtn","hash":"fb550833ae22c9954c3e01df37ed29b2d61700f2","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/02.mtn","hash":"7eafc52edc73b7cb80ae70d34b43c6ac778fa47b","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/03.mtn","hash":"f900737c7a98441cbb2e05255427e6260e19ae68","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/04.mtn","hash":"c7a25d3c5d783639bae18db2f3cd284b819c3c85","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/05.mtn","hash":"dd20ad24b5d1830a5d44b9bccb28f922eea5e0e5","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/00_idle.mtn","hash":"b224c60e463b9f71ddbfc0c720e430496c175f4f","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/06.mtn","hash":"ad404bd852d276cdd3d054c953e23f90e4e45ae1","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/07.mtn","hash":"b7f2e3a9fa4f3ffbb6e64a08f8d9f45ca1868ffb","modified":1612768592407},{"_id":"public/live2dw/assets/mtn/08.mtn","hash":"4411c7651ff65195b113d95e7d5ebef8a59a37d9","modified":1612768592407},{"_id":"public/live2dw/lib/L2Dwidget.min.js","hash":"5f1a807437cc723bcadc3791d37add5ceed566a2","modified":1612768592407},{"_id":"public/css/main.css","hash":"8d02f71041cd0f5bace0eb3a26bf9429a0c93c94","modified":1612768592435},{"_id":"public/images/cpp/html.png","hash":"f27b408815d4d54fc55ed4c631a18a89bed928ca","modified":1612768592437},{"_id":"public/images/cpp/gcno.png","hash":"5c26e89523511f941ce2a255c08b5ac7710f1916","modified":1612768592443},{"_id":"public/images/ffmpeg/stream/avio1.png","hash":"1775e054e5f600e4280cee41cec4eea2fd2598c7","modified":1612768592444},{"_id":"public/images/ffmpeg/stream/avio.png","hash":"b4c1b869696b0c07f84cbbaaa17a09c3db949589","modified":1612768592444},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1612768592444},{"_id":"public/live2dw/lib/L2Dwidget.min.js.map","hash":"3290fe2df45f065b51a1cd7b24ec325cbf9bb5ce","modified":1612768592444},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1612768592451},{"_id":"public/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1612768592451},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1612768592451},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1612768592451},{"_id":"public/js/src/clicklove.js","hash":"5492ce36457a23ae3ed47597ff6b10aba63ace32","modified":1612768592451},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1612768592451},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1612768592451},{"_id":"public/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1612768592452},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1612768592452},{"_id":"public/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1612768592452},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1612768592452},{"_id":"public/js/src/utils.js","hash":"9b1325801d27213083d1487a12b1a62b539ab6f8","modified":1612768592452},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1612768592452},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1612768592452},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1612768592452},{"_id":"public/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1612768592452},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1612768592452},{"_id":"public/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1612768592452},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1612768592452},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1612768592452},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1612768592452},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1612768592452},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1612768592452},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1612768592452},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1612768592452},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1612768592452},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1612768592452},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1612768592452},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1612768592452},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1612768592452},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1612768592452},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1612768592452},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1612768592452},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1612768592452},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1612768592452},{"_id":"public/lib/fastclick/README.html","hash":"287b2e24cae1f7d01877dda79b76c24f81123895","modified":1612768592452},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1612768592452},{"_id":"public/lib/jquery_lazyload/README.html","hash":"bfb6e229fc36e493d45499b4ac30a7c298786ab4","modified":1612768592452},{"_id":"public/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1612768592453},{"_id":"public/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1612768592453},{"_id":"public/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1612768592453},{"_id":"public/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1612768592453},{"_id":"public/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1612768592453},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1612768592453},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1612768592453},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1612768592453},{"_id":"public/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1612768592453},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1612768592453},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1612768592453},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1612768592453},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1612768592453},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1612768592453},{"_id":"public/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1612768592453},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1612768592453},{"_id":"public/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1612768592453},{"_id":"public/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1612768592453},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1612768592453},{"_id":"public/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1612768592453},{"_id":"public/images/ffmpeg/file.png","hash":"d93ab47f0d01c0c3ff3545ba34676bbf187be7d1","modified":1612768592453},{"_id":"public/images/ffmpeg/stream.png","hash":"cb7d3891833982826708af629d5676945217c656","modified":1612768592453},{"_id":"public/images/alipay.jpg","hash":"0abddda1b8657bd54adea23b9fd0cdc104b8c8d7","modified":1612768592453},{"_id":"public/images/avatar.jpeg","hash":"b9903fab4f07532d6d07244ee41a3dc228de4d60","modified":1612768592453},{"_id":"public/images/ffmpeg/readstream.png","hash":"7d145e1b28f6ead2fb42b86a2a35f854c21a2d26","modified":1612768592453},{"_id":"public/images/ffmpeg/stream/input.png","hash":"08af8dff1daa6fe6159e9e2ee068e555f6ddbf85","modified":1612768592453},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1612768592453},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1612768592453},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js","hash":"35bb5b588b6de25c9be2dd51d3fd331feafac02d","modified":1612768592453},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1612768592455},{"_id":"public/live2dw/assets/moc/hijiki.moc","hash":"44289e62545a7046e0f5231103a851750b78524e","modified":1612768592455},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1612768592467},{"_id":"public/images/linux/cache.png","hash":"a4caf7beabb4eed210626e9266f7b2b0e27c3dd7","modified":1612768592474},{"_id":"public/live2dw/assets/moc/hijiki.2048/texture_00.png","hash":"66464e0d96439695b5542c5e2f5be60739c29999","modified":1612768592474},{"_id":"public/images/cuda/图片2.png","hash":"b620c0b301c54df216f59d1dd9f4280efa27c797","modified":1612768592487},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1612768592499},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js.map","hash":"35e71cc2a130199efb167b9a06939576602f0d75","modified":1612768592499}],"Category":[{"name":"Centos7","_id":"ckkw8rxvl0004lkq5lxopgpu8"},{"name":"AI","_id":"ckkw8rxvr000alkq5pjb1boyz"},{"name":"Media","_id":"ckkw8rxvv000hlkq5l09okgp5"},{"name":"PaddleHub","parent":"ckkw8rxvr000alkq5pjb1boyz","_id":"ckkw8rxw2000wlkq5x0q7kccy"},{"name":"doc","parent":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxw40012lkq5j0a4d236"},{"name":"Cpp","_id":"ckkw8rxw8001alkq56trud88l"},{"name":"Docker","_id":"ckkw8rxwp0025lkq55bbcrjgp"},{"name":"video","parent":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxws002blkq5frjd0xya"},{"name":"gcc","parent":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxwy002mlkq5g9jecvnk"},{"name":"log","parent":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxx2002wlkq5pcs4c8q9"},{"name":"unitTest","parent":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxq0049lkq533bg9ome"},{"name":"Tool","_id":"ckkw8rxxs004flkq58heksqrq"},{"name":"restful","parent":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxv004plkq5xlypw2xj"},{"name":"protocol","parent":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxx004zlkq594h74m51"},{"name":"image","parent":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxy2005ilkq5695121zo"},{"name":"Database","_id":"ckkw8rxy7005xlkq5u14uzo0d"},{"name":"Blog","_id":"ckkw8rxye006rlkq5zghualwo"},{"name":"git","parent":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyf006tlkq5k9tlitvr"},{"name":"hexo","parent":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyh0071lkq593ikqlkz"},{"name":"mysql","parent":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyj007dlkq5ibnup4zc"},{"name":"rabbitmq","parent":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyl007jlkq54z25d3rh"},{"name":"s3","parent":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxym007nlkq59exnfxpw"},{"name":"spider","parent":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyo007vlkq5j5dlptc5"}],"Data":[],"Page":[{"title":"about","date":"2019-03-15T09:06:51.000Z","_content":"","source":"about/index.md","raw":"---\ntitle: about\ndate: 2019-03-15 17:06:51\n---\n","updated":"2021-02-08T05:47:04.041Z","path":"about/index.html","comments":1,"layout":"page","_id":"ckkw8rxvh0001lkq5g058x5ne","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"categories","date":"2019-03-15T09:05:29.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2019-03-15 17:05:29\ntype: categories\ncomments: false\n---\n","updated":"2021-02-08T05:47:04.042Z","path":"categories/index.html","layout":"page","_id":"ckkw8rxvk0003lkq5tubogp3s","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2019-03-15T09:04:49.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2019-03-15 17:04:49\ntype: tags\ncomments: false\n---\n","updated":"2021-02-08T05:47:04.080Z","path":"tags/index.html","layout":"page","_id":"ckkw8rxvo0007lkq59q6clfgw","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"centos7-163yum源下载","abbrlink":2361785990,"date":"2020-05-06T03:14:01.000Z","_content":"\n\n\n我们在centos7上下载东西的时候，有时候自带的源里面没有我们需要的软件，所有我们需要更换源来进行下载\n\n\n\n### 一，下载repo文件\n\n~~~\nwget http://mirrors.163.com/.help/CentOS7-Base-163.repo\n~~~\n\n~~~\ncurl -o CentOS7-Base-163.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo\n~~~\n\n\n\n### 二，备份并且替代系统的repo文件\n\n~~~\ncp  CentOS7-Base-163.repo  /etc/yum.repos.d/ \n\ncd /etc/yum.repos.d/ \n\nmv CentOS-Base.repo CentOS-Base.repo.bak \n\nmv CentOS7-Base-163.repo CentOS-Base.repo\n~~~\n\n\n\n### 三，执行yum源更新命令\n\n~~~\nyum clean all \n\nyum makecache \n\nyum update\n~~~\n\n\n\n","source":"_posts/centos7-163yum源下载.md","raw":"---\ntitle: centos7-163yum源下载\ncategories: Centos7\ntags: yum\nabbrlink: 2361785990\ndate: 2020-05-06 11:14:01\n---\n\n\n\n我们在centos7上下载东西的时候，有时候自带的源里面没有我们需要的软件，所有我们需要更换源来进行下载\n\n\n\n### 一，下载repo文件\n\n~~~\nwget http://mirrors.163.com/.help/CentOS7-Base-163.repo\n~~~\n\n~~~\ncurl -o CentOS7-Base-163.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo\n~~~\n\n\n\n### 二，备份并且替代系统的repo文件\n\n~~~\ncp  CentOS7-Base-163.repo  /etc/yum.repos.d/ \n\ncd /etc/yum.repos.d/ \n\nmv CentOS-Base.repo CentOS-Base.repo.bak \n\nmv CentOS7-Base-163.repo CentOS-Base.repo\n~~~\n\n\n\n### 三，执行yum源更新命令\n\n~~~\nyum clean all \n\nyum makecache \n\nyum update\n~~~\n\n\n\n","slug":"centos7-163yum源下载","published":1,"updated":"2021-02-08T06:19:45.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxve0000lkq5nmgvwibm","content":"<p>我们在centos7上下载东西的时候，有时候自带的源里面没有我们需要的软件，所有我们需要更换源来进行下载</p>\n<h3 id=\"一，下载repo文件\"><a href=\"#一，下载repo文件\" class=\"headerlink\" title=\"一，下载repo文件\"></a>一，下载repo文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -o CentOS7-Base-163.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，备份并且替代系统的repo文件\"><a href=\"#二，备份并且替代系统的repo文件\" class=\"headerlink\" title=\"二，备份并且替代系统的repo文件\"></a>二，备份并且替代系统的repo文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp  CentOS7-Base-163.repo  /etc/yum.repos.d/ </span><br><span class=\"line\"></span><br><span class=\"line\">cd /etc/yum.repos.d/ </span><br><span class=\"line\"></span><br><span class=\"line\">mv CentOS-Base.repo CentOS-Base.repo.bak </span><br><span class=\"line\"></span><br><span class=\"line\">mv CentOS7-Base-163.repo CentOS-Base.repo</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，执行yum源更新命令\"><a href=\"#三，执行yum源更新命令\" class=\"headerlink\" title=\"三，执行yum源更新命令\"></a>三，执行yum源更新命令</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum clean all </span><br><span class=\"line\"></span><br><span class=\"line\">yum makecache </span><br><span class=\"line\"></span><br><span class=\"line\">yum update</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>我们在centos7上下载东西的时候，有时候自带的源里面没有我们需要的软件，所有我们需要更换源来进行下载</p>\n<h3 id=\"一，下载repo文件\"><a href=\"#一，下载repo文件\" class=\"headerlink\" title=\"一，下载repo文件\"></a>一，下载repo文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -o CentOS7-Base-163.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，备份并且替代系统的repo文件\"><a href=\"#二，备份并且替代系统的repo文件\" class=\"headerlink\" title=\"二，备份并且替代系统的repo文件\"></a>二，备份并且替代系统的repo文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp  CentOS7-Base-163.repo  /etc/yum.repos.d/ </span><br><span class=\"line\"></span><br><span class=\"line\">cd /etc/yum.repos.d/ </span><br><span class=\"line\"></span><br><span class=\"line\">mv CentOS-Base.repo CentOS-Base.repo.bak </span><br><span class=\"line\"></span><br><span class=\"line\">mv CentOS7-Base-163.repo CentOS-Base.repo</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，执行yum源更新命令\"><a href=\"#三，执行yum源更新命令\" class=\"headerlink\" title=\"三，执行yum源更新命令\"></a>三，执行yum源更新命令</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum clean all </span><br><span class=\"line\"></span><br><span class=\"line\">yum makecache </span><br><span class=\"line\"></span><br><span class=\"line\">yum update</span><br></pre></td></tr></table></figure>\n"},{"title":"AI-PaddleHub的体验使用","abbrlink":1959613013,"date":"2020-12-03T06:25:47.000Z","_content":"\n​\t\t最近体验了一下比较火的AI项目，[PaddleHub](https://github.com/PaddlePaddle/PaddleHub)，对于python我是陌生的，所以下面是作为新手的一些操作指南，保证能够正确的尝试到这个项目的有趣之处。\n\n​\t\t[官网操作指南](https://github.com/PaddlePaddle/PaddleHub/blob/release/v2.0.0-beta/README_ch.md)\n\n### 环境依赖\n\n1. Python>=3.6\n2. PaddlePaddle>=2.0.0rc\n\n### 环境更新\n\n~~~sh\npip3 install --upgrade pip\n~~~\n\n~~~shell\npip3 install --upgrade setuptools\n~~~\n\n### 安装\n\n#### paddlepaddle的安装\n\n~~~\npip3 install paddlepaddle==2.0.0rc\n~~~\n\n#### paddlehub的安装\n\n~~~shell\npip3 install paddlehub --upgrade -i https://mirrors.aliyun.com/pypi/simple  --default-timeout=100\n~~~\n\n#### 依赖库安装\n\n~~~sh\npip3 install matplotlib\n~~~\n\n### 模型库的下载\n\n​\t\t下载模型，PaddleHub必须在访问外网的情况下才能下载。你可以现在网络条件好的环境下，先下载安装对应的module，之后将安装好module 完整的拷贝到你需要的机器上，放在`HUB_HOME`下。[关于`HUB_HOME`的解释参考](https://github.com/PaddlePaddle/PaddleHub/blob/release/v1.7/docs/tutorial/cmdintro.md#paddlehub%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7)\n\n​\t\t[PaddleHub支持模型列表](https://paddlepaddle.org.cn/hublist),我们可以在这个地址上找到所有需要的模型，然后我们通过手动的下载，比如`deeplabv3p_xception65_humanseg`[模型下载](https://paddlepaddle.org.cn/hubdetail?name=deeplabv3p_xception65_humanseg&en_category=ImageSegmentation)\n\n~~~\nhub install deeplabv3p_xception65_humanseg==1.1.1\n~~~\n\n### example\n\n#### 人像抠图\n\n~~~sh\nhub run deeplabv3p_xception65_humanseg  --input_path test_image.jpg  --visualization=True --output_dir=\"human_output\"\n~~~\n\n`如果你开始没有下载模型库，则这个执行的过程会超级的慢，所以一般建议先手动的安装模型库`","source":"_posts/AI-PaddleHub的体验使用.md","raw":"---\ntitle: AI-PaddleHub的体验使用\ncategories:\n  - AI\n  - PaddleHub\ntags: PaddleHub\nabbrlink: 1959613013\ndate: 2020-12-03 14:25:47\n---\n\n​\t\t最近体验了一下比较火的AI项目，[PaddleHub](https://github.com/PaddlePaddle/PaddleHub)，对于python我是陌生的，所以下面是作为新手的一些操作指南，保证能够正确的尝试到这个项目的有趣之处。\n\n​\t\t[官网操作指南](https://github.com/PaddlePaddle/PaddleHub/blob/release/v2.0.0-beta/README_ch.md)\n\n### 环境依赖\n\n1. Python>=3.6\n2. PaddlePaddle>=2.0.0rc\n\n### 环境更新\n\n~~~sh\npip3 install --upgrade pip\n~~~\n\n~~~shell\npip3 install --upgrade setuptools\n~~~\n\n### 安装\n\n#### paddlepaddle的安装\n\n~~~\npip3 install paddlepaddle==2.0.0rc\n~~~\n\n#### paddlehub的安装\n\n~~~shell\npip3 install paddlehub --upgrade -i https://mirrors.aliyun.com/pypi/simple  --default-timeout=100\n~~~\n\n#### 依赖库安装\n\n~~~sh\npip3 install matplotlib\n~~~\n\n### 模型库的下载\n\n​\t\t下载模型，PaddleHub必须在访问外网的情况下才能下载。你可以现在网络条件好的环境下，先下载安装对应的module，之后将安装好module 完整的拷贝到你需要的机器上，放在`HUB_HOME`下。[关于`HUB_HOME`的解释参考](https://github.com/PaddlePaddle/PaddleHub/blob/release/v1.7/docs/tutorial/cmdintro.md#paddlehub%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7)\n\n​\t\t[PaddleHub支持模型列表](https://paddlepaddle.org.cn/hublist),我们可以在这个地址上找到所有需要的模型，然后我们通过手动的下载，比如`deeplabv3p_xception65_humanseg`[模型下载](https://paddlepaddle.org.cn/hubdetail?name=deeplabv3p_xception65_humanseg&en_category=ImageSegmentation)\n\n~~~\nhub install deeplabv3p_xception65_humanseg==1.1.1\n~~~\n\n### example\n\n#### 人像抠图\n\n~~~sh\nhub run deeplabv3p_xception65_humanseg  --input_path test_image.jpg  --visualization=True --output_dir=\"human_output\"\n~~~\n\n`如果你开始没有下载模型库，则这个执行的过程会超级的慢，所以一般建议先手动的安装模型库`","slug":"AI-PaddleHub的体验使用","published":1,"updated":"2021-02-08T05:47:04.022Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvi0002lkq5ss7heqq2","content":"<p>​        最近体验了一下比较火的AI项目，<a href=\"https://github.com/PaddlePaddle/PaddleHub\" target=\"_blank\" rel=\"noopener\">PaddleHub</a>，对于python我是陌生的，所以下面是作为新手的一些操作指南，保证能够正确的尝试到这个项目的有趣之处。</p>\n<p>​        <a href=\"https://github.com/PaddlePaddle/PaddleHub/blob/release/v2.0.0-beta/README_ch.md\" target=\"_blank\" rel=\"noopener\">官网操作指南</a></p>\n<h3 id=\"环境依赖\"><a href=\"#环境依赖\" class=\"headerlink\" title=\"环境依赖\"></a>环境依赖</h3><ol>\n<li>Python&gt;=3.6</li>\n<li>PaddlePaddle&gt;=2.0.0rc</li>\n</ol>\n<h3 id=\"环境更新\"><a href=\"#环境更新\" class=\"headerlink\" title=\"环境更新\"></a>环境更新</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install --upgrade pip</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install --upgrade setuptools</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><h4 id=\"paddlepaddle的安装\"><a href=\"#paddlepaddle的安装\" class=\"headerlink\" title=\"paddlepaddle的安装\"></a>paddlepaddle的安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install paddlepaddle==2.0.0rc</span><br></pre></td></tr></table></figure>\n<h4 id=\"paddlehub的安装\"><a href=\"#paddlehub的安装\" class=\"headerlink\" title=\"paddlehub的安装\"></a>paddlehub的安装</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install paddlehub --upgrade -i https://mirrors.aliyun.com/pypi/simple  --default-timeout=100</span><br></pre></td></tr></table></figure>\n<h4 id=\"依赖库安装\"><a href=\"#依赖库安装\" class=\"headerlink\" title=\"依赖库安装\"></a>依赖库安装</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install matplotlib</span><br></pre></td></tr></table></figure>\n<h3 id=\"模型库的下载\"><a href=\"#模型库的下载\" class=\"headerlink\" title=\"模型库的下载\"></a>模型库的下载</h3><p>​        下载模型，PaddleHub必须在访问外网的情况下才能下载。你可以现在网络条件好的环境下，先下载安装对应的module，之后将安装好module 完整的拷贝到你需要的机器上，放在<code>HUB_HOME</code>下。<a href=\"https://github.com/PaddlePaddle/PaddleHub/blob/release/v1.7/docs/tutorial/cmdintro.md#paddlehub%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7\" target=\"_blank\" rel=\"noopener\">关于<code>HUB_HOME</code>的解释参考</a></p>\n<p>​        <a href=\"https://paddlepaddle.org.cn/hublist\" target=\"_blank\" rel=\"noopener\">PaddleHub支持模型列表</a>,我们可以在这个地址上找到所有需要的模型，然后我们通过手动的下载，比如<code>deeplabv3p_xception65_humanseg</code><a href=\"https://paddlepaddle.org.cn/hubdetail?name=deeplabv3p_xception65_humanseg&amp;en_category=ImageSegmentation\" target=\"_blank\" rel=\"noopener\">模型下载</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hub install deeplabv3p_xception65_humanseg==1.1.1</span><br></pre></td></tr></table></figure>\n<h3 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h3><h4 id=\"人像抠图\"><a href=\"#人像抠图\" class=\"headerlink\" title=\"人像抠图\"></a>人像抠图</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hub run deeplabv3p_xception65_humanseg  --input_path test_image.jpg  --visualization=True --output_dir=<span class=\"string\">\"human_output\"</span></span><br></pre></td></tr></table></figure>\n<p><code>如果你开始没有下载模型库，则这个执行的过程会超级的慢，所以一般建议先手动的安装模型库</code></p>\n","site":{"data":{}},"excerpt":"","more":"<p>​        最近体验了一下比较火的AI项目，<a href=\"https://github.com/PaddlePaddle/PaddleHub\" target=\"_blank\" rel=\"noopener\">PaddleHub</a>，对于python我是陌生的，所以下面是作为新手的一些操作指南，保证能够正确的尝试到这个项目的有趣之处。</p>\n<p>​        <a href=\"https://github.com/PaddlePaddle/PaddleHub/blob/release/v2.0.0-beta/README_ch.md\" target=\"_blank\" rel=\"noopener\">官网操作指南</a></p>\n<h3 id=\"环境依赖\"><a href=\"#环境依赖\" class=\"headerlink\" title=\"环境依赖\"></a>环境依赖</h3><ol>\n<li>Python&gt;=3.6</li>\n<li>PaddlePaddle&gt;=2.0.0rc</li>\n</ol>\n<h3 id=\"环境更新\"><a href=\"#环境更新\" class=\"headerlink\" title=\"环境更新\"></a>环境更新</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install --upgrade pip</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install --upgrade setuptools</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><h4 id=\"paddlepaddle的安装\"><a href=\"#paddlepaddle的安装\" class=\"headerlink\" title=\"paddlepaddle的安装\"></a>paddlepaddle的安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install paddlepaddle==2.0.0rc</span><br></pre></td></tr></table></figure>\n<h4 id=\"paddlehub的安装\"><a href=\"#paddlehub的安装\" class=\"headerlink\" title=\"paddlehub的安装\"></a>paddlehub的安装</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install paddlehub --upgrade -i https://mirrors.aliyun.com/pypi/simple  --default-timeout=100</span><br></pre></td></tr></table></figure>\n<h4 id=\"依赖库安装\"><a href=\"#依赖库安装\" class=\"headerlink\" title=\"依赖库安装\"></a>依赖库安装</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install matplotlib</span><br></pre></td></tr></table></figure>\n<h3 id=\"模型库的下载\"><a href=\"#模型库的下载\" class=\"headerlink\" title=\"模型库的下载\"></a>模型库的下载</h3><p>​        下载模型，PaddleHub必须在访问外网的情况下才能下载。你可以现在网络条件好的环境下，先下载安装对应的module，之后将安装好module 完整的拷贝到你需要的机器上，放在<code>HUB_HOME</code>下。<a href=\"https://github.com/PaddlePaddle/PaddleHub/blob/release/v1.7/docs/tutorial/cmdintro.md#paddlehub%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7\" target=\"_blank\" rel=\"noopener\">关于<code>HUB_HOME</code>的解释参考</a></p>\n<p>​        <a href=\"https://paddlepaddle.org.cn/hublist\" target=\"_blank\" rel=\"noopener\">PaddleHub支持模型列表</a>,我们可以在这个地址上找到所有需要的模型，然后我们通过手动的下载，比如<code>deeplabv3p_xception65_humanseg</code><a href=\"https://paddlepaddle.org.cn/hubdetail?name=deeplabv3p_xception65_humanseg&amp;en_category=ImageSegmentation\" target=\"_blank\" rel=\"noopener\">模型下载</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hub install deeplabv3p_xception65_humanseg==1.1.1</span><br></pre></td></tr></table></figure>\n<h3 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h3><h4 id=\"人像抠图\"><a href=\"#人像抠图\" class=\"headerlink\" title=\"人像抠图\"></a>人像抠图</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hub run deeplabv3p_xception65_humanseg  --input_path test_image.jpg  --visualization=True --output_dir=<span class=\"string\">\"human_output\"</span></span><br></pre></td></tr></table></figure>\n<p><code>如果你开始没有下载模型库，则这个执行的过程会超级的慢，所以一般建议先手动的安装模型库</code></p>\n"},{"title":"centos7-libreoffice安装和启动","abbrlink":3025513893,"date":"2020-12-03T02:17:38.000Z","_content":"\n​\tcentos7下的文档转码的利器`libreoffice`，下面介绍一下centos7平台上对于这个软件的安装\n\n### libreoffice下载\n\n[libreoffice下载](https://www.libreoffice.org/download/download/)，在这里可以下载LO的最新的版本\n\n这个是网上找的镜像，[可以参考](http://mirrors.ustc.edu.cn/tdf/libreoffice/stable/)\n\n~~~sh\nLibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar\nLibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz\nLibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz\n~~~\n\n#### 解压\n\n~~~shell\ntar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar -C /root/libreoffice\ntar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz -C /root/libreoffice\ntar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz -C /root/libreoffice\n~~~\n\n#### 安装\n\n进入每个目录下的RPMS目录下使用以下命令执行\n\n~~~\nyum localinstall *.rpm\n~~~\n\n#### 安装依赖包\n\n~~~shell\nyum install cairo\nyum install cups-libs\nyum install libSM\n~~~\n\n#### 汉化\n\n~~~shell\nyum groupinstall \"fonts\"\n~~~\n\n#### example\n\n~~~shell\nlibreoffice6.4 --headless --invisible --convert-to pdf test.docx --outdir /data/file\n~~~\n\n### bug提交\n\n在使用的过程中，我发现了一个bug，影响了我产品的功能，所有让社区的管理帮忙提交了bug修复，[见下](https://bbs.libreofficechina.org/thread-2616-1-1.html)","source":"_posts/centos7-libreoffice安装和启动.md","raw":"---\ntitle: centos7-libreoffice安装和启动\ncategories: [Media,doc]\ntags: libreoffice\nabbrlink: 3025513893\ndate: 2020-12-03 10:17:38\n---\n\n​\tcentos7下的文档转码的利器`libreoffice`，下面介绍一下centos7平台上对于这个软件的安装\n\n### libreoffice下载\n\n[libreoffice下载](https://www.libreoffice.org/download/download/)，在这里可以下载LO的最新的版本\n\n这个是网上找的镜像，[可以参考](http://mirrors.ustc.edu.cn/tdf/libreoffice/stable/)\n\n~~~sh\nLibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar\nLibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz\nLibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz\n~~~\n\n#### 解压\n\n~~~shell\ntar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar -C /root/libreoffice\ntar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz -C /root/libreoffice\ntar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz -C /root/libreoffice\n~~~\n\n#### 安装\n\n进入每个目录下的RPMS目录下使用以下命令执行\n\n~~~\nyum localinstall *.rpm\n~~~\n\n#### 安装依赖包\n\n~~~shell\nyum install cairo\nyum install cups-libs\nyum install libSM\n~~~\n\n#### 汉化\n\n~~~shell\nyum groupinstall \"fonts\"\n~~~\n\n#### example\n\n~~~shell\nlibreoffice6.4 --headless --invisible --convert-to pdf test.docx --outdir /data/file\n~~~\n\n### bug提交\n\n在使用的过程中，我发现了一个bug，影响了我产品的功能，所有让社区的管理帮忙提交了bug修复，[见下](https://bbs.libreofficechina.org/thread-2616-1-1.html)","slug":"centos7-libreoffice安装和启动","published":1,"updated":"2021-02-08T06:43:58.834Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvn0006lkq5fo7xgx2e","content":"<p>​    centos7下的文档转码的利器<code>libreoffice</code>，下面介绍一下centos7平台上对于这个软件的安装</p>\n<h3 id=\"libreoffice下载\"><a href=\"#libreoffice下载\" class=\"headerlink\" title=\"libreoffice下载\"></a>libreoffice下载</h3><p><a href=\"https://www.libreoffice.org/download/download/\" target=\"_blank\" rel=\"noopener\">libreoffice下载</a>，在这里可以下载LO的最新的版本</p>\n<p>这个是网上找的镜像，<a href=\"http://mirrors.ustc.edu.cn/tdf/libreoffice/stable/\" target=\"_blank\" rel=\"noopener\">可以参考</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar</span><br><span class=\"line\">LibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz</span><br><span class=\"line\">LibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz</span><br></pre></td></tr></table></figure>\n<h4 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar -C /root/libreoffice</span><br><span class=\"line\">tar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz -C /root/libreoffice</span><br><span class=\"line\">tar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz -C /root/libreoffice</span><br></pre></td></tr></table></figure>\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><p>进入每个目录下的RPMS目录下使用以下命令执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum localinstall *.rpm</span><br></pre></td></tr></table></figure>\n<h4 id=\"安装依赖包\"><a href=\"#安装依赖包\" class=\"headerlink\" title=\"安装依赖包\"></a>安装依赖包</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install cairo</span><br><span class=\"line\">yum install cups-libs</span><br><span class=\"line\">yum install libSM</span><br></pre></td></tr></table></figure>\n<h4 id=\"汉化\"><a href=\"#汉化\" class=\"headerlink\" title=\"汉化\"></a>汉化</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum groupinstall \"fonts\"</span><br></pre></td></tr></table></figure>\n<h4 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libreoffice6.4 --headless --invisible --convert-to pdf test.docx --outdir /data/file</span><br></pre></td></tr></table></figure>\n<h3 id=\"bug提交\"><a href=\"#bug提交\" class=\"headerlink\" title=\"bug提交\"></a>bug提交</h3><p>在使用的过程中，我发现了一个bug，影响了我产品的功能，所有让社区的管理帮忙提交了bug修复，<a href=\"https://bbs.libreofficechina.org/thread-2616-1-1.html\" target=\"_blank\" rel=\"noopener\">见下</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>​    centos7下的文档转码的利器<code>libreoffice</code>，下面介绍一下centos7平台上对于这个软件的安装</p>\n<h3 id=\"libreoffice下载\"><a href=\"#libreoffice下载\" class=\"headerlink\" title=\"libreoffice下载\"></a>libreoffice下载</h3><p><a href=\"https://www.libreoffice.org/download/download/\" target=\"_blank\" rel=\"noopener\">libreoffice下载</a>，在这里可以下载LO的最新的版本</p>\n<p>这个是网上找的镜像，<a href=\"http://mirrors.ustc.edu.cn/tdf/libreoffice/stable/\" target=\"_blank\" rel=\"noopener\">可以参考</a></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar</span><br><span class=\"line\">LibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz</span><br><span class=\"line\">LibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz</span><br></pre></td></tr></table></figure>\n<h4 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_langpack_zh-CN.tar -C /root/libreoffice</span><br><span class=\"line\">tar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm.tar.gz -C /root/libreoffice</span><br><span class=\"line\">tar -zxvf LibreOffice_6.4.3_Linux_x86-64_rpm_sdk.tar.gz -C /root/libreoffice</span><br></pre></td></tr></table></figure>\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><p>进入每个目录下的RPMS目录下使用以下命令执行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum localinstall *.rpm</span><br></pre></td></tr></table></figure>\n<h4 id=\"安装依赖包\"><a href=\"#安装依赖包\" class=\"headerlink\" title=\"安装依赖包\"></a>安装依赖包</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install cairo</span><br><span class=\"line\">yum install cups-libs</span><br><span class=\"line\">yum install libSM</span><br></pre></td></tr></table></figure>\n<h4 id=\"汉化\"><a href=\"#汉化\" class=\"headerlink\" title=\"汉化\"></a>汉化</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum groupinstall \"fonts\"</span><br></pre></td></tr></table></figure>\n<h4 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libreoffice6.4 --headless --invisible --convert-to pdf test.docx --outdir /data/file</span><br></pre></td></tr></table></figure>\n<h3 id=\"bug提交\"><a href=\"#bug提交\" class=\"headerlink\" title=\"bug提交\"></a>bug提交</h3><p>在使用的过程中，我发现了一个bug，影响了我产品的功能，所有让社区的管理帮忙提交了bug修复，<a href=\"https://bbs.libreofficechina.org/thread-2616-1-1.html\" target=\"_blank\" rel=\"noopener\">见下</a></p>\n"},{"title":"centos7-epel源下载","abbrlink":3859923575,"date":"2020-05-06T03:20:01.000Z","_content":"\n\n\n### 一，什么是epel\n\n**EPEL的全称叫 Extra Packages for Enterprise Linux** 。EPEL是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL之后，就相当于添加了一个第三方源。\n\n如果你知道rpmfusion.org的话，拿 rpmfusion 做比较还是很恰当的，rpmfusion 主要为桌面发行版提供大量rpm包，而***EPEL则为服务器版本提供大量的rpm包，而且大多数rpm包在官方 repository 中是找不到的\\***\n\n另外一个特点是**绝大多数rpm包要比官方repository 的rpm包版本要来得新**。所以，我们有时候在yum下载的时候如果没有找到某个包或者版本过低，可以使用这个方式来尝试。\n\n\n\n### 二，yum下载\n\n~~~\nyum install -y epel-release\n~~~\n\n","source":"_posts/centos7-epel源下载.md","raw":"---\ntitle: centos7-epel源下载\ncategories: Centos7\ntags: yum\nabbrlink: 3859923575\ndate: 2020-05-06 11:20:01\n---\n\n\n\n### 一，什么是epel\n\n**EPEL的全称叫 Extra Packages for Enterprise Linux** 。EPEL是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL之后，就相当于添加了一个第三方源。\n\n如果你知道rpmfusion.org的话，拿 rpmfusion 做比较还是很恰当的，rpmfusion 主要为桌面发行版提供大量rpm包，而***EPEL则为服务器版本提供大量的rpm包，而且大多数rpm包在官方 repository 中是找不到的\\***\n\n另外一个特点是**绝大多数rpm包要比官方repository 的rpm包版本要来得新**。所以，我们有时候在yum下载的时候如果没有找到某个包或者版本过低，可以使用这个方式来尝试。\n\n\n\n### 二，yum下载\n\n~~~\nyum install -y epel-release\n~~~\n\n","slug":"centos7-epel源下载","published":1,"updated":"2021-02-08T06:19:54.261Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvp0008lkq5yjvsgtgb","content":"<h3 id=\"一，什么是epel\"><a href=\"#一，什么是epel\" class=\"headerlink\" title=\"一，什么是epel\"></a>一，什么是epel</h3><p><strong>EPEL的全称叫 Extra Packages for Enterprise Linux</strong> 。EPEL是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL之后，就相当于添加了一个第三方源。</p>\n<p>如果你知道rpmfusion.org的话，拿 rpmfusion 做比较还是很恰当的，rpmfusion 主要为桌面发行版提供大量rpm包，而<strong><em>EPEL则为服务器版本提供大量的rpm包，而且大多数rpm包在官方 repository 中是找不到的\\</em></strong></p>\n<p>另外一个特点是<strong>绝大多数rpm包要比官方repository 的rpm包版本要来得新</strong>。所以，我们有时候在yum下载的时候如果没有找到某个包或者版本过低，可以使用这个方式来尝试。</p>\n<h3 id=\"二，yum下载\"><a href=\"#二，yum下载\" class=\"headerlink\" title=\"二，yum下载\"></a>二，yum下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y epel-release</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一，什么是epel\"><a href=\"#一，什么是epel\" class=\"headerlink\" title=\"一，什么是epel\"></a>一，什么是epel</h3><p><strong>EPEL的全称叫 Extra Packages for Enterprise Linux</strong> 。EPEL是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL之后，就相当于添加了一个第三方源。</p>\n<p>如果你知道rpmfusion.org的话，拿 rpmfusion 做比较还是很恰当的，rpmfusion 主要为桌面发行版提供大量rpm包，而<strong><em>EPEL则为服务器版本提供大量的rpm包，而且大多数rpm包在官方 repository 中是找不到的\\</em></strong></p>\n<p>另外一个特点是<strong>绝大多数rpm包要比官方repository 的rpm包版本要来得新</strong>。所以，我们有时候在yum下载的时候如果没有找到某个包或者版本过低，可以使用这个方式来尝试。</p>\n<h3 id=\"二，yum下载\"><a href=\"#二，yum下载\" class=\"headerlink\" title=\"二，yum下载\"></a>二，yum下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y epel-release</span><br></pre></td></tr></table></figure>\n"},{"title":"centos7-openoffice安装和启动","abbrlink":1736132591,"date":"2020-12-03T02:17:28.000Z","_content":"\n  本文介绍了openoffice在Centos7下的安装和启动以及使用的方法，供大家学习和参考。\n\n### openoffice包的下载\n\n[openoffice下载](http://www.openoffice.org/download/)\n\n![open](/images/openoffice/openoffice.png)\n\n#### 解压\n\n~~~shell\ntar -zxvf Apache_OpenOffice_4.1.8_Linux_x86-64_install-rpm_zh-CN.tar.gz\n~~~\n\n#### 进入解压目录\n\n~~~shell\ncd zh-CN/RPMS\n~~~\n\n#### 安装\n\n~~~shell\nyum localinstall *.rpm\n~~~\n\n`装完后会在当前目录下生成一个desktop-integration目录`\n\n~~~\ncd zh-CN/RPMS/desktop-integration/\n~~~\n\n~~~\nrpm -ivh openoffice4.1.5-redhat-menus-4.1.5-9789.noarch.rpm\n~~~\n\n#### 下载依赖包\n\n~~~\nyum install libXext.x86_64\n~~~\n\n#### 下载java环境\n\n~~~\nyum install jre java-devel\n~~~\n\n#### 启动\n\n~~~sh\n/opt/openoffice4/program/soffice -headless -accept=\"socket,host=127.0.0.1,port=8100;urp;\" -nofirststartwizard\n~~~\n\n### JODConverter下载\n\n[jodConverter下载](https://sourceforge.net/projects/jodconverter/)\n\n#### 安装\n\n~~~\nunzip jodconverter-2.2.2.zip\n~~~\n\n#### 使用\n\n`必须先启动openoffice的服务，然后再使用这个命令行`\n\n~~~sh\njava -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  inputfileName outputfileName\n~~~\n\n#### example\n\n~~~sh\njava -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  media/01-自然语言处理-中文分词算法的实现.pptx.pptx  media/o1.pdf\n~~~\n\n","source":"_posts/centos7-openoffice安装和启动.md","raw":"---\ntitle: centos7-openoffice安装和启动\ncategories: [Media,doc]\ntags:\n  - openoffice\nabbrlink: 1736132591\ndate: 2020-12-03 10:17:28\n---\n\n  本文介绍了openoffice在Centos7下的安装和启动以及使用的方法，供大家学习和参考。\n\n### openoffice包的下载\n\n[openoffice下载](http://www.openoffice.org/download/)\n\n![open](/images/openoffice/openoffice.png)\n\n#### 解压\n\n~~~shell\ntar -zxvf Apache_OpenOffice_4.1.8_Linux_x86-64_install-rpm_zh-CN.tar.gz\n~~~\n\n#### 进入解压目录\n\n~~~shell\ncd zh-CN/RPMS\n~~~\n\n#### 安装\n\n~~~shell\nyum localinstall *.rpm\n~~~\n\n`装完后会在当前目录下生成一个desktop-integration目录`\n\n~~~\ncd zh-CN/RPMS/desktop-integration/\n~~~\n\n~~~\nrpm -ivh openoffice4.1.5-redhat-menus-4.1.5-9789.noarch.rpm\n~~~\n\n#### 下载依赖包\n\n~~~\nyum install libXext.x86_64\n~~~\n\n#### 下载java环境\n\n~~~\nyum install jre java-devel\n~~~\n\n#### 启动\n\n~~~sh\n/opt/openoffice4/program/soffice -headless -accept=\"socket,host=127.0.0.1,port=8100;urp;\" -nofirststartwizard\n~~~\n\n### JODConverter下载\n\n[jodConverter下载](https://sourceforge.net/projects/jodconverter/)\n\n#### 安装\n\n~~~\nunzip jodconverter-2.2.2.zip\n~~~\n\n#### 使用\n\n`必须先启动openoffice的服务，然后再使用这个命令行`\n\n~~~sh\njava -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  inputfileName outputfileName\n~~~\n\n#### example\n\n~~~sh\njava -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  media/01-自然语言处理-中文分词算法的实现.pptx.pptx  media/o1.pdf\n~~~\n\n","slug":"centos7-openoffice安装和启动","published":1,"updated":"2021-02-08T06:44:13.345Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvq0009lkq5r72ttba0","content":"<p>  本文介绍了openoffice在Centos7下的安装和启动以及使用的方法，供大家学习和参考。</p>\n<h3 id=\"openoffice包的下载\"><a href=\"#openoffice包的下载\" class=\"headerlink\" title=\"openoffice包的下载\"></a>openoffice包的下载</h3><p><a href=\"http://www.openoffice.org/download/\" target=\"_blank\" rel=\"noopener\">openoffice下载</a></p>\n<p><img src=\"/images/openoffice/openoffice.png\" alt=\"open\"></p>\n<h4 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf Apache_OpenOffice_4.1.8_Linux_x86-64_install-rpm_zh-CN.tar.gz</span><br></pre></td></tr></table></figure>\n<h4 id=\"进入解压目录\"><a href=\"#进入解压目录\" class=\"headerlink\" title=\"进入解压目录\"></a>进入解压目录</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd zh-CN/RPMS</span><br></pre></td></tr></table></figure>\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum localinstall *.rpm</span><br></pre></td></tr></table></figure>\n<p><code>装完后会在当前目录下生成一个desktop-integration目录</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd zh-CN/RPMS/desktop-integration/</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh openoffice4.1.5-redhat-menus-4.1.5-9789.noarch.rpm</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载依赖包\"><a href=\"#下载依赖包\" class=\"headerlink\" title=\"下载依赖包\"></a>下载依赖包</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libXext.x86_64</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载java环境\"><a href=\"#下载java环境\" class=\"headerlink\" title=\"下载java环境\"></a>下载java环境</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install jre java-devel</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/opt/openoffice4/program/soffice -headless -accept=<span class=\"string\">\"socket,host=127.0.0.1,port=8100;urp;\"</span> -nofirststartwizard</span><br></pre></td></tr></table></figure>\n<h3 id=\"JODConverter下载\"><a href=\"#JODConverter下载\" class=\"headerlink\" title=\"JODConverter下载\"></a>JODConverter下载</h3><p><a href=\"https://sourceforge.net/projects/jodconverter/\" target=\"_blank\" rel=\"noopener\">jodConverter下载</a></p>\n<h4 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unzip jodconverter-2.2.2.zip</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h4><p><code>必须先启动openoffice的服务，然后再使用这个命令行</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  inputfileName outputfileName</span><br></pre></td></tr></table></figure>\n<h4 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  media/01-自然语言处理-中文分词算法的实现.pptx.pptx  media/o1.pdf</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>  本文介绍了openoffice在Centos7下的安装和启动以及使用的方法，供大家学习和参考。</p>\n<h3 id=\"openoffice包的下载\"><a href=\"#openoffice包的下载\" class=\"headerlink\" title=\"openoffice包的下载\"></a>openoffice包的下载</h3><p><a href=\"http://www.openoffice.org/download/\" target=\"_blank\" rel=\"noopener\">openoffice下载</a></p>\n<p><img src=\"/images/openoffice/openoffice.png\" alt=\"open\"></p>\n<h4 id=\"解压\"><a href=\"#解压\" class=\"headerlink\" title=\"解压\"></a>解压</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf Apache_OpenOffice_4.1.8_Linux_x86-64_install-rpm_zh-CN.tar.gz</span><br></pre></td></tr></table></figure>\n<h4 id=\"进入解压目录\"><a href=\"#进入解压目录\" class=\"headerlink\" title=\"进入解压目录\"></a>进入解压目录</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd zh-CN/RPMS</span><br></pre></td></tr></table></figure>\n<h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum localinstall *.rpm</span><br></pre></td></tr></table></figure>\n<p><code>装完后会在当前目录下生成一个desktop-integration目录</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd zh-CN/RPMS/desktop-integration/</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh openoffice4.1.5-redhat-menus-4.1.5-9789.noarch.rpm</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载依赖包\"><a href=\"#下载依赖包\" class=\"headerlink\" title=\"下载依赖包\"></a>下载依赖包</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libXext.x86_64</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载java环境\"><a href=\"#下载java环境\" class=\"headerlink\" title=\"下载java环境\"></a>下载java环境</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install jre java-devel</span><br></pre></td></tr></table></figure>\n<h4 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/opt/openoffice4/program/soffice -headless -accept=<span class=\"string\">\"socket,host=127.0.0.1,port=8100;urp;\"</span> -nofirststartwizard</span><br></pre></td></tr></table></figure>\n<h3 id=\"JODConverter下载\"><a href=\"#JODConverter下载\" class=\"headerlink\" title=\"JODConverter下载\"></a>JODConverter下载</h3><p><a href=\"https://sourceforge.net/projects/jodconverter/\" target=\"_blank\" rel=\"noopener\">jodConverter下载</a></p>\n<h4 id=\"安装-1\"><a href=\"#安装-1\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unzip jodconverter-2.2.2.zip</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h4><p><code>必须先启动openoffice的服务，然后再使用这个命令行</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  inputfileName outputfileName</span><br></pre></td></tr></table></figure>\n<h4 id=\"example\"><a href=\"#example\" class=\"headerlink\" title=\"example\"></a>example</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar jodconverter-2.2.2/lib/jodconverter-cli-2.2.2.jar  media/01-自然语言处理-中文分词算法的实现.pptx.pptx  media/o1.pdf</span><br></pre></td></tr></table></figure>\n"},{"title":"centos7-yum的使用","abbrlink":1714992348,"date":"2020-11-19T09:40:53.000Z","_content":"\n记录yum的使用\n\n### 安装\n\n#### 搜索指定的版本安装\n\n~~~sh\nyum list --showduplicates xxx\n~~~\n\n#### 下载软件包\n\n~~~\nyum install yum-plugin-downloadonly\n~~~\n\n~~~\nyum install fontconfig --downloadonly --downloaddir=/root/wei/\n~~~\n\n","source":"_posts/centos7-yum的使用.md","raw":"---\ntitle: centos7-yum的使用\ncategories: Centos7\ntags:\n  - yum\nabbrlink: 1714992348\ndate: 2020-11-19 17:40:53\n---\n\n记录yum的使用\n\n### 安装\n\n#### 搜索指定的版本安装\n\n~~~sh\nyum list --showduplicates xxx\n~~~\n\n#### 下载软件包\n\n~~~\nyum install yum-plugin-downloadonly\n~~~\n\n~~~\nyum install fontconfig --downloadonly --downloaddir=/root/wei/\n~~~\n\n","slug":"centos7-yum的使用","published":1,"updated":"2021-02-08T06:20:08.150Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvs000dlkq57in06h77","content":"<p>记录yum的使用</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><h4 id=\"搜索指定的版本安装\"><a href=\"#搜索指定的版本安装\" class=\"headerlink\" title=\"搜索指定的版本安装\"></a>搜索指定的版本安装</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list --showduplicates xxx</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载软件包\"><a href=\"#下载软件包\" class=\"headerlink\" title=\"下载软件包\"></a>下载软件包</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install yum-plugin-downloadonly</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install fontconfig --downloadonly --downloaddir=/root/wei/</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>记录yum的使用</p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><h4 id=\"搜索指定的版本安装\"><a href=\"#搜索指定的版本安装\" class=\"headerlink\" title=\"搜索指定的版本安装\"></a>搜索指定的版本安装</h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list --showduplicates xxx</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载软件包\"><a href=\"#下载软件包\" class=\"headerlink\" title=\"下载软件包\"></a>下载软件包</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install yum-plugin-downloadonly</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install fontconfig --downloadonly --downloaddir=/root/wei/</span><br></pre></td></tr></table></figure>\n"},{"title":"centos7-zsh的使用和配置","abbrlink":192192511,"date":"2020-12-08T08:58:14.000Z","_content":"\n​\t 本文主要是记录centos7搭建自己个性的命令行。\n\n### 安装zsh\n\n~~~sh\nyum install zsh\n~~~\n\n#### 将其设置为默认shell\n\n~~~`\nchsh -s /bin/zsh\n~~~\n\n`可以通过echo $SHELL来查看当前默认的shell，如果没有改为/bin/zsh,那么需要重新启动shell`\n\n### 安装oh-my-zsh\n\n[地址](https://github.com/ohmyzsh/ohmyzsh)\n\n~~~\n\tsh -c \"$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n~~~\n\n#### 配置文件\n\n​\t默认的配置文件是在`/root/.zshrc`，可以通过配置文件来配置一下插件以及功能\n\n##### 主题修改\n\n在`.zshrc`中找到`ZSH_THEME`，即可修改主题，[主题地址](https://github.com/ohmyzsh/ohmyzsh/wiki/themes)可自己修改\n\n##### zsh扩展\n\n​\t在`/root/.zshrc`中找到`plugins`关键字，就可以自定义启用的插件了，目前插件存放在workspace上\n\n\n~~~","source":"_posts/centos7-zsh的使用和配置.md","raw":"---\ntitle: centos7-zsh的使用和配置\ncategories:\n  - Centos7\ntags:\n  - zsh\nabbrlink: 192192511\ndate: 2020-12-08 16:58:14\n---\n\n​\t 本文主要是记录centos7搭建自己个性的命令行。\n\n### 安装zsh\n\n~~~sh\nyum install zsh\n~~~\n\n#### 将其设置为默认shell\n\n~~~`\nchsh -s /bin/zsh\n~~~\n\n`可以通过echo $SHELL来查看当前默认的shell，如果没有改为/bin/zsh,那么需要重新启动shell`\n\n### 安装oh-my-zsh\n\n[地址](https://github.com/ohmyzsh/ohmyzsh)\n\n~~~\n\tsh -c \"$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n~~~\n\n#### 配置文件\n\n​\t默认的配置文件是在`/root/.zshrc`，可以通过配置文件来配置一下插件以及功能\n\n##### 主题修改\n\n在`.zshrc`中找到`ZSH_THEME`，即可修改主题，[主题地址](https://github.com/ohmyzsh/ohmyzsh/wiki/themes)可自己修改\n\n##### zsh扩展\n\n​\t在`/root/.zshrc`中找到`plugins`关键字，就可以自定义启用的插件了，目前插件存放在workspace上\n\n\n~~~","slug":"centos7-zsh的使用和配置","published":1,"updated":"2021-02-08T06:20:19.896Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvu000flkq577sycu18","content":"<p>​     本文主要是记录centos7搭建自己个性的命令行。</p>\n<h3 id=\"安装zsh\"><a href=\"#安装zsh\" class=\"headerlink\" title=\"安装zsh\"></a>安装zsh</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zsh</span><br></pre></td></tr></table></figure>\n<h4 id=\"将其设置为默认shell\"><a href=\"#将其设置为默认shell\" class=\"headerlink\" title=\"将其设置为默认shell\"></a>将其设置为默认shell</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>\n<p><code>可以通过echo $SHELL来查看当前默认的shell，如果没有改为/bin/zsh,那么需要重新启动shell</code></p>\n<h3 id=\"安装oh-my-zsh\"><a href=\"#安装oh-my-zsh\" class=\"headerlink\" title=\"安装oh-my-zsh\"></a>安装oh-my-zsh</h3><p><a href=\"https://github.com/ohmyzsh/ohmyzsh\" target=\"_blank\" rel=\"noopener\">地址</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sh -c &quot;$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h4><p>​    默认的配置文件是在<code>/root/.zshrc</code>，可以通过配置文件来配置一下插件以及功能</p>\n<h5 id=\"主题修改\"><a href=\"#主题修改\" class=\"headerlink\" title=\"主题修改\"></a>主题修改</h5><p>在<code>.zshrc</code>中找到<code>ZSH_THEME</code>，即可修改主题，<a href=\"https://github.com/ohmyzsh/ohmyzsh/wiki/themes\" target=\"_blank\" rel=\"noopener\">主题地址</a>可自己修改</p>\n<h5 id=\"zsh扩展\"><a href=\"#zsh扩展\" class=\"headerlink\" title=\"zsh扩展\"></a>zsh扩展</h5><p>​    在<code>/root/.zshrc</code>中找到<code>plugins</code>关键字，就可以自定义启用的插件了，目前插件存放在workspace上</p>\n<p>~~~</p>\n","site":{"data":{}},"excerpt":"","more":"<p>​     本文主要是记录centos7搭建自己个性的命令行。</p>\n<h3 id=\"安装zsh\"><a href=\"#安装zsh\" class=\"headerlink\" title=\"安装zsh\"></a>安装zsh</h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zsh</span><br></pre></td></tr></table></figure>\n<h4 id=\"将其设置为默认shell\"><a href=\"#将其设置为默认shell\" class=\"headerlink\" title=\"将其设置为默认shell\"></a>将其设置为默认shell</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>\n<p><code>可以通过echo $SHELL来查看当前默认的shell，如果没有改为/bin/zsh,那么需要重新启动shell</code></p>\n<h3 id=\"安装oh-my-zsh\"><a href=\"#安装oh-my-zsh\" class=\"headerlink\" title=\"安装oh-my-zsh\"></a>安装oh-my-zsh</h3><p><a href=\"https://github.com/ohmyzsh/ohmyzsh\" target=\"_blank\" rel=\"noopener\">地址</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sh -c &quot;$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h4><p>​    默认的配置文件是在<code>/root/.zshrc</code>，可以通过配置文件来配置一下插件以及功能</p>\n<h5 id=\"主题修改\"><a href=\"#主题修改\" class=\"headerlink\" title=\"主题修改\"></a>主题修改</h5><p>在<code>.zshrc</code>中找到<code>ZSH_THEME</code>，即可修改主题，<a href=\"https://github.com/ohmyzsh/ohmyzsh/wiki/themes\" target=\"_blank\" rel=\"noopener\">主题地址</a>可自己修改</p>\n<h5 id=\"zsh扩展\"><a href=\"#zsh扩展\" class=\"headerlink\" title=\"zsh扩展\"></a>zsh扩展</h5><p>​    在<code>/root/.zshrc</code>中找到<code>plugins</code>关键字，就可以自定义启用的插件了，目前插件存放在workspace上</p>\n<p>~~~</p>\n"},{"title":"centos7-常用的命令","abbrlink":2689943165,"date":"2020-05-06T06:52:04.000Z","_content":"\n记录一下自己常用的centos7上的命令行\n\n### mount挂载\n\n~~~\n虚拟机和主机共享目录\nmount -t cifs //192.168.30.97/code /mnt -o username=Administrator,password=Helios\n\n/code 是主机上的目录，需要设置为共享的\nusername 为主机的用户名\npassword 是主机的密码\n/mnt 是虚拟机上的目录\n\n卸载：\numount /mnt\n卸载失败可以重启服务器\n~~~\n\n\n\n### nohup常驻服务\n\n~~~\nlinux平台上，要在后台运行脚本的话，一般是在命令之后加上&即可。\n常驻服务的运行，退出终端也可以的命令行\nnohup\n具体方法\nnohup ./videotool &\n\n~~~\n\n### 查看系统的状态的命令\n\n##### 查看内存\n\n~~~\nfree -h\n~~~\n\n##### 查看磁盘使用\n\n~~~\ndf -h \n~~~\n\n##### 查看文件大小\n\n~~~\ndu -sh 11.mkv\n~~~\n\n##### 查看进程的线程数\n\n~~~\nps -T -p pid\n~~~\n\n##### 查看centos7的物理核数\n\n~~~\ncat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l\n~~~\n\n##### 查看centos7的逻辑核数\n\n~~~\ncat /proc/cpuinfo| grep \"processor\"| wc -l\n~~~\n\n##### 测试系统的io速度\n\n~~~\ntime dd bs=4M count=1024 if=/dev/zero of=test_02 conv=fdatasync\n~~~\n\n### 复制\n\n~~~\ncp  -rfd   ./oldname  ./newname\n-r 复制目录\n-f 强制复制\n-d 复制软连接\n\n忽略冲突复制\n\\cp  -rfd   ./oldname  ./newname \n~~~\n\n\n\n### 定时任务\n\n~~~\n基本格式：\n* * * * * command  \n含义：\n分 时 天 月 周  \n使用*/n 表示此字段上每隔n执行一次，同时注意如果低时间使用了，会覆盖高时间的*/n,不要同时使用某一天与一周的某一天，如果这个两个相等，则会执行两次\n~~~\n\n##### 添加\n\n~~~\ncrontab -e\n~~~\n\n##### 查看\n\n~~~\ncrontab -l\n~~~\n\n##### 删除\n\n~~~\ncrontab -r  这个表示删除所有的定时任务，如果需要删除单个，则使用crontab -e 进行编辑，然后删除某一行\n~~~\n\n### 获取服务运行时使用的内存\n\n![cache.png](/images/linux/cache.png)\n\n### 控制进程使用cpu数目\n\n##### 获取进程id\n\n~~~\npgrep  -f   servername\n\npidof   servername\n~~~\n\n##### 设置CPU使用\n\n~~~\n注意： 默认情况下，taskset不会影响进程的所有线程（LWP）。使用任务集的“-a”选项来影响流程中的所有线程\n\n一般可以这样设置：   taskset   -apc  0   8991     (这个目前最有效）\n~~~\n\n### 脚本中生成随机数\n\n~~~\nUUID=`echo $RANDOM`\n~~~\n\n### 记录程序运行的资源到文件中\n\n~~~\nyum install -y time\n~~~\n\n~~~\n/usr/bin/time -v -o video.log ffmpeg -i xxx.mp4\n~~~\n\n### 查看机器是物理机还是虚拟机\n\n~~~\ndmidecode -s system-product-name\n~~~\n\n结果如图：\n\n![syss.png](/images/linux/syss.png)\n\n![sysv.png](/images/linux/sysv.png)\n\n### 搜索\n\n##### grep\n\n搜索文件中包含某个单词\n\n~~~\ngrep -rn  weiyang *\n~~~\n\n##### 过滤本身\n\n~~~\nps -ef | grep vim |grep -v grep\n~~~\n\n### 编码问题\n\ncentos7常常会遇到一些编码问题，我们可以通过命令行来进行一些编码的转码\n\n##### [enca](https://www.2cto.com/os/201404/295528.html)\n\n支持的编码比较少，一些无法转换，如UTF16,UCS-2就无法通过这个转换\n\n直接识别字符集\n\n~~~\nenca -L zh_CN test.cpp\n~~~\n\n 转换命令简单\n\n~~~\nenca -L zh_CN -x UTF-8 test.cpp or enca -L zh_CN -x GB2312 test.cpp\n~~~\n\n##### iconv\n\n可以支持多种编码，有一个缺点，必须知道原来文件的编码\n\n~~~\niconv  -f UTF-16 -t UTF-8 b.txt -o uni3.txt\n~~~\n\n##### 任意转换\n\n所有可以通过enca和iconv两者结合来使用\n\n~~~\niconv -f $(enca -L zh_CN b.txt |head -n 1|cut -d \";\" -f 2) -t UTF-8 b.txt -o b.txt\n~~~\n\nleopard修改`/opt/dana/leopard/python/fileConv.py `\n\n~~~\ncodecmd= 'iconv -f $(enca -L zh_CN %s |head -n 1|cut -d \";\" -f 2) -t UTF-8 %s -o %s'% (input_name, input_name, input_name)\n~~~\n\n\n\n\n\n","source":"_posts/centos7-常用的命令.md","raw":"---\ntitle: centos7-常用的命令\ncategories: Centos7\nabbrlink: 2689943165\ndate: 2020-05-06 14:52:04\ntags: \n- cmd\n---\n\n记录一下自己常用的centos7上的命令行\n\n### mount挂载\n\n~~~\n虚拟机和主机共享目录\nmount -t cifs //192.168.30.97/code /mnt -o username=Administrator,password=Helios\n\n/code 是主机上的目录，需要设置为共享的\nusername 为主机的用户名\npassword 是主机的密码\n/mnt 是虚拟机上的目录\n\n卸载：\numount /mnt\n卸载失败可以重启服务器\n~~~\n\n\n\n### nohup常驻服务\n\n~~~\nlinux平台上，要在后台运行脚本的话，一般是在命令之后加上&即可。\n常驻服务的运行，退出终端也可以的命令行\nnohup\n具体方法\nnohup ./videotool &\n\n~~~\n\n### 查看系统的状态的命令\n\n##### 查看内存\n\n~~~\nfree -h\n~~~\n\n##### 查看磁盘使用\n\n~~~\ndf -h \n~~~\n\n##### 查看文件大小\n\n~~~\ndu -sh 11.mkv\n~~~\n\n##### 查看进程的线程数\n\n~~~\nps -T -p pid\n~~~\n\n##### 查看centos7的物理核数\n\n~~~\ncat /proc/cpuinfo| grep \"physical id\"| sort| uniq| wc -l\n~~~\n\n##### 查看centos7的逻辑核数\n\n~~~\ncat /proc/cpuinfo| grep \"processor\"| wc -l\n~~~\n\n##### 测试系统的io速度\n\n~~~\ntime dd bs=4M count=1024 if=/dev/zero of=test_02 conv=fdatasync\n~~~\n\n### 复制\n\n~~~\ncp  -rfd   ./oldname  ./newname\n-r 复制目录\n-f 强制复制\n-d 复制软连接\n\n忽略冲突复制\n\\cp  -rfd   ./oldname  ./newname \n~~~\n\n\n\n### 定时任务\n\n~~~\n基本格式：\n* * * * * command  \n含义：\n分 时 天 月 周  \n使用*/n 表示此字段上每隔n执行一次，同时注意如果低时间使用了，会覆盖高时间的*/n,不要同时使用某一天与一周的某一天，如果这个两个相等，则会执行两次\n~~~\n\n##### 添加\n\n~~~\ncrontab -e\n~~~\n\n##### 查看\n\n~~~\ncrontab -l\n~~~\n\n##### 删除\n\n~~~\ncrontab -r  这个表示删除所有的定时任务，如果需要删除单个，则使用crontab -e 进行编辑，然后删除某一行\n~~~\n\n### 获取服务运行时使用的内存\n\n![cache.png](/images/linux/cache.png)\n\n### 控制进程使用cpu数目\n\n##### 获取进程id\n\n~~~\npgrep  -f   servername\n\npidof   servername\n~~~\n\n##### 设置CPU使用\n\n~~~\n注意： 默认情况下，taskset不会影响进程的所有线程（LWP）。使用任务集的“-a”选项来影响流程中的所有线程\n\n一般可以这样设置：   taskset   -apc  0   8991     (这个目前最有效）\n~~~\n\n### 脚本中生成随机数\n\n~~~\nUUID=`echo $RANDOM`\n~~~\n\n### 记录程序运行的资源到文件中\n\n~~~\nyum install -y time\n~~~\n\n~~~\n/usr/bin/time -v -o video.log ffmpeg -i xxx.mp4\n~~~\n\n### 查看机器是物理机还是虚拟机\n\n~~~\ndmidecode -s system-product-name\n~~~\n\n结果如图：\n\n![syss.png](/images/linux/syss.png)\n\n![sysv.png](/images/linux/sysv.png)\n\n### 搜索\n\n##### grep\n\n搜索文件中包含某个单词\n\n~~~\ngrep -rn  weiyang *\n~~~\n\n##### 过滤本身\n\n~~~\nps -ef | grep vim |grep -v grep\n~~~\n\n### 编码问题\n\ncentos7常常会遇到一些编码问题，我们可以通过命令行来进行一些编码的转码\n\n##### [enca](https://www.2cto.com/os/201404/295528.html)\n\n支持的编码比较少，一些无法转换，如UTF16,UCS-2就无法通过这个转换\n\n直接识别字符集\n\n~~~\nenca -L zh_CN test.cpp\n~~~\n\n 转换命令简单\n\n~~~\nenca -L zh_CN -x UTF-8 test.cpp or enca -L zh_CN -x GB2312 test.cpp\n~~~\n\n##### iconv\n\n可以支持多种编码，有一个缺点，必须知道原来文件的编码\n\n~~~\niconv  -f UTF-16 -t UTF-8 b.txt -o uni3.txt\n~~~\n\n##### 任意转换\n\n所有可以通过enca和iconv两者结合来使用\n\n~~~\niconv -f $(enca -L zh_CN b.txt |head -n 1|cut -d \";\" -f 2) -t UTF-8 b.txt -o b.txt\n~~~\n\nleopard修改`/opt/dana/leopard/python/fileConv.py `\n\n~~~\ncodecmd= 'iconv -f $(enca -L zh_CN %s |head -n 1|cut -d \";\" -f 2) -t UTF-8 %s -o %s'% (input_name, input_name, input_name)\n~~~\n\n\n\n\n\n","slug":"centos7-常用的命令","published":1,"updated":"2021-02-08T06:20:34.223Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvv000klkq5cful1yla","content":"<p>记录一下自己常用的centos7上的命令行</p>\n<h3 id=\"mount挂载\"><a href=\"#mount挂载\" class=\"headerlink\" title=\"mount挂载\"></a>mount挂载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">虚拟机和主机共享目录</span><br><span class=\"line\">mount -t cifs //192.168.30.97/code /mnt -o username=Administrator,password=Helios</span><br><span class=\"line\"></span><br><span class=\"line\">/code 是主机上的目录，需要设置为共享的</span><br><span class=\"line\">username 为主机的用户名</span><br><span class=\"line\">password 是主机的密码</span><br><span class=\"line\">/mnt 是虚拟机上的目录</span><br><span class=\"line\"></span><br><span class=\"line\">卸载：</span><br><span class=\"line\">umount /mnt</span><br><span class=\"line\">卸载失败可以重启服务器</span><br></pre></td></tr></table></figure>\n<h3 id=\"nohup常驻服务\"><a href=\"#nohup常驻服务\" class=\"headerlink\" title=\"nohup常驻服务\"></a>nohup常驻服务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">linux平台上，要在后台运行脚本的话，一般是在命令之后加上&amp;即可。</span><br><span class=\"line\">常驻服务的运行，退出终端也可以的命令行</span><br><span class=\"line\">nohup</span><br><span class=\"line\">具体方法</span><br><span class=\"line\">nohup ./videotool &amp;</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看系统的状态的命令\"><a href=\"#查看系统的状态的命令\" class=\"headerlink\" title=\"查看系统的状态的命令\"></a>查看系统的状态的命令</h3><h5 id=\"查看内存\"><a href=\"#查看内存\" class=\"headerlink\" title=\"查看内存\"></a>查看内存</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">free -h</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看磁盘使用\"><a href=\"#查看磁盘使用\" class=\"headerlink\" title=\"查看磁盘使用\"></a>查看磁盘使用</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df -h</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看文件大小\"><a href=\"#查看文件大小\" class=\"headerlink\" title=\"查看文件大小\"></a>查看文件大小</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">du -sh 11.mkv</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看进程的线程数\"><a href=\"#查看进程的线程数\" class=\"headerlink\" title=\"查看进程的线程数\"></a>查看进程的线程数</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -T -p pid</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看centos7的物理核数\"><a href=\"#查看centos7的物理核数\" class=\"headerlink\" title=\"查看centos7的物理核数\"></a>查看centos7的物理核数</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看centos7的逻辑核数\"><a href=\"#查看centos7的逻辑核数\" class=\"headerlink\" title=\"查看centos7的逻辑核数\"></a>查看centos7的逻辑核数</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"测试系统的io速度\"><a href=\"#测试系统的io速度\" class=\"headerlink\" title=\"测试系统的io速度\"></a>测试系统的io速度</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time dd bs=4M count=1024 if=/dev/zero of=test_02 conv=fdatasync</span><br></pre></td></tr></table></figure>\n<h3 id=\"复制\"><a href=\"#复制\" class=\"headerlink\" title=\"复制\"></a>复制</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp  -rfd   ./oldname  ./newname</span><br><span class=\"line\">-r 复制目录</span><br><span class=\"line\">-f 强制复制</span><br><span class=\"line\">-d 复制软连接</span><br><span class=\"line\"></span><br><span class=\"line\">忽略冲突复制</span><br><span class=\"line\">\\cp  -rfd   ./oldname  ./newname</span><br></pre></td></tr></table></figure>\n<h3 id=\"定时任务\"><a href=\"#定时任务\" class=\"headerlink\" title=\"定时任务\"></a>定时任务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">基本格式：</span><br><span class=\"line\">* * * * * command  </span><br><span class=\"line\">含义：</span><br><span class=\"line\">分 时 天 月 周  </span><br><span class=\"line\">使用*/n 表示此字段上每隔n执行一次，同时注意如果低时间使用了，会覆盖高时间的*/n,不要同时使用某一天与一周的某一天，如果这个两个相等，则会执行两次</span><br></pre></td></tr></table></figure>\n<h5 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看\"><a href=\"#查看\" class=\"headerlink\" title=\"查看\"></a>查看</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -r  这个表示删除所有的定时任务，如果需要删除单个，则使用crontab -e 进行编辑，然后删除某一行</span><br></pre></td></tr></table></figure>\n<h3 id=\"获取服务运行时使用的内存\"><a href=\"#获取服务运行时使用的内存\" class=\"headerlink\" title=\"获取服务运行时使用的内存\"></a>获取服务运行时使用的内存</h3><p><img src=\"/images/linux/cache.png\" alt=\"cache.png\"></p>\n<h3 id=\"控制进程使用cpu数目\"><a href=\"#控制进程使用cpu数目\" class=\"headerlink\" title=\"控制进程使用cpu数目\"></a>控制进程使用cpu数目</h3><h5 id=\"获取进程id\"><a href=\"#获取进程id\" class=\"headerlink\" title=\"获取进程id\"></a>获取进程id</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pgrep  -f   servername</span><br><span class=\"line\"></span><br><span class=\"line\">pidof   servername</span><br></pre></td></tr></table></figure>\n<h5 id=\"设置CPU使用\"><a href=\"#设置CPU使用\" class=\"headerlink\" title=\"设置CPU使用\"></a>设置CPU使用</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注意： 默认情况下，taskset不会影响进程的所有线程（LWP）。使用任务集的“-a”选项来影响流程中的所有线程</span><br><span class=\"line\"></span><br><span class=\"line\">一般可以这样设置：   taskset   -apc  0   8991     (这个目前最有效）</span><br></pre></td></tr></table></figure>\n<h3 id=\"脚本中生成随机数\"><a href=\"#脚本中生成随机数\" class=\"headerlink\" title=\"脚本中生成随机数\"></a>脚本中生成随机数</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UUID=`echo $RANDOM`</span><br></pre></td></tr></table></figure>\n<h3 id=\"记录程序运行的资源到文件中\"><a href=\"#记录程序运行的资源到文件中\" class=\"headerlink\" title=\"记录程序运行的资源到文件中\"></a>记录程序运行的资源到文件中</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y time</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/bin/time -v -o video.log ffmpeg -i xxx.mp4</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看机器是物理机还是虚拟机\"><a href=\"#查看机器是物理机还是虚拟机\" class=\"headerlink\" title=\"查看机器是物理机还是虚拟机\"></a>查看机器是物理机还是虚拟机</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dmidecode -s system-product-name</span><br></pre></td></tr></table></figure>\n<p>结果如图：</p>\n<p><img src=\"/images/linux/syss.png\" alt=\"syss.png\"></p>\n<p><img src=\"/images/linux/sysv.png\" alt=\"sysv.png\"></p>\n<h3 id=\"搜索\"><a href=\"#搜索\" class=\"headerlink\" title=\"搜索\"></a>搜索</h3><h5 id=\"grep\"><a href=\"#grep\" class=\"headerlink\" title=\"grep\"></a>grep</h5><p>搜索文件中包含某个单词</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -rn  weiyang *</span><br></pre></td></tr></table></figure>\n<h5 id=\"过滤本身\"><a href=\"#过滤本身\" class=\"headerlink\" title=\"过滤本身\"></a>过滤本身</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep vim |grep -v grep</span><br></pre></td></tr></table></figure>\n<h3 id=\"编码问题\"><a href=\"#编码问题\" class=\"headerlink\" title=\"编码问题\"></a>编码问题</h3><p>centos7常常会遇到一些编码问题，我们可以通过命令行来进行一些编码的转码</p>\n<h5 id=\"enca\"><a href=\"#enca\" class=\"headerlink\" title=\"enca\"></a><a href=\"https://www.2cto.com/os/201404/295528.html\" target=\"_blank\" rel=\"noopener\">enca</a></h5><p>支持的编码比较少，一些无法转换，如UTF16,UCS-2就无法通过这个转换</p>\n<p>直接识别字符集</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">enca -L zh_CN test.cpp</span><br></pre></td></tr></table></figure>\n<p> 转换命令简单</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">enca -L zh_CN -x UTF-8 test.cpp or enca -L zh_CN -x GB2312 test.cpp</span><br></pre></td></tr></table></figure>\n<h5 id=\"iconv\"><a href=\"#iconv\" class=\"headerlink\" title=\"iconv\"></a>iconv</h5><p>可以支持多种编码，有一个缺点，必须知道原来文件的编码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iconv  -f UTF-16 -t UTF-8 b.txt -o uni3.txt</span><br></pre></td></tr></table></figure>\n<h5 id=\"任意转换\"><a href=\"#任意转换\" class=\"headerlink\" title=\"任意转换\"></a>任意转换</h5><p>所有可以通过enca和iconv两者结合来使用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iconv -f $(enca -L zh_CN b.txt |head -n 1|cut -d &quot;;&quot; -f 2) -t UTF-8 b.txt -o b.txt</span><br></pre></td></tr></table></figure>\n<p>leopard修改<code>/opt/dana/leopard/python/fileConv.py</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">codecmd= &apos;iconv -f $(enca -L zh_CN %s |head -n 1|cut -d &quot;;&quot; -f 2) -t UTF-8 %s -o %s&apos;% (input_name, input_name, input_name)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>记录一下自己常用的centos7上的命令行</p>\n<h3 id=\"mount挂载\"><a href=\"#mount挂载\" class=\"headerlink\" title=\"mount挂载\"></a>mount挂载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">虚拟机和主机共享目录</span><br><span class=\"line\">mount -t cifs //192.168.30.97/code /mnt -o username=Administrator,password=Helios</span><br><span class=\"line\"></span><br><span class=\"line\">/code 是主机上的目录，需要设置为共享的</span><br><span class=\"line\">username 为主机的用户名</span><br><span class=\"line\">password 是主机的密码</span><br><span class=\"line\">/mnt 是虚拟机上的目录</span><br><span class=\"line\"></span><br><span class=\"line\">卸载：</span><br><span class=\"line\">umount /mnt</span><br><span class=\"line\">卸载失败可以重启服务器</span><br></pre></td></tr></table></figure>\n<h3 id=\"nohup常驻服务\"><a href=\"#nohup常驻服务\" class=\"headerlink\" title=\"nohup常驻服务\"></a>nohup常驻服务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">linux平台上，要在后台运行脚本的话，一般是在命令之后加上&amp;即可。</span><br><span class=\"line\">常驻服务的运行，退出终端也可以的命令行</span><br><span class=\"line\">nohup</span><br><span class=\"line\">具体方法</span><br><span class=\"line\">nohup ./videotool &amp;</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看系统的状态的命令\"><a href=\"#查看系统的状态的命令\" class=\"headerlink\" title=\"查看系统的状态的命令\"></a>查看系统的状态的命令</h3><h5 id=\"查看内存\"><a href=\"#查看内存\" class=\"headerlink\" title=\"查看内存\"></a>查看内存</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">free -h</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看磁盘使用\"><a href=\"#查看磁盘使用\" class=\"headerlink\" title=\"查看磁盘使用\"></a>查看磁盘使用</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df -h</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看文件大小\"><a href=\"#查看文件大小\" class=\"headerlink\" title=\"查看文件大小\"></a>查看文件大小</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">du -sh 11.mkv</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看进程的线程数\"><a href=\"#查看进程的线程数\" class=\"headerlink\" title=\"查看进程的线程数\"></a>查看进程的线程数</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -T -p pid</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看centos7的物理核数\"><a href=\"#查看centos7的物理核数\" class=\"headerlink\" title=\"查看centos7的物理核数\"></a>查看centos7的物理核数</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /proc/cpuinfo| grep &quot;physical id&quot;| sort| uniq| wc -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看centos7的逻辑核数\"><a href=\"#查看centos7的逻辑核数\" class=\"headerlink\" title=\"查看centos7的逻辑核数\"></a>查看centos7的逻辑核数</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"测试系统的io速度\"><a href=\"#测试系统的io速度\" class=\"headerlink\" title=\"测试系统的io速度\"></a>测试系统的io速度</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">time dd bs=4M count=1024 if=/dev/zero of=test_02 conv=fdatasync</span><br></pre></td></tr></table></figure>\n<h3 id=\"复制\"><a href=\"#复制\" class=\"headerlink\" title=\"复制\"></a>复制</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp  -rfd   ./oldname  ./newname</span><br><span class=\"line\">-r 复制目录</span><br><span class=\"line\">-f 强制复制</span><br><span class=\"line\">-d 复制软连接</span><br><span class=\"line\"></span><br><span class=\"line\">忽略冲突复制</span><br><span class=\"line\">\\cp  -rfd   ./oldname  ./newname</span><br></pre></td></tr></table></figure>\n<h3 id=\"定时任务\"><a href=\"#定时任务\" class=\"headerlink\" title=\"定时任务\"></a>定时任务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">基本格式：</span><br><span class=\"line\">* * * * * command  </span><br><span class=\"line\">含义：</span><br><span class=\"line\">分 时 天 月 周  </span><br><span class=\"line\">使用*/n 表示此字段上每隔n执行一次，同时注意如果低时间使用了，会覆盖高时间的*/n,不要同时使用某一天与一周的某一天，如果这个两个相等，则会执行两次</span><br></pre></td></tr></table></figure>\n<h5 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -e</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看\"><a href=\"#查看\" class=\"headerlink\" title=\"查看\"></a>查看</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">crontab -r  这个表示删除所有的定时任务，如果需要删除单个，则使用crontab -e 进行编辑，然后删除某一行</span><br></pre></td></tr></table></figure>\n<h3 id=\"获取服务运行时使用的内存\"><a href=\"#获取服务运行时使用的内存\" class=\"headerlink\" title=\"获取服务运行时使用的内存\"></a>获取服务运行时使用的内存</h3><p><img src=\"/images/linux/cache.png\" alt=\"cache.png\"></p>\n<h3 id=\"控制进程使用cpu数目\"><a href=\"#控制进程使用cpu数目\" class=\"headerlink\" title=\"控制进程使用cpu数目\"></a>控制进程使用cpu数目</h3><h5 id=\"获取进程id\"><a href=\"#获取进程id\" class=\"headerlink\" title=\"获取进程id\"></a>获取进程id</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pgrep  -f   servername</span><br><span class=\"line\"></span><br><span class=\"line\">pidof   servername</span><br></pre></td></tr></table></figure>\n<h5 id=\"设置CPU使用\"><a href=\"#设置CPU使用\" class=\"headerlink\" title=\"设置CPU使用\"></a>设置CPU使用</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">注意： 默认情况下，taskset不会影响进程的所有线程（LWP）。使用任务集的“-a”选项来影响流程中的所有线程</span><br><span class=\"line\"></span><br><span class=\"line\">一般可以这样设置：   taskset   -apc  0   8991     (这个目前最有效）</span><br></pre></td></tr></table></figure>\n<h3 id=\"脚本中生成随机数\"><a href=\"#脚本中生成随机数\" class=\"headerlink\" title=\"脚本中生成随机数\"></a>脚本中生成随机数</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UUID=`echo $RANDOM`</span><br></pre></td></tr></table></figure>\n<h3 id=\"记录程序运行的资源到文件中\"><a href=\"#记录程序运行的资源到文件中\" class=\"headerlink\" title=\"记录程序运行的资源到文件中\"></a>记录程序运行的资源到文件中</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y time</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/bin/time -v -o video.log ffmpeg -i xxx.mp4</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看机器是物理机还是虚拟机\"><a href=\"#查看机器是物理机还是虚拟机\" class=\"headerlink\" title=\"查看机器是物理机还是虚拟机\"></a>查看机器是物理机还是虚拟机</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dmidecode -s system-product-name</span><br></pre></td></tr></table></figure>\n<p>结果如图：</p>\n<p><img src=\"/images/linux/syss.png\" alt=\"syss.png\"></p>\n<p><img src=\"/images/linux/sysv.png\" alt=\"sysv.png\"></p>\n<h3 id=\"搜索\"><a href=\"#搜索\" class=\"headerlink\" title=\"搜索\"></a>搜索</h3><h5 id=\"grep\"><a href=\"#grep\" class=\"headerlink\" title=\"grep\"></a>grep</h5><p>搜索文件中包含某个单词</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep -rn  weiyang *</span><br></pre></td></tr></table></figure>\n<h5 id=\"过滤本身\"><a href=\"#过滤本身\" class=\"headerlink\" title=\"过滤本身\"></a>过滤本身</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef | grep vim |grep -v grep</span><br></pre></td></tr></table></figure>\n<h3 id=\"编码问题\"><a href=\"#编码问题\" class=\"headerlink\" title=\"编码问题\"></a>编码问题</h3><p>centos7常常会遇到一些编码问题，我们可以通过命令行来进行一些编码的转码</p>\n<h5 id=\"enca\"><a href=\"#enca\" class=\"headerlink\" title=\"enca\"></a><a href=\"https://www.2cto.com/os/201404/295528.html\" target=\"_blank\" rel=\"noopener\">enca</a></h5><p>支持的编码比较少，一些无法转换，如UTF16,UCS-2就无法通过这个转换</p>\n<p>直接识别字符集</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">enca -L zh_CN test.cpp</span><br></pre></td></tr></table></figure>\n<p> 转换命令简单</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">enca -L zh_CN -x UTF-8 test.cpp or enca -L zh_CN -x GB2312 test.cpp</span><br></pre></td></tr></table></figure>\n<h5 id=\"iconv\"><a href=\"#iconv\" class=\"headerlink\" title=\"iconv\"></a>iconv</h5><p>可以支持多种编码，有一个缺点，必须知道原来文件的编码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iconv  -f UTF-16 -t UTF-8 b.txt -o uni3.txt</span><br></pre></td></tr></table></figure>\n<h5 id=\"任意转换\"><a href=\"#任意转换\" class=\"headerlink\" title=\"任意转换\"></a>任意转换</h5><p>所有可以通过enca和iconv两者结合来使用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iconv -f $(enca -L zh_CN b.txt |head -n 1|cut -d &quot;;&quot; -f 2) -t UTF-8 b.txt -o b.txt</span><br></pre></td></tr></table></figure>\n<p>leopard修改<code>/opt/dana/leopard/python/fileConv.py</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">codecmd= &apos;iconv -f $(enca -L zh_CN %s |head -n 1|cut -d &quot;;&quot; -f 2) -t UTF-8 %s -o %s&apos;% (input_name, input_name, input_name)</span><br></pre></td></tr></table></figure>\n"},{"title":"centos7-网络设置","abbrlink":3594159119,"date":"2020-06-09T06:19:49.000Z","_content":"\n配置centos7的网络，让其可以正常的连接网络\n\n### 一，打开网络配置所在的文件\n\n~~~\ncd /etc/sysconfig/network-scripts\nvi ifcfg-ens160 (不同的系统，文件名不同)\n~~~\n\n~~~\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\n#设置静态ip还是动态IP\nBOOTPROTO=static\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens160\nUUID=750fb5d2-4bff-437d-ab4e-75eaf038429d\nDEVICE=ens160\n#开机自启动\nONBOOT=yes\n#静态ip地址\nIPADDR=192.168.50.72\n#静态网关\nNETMASK=255.255.255.0\n#路由\nGATEWAY=192.168.50.1\n~~~\n\n设置好之后，重启网络服务\n\n~~~\nsystemctl restart network\n~~~\n\n### 二，配置域名解析\n\n~~~\nvi /etc/resolv.conf\n~~~\n\n添加内容如下：\n\n~~~\nnameserver   8.8.8.8\n\nnameserver   8.8.4.4\n\nnameserver    114.114.114.114\n~~~\n\n","source":"_posts/centos7-网络设置.md","raw":"---\ntitle: centos7-网络设置\ncategories: Centos7\ntags: network\nabbrlink: 3594159119\ndate: 2020-06-09 14:19:49\n---\n\n配置centos7的网络，让其可以正常的连接网络\n\n### 一，打开网络配置所在的文件\n\n~~~\ncd /etc/sysconfig/network-scripts\nvi ifcfg-ens160 (不同的系统，文件名不同)\n~~~\n\n~~~\nTYPE=Ethernet\nPROXY_METHOD=none\nBROWSER_ONLY=no\n#设置静态ip还是动态IP\nBOOTPROTO=static\nDEFROUTE=yes\nIPV4_FAILURE_FATAL=no\nIPV6INIT=yes\nIPV6_AUTOCONF=yes\nIPV6_DEFROUTE=yes\nIPV6_FAILURE_FATAL=no\nIPV6_ADDR_GEN_MODE=stable-privacy\nNAME=ens160\nUUID=750fb5d2-4bff-437d-ab4e-75eaf038429d\nDEVICE=ens160\n#开机自启动\nONBOOT=yes\n#静态ip地址\nIPADDR=192.168.50.72\n#静态网关\nNETMASK=255.255.255.0\n#路由\nGATEWAY=192.168.50.1\n~~~\n\n设置好之后，重启网络服务\n\n~~~\nsystemctl restart network\n~~~\n\n### 二，配置域名解析\n\n~~~\nvi /etc/resolv.conf\n~~~\n\n添加内容如下：\n\n~~~\nnameserver   8.8.8.8\n\nnameserver   8.8.4.4\n\nnameserver    114.114.114.114\n~~~\n\n","slug":"centos7-网络设置","published":1,"updated":"2021-02-08T06:21:34.742Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvx000nlkq5op4ywh3b","content":"<p>配置centos7的网络，让其可以正常的连接网络</p>\n<h3 id=\"一，打开网络配置所在的文件\"><a href=\"#一，打开网络配置所在的文件\" class=\"headerlink\" title=\"一，打开网络配置所在的文件\"></a>一，打开网络配置所在的文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/sysconfig/network-scripts</span><br><span class=\"line\">vi ifcfg-ens160 (不同的系统，文件名不同)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TYPE=Ethernet</span><br><span class=\"line\">PROXY_METHOD=none</span><br><span class=\"line\">BROWSER_ONLY=no</span><br><span class=\"line\">#设置静态ip还是动态IP</span><br><span class=\"line\">BOOTPROTO=static</span><br><span class=\"line\">DEFROUTE=yes</span><br><span class=\"line\">IPV4_FAILURE_FATAL=no</span><br><span class=\"line\">IPV6INIT=yes</span><br><span class=\"line\">IPV6_AUTOCONF=yes</span><br><span class=\"line\">IPV6_DEFROUTE=yes</span><br><span class=\"line\">IPV6_FAILURE_FATAL=no</span><br><span class=\"line\">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class=\"line\">NAME=ens160</span><br><span class=\"line\">UUID=750fb5d2-4bff-437d-ab4e-75eaf038429d</span><br><span class=\"line\">DEVICE=ens160</span><br><span class=\"line\">#开机自启动</span><br><span class=\"line\">ONBOOT=yes</span><br><span class=\"line\">#静态ip地址</span><br><span class=\"line\">IPADDR=192.168.50.72</span><br><span class=\"line\">#静态网关</span><br><span class=\"line\">NETMASK=255.255.255.0</span><br><span class=\"line\">#路由</span><br><span class=\"line\">GATEWAY=192.168.50.1</span><br></pre></td></tr></table></figure>\n<p>设置好之后，重启网络服务</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart network</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，配置域名解析\"><a href=\"#二，配置域名解析\" class=\"headerlink\" title=\"二，配置域名解析\"></a>二，配置域名解析</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/resolv.conf</span><br></pre></td></tr></table></figure>\n<p>添加内容如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nameserver   8.8.8.8</span><br><span class=\"line\"></span><br><span class=\"line\">nameserver   8.8.4.4</span><br><span class=\"line\"></span><br><span class=\"line\">nameserver    114.114.114.114</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>配置centos7的网络，让其可以正常的连接网络</p>\n<h3 id=\"一，打开网络配置所在的文件\"><a href=\"#一，打开网络配置所在的文件\" class=\"headerlink\" title=\"一，打开网络配置所在的文件\"></a>一，打开网络配置所在的文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/sysconfig/network-scripts</span><br><span class=\"line\">vi ifcfg-ens160 (不同的系统，文件名不同)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TYPE=Ethernet</span><br><span class=\"line\">PROXY_METHOD=none</span><br><span class=\"line\">BROWSER_ONLY=no</span><br><span class=\"line\">#设置静态ip还是动态IP</span><br><span class=\"line\">BOOTPROTO=static</span><br><span class=\"line\">DEFROUTE=yes</span><br><span class=\"line\">IPV4_FAILURE_FATAL=no</span><br><span class=\"line\">IPV6INIT=yes</span><br><span class=\"line\">IPV6_AUTOCONF=yes</span><br><span class=\"line\">IPV6_DEFROUTE=yes</span><br><span class=\"line\">IPV6_FAILURE_FATAL=no</span><br><span class=\"line\">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class=\"line\">NAME=ens160</span><br><span class=\"line\">UUID=750fb5d2-4bff-437d-ab4e-75eaf038429d</span><br><span class=\"line\">DEVICE=ens160</span><br><span class=\"line\">#开机自启动</span><br><span class=\"line\">ONBOOT=yes</span><br><span class=\"line\">#静态ip地址</span><br><span class=\"line\">IPADDR=192.168.50.72</span><br><span class=\"line\">#静态网关</span><br><span class=\"line\">NETMASK=255.255.255.0</span><br><span class=\"line\">#路由</span><br><span class=\"line\">GATEWAY=192.168.50.1</span><br></pre></td></tr></table></figure>\n<p>设置好之后，重启网络服务</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart network</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，配置域名解析\"><a href=\"#二，配置域名解析\" class=\"headerlink\" title=\"二，配置域名解析\"></a>二，配置域名解析</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi /etc/resolv.conf</span><br></pre></td></tr></table></figure>\n<p>添加内容如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nameserver   8.8.8.8</span><br><span class=\"line\"></span><br><span class=\"line\">nameserver   8.8.4.4</span><br><span class=\"line\"></span><br><span class=\"line\">nameserver    114.114.114.114</span><br></pre></td></tr></table></figure>\n"},{"title":"cpp-devtoolset切换gcc的版本","abbrlink":2538200340,"date":"2020-06-19T08:47:14.000Z","_content":"\n我们在编译cpp的时候，有时候需要支持c++11/14的一些特性，就需要升级gcc的版本，为了简单的升级，Red Hat提供了scl软件集来为用户提供一种以方便、安全地安装和使用应用程序和运行时环境的多个（而且可能是更新的）版本的方式，同时避免把系统搞乱。下载devtoolset\n\n使用scl升级gcc的步骤\n\n### 一，安装scl源\n\n~~~\nyum install centos-release-scl scl-utils-build\n~~~\n\n### 二，列出scl有哪些可用的源\n\n~~~\nyum list all --enablerepo='centos-sclo-rh' | grep devtoolset\n~~~\n\n### 三，安装gcc，g++\n\n~~~\nyum install devtoolset-7-gcc devtoolset-7-gcc-c++\n~~~\n\n### 四，切换版本\n\n这个版本的切换仅对当前的环境有用\n\n##### 启动环境\n\n~~~\nscl enable devtoolset-7 bash\ngcc -v\n\n~~~\n\n##### 退出环境\n\n~~~\nexit\n~~~\n\n","source":"_posts/cpp-devtoolset切换gcc的版本.md","raw":"---\ntitle: cpp-devtoolset切换gcc的版本\ncategories: [Cpp,gcc]\ntags:\n  - gcc\n  - devtoolset\nabbrlink: 2538200340\ndate: 2020-06-19 16:47:14\n---\n\n我们在编译cpp的时候，有时候需要支持c++11/14的一些特性，就需要升级gcc的版本，为了简单的升级，Red Hat提供了scl软件集来为用户提供一种以方便、安全地安装和使用应用程序和运行时环境的多个（而且可能是更新的）版本的方式，同时避免把系统搞乱。下载devtoolset\n\n使用scl升级gcc的步骤\n\n### 一，安装scl源\n\n~~~\nyum install centos-release-scl scl-utils-build\n~~~\n\n### 二，列出scl有哪些可用的源\n\n~~~\nyum list all --enablerepo='centos-sclo-rh' | grep devtoolset\n~~~\n\n### 三，安装gcc，g++\n\n~~~\nyum install devtoolset-7-gcc devtoolset-7-gcc-c++\n~~~\n\n### 四，切换版本\n\n这个版本的切换仅对当前的环境有用\n\n##### 启动环境\n\n~~~\nscl enable devtoolset-7 bash\ngcc -v\n\n~~~\n\n##### 退出环境\n\n~~~\nexit\n~~~\n\n","slug":"cpp-devtoolset切换gcc的版本","published":1,"updated":"2021-02-08T07:00:15.685Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxvz000rlkq5qnpmhdfv","content":"<p>我们在编译cpp的时候，有时候需要支持c++11/14的一些特性，就需要升级gcc的版本，为了简单的升级，Red Hat提供了scl软件集来为用户提供一种以方便、安全地安装和使用应用程序和运行时环境的多个（而且可能是更新的）版本的方式，同时避免把系统搞乱。下载devtoolset</p>\n<p>使用scl升级gcc的步骤</p>\n<h3 id=\"一，安装scl源\"><a href=\"#一，安装scl源\" class=\"headerlink\" title=\"一，安装scl源\"></a>一，安装scl源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install centos-release-scl scl-utils-build</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，列出scl有哪些可用的源\"><a href=\"#二，列出scl有哪些可用的源\" class=\"headerlink\" title=\"二，列出scl有哪些可用的源\"></a>二，列出scl有哪些可用的源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list all --enablerepo=&apos;centos-sclo-rh&apos; | grep devtoolset</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，安装gcc，g\"><a href=\"#三，安装gcc，g\" class=\"headerlink\" title=\"三，安装gcc，g++\"></a>三，安装gcc，g++</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install devtoolset-7-gcc devtoolset-7-gcc-c++</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，切换版本\"><a href=\"#四，切换版本\" class=\"headerlink\" title=\"四，切换版本\"></a>四，切换版本</h3><p>这个版本的切换仅对当前的环境有用</p>\n<h5 id=\"启动环境\"><a href=\"#启动环境\" class=\"headerlink\" title=\"启动环境\"></a>启动环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scl enable devtoolset-7 bash</span><br><span class=\"line\">gcc -v</span><br></pre></td></tr></table></figure>\n<h5 id=\"退出环境\"><a href=\"#退出环境\" class=\"headerlink\" title=\"退出环境\"></a>退出环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>我们在编译cpp的时候，有时候需要支持c++11/14的一些特性，就需要升级gcc的版本，为了简单的升级，Red Hat提供了scl软件集来为用户提供一种以方便、安全地安装和使用应用程序和运行时环境的多个（而且可能是更新的）版本的方式，同时避免把系统搞乱。下载devtoolset</p>\n<p>使用scl升级gcc的步骤</p>\n<h3 id=\"一，安装scl源\"><a href=\"#一，安装scl源\" class=\"headerlink\" title=\"一，安装scl源\"></a>一，安装scl源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install centos-release-scl scl-utils-build</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，列出scl有哪些可用的源\"><a href=\"#二，列出scl有哪些可用的源\" class=\"headerlink\" title=\"二，列出scl有哪些可用的源\"></a>二，列出scl有哪些可用的源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list all --enablerepo=&apos;centos-sclo-rh&apos; | grep devtoolset</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，安装gcc，g\"><a href=\"#三，安装gcc，g\" class=\"headerlink\" title=\"三，安装gcc，g++\"></a>三，安装gcc，g++</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install devtoolset-7-gcc devtoolset-7-gcc-c++</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，切换版本\"><a href=\"#四，切换版本\" class=\"headerlink\" title=\"四，切换版本\"></a>四，切换版本</h3><p>这个版本的切换仅对当前的环境有用</p>\n<h5 id=\"启动环境\"><a href=\"#启动环境\" class=\"headerlink\" title=\"启动环境\"></a>启动环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scl enable devtoolset-7 bash</span><br><span class=\"line\">gcc -v</span><br></pre></td></tr></table></figure>\n<h5 id=\"退出环境\"><a href=\"#退出环境\" class=\"headerlink\" title=\"退出环境\"></a>退出环境</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">exit</span><br></pre></td></tr></table></figure>\n"},{"title":"cpp-centos7常用环境变量的设置","abbrlink":1768093973,"date":"2020-06-19T03:56:16.000Z","_content":"\n我们在centos7开发的cpp的时候，在编译的时候需要设置一些常有的环境变量，如头文件的路径，动态库的路径\n\n\n\n### 设置c语言的头文件的搜索路径\n\n~~~\nexport C_INCLUDE_PATH =\n~~~\n\n### 设置c语言的链接库的搜索路径\n\n~~~\nexport LIBRARY_PATH = \n~~~\n\n### 设置cpp的头文件的搜索路径\n\n~~~\nexport CPLUS_INCLUDE_PATH = \n~~~\n\n### 设置cpp的链接库的搜索路径\n\n~~~\nexport LD_LIBRARY_PATH = \n~~~\n\n### 对于GCC版本的选择\n\n我们在用cmake编译源码的时候，有时候需要gcc不同的版本，以支持c++11的特性\n\n`gcc4.8.5以下不支持``gcc5.1.0支持c++11`,我们在编译的时候可以显示的设置编译器的选择,下面是我自己编译的gcc5.1.0版本，这样在编译的时候就会调用\n\n~~~\nexport CC=/usr/local/bin/gcc\nexport CXX=/usr/local/bin/g++\n~~~\n\n\n\n","source":"_posts/cpp-centos7常用环境变量的设置.md","raw":"---\ntitle: cpp-centos7常用环境变量的设置\ncategories: [Cpp,gcc]\ntags:\n  - env\nabbrlink: 1768093973\ndate: 2020-06-19 11:56:16\n---\n\n我们在centos7开发的cpp的时候，在编译的时候需要设置一些常有的环境变量，如头文件的路径，动态库的路径\n\n\n\n### 设置c语言的头文件的搜索路径\n\n~~~\nexport C_INCLUDE_PATH =\n~~~\n\n### 设置c语言的链接库的搜索路径\n\n~~~\nexport LIBRARY_PATH = \n~~~\n\n### 设置cpp的头文件的搜索路径\n\n~~~\nexport CPLUS_INCLUDE_PATH = \n~~~\n\n### 设置cpp的链接库的搜索路径\n\n~~~\nexport LD_LIBRARY_PATH = \n~~~\n\n### 对于GCC版本的选择\n\n我们在用cmake编译源码的时候，有时候需要gcc不同的版本，以支持c++11的特性\n\n`gcc4.8.5以下不支持``gcc5.1.0支持c++11`,我们在编译的时候可以显示的设置编译器的选择,下面是我自己编译的gcc5.1.0版本，这样在编译的时候就会调用\n\n~~~\nexport CC=/usr/local/bin/gcc\nexport CXX=/usr/local/bin/g++\n~~~\n\n\n\n","slug":"cpp-centos7常用环境变量的设置","published":1,"updated":"2021-02-08T07:00:03.334Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw1000ulkq5p8r0r25y","content":"<p>我们在centos7开发的cpp的时候，在编译的时候需要设置一些常有的环境变量，如头文件的路径，动态库的路径</p>\n<h3 id=\"设置c语言的头文件的搜索路径\"><a href=\"#设置c语言的头文件的搜索路径\" class=\"headerlink\" title=\"设置c语言的头文件的搜索路径\"></a>设置c语言的头文件的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export C_INCLUDE_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置c语言的链接库的搜索路径\"><a href=\"#设置c语言的链接库的搜索路径\" class=\"headerlink\" title=\"设置c语言的链接库的搜索路径\"></a>设置c语言的链接库的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LIBRARY_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置cpp的头文件的搜索路径\"><a href=\"#设置cpp的头文件的搜索路径\" class=\"headerlink\" title=\"设置cpp的头文件的搜索路径\"></a>设置cpp的头文件的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export CPLUS_INCLUDE_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置cpp的链接库的搜索路径\"><a href=\"#设置cpp的链接库的搜索路径\" class=\"headerlink\" title=\"设置cpp的链接库的搜索路径\"></a>设置cpp的链接库的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LD_LIBRARY_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"对于GCC版本的选择\"><a href=\"#对于GCC版本的选择\" class=\"headerlink\" title=\"对于GCC版本的选择\"></a>对于GCC版本的选择</h3><p>我们在用cmake编译源码的时候，有时候需要gcc不同的版本，以支持c++11的特性</p>\n<p><code>gcc4.8.5以下不支持`</code>gcc5.1.0支持c++11`,我们在编译的时候可以显示的设置编译器的选择,下面是我自己编译的gcc5.1.0版本，这样在编译的时候就会调用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export CC=/usr/local/bin/gcc</span><br><span class=\"line\">export CXX=/usr/local/bin/g++</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>我们在centos7开发的cpp的时候，在编译的时候需要设置一些常有的环境变量，如头文件的路径，动态库的路径</p>\n<h3 id=\"设置c语言的头文件的搜索路径\"><a href=\"#设置c语言的头文件的搜索路径\" class=\"headerlink\" title=\"设置c语言的头文件的搜索路径\"></a>设置c语言的头文件的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export C_INCLUDE_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置c语言的链接库的搜索路径\"><a href=\"#设置c语言的链接库的搜索路径\" class=\"headerlink\" title=\"设置c语言的链接库的搜索路径\"></a>设置c语言的链接库的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LIBRARY_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置cpp的头文件的搜索路径\"><a href=\"#设置cpp的头文件的搜索路径\" class=\"headerlink\" title=\"设置cpp的头文件的搜索路径\"></a>设置cpp的头文件的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export CPLUS_INCLUDE_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置cpp的链接库的搜索路径\"><a href=\"#设置cpp的链接库的搜索路径\" class=\"headerlink\" title=\"设置cpp的链接库的搜索路径\"></a>设置cpp的链接库的搜索路径</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export LD_LIBRARY_PATH =</span><br></pre></td></tr></table></figure>\n<h3 id=\"对于GCC版本的选择\"><a href=\"#对于GCC版本的选择\" class=\"headerlink\" title=\"对于GCC版本的选择\"></a>对于GCC版本的选择</h3><p>我们在用cmake编译源码的时候，有时候需要gcc不同的版本，以支持c++11的特性</p>\n<p><code>gcc4.8.5以下不支持`</code>gcc5.1.0支持c++11`,我们在编译的时候可以显示的设置编译器的选择,下面是我自己编译的gcc5.1.0版本，这样在编译的时候就会调用</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export CC=/usr/local/bin/gcc</span><br><span class=\"line\">export CXX=/usr/local/bin/g++</span><br></pre></td></tr></table></figure>\n"},{"title":"centos7-控制系统的CPU","abbrlink":3687663458,"date":"2019-03-15T08:26:01.000Z","_content":"\n这里是linux的学习基地，我们可以学习一些linux的常用知识\n","source":"_posts/centos7-控制系统的CPU.md","raw":"---\ntitle: centos7-控制系统的CPU\ncategories: Centos7\nabbrlink: 3687663458\ndate: 2019-03-15 16:26:01\ntags:\n---\n\n这里是linux的学习基地，我们可以学习一些linux的常用知识\n","slug":"centos7-控制系统的CPU","published":1,"updated":"2021-02-08T06:21:26.636Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw3000ylkq5bm1prthe","content":"<p>这里是linux的学习基地，我们可以学习一些linux的常用知识</p>\n","site":{"data":{}},"excerpt":"","more":"<p>这里是linux的学习基地，我们可以学习一些linux的常用知识</p>\n"},{"title":"cpp-gtest集成Lcov代码覆盖率测试","abbrlink":3264464113,"date":"2021-02-08T07:04:47.000Z","_content":"\n​\t做好了单元测试但是别人并不知道我们的单元测试做的如何，是否覆盖了所有的需要被测试的类方法或者变量等，所以我们需要对单测case做一个覆盖率统计。其实本质就是看代码执行时候运行了你需要测试文件里面的所有代码，比如switch分支 if分支等。\n\n### 环境配置\n\n#### 安装下载lcov\n\n\thttp://ltp.sourceforge.net/coverage/lcov.php，有rpm包和源码包。（以源码包为例）\n\n解压lcov-x.xx.tar.gz，进入源码包，执行make install\n在命令行执行lcov -v，正确输出版本号即安装成功\n\n#### 增加Lcov编译选项\n\n​\t在项目顶层目录CmakeLists.txt中添加以下编译指令：\n\n~~~cmake\n# coverage option\nOPTION (ENABLE_COVERAGE \"Use gcov\" ON)\nMESSAGE(STATUS ENABLE_COVERAGE=${ENABLE_COVERAGE})\nIF(ENABLE_COVERAGE)\n    SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -fprofile-arcs -ftest-coverage\")\n    SET(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} -fprofile-arcs -ftest-coverage\")\n    SET(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage\")\nENDIF()\n~~~\n\n### 使用方式\n\n1. 将cmake编译选项设置为-DENABLE_COVERAGE=OFF …，或者将顶层目录CmakeLists.txt中OPTION (ENABLE_COVERAGE “Use gcov” OFF)编译选项手动设置为ON；\n\n2. 编译产生`.gcno`文件，运行则产生`.gcda`（与.gcno对应）文件；\n\n   - 我们使用的是`cmake编译`，则编译后生成的.gcno文件存在build目录下的每个项目中，例如：<img src=\"/images/cpp/gcno.png\" alt=\"gcno\" style=\"zoom:75%;\" />\n   - `运行`我们的测试代码才会产生.gcda文件，如图是运行后产生的。\n     - 若用户进程`并非调用 exit 正常退出`，覆盖率统计数据就无法输出，也就无从生成报告了。后台服务程序若非专门设计，一旦启动就很少主动退出，用 kill 杀死进程强制退出时就不会调用 exit，因此没有覆盖率统计结果产生。所以必须当前进程退出后才会产生.gcda文件。\n\n3. 使用Lcov生成覆盖率统计文件；\n\n   ~~~shell\n   lcov -d cmake-build-debug -t test -o test.info -b . -c  --no-external\n   ~~~\n\n   命令参数含义解释如下：\n\n   - -d src_dir： 待覆盖率测试的源码目录，本工程设置为cmake-build-debug；\n   - -t ‘test’: 目标的名称，此处为test；\n   - -o ‘test.info’: 生成的覆盖率文件，可自定义，可不带引号；\n   - -b .：相对目录的起始位置；\n   - -c: capture，采集覆盖率；\n\n   因为我们是cmake进行编译的，所以我们可以直接在build目录下使用lcov命令生成覆盖率报表\n\n   ~~~shell\n   lcov -c -o result.info  -b . -d . \n   ~~~\n\n4. 使用genhtml生成覆盖率报表\n\n   ~~~\n   genhtml -o report test.info\n   ~~~\n\n   - -o result: 输出的目标文件夹，可带路径，此处为当前目录下的result目录；\n\n   - test.info: 覆盖率的统计文件；\n\n   如果我们需要对覆盖率报表进行过滤，比如把include文件或者系统的文件给过滤掉，可以使用下面的命令\n\n   ~~~shell\n   lcov --remove result.info  '/usr/*' '*/inc/*' -o finalresult.info\n   genhtml finalresult.info  -o cppreport\n   ~~~\n\n5. html报表生成如下，这个是未过滤的。![html.png](/images/cpp/html.png)\n\n相关文章参考：\n\n- [这篇文章](https://blog.csdn.net/weixin_43892514/article/details/107822769)对lcov讲解的比较详细以及cmake添加的选项比较好用，但是对生成的.gcno和.gcda文件在哪里没有说明，对于我这个初学者来说比较的蒙。\n- [这篇文章](https://www.cnblogs.com/zhaoxd07/p/5608177.html)对文件生成的位置有详细的说明。\n\n","source":"_posts/cpp-gtest集成Lcov代码覆盖率测试.md","raw":"---\ntitle: cpp-gtest集成Lcov代码覆盖率测试\ncategories:\n  - Cpp\n  - unitTest\ntags:\n  - gtest\n  - lcov\nabbrlink: 3264464113\ndate: 2021-02-08 15:04:47\n---\n\n​\t做好了单元测试但是别人并不知道我们的单元测试做的如何，是否覆盖了所有的需要被测试的类方法或者变量等，所以我们需要对单测case做一个覆盖率统计。其实本质就是看代码执行时候运行了你需要测试文件里面的所有代码，比如switch分支 if分支等。\n\n### 环境配置\n\n#### 安装下载lcov\n\n\thttp://ltp.sourceforge.net/coverage/lcov.php，有rpm包和源码包。（以源码包为例）\n\n解压lcov-x.xx.tar.gz，进入源码包，执行make install\n在命令行执行lcov -v，正确输出版本号即安装成功\n\n#### 增加Lcov编译选项\n\n​\t在项目顶层目录CmakeLists.txt中添加以下编译指令：\n\n~~~cmake\n# coverage option\nOPTION (ENABLE_COVERAGE \"Use gcov\" ON)\nMESSAGE(STATUS ENABLE_COVERAGE=${ENABLE_COVERAGE})\nIF(ENABLE_COVERAGE)\n    SET(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -fprofile-arcs -ftest-coverage\")\n    SET(CMAKE_C_FLAGS \"${CMAKE_C_FLAGS} -fprofile-arcs -ftest-coverage\")\n    SET(CMAKE_EXE_LINKER_FLAGS \"${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage\")\nENDIF()\n~~~\n\n### 使用方式\n\n1. 将cmake编译选项设置为-DENABLE_COVERAGE=OFF …，或者将顶层目录CmakeLists.txt中OPTION (ENABLE_COVERAGE “Use gcov” OFF)编译选项手动设置为ON；\n\n2. 编译产生`.gcno`文件，运行则产生`.gcda`（与.gcno对应）文件；\n\n   - 我们使用的是`cmake编译`，则编译后生成的.gcno文件存在build目录下的每个项目中，例如：<img src=\"/images/cpp/gcno.png\" alt=\"gcno\" style=\"zoom:75%;\" />\n   - `运行`我们的测试代码才会产生.gcda文件，如图是运行后产生的。\n     - 若用户进程`并非调用 exit 正常退出`，覆盖率统计数据就无法输出，也就无从生成报告了。后台服务程序若非专门设计，一旦启动就很少主动退出，用 kill 杀死进程强制退出时就不会调用 exit，因此没有覆盖率统计结果产生。所以必须当前进程退出后才会产生.gcda文件。\n\n3. 使用Lcov生成覆盖率统计文件；\n\n   ~~~shell\n   lcov -d cmake-build-debug -t test -o test.info -b . -c  --no-external\n   ~~~\n\n   命令参数含义解释如下：\n\n   - -d src_dir： 待覆盖率测试的源码目录，本工程设置为cmake-build-debug；\n   - -t ‘test’: 目标的名称，此处为test；\n   - -o ‘test.info’: 生成的覆盖率文件，可自定义，可不带引号；\n   - -b .：相对目录的起始位置；\n   - -c: capture，采集覆盖率；\n\n   因为我们是cmake进行编译的，所以我们可以直接在build目录下使用lcov命令生成覆盖率报表\n\n   ~~~shell\n   lcov -c -o result.info  -b . -d . \n   ~~~\n\n4. 使用genhtml生成覆盖率报表\n\n   ~~~\n   genhtml -o report test.info\n   ~~~\n\n   - -o result: 输出的目标文件夹，可带路径，此处为当前目录下的result目录；\n\n   - test.info: 覆盖率的统计文件；\n\n   如果我们需要对覆盖率报表进行过滤，比如把include文件或者系统的文件给过滤掉，可以使用下面的命令\n\n   ~~~shell\n   lcov --remove result.info  '/usr/*' '*/inc/*' -o finalresult.info\n   genhtml finalresult.info  -o cppreport\n   ~~~\n\n5. html报表生成如下，这个是未过滤的。![html.png](/images/cpp/html.png)\n\n相关文章参考：\n\n- [这篇文章](https://blog.csdn.net/weixin_43892514/article/details/107822769)对lcov讲解的比较详细以及cmake添加的选项比较好用，但是对生成的.gcno和.gcda文件在哪里没有说明，对于我这个初学者来说比较的蒙。\n- [这篇文章](https://www.cnblogs.com/zhaoxd07/p/5608177.html)对文件生成的位置有详细的说明。\n\n","slug":"cpp-gtest集成Lcov代码覆盖率测试","published":1,"updated":"2021-02-08T07:12:44.903Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw40011lkq5j9gbpsa5","content":"<p>​    做好了单元测试但是别人并不知道我们的单元测试做的如何，是否覆盖了所有的需要被测试的类方法或者变量等，所以我们需要对单测case做一个覆盖率统计。其实本质就是看代码执行时候运行了你需要测试文件里面的所有代码，比如switch分支 if分支等。</p>\n<h3 id=\"环境配置\"><a href=\"#环境配置\" class=\"headerlink\" title=\"环境配置\"></a>环境配置</h3><h4 id=\"安装下载lcov\"><a href=\"#安装下载lcov\" class=\"headerlink\" title=\"安装下载lcov\"></a>安装下载lcov</h4><pre><code>http://ltp.sourceforge.net/coverage/lcov.php，有rpm包和源码包。（以源码包为例）\n</code></pre><p>解压lcov-x.xx.tar.gz，进入源码包，执行make install<br>在命令行执行lcov -v，正确输出版本号即安装成功</p>\n<h4 id=\"增加Lcov编译选项\"><a href=\"#增加Lcov编译选项\" class=\"headerlink\" title=\"增加Lcov编译选项\"></a>增加Lcov编译选项</h4><p>​    在项目顶层目录CmakeLists.txt中添加以下编译指令：</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># coverage option</span></span><br><span class=\"line\"><span class=\"keyword\">OPTION</span> (ENABLE_COVERAGE <span class=\"string\">\"Use gcov\"</span> <span class=\"keyword\">ON</span>)</span><br><span class=\"line\"><span class=\"keyword\">MESSAGE</span>(STATUS ENABLE_COVERAGE=<span class=\"variable\">$&#123;ENABLE_COVERAGE&#125;</span>)</span><br><span class=\"line\"><span class=\"keyword\">IF</span>(ENABLE_COVERAGE)</span><br><span class=\"line\">    <span class=\"keyword\">SET</span>(CMAKE_CXX_FLAGS <span class=\"string\">\"$&#123;CMAKE_CXX_FLAGS&#125; -fprofile-arcs -ftest-coverage\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">SET</span>(CMAKE_C_FLAGS <span class=\"string\">\"$&#123;CMAKE_C_FLAGS&#125; -fprofile-arcs -ftest-coverage\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">SET</span>(CMAKE_EXE_LINKER_FLAGS <span class=\"string\">\"$&#123;CMAKE_EXE_LINKER_FLAGS&#125; -fprofile-arcs -ftest-coverage\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">ENDIF</span>()</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用方式\"><a href=\"#使用方式\" class=\"headerlink\" title=\"使用方式\"></a>使用方式</h3><ol>\n<li><p>将cmake编译选项设置为-DENABLE_COVERAGE=OFF …，或者将顶层目录CmakeLists.txt中OPTION (ENABLE_COVERAGE “Use gcov” OFF)编译选项手动设置为ON；</p>\n</li>\n<li><p>编译产生<code>.gcno</code>文件，运行则产生<code>.gcda</code>（与.gcno对应）文件；</p>\n<ul>\n<li>我们使用的是<code>cmake编译</code>，则编译后生成的.gcno文件存在build目录下的每个项目中，例如：<img src=\"/images/cpp/gcno.png\" alt=\"gcno\" style=\"zoom:75%;\"></li>\n<li><code>运行</code>我们的测试代码才会产生.gcda文件，如图是运行后产生的。<ul>\n<li>若用户进程<code>并非调用 exit 正常退出</code>，覆盖率统计数据就无法输出，也就无从生成报告了。后台服务程序若非专门设计，一旦启动就很少主动退出，用 kill 杀死进程强制退出时就不会调用 exit，因此没有覆盖率统计结果产生。所以必须当前进程退出后才会产生.gcda文件。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>使用Lcov生成覆盖率统计文件；</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lcov -d cmake-build-debug -t test -o test.info -b . -c  --no-external</span><br></pre></td></tr></table></figure>\n<p>命令参数含义解释如下：</p>\n<ul>\n<li>-d src_dir： 待覆盖率测试的源码目录，本工程设置为cmake-build-debug；</li>\n<li>-t ‘test’: 目标的名称，此处为test；</li>\n<li>-o ‘test.info’: 生成的覆盖率文件，可自定义，可不带引号；</li>\n<li>-b .：相对目录的起始位置；</li>\n<li>-c: capture，采集覆盖率；</li>\n</ul>\n<p>因为我们是cmake进行编译的，所以我们可以直接在build目录下使用lcov命令生成覆盖率报表</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lcov -c -o result.info  -b . -d .</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用genhtml生成覆盖率报表</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">genhtml -o report test.info</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>-o result: 输出的目标文件夹，可带路径，此处为当前目录下的result目录；</p>\n</li>\n<li><p>test.info: 覆盖率的统计文件；</p>\n</li>\n</ul>\n<p>如果我们需要对覆盖率报表进行过滤，比如把include文件或者系统的文件给过滤掉，可以使用下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lcov --remove result.info  '/usr/*' '*/inc/*' -o finalresult.info</span><br><span class=\"line\">genhtml finalresult.info  -o cppreport</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>html报表生成如下，这个是未过滤的。<img src=\"/images/cpp/html.png\" alt=\"html.png\"></p>\n</li>\n</ol>\n<p>相关文章参考：</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/weixin_43892514/article/details/107822769\" target=\"_blank\" rel=\"noopener\">这篇文章</a>对lcov讲解的比较详细以及cmake添加的选项比较好用，但是对生成的.gcno和.gcda文件在哪里没有说明，对于我这个初学者来说比较的蒙。</li>\n<li><a href=\"https://www.cnblogs.com/zhaoxd07/p/5608177.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a>对文件生成的位置有详细的说明。</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>​    做好了单元测试但是别人并不知道我们的单元测试做的如何，是否覆盖了所有的需要被测试的类方法或者变量等，所以我们需要对单测case做一个覆盖率统计。其实本质就是看代码执行时候运行了你需要测试文件里面的所有代码，比如switch分支 if分支等。</p>\n<h3 id=\"环境配置\"><a href=\"#环境配置\" class=\"headerlink\" title=\"环境配置\"></a>环境配置</h3><h4 id=\"安装下载lcov\"><a href=\"#安装下载lcov\" class=\"headerlink\" title=\"安装下载lcov\"></a>安装下载lcov</h4><pre><code>http://ltp.sourceforge.net/coverage/lcov.php，有rpm包和源码包。（以源码包为例）\n</code></pre><p>解压lcov-x.xx.tar.gz，进入源码包，执行make install<br>在命令行执行lcov -v，正确输出版本号即安装成功</p>\n<h4 id=\"增加Lcov编译选项\"><a href=\"#增加Lcov编译选项\" class=\"headerlink\" title=\"增加Lcov编译选项\"></a>增加Lcov编译选项</h4><p>​    在项目顶层目录CmakeLists.txt中添加以下编译指令：</p>\n<figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># coverage option</span></span><br><span class=\"line\"><span class=\"keyword\">OPTION</span> (ENABLE_COVERAGE <span class=\"string\">\"Use gcov\"</span> <span class=\"keyword\">ON</span>)</span><br><span class=\"line\"><span class=\"keyword\">MESSAGE</span>(STATUS ENABLE_COVERAGE=<span class=\"variable\">$&#123;ENABLE_COVERAGE&#125;</span>)</span><br><span class=\"line\"><span class=\"keyword\">IF</span>(ENABLE_COVERAGE)</span><br><span class=\"line\">    <span class=\"keyword\">SET</span>(CMAKE_CXX_FLAGS <span class=\"string\">\"$&#123;CMAKE_CXX_FLAGS&#125; -fprofile-arcs -ftest-coverage\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">SET</span>(CMAKE_C_FLAGS <span class=\"string\">\"$&#123;CMAKE_C_FLAGS&#125; -fprofile-arcs -ftest-coverage\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">SET</span>(CMAKE_EXE_LINKER_FLAGS <span class=\"string\">\"$&#123;CMAKE_EXE_LINKER_FLAGS&#125; -fprofile-arcs -ftest-coverage\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">ENDIF</span>()</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用方式\"><a href=\"#使用方式\" class=\"headerlink\" title=\"使用方式\"></a>使用方式</h3><ol>\n<li><p>将cmake编译选项设置为-DENABLE_COVERAGE=OFF …，或者将顶层目录CmakeLists.txt中OPTION (ENABLE_COVERAGE “Use gcov” OFF)编译选项手动设置为ON；</p>\n</li>\n<li><p>编译产生<code>.gcno</code>文件，运行则产生<code>.gcda</code>（与.gcno对应）文件；</p>\n<ul>\n<li>我们使用的是<code>cmake编译</code>，则编译后生成的.gcno文件存在build目录下的每个项目中，例如：<img src=\"/images/cpp/gcno.png\" alt=\"gcno\" style=\"zoom:75%;\"></li>\n<li><code>运行</code>我们的测试代码才会产生.gcda文件，如图是运行后产生的。<ul>\n<li>若用户进程<code>并非调用 exit 正常退出</code>，覆盖率统计数据就无法输出，也就无从生成报告了。后台服务程序若非专门设计，一旦启动就很少主动退出，用 kill 杀死进程强制退出时就不会调用 exit，因此没有覆盖率统计结果产生。所以必须当前进程退出后才会产生.gcda文件。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>使用Lcov生成覆盖率统计文件；</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lcov -d cmake-build-debug -t test -o test.info -b . -c  --no-external</span><br></pre></td></tr></table></figure>\n<p>命令参数含义解释如下：</p>\n<ul>\n<li>-d src_dir： 待覆盖率测试的源码目录，本工程设置为cmake-build-debug；</li>\n<li>-t ‘test’: 目标的名称，此处为test；</li>\n<li>-o ‘test.info’: 生成的覆盖率文件，可自定义，可不带引号；</li>\n<li>-b .：相对目录的起始位置；</li>\n<li>-c: capture，采集覆盖率；</li>\n</ul>\n<p>因为我们是cmake进行编译的，所以我们可以直接在build目录下使用lcov命令生成覆盖率报表</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lcov -c -o result.info  -b . -d .</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用genhtml生成覆盖率报表</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">genhtml -o report test.info</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>-o result: 输出的目标文件夹，可带路径，此处为当前目录下的result目录；</p>\n</li>\n<li><p>test.info: 覆盖率的统计文件；</p>\n</li>\n</ul>\n<p>如果我们需要对覆盖率报表进行过滤，比如把include文件或者系统的文件给过滤掉，可以使用下面的命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lcov --remove result.info  '/usr/*' '*/inc/*' -o finalresult.info</span><br><span class=\"line\">genhtml finalresult.info  -o cppreport</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>html报表生成如下，这个是未过滤的。<img src=\"/images/cpp/html.png\" alt=\"html.png\"></p>\n</li>\n</ol>\n<p>相关文章参考：</p>\n<ul>\n<li><a href=\"https://blog.csdn.net/weixin_43892514/article/details/107822769\" target=\"_blank\" rel=\"noopener\">这篇文章</a>对lcov讲解的比较详细以及cmake添加的选项比较好用，但是对生成的.gcno和.gcda文件在哪里没有说明，对于我这个初学者来说比较的蒙。</li>\n<li><a href=\"https://www.cnblogs.com/zhaoxd07/p/5608177.html\" target=\"_blank\" rel=\"noopener\">这篇文章</a>对文件生成的位置有详细的说明。</li>\n</ul>\n"},{"title":"cpp-pistache源码编译之实现cpp restful接口","abbrlink":2728951675,"date":"2020-06-19T07:07:56.000Z","_content":"\ncpp实现restful类型的接口比较的复杂，我们使用pistache库来解决这个问题，经对比，这个库是速度最快的。\n\n### 源码下载\n\n~~~\ngit clone https://github.com/oktal/pistache.git\n~~~\n\n### 第三方库更新\n\n~~~\n git submodule update --init\n~~~\n\n### 编译\n\n##### 依赖下载gcc升级\n\n[gcc5.1.0源码编译](http://www.helioswei.top/article/2230395924.html)\n\n~~~ \ngcc version >5.1.0 #我们需要支持c++14\n~~~\n\n我们虽然重新编译安装了gcc，但系统有多个gcc的环境，我们在使用的时候可能还是默认的调用gcc4.8的低级版本，为了解决这个问题，我们可以显示的设置调用，我们需要设置编译器的环境变量，将5.1.0的编译器命令行设置到环境变量中：\n\n~~~\nexport CC=/usr/local/bin/gcc\nexport CXX=/usr/local/bin/g++\n~~~\n\n##### cmake升级\n\n[cmake下载](https://cmake.org/download/)，选择最新的下载即可，然后执行安装三部曲\n\n~~~\ncmake version > 3.18.0\n~~~\n\n##### curl-devel下载\n\n~~~\nyum install curl-devel -y\n~~~\n\n##### 编译\n\n~~~\ncd pistache\nmkdir build\ncd build\n~~~\n\n~~~\ncmake -G \"Unix Makefiles\" -DCMAKE_BUILD_TYPE=Release -DPISTACHE_BUILD_EXAMPLES=true -DPISTACHE_BUILD_TESTS=true -DPISTACHE_BUILD_DOCS=false -DPISTACHE_USE_SSL=true -DCMAKE_INSTALL_PREFIX=/usr/local/pistache ..\nmake -j 4\nmake install\n~~~\n\n\n\n### 使用\n\n`注意，这个在使用的时候需要选择c++的标准,设置`\n\n~~~\ng++ -std=c++14 #一般常用的是c++11\n~~~\n\n\n\n","source":"_posts/cpp-pistache源码编译之实现cpp-restful接口.md","raw":"---\ntitle: cpp-pistache源码编译之实现cpp restful接口\nabbrlink: 2728951675\ndate: 2020-06-19 15:07:56\ncategories: [Cpp,restful]\ntags: pistache\n---\n\ncpp实现restful类型的接口比较的复杂，我们使用pistache库来解决这个问题，经对比，这个库是速度最快的。\n\n### 源码下载\n\n~~~\ngit clone https://github.com/oktal/pistache.git\n~~~\n\n### 第三方库更新\n\n~~~\n git submodule update --init\n~~~\n\n### 编译\n\n##### 依赖下载gcc升级\n\n[gcc5.1.0源码编译](http://www.helioswei.top/article/2230395924.html)\n\n~~~ \ngcc version >5.1.0 #我们需要支持c++14\n~~~\n\n我们虽然重新编译安装了gcc，但系统有多个gcc的环境，我们在使用的时候可能还是默认的调用gcc4.8的低级版本，为了解决这个问题，我们可以显示的设置调用，我们需要设置编译器的环境变量，将5.1.0的编译器命令行设置到环境变量中：\n\n~~~\nexport CC=/usr/local/bin/gcc\nexport CXX=/usr/local/bin/g++\n~~~\n\n##### cmake升级\n\n[cmake下载](https://cmake.org/download/)，选择最新的下载即可，然后执行安装三部曲\n\n~~~\ncmake version > 3.18.0\n~~~\n\n##### curl-devel下载\n\n~~~\nyum install curl-devel -y\n~~~\n\n##### 编译\n\n~~~\ncd pistache\nmkdir build\ncd build\n~~~\n\n~~~\ncmake -G \"Unix Makefiles\" -DCMAKE_BUILD_TYPE=Release -DPISTACHE_BUILD_EXAMPLES=true -DPISTACHE_BUILD_TESTS=true -DPISTACHE_BUILD_DOCS=false -DPISTACHE_USE_SSL=true -DCMAKE_INSTALL_PREFIX=/usr/local/pistache ..\nmake -j 4\nmake install\n~~~\n\n\n\n### 使用\n\n`注意，这个在使用的时候需要选择c++的标准,设置`\n\n~~~\ng++ -std=c++14 #一般常用的是c++11\n~~~\n\n\n\n","slug":"cpp-pistache源码编译之实现cpp-restful接口","published":1,"updated":"2021-02-08T06:59:32.858Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw50013lkq5nf0wsm5h","content":"<p>cpp实现restful类型的接口比较的复杂，我们使用pistache库来解决这个问题，经对比，这个库是速度最快的。</p>\n<h3 id=\"源码下载\"><a href=\"#源码下载\" class=\"headerlink\" title=\"源码下载\"></a>源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/oktal/pistache.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"第三方库更新\"><a href=\"#第三方库更新\" class=\"headerlink\" title=\"第三方库更新\"></a>第三方库更新</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submodule update --init</span><br></pre></td></tr></table></figure>\n<h3 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h3><h5 id=\"依赖下载gcc升级\"><a href=\"#依赖下载gcc升级\" class=\"headerlink\" title=\"依赖下载gcc升级\"></a>依赖下载gcc升级</h5><p><a href=\"http://www.helioswei.top/article/2230395924.html\">gcc5.1.0源码编译</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc version &gt;5.1.0 #我们需要支持c++14</span><br></pre></td></tr></table></figure>\n<p>我们虽然重新编译安装了gcc，但系统有多个gcc的环境，我们在使用的时候可能还是默认的调用gcc4.8的低级版本，为了解决这个问题，我们可以显示的设置调用，我们需要设置编译器的环境变量，将5.1.0的编译器命令行设置到环境变量中：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export CC=/usr/local/bin/gcc</span><br><span class=\"line\">export CXX=/usr/local/bin/g++</span><br></pre></td></tr></table></figure>\n<h5 id=\"cmake升级\"><a href=\"#cmake升级\" class=\"headerlink\" title=\"cmake升级\"></a>cmake升级</h5><p><a href=\"https://cmake.org/download/\" target=\"_blank\" rel=\"noopener\">cmake下载</a>，选择最新的下载即可，然后执行安装三部曲</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake version &gt; 3.18.0</span><br></pre></td></tr></table></figure>\n<h5 id=\"curl-devel下载\"><a href=\"#curl-devel下载\" class=\"headerlink\" title=\"curl-devel下载\"></a>curl-devel下载</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install curl-devel -y</span><br></pre></td></tr></table></figure>\n<h5 id=\"编译-1\"><a href=\"#编译-1\" class=\"headerlink\" title=\"编译\"></a>编译</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd pistache</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake -G &quot;Unix Makefiles&quot; -DCMAKE_BUILD_TYPE=Release -DPISTACHE_BUILD_EXAMPLES=true -DPISTACHE_BUILD_TESTS=true -DPISTACHE_BUILD_DOCS=false -DPISTACHE_USE_SSL=true -DCMAKE_INSTALL_PREFIX=/usr/local/pistache ..</span><br><span class=\"line\">make -j 4</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><p><code>注意，这个在使用的时候需要选择c++的标准,设置</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ -std=c++14 #一般常用的是c++11</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>cpp实现restful类型的接口比较的复杂，我们使用pistache库来解决这个问题，经对比，这个库是速度最快的。</p>\n<h3 id=\"源码下载\"><a href=\"#源码下载\" class=\"headerlink\" title=\"源码下载\"></a>源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/oktal/pistache.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"第三方库更新\"><a href=\"#第三方库更新\" class=\"headerlink\" title=\"第三方库更新\"></a>第三方库更新</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git submodule update --init</span><br></pre></td></tr></table></figure>\n<h3 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h3><h5 id=\"依赖下载gcc升级\"><a href=\"#依赖下载gcc升级\" class=\"headerlink\" title=\"依赖下载gcc升级\"></a>依赖下载gcc升级</h5><p><a href=\"http://www.helioswei.top/article/2230395924.html\">gcc5.1.0源码编译</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gcc version &gt;5.1.0 #我们需要支持c++14</span><br></pre></td></tr></table></figure>\n<p>我们虽然重新编译安装了gcc，但系统有多个gcc的环境，我们在使用的时候可能还是默认的调用gcc4.8的低级版本，为了解决这个问题，我们可以显示的设置调用，我们需要设置编译器的环境变量，将5.1.0的编译器命令行设置到环境变量中：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export CC=/usr/local/bin/gcc</span><br><span class=\"line\">export CXX=/usr/local/bin/g++</span><br></pre></td></tr></table></figure>\n<h5 id=\"cmake升级\"><a href=\"#cmake升级\" class=\"headerlink\" title=\"cmake升级\"></a>cmake升级</h5><p><a href=\"https://cmake.org/download/\" target=\"_blank\" rel=\"noopener\">cmake下载</a>，选择最新的下载即可，然后执行安装三部曲</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake version &gt; 3.18.0</span><br></pre></td></tr></table></figure>\n<h5 id=\"curl-devel下载\"><a href=\"#curl-devel下载\" class=\"headerlink\" title=\"curl-devel下载\"></a>curl-devel下载</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install curl-devel -y</span><br></pre></td></tr></table></figure>\n<h5 id=\"编译-1\"><a href=\"#编译-1\" class=\"headerlink\" title=\"编译\"></a>编译</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd pistache</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake -G &quot;Unix Makefiles&quot; -DCMAKE_BUILD_TYPE=Release -DPISTACHE_BUILD_EXAMPLES=true -DPISTACHE_BUILD_TESTS=true -DPISTACHE_BUILD_DOCS=false -DPISTACHE_USE_SSL=true -DCMAKE_INSTALL_PREFIX=/usr/local/pistache ..</span><br><span class=\"line\">make -j 4</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h3><p><code>注意，这个在使用的时候需要选择c++的标准,设置</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">g++ -std=c++14 #一般常用的是c++11</span><br></pre></td></tr></table></figure>\n"},{"title":"docker-docker常用命令","abbrlink":2019996800,"date":"2020-05-25T08:50:55.000Z","_content":"\n记录一下自己在工作中常用的docker命令\n\n##### 安装\n\n~~~\nyum -y install docker\n~~~\n\n~~~\nsystemctl start docker\n~~~\n\n验证是否可以正常运行\n\n~~~\ndocker run hello-world\n~~~\n\n### 镜像\n\n##### 镜像构建通过dockfile\n\n~~~\ndocker build -t datatom/video-worker:v4.2.0 -f Dockerfile .\n~~~\n\n##### 镜像打包\n\n~~~\ndocker save -o video-worker.v4.2.0.tar datatom/video-worker:v4.2.0\n~~~\n\n##### 镜像导入\n\n~~~\ndocker load -i video-worker.v4.2.0.tar\n~~~\n\n##### 查看镜像\n\n~~~\ndocker images\n~~~\n\n![docker.png](/images/docker/docker.png)\n\n##### 删除镜像\n\n~~~\ndocker rmi IMAGEID \n~~~\n\n如果当前镜像正在被容器使用，则需要先删除容器，可以使用如下命令删除\n\n~~~\ndocker rm $(docker ps -a | grep IMAGEID|awk '{print $1}') -f\ndocker rmi IMAGEID\n~~~\n\n##### 删除none镜像\n\n~~~\ndocker rmi $(docker images | grep '<none>'|awk '{print $3}') -f\n~~~\n\n##### 镜像运行\n\n~~~\ndocker run -it e2cbe0447a2b /bin/bash\n~~~\n\n镜像运行时添加环境变量\n\n~~~\ndocker run -e MEDIA_REDIS_IP=127.0.0.1 -e MEDIA_REDIS_PORT=5555  -it d3796bd153f8 /bin/bash\n~~~\n\n### 容器\n\n##### 查看正在运行的容器\n\n~~~\ndocker ps -a\n~~~\n\n##### 停止容器\n\n~~~\ndocker stop CONTAINERID\n~~~\n\n##### 删除容器\n\n~~~\ndocker rm CONTAINERID\n~~~\n\n##### 强制删除\n\n~~~\ndocker rm CONTAINERID -f\n~~~\n\n### tag\n\n##### 修改镜像的tagid\n\n~~~\ndocker  tag   f92b7e4509da  datatom/image-worker:v4.1.1\n~~~\n\n\n\n\n\n\n\n\n\n","source":"_posts/docker-docker常用命令.md","raw":"---\ntitle: docker-docker常用命令\ncategories: Docker\ntags: cmd\nabbrlink: 2019996800\ndate: 2020-05-25 16:50:55\n---\n\n记录一下自己在工作中常用的docker命令\n\n##### 安装\n\n~~~\nyum -y install docker\n~~~\n\n~~~\nsystemctl start docker\n~~~\n\n验证是否可以正常运行\n\n~~~\ndocker run hello-world\n~~~\n\n### 镜像\n\n##### 镜像构建通过dockfile\n\n~~~\ndocker build -t datatom/video-worker:v4.2.0 -f Dockerfile .\n~~~\n\n##### 镜像打包\n\n~~~\ndocker save -o video-worker.v4.2.0.tar datatom/video-worker:v4.2.0\n~~~\n\n##### 镜像导入\n\n~~~\ndocker load -i video-worker.v4.2.0.tar\n~~~\n\n##### 查看镜像\n\n~~~\ndocker images\n~~~\n\n![docker.png](/images/docker/docker.png)\n\n##### 删除镜像\n\n~~~\ndocker rmi IMAGEID \n~~~\n\n如果当前镜像正在被容器使用，则需要先删除容器，可以使用如下命令删除\n\n~~~\ndocker rm $(docker ps -a | grep IMAGEID|awk '{print $1}') -f\ndocker rmi IMAGEID\n~~~\n\n##### 删除none镜像\n\n~~~\ndocker rmi $(docker images | grep '<none>'|awk '{print $3}') -f\n~~~\n\n##### 镜像运行\n\n~~~\ndocker run -it e2cbe0447a2b /bin/bash\n~~~\n\n镜像运行时添加环境变量\n\n~~~\ndocker run -e MEDIA_REDIS_IP=127.0.0.1 -e MEDIA_REDIS_PORT=5555  -it d3796bd153f8 /bin/bash\n~~~\n\n### 容器\n\n##### 查看正在运行的容器\n\n~~~\ndocker ps -a\n~~~\n\n##### 停止容器\n\n~~~\ndocker stop CONTAINERID\n~~~\n\n##### 删除容器\n\n~~~\ndocker rm CONTAINERID\n~~~\n\n##### 强制删除\n\n~~~\ndocker rm CONTAINERID -f\n~~~\n\n### tag\n\n##### 修改镜像的tagid\n\n~~~\ndocker  tag   f92b7e4509da  datatom/image-worker:v4.1.1\n~~~\n\n\n\n\n\n\n\n\n\n","slug":"docker-docker常用命令","published":1,"updated":"2021-02-08T05:47:04.028Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw60016lkq5yc84vdhn","content":"<p>记录一下自己在工作中常用的docker命令</p>\n<h5 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n<p>验证是否可以正常运行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run hello-world</span><br></pre></td></tr></table></figure>\n<h3 id=\"镜像\"><a href=\"#镜像\" class=\"headerlink\" title=\"镜像\"></a>镜像</h3><h5 id=\"镜像构建通过dockfile\"><a href=\"#镜像构建通过dockfile\" class=\"headerlink\" title=\"镜像构建通过dockfile\"></a>镜像构建通过dockfile</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t datatom/video-worker:v4.2.0 -f Dockerfile .</span><br></pre></td></tr></table></figure>\n<h5 id=\"镜像打包\"><a href=\"#镜像打包\" class=\"headerlink\" title=\"镜像打包\"></a>镜像打包</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save -o video-worker.v4.2.0.tar datatom/video-worker:v4.2.0</span><br></pre></td></tr></table></figure>\n<h5 id=\"镜像导入\"><a href=\"#镜像导入\" class=\"headerlink\" title=\"镜像导入\"></a>镜像导入</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load -i video-worker.v4.2.0.tar</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看镜像\"><a href=\"#查看镜像\" class=\"headerlink\" title=\"查看镜像\"></a>查看镜像</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker/docker.png\" alt=\"docker.png\"></p>\n<h5 id=\"删除镜像\"><a href=\"#删除镜像\" class=\"headerlink\" title=\"删除镜像\"></a>删除镜像</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi IMAGEID</span><br></pre></td></tr></table></figure>\n<p>如果当前镜像正在被容器使用，则需要先删除容器，可以使用如下命令删除</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm $(docker ps -a | grep IMAGEID|awk &apos;&#123;print $1&#125;&apos;) -f</span><br><span class=\"line\">docker rmi IMAGEID</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除none镜像\"><a href=\"#删除none镜像\" class=\"headerlink\" title=\"删除none镜像\"></a>删除none镜像</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi $(docker images | grep &apos;&lt;none&gt;&apos;|awk &apos;&#123;print $3&#125;&apos;) -f</span><br></pre></td></tr></table></figure>\n<h5 id=\"镜像运行\"><a href=\"#镜像运行\" class=\"headerlink\" title=\"镜像运行\"></a>镜像运行</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it e2cbe0447a2b /bin/bash</span><br></pre></td></tr></table></figure>\n<p>镜像运行时添加环境变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -e MEDIA_REDIS_IP=127.0.0.1 -e MEDIA_REDIS_PORT=5555  -it d3796bd153f8 /bin/bash</span><br></pre></td></tr></table></figure>\n<h3 id=\"容器\"><a href=\"#容器\" class=\"headerlink\" title=\"容器\"></a>容器</h3><h5 id=\"查看正在运行的容器\"><a href=\"#查看正在运行的容器\" class=\"headerlink\" title=\"查看正在运行的容器\"></a>查看正在运行的容器</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a</span><br></pre></td></tr></table></figure>\n<h5 id=\"停止容器\"><a href=\"#停止容器\" class=\"headerlink\" title=\"停止容器\"></a>停止容器</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop CONTAINERID</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除容器\"><a href=\"#删除容器\" class=\"headerlink\" title=\"删除容器\"></a>删除容器</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm CONTAINERID</span><br></pre></td></tr></table></figure>\n<h5 id=\"强制删除\"><a href=\"#强制删除\" class=\"headerlink\" title=\"强制删除\"></a>强制删除</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm CONTAINERID -f</span><br></pre></td></tr></table></figure>\n<h3 id=\"tag\"><a href=\"#tag\" class=\"headerlink\" title=\"tag\"></a>tag</h3><h5 id=\"修改镜像的tagid\"><a href=\"#修改镜像的tagid\" class=\"headerlink\" title=\"修改镜像的tagid\"></a>修改镜像的tagid</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker  tag   f92b7e4509da  datatom/image-worker:v4.1.1</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>记录一下自己在工作中常用的docker命令</p>\n<h5 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install docker</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start docker</span><br></pre></td></tr></table></figure>\n<p>验证是否可以正常运行</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run hello-world</span><br></pre></td></tr></table></figure>\n<h3 id=\"镜像\"><a href=\"#镜像\" class=\"headerlink\" title=\"镜像\"></a>镜像</h3><h5 id=\"镜像构建通过dockfile\"><a href=\"#镜像构建通过dockfile\" class=\"headerlink\" title=\"镜像构建通过dockfile\"></a>镜像构建通过dockfile</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker build -t datatom/video-worker:v4.2.0 -f Dockerfile .</span><br></pre></td></tr></table></figure>\n<h5 id=\"镜像打包\"><a href=\"#镜像打包\" class=\"headerlink\" title=\"镜像打包\"></a>镜像打包</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker save -o video-worker.v4.2.0.tar datatom/video-worker:v4.2.0</span><br></pre></td></tr></table></figure>\n<h5 id=\"镜像导入\"><a href=\"#镜像导入\" class=\"headerlink\" title=\"镜像导入\"></a>镜像导入</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker load -i video-worker.v4.2.0.tar</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看镜像\"><a href=\"#查看镜像\" class=\"headerlink\" title=\"查看镜像\"></a>查看镜像</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker images</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/docker/docker.png\" alt=\"docker.png\"></p>\n<h5 id=\"删除镜像\"><a href=\"#删除镜像\" class=\"headerlink\" title=\"删除镜像\"></a>删除镜像</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi IMAGEID</span><br></pre></td></tr></table></figure>\n<p>如果当前镜像正在被容器使用，则需要先删除容器，可以使用如下命令删除</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm $(docker ps -a | grep IMAGEID|awk &apos;&#123;print $1&#125;&apos;) -f</span><br><span class=\"line\">docker rmi IMAGEID</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除none镜像\"><a href=\"#删除none镜像\" class=\"headerlink\" title=\"删除none镜像\"></a>删除none镜像</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rmi $(docker images | grep &apos;&lt;none&gt;&apos;|awk &apos;&#123;print $3&#125;&apos;) -f</span><br></pre></td></tr></table></figure>\n<h5 id=\"镜像运行\"><a href=\"#镜像运行\" class=\"headerlink\" title=\"镜像运行\"></a>镜像运行</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -it e2cbe0447a2b /bin/bash</span><br></pre></td></tr></table></figure>\n<p>镜像运行时添加环境变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -e MEDIA_REDIS_IP=127.0.0.1 -e MEDIA_REDIS_PORT=5555  -it d3796bd153f8 /bin/bash</span><br></pre></td></tr></table></figure>\n<h3 id=\"容器\"><a href=\"#容器\" class=\"headerlink\" title=\"容器\"></a>容器</h3><h5 id=\"查看正在运行的容器\"><a href=\"#查看正在运行的容器\" class=\"headerlink\" title=\"查看正在运行的容器\"></a>查看正在运行的容器</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a</span><br></pre></td></tr></table></figure>\n<h5 id=\"停止容器\"><a href=\"#停止容器\" class=\"headerlink\" title=\"停止容器\"></a>停止容器</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker stop CONTAINERID</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除容器\"><a href=\"#删除容器\" class=\"headerlink\" title=\"删除容器\"></a>删除容器</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm CONTAINERID</span><br></pre></td></tr></table></figure>\n<h5 id=\"强制删除\"><a href=\"#强制删除\" class=\"headerlink\" title=\"强制删除\"></a>强制删除</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker rm CONTAINERID -f</span><br></pre></td></tr></table></figure>\n<h3 id=\"tag\"><a href=\"#tag\" class=\"headerlink\" title=\"tag\"></a>tag</h3><h5 id=\"修改镜像的tagid\"><a href=\"#修改镜像的tagid\" class=\"headerlink\" title=\"修改镜像的tagid\"></a>修改镜像的tagid</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker  tag   f92b7e4509da  datatom/image-worker:v4.1.1</span><br></pre></td></tr></table></figure>\n"},{"title":"cuda-cuda10.0安装","abbrlink":2055195890,"date":"2020-05-07T02:48:26.000Z","_content":"\n​\t\t在转码的过程中，我们可以使用硬件来进行转码的加速，今天记录一下在Centos7环境下安装驱动以及cuda模块。\n\n### 下载驱动\n\n`如果打算安装CUDA10.0及以上的版本则不需要单独安装驱动，cuda10.0自带驱动驱动`**忽略该驱动的安装**\n\n[驱动下载地址](https://www.nvidia.cn/Download/Find.aspx?lang=cn&QNF=1)\n\n例如我们下载Quadro P2000 linux64的驱动\n\n![图片1.png](/images/cuda/图片1.png)\n\n![图片2.png](/images/cuda/图片2.png)\n\n之所以安装这个驱动是因为要安装的cuda10.0也是410的，之后运行安装驱动程序就好了。\n\n\n\n### 安装cuda10.0\n\n##### 1，下载安装包\n\n​\t[安装包下载](https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&target_distro=CentOS&target_version=7&target_type=runfilelocal)\t在该网站上下载安装包\n\n![图片3.png](/images/cuda/图片3.png)\n\n##### 2，版本选择\n\n~~~\n通过以下按钮选择历史版本的cuda，找到10.0下载，然后选择对应的系统\n~~~\n\n![图片4.png](/images/cuda/图片4.png)\n\n##### 3，运行.run文件\n\n~~~\n下载完安装包放在linux上直接运行.run文件\n\nchmod +x cuda_10.0.130_410.48_linux.run \n./cuda_10.0.130_410.48_linux.run\n~~~\n\n##### 4，然后一直按回车键直到：\n\n![图片5.png](/images/cuda/图片5.png)\n\n~~~\n回答：accept\n~~~\n\n##### 5，是否安装驱动\n\n![图片6.png](/images/cuda/图片6.png)\n\n~~~\n是否安装驱动，这里选择安装：y,因为我们自己没有提前安装驱动，如果提前安装过驱动，这里就不选择安装：n\n~~~\n\n##### 6，是否安装OpenGL\n\n![图片7.png](/images/cuda/图片7.png)\n\n~~~\n选择;n\n~~~\n\n##### 7，是否安装x-config\n\n![图片8.png](/images/cuda/图片8.png)\n\n~~~\n选择：n\n~~~\n\n##### 8，是否安装Toolkit\n\n![图片10.png](/images/cuda/图片10.png)\n\n~~~\n选择：y\n~~~\n\n##### 9，cuda目录\n\n![图片11.png](/images/cuda/图片11.png)\n\n~~~\n直接回车，选择默认安装路径\n~~~\n\n##### 10，是否创建软连接\n\n![图片12.png](/images/cuda/图片12.png)\n\n~~~\n选择：y\n~~~\n\n##### 11，是否安装示例\n\n![图片13.png](/images/cuda/图片13.png)\n\n~~~\n为了节约空间，这个不安装\n选择：n\n~~~\n\n##### 12，然后开始安装\n\n![图片14.png](/images/cuda/图片14.png)\n\n~~~\n表示安装成功\n~~~\n\n##### 13，添加配置文件\n\n~~~\nvim  /etc/profile\n写入：\nexport PATH=/usr/local/cuda-10.0/bin:$PATH\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH\n保存：\nsource /etc/profile\n~~~\n\n##### 14，卸载驱动及cuda\n\n![图片15.png](/images/cuda/图片15.png)\n\n<font color=\"red\">**注意**</font>\n\n`1,千万不要重复安装显卡驱动，会导致系统损坏`\n\n`2.升级cuda的时候，一定要将旧版本的cuda卸载干净，否则会出现意想不到的错误`\n\n##### 15，查看命令\n\n~~~\n1，检查显卡类型\nyum install pciutils（如果没有这个命令，则下载）\nlspci | grep VGA\n~~~\n\n![图片17.png](/images/cuda/图片17.png)\n\n~~~\n2，检查安装是否成功\nnvidia-smi\n~~~\n\n![图片16.png](/images/cuda/图片16.png)\n\n\n\n### 错误处理\n\n##### 1， /usr/bin/perl: bad interpreter: No such file or directory\n\n~~~\nyum install gcc\nyum install perl\n~~~\n\n##### 2，kernel源安装\n\n~~~\n检查系统版本\nuname -a\nyum install kernel-devel-$(uname -r) kernel-headers-$(uname -r)\n先查看源是否相同，如果没有则需要下载\n~~~\n\n##### 3，禁用nouveau（对某些版本需要）\n\n###### 1，修改文件\n\n~~~\n1，修改文件\ncd /etc/modprobe.d\nvim nvidia-installer-disable-nouveau.conf（如果没有这个文件，则手动生成）\n \n 内容：\n # generated by nvidia-installer\n blacklist nouveau\n options nouveau modeset=0\n\n~~~\n\n###### 2，备份 initramfs\n\n~~~\n    mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak\n~~~\n\n###### 3，重建 initramfs\n\n~~~\ndracut -v /boot/initramfs-$(uname -r).img $(uname -r)\n~~~\n\n###### 4，重启机器\n\n~~~\nreboot\n~~~\n\n###### 5，检查nouveau driver确保没有被加载\n\n~~~\nlsmod | grep nouveau\n没有加载则为空，有加载则如图，说明设置没有生效，需要重新设置\n~~~\n\n![nouveau.png](/images/cuda/nouveau.png)","source":"_posts/cuda-cuda10-0安装.md","raw":"---\ntitle: cuda-cuda10.0安装\ncategories: [Media,video]\ntags:\n  - cuda\nabbrlink: 2055195890\ndate: 2020-05-07 10:48:26\n---\n\n​\t\t在转码的过程中，我们可以使用硬件来进行转码的加速，今天记录一下在Centos7环境下安装驱动以及cuda模块。\n\n### 下载驱动\n\n`如果打算安装CUDA10.0及以上的版本则不需要单独安装驱动，cuda10.0自带驱动驱动`**忽略该驱动的安装**\n\n[驱动下载地址](https://www.nvidia.cn/Download/Find.aspx?lang=cn&QNF=1)\n\n例如我们下载Quadro P2000 linux64的驱动\n\n![图片1.png](/images/cuda/图片1.png)\n\n![图片2.png](/images/cuda/图片2.png)\n\n之所以安装这个驱动是因为要安装的cuda10.0也是410的，之后运行安装驱动程序就好了。\n\n\n\n### 安装cuda10.0\n\n##### 1，下载安装包\n\n​\t[安装包下载](https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&target_distro=CentOS&target_version=7&target_type=runfilelocal)\t在该网站上下载安装包\n\n![图片3.png](/images/cuda/图片3.png)\n\n##### 2，版本选择\n\n~~~\n通过以下按钮选择历史版本的cuda，找到10.0下载，然后选择对应的系统\n~~~\n\n![图片4.png](/images/cuda/图片4.png)\n\n##### 3，运行.run文件\n\n~~~\n下载完安装包放在linux上直接运行.run文件\n\nchmod +x cuda_10.0.130_410.48_linux.run \n./cuda_10.0.130_410.48_linux.run\n~~~\n\n##### 4，然后一直按回车键直到：\n\n![图片5.png](/images/cuda/图片5.png)\n\n~~~\n回答：accept\n~~~\n\n##### 5，是否安装驱动\n\n![图片6.png](/images/cuda/图片6.png)\n\n~~~\n是否安装驱动，这里选择安装：y,因为我们自己没有提前安装驱动，如果提前安装过驱动，这里就不选择安装：n\n~~~\n\n##### 6，是否安装OpenGL\n\n![图片7.png](/images/cuda/图片7.png)\n\n~~~\n选择;n\n~~~\n\n##### 7，是否安装x-config\n\n![图片8.png](/images/cuda/图片8.png)\n\n~~~\n选择：n\n~~~\n\n##### 8，是否安装Toolkit\n\n![图片10.png](/images/cuda/图片10.png)\n\n~~~\n选择：y\n~~~\n\n##### 9，cuda目录\n\n![图片11.png](/images/cuda/图片11.png)\n\n~~~\n直接回车，选择默认安装路径\n~~~\n\n##### 10，是否创建软连接\n\n![图片12.png](/images/cuda/图片12.png)\n\n~~~\n选择：y\n~~~\n\n##### 11，是否安装示例\n\n![图片13.png](/images/cuda/图片13.png)\n\n~~~\n为了节约空间，这个不安装\n选择：n\n~~~\n\n##### 12，然后开始安装\n\n![图片14.png](/images/cuda/图片14.png)\n\n~~~\n表示安装成功\n~~~\n\n##### 13，添加配置文件\n\n~~~\nvim  /etc/profile\n写入：\nexport PATH=/usr/local/cuda-10.0/bin:$PATH\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH\n保存：\nsource /etc/profile\n~~~\n\n##### 14，卸载驱动及cuda\n\n![图片15.png](/images/cuda/图片15.png)\n\n<font color=\"red\">**注意**</font>\n\n`1,千万不要重复安装显卡驱动，会导致系统损坏`\n\n`2.升级cuda的时候，一定要将旧版本的cuda卸载干净，否则会出现意想不到的错误`\n\n##### 15，查看命令\n\n~~~\n1，检查显卡类型\nyum install pciutils（如果没有这个命令，则下载）\nlspci | grep VGA\n~~~\n\n![图片17.png](/images/cuda/图片17.png)\n\n~~~\n2，检查安装是否成功\nnvidia-smi\n~~~\n\n![图片16.png](/images/cuda/图片16.png)\n\n\n\n### 错误处理\n\n##### 1， /usr/bin/perl: bad interpreter: No such file or directory\n\n~~~\nyum install gcc\nyum install perl\n~~~\n\n##### 2，kernel源安装\n\n~~~\n检查系统版本\nuname -a\nyum install kernel-devel-$(uname -r) kernel-headers-$(uname -r)\n先查看源是否相同，如果没有则需要下载\n~~~\n\n##### 3，禁用nouveau（对某些版本需要）\n\n###### 1，修改文件\n\n~~~\n1，修改文件\ncd /etc/modprobe.d\nvim nvidia-installer-disable-nouveau.conf（如果没有这个文件，则手动生成）\n \n 内容：\n # generated by nvidia-installer\n blacklist nouveau\n options nouveau modeset=0\n\n~~~\n\n###### 2，备份 initramfs\n\n~~~\n    mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak\n~~~\n\n###### 3，重建 initramfs\n\n~~~\ndracut -v /boot/initramfs-$(uname -r).img $(uname -r)\n~~~\n\n###### 4，重启机器\n\n~~~\nreboot\n~~~\n\n###### 5，检查nouveau driver确保没有被加载\n\n~~~\nlsmod | grep nouveau\n没有加载则为空，有加载则如图，说明设置没有生效，需要重新设置\n~~~\n\n![nouveau.png](/images/cuda/nouveau.png)","slug":"cuda-cuda10-0安装","published":1,"updated":"2021-02-08T06:46:41.414Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw70018lkq5k5k7tpzf","content":"<p>​        在转码的过程中，我们可以使用硬件来进行转码的加速，今天记录一下在Centos7环境下安装驱动以及cuda模块。</p>\n<h3 id=\"下载驱动\"><a href=\"#下载驱动\" class=\"headerlink\" title=\"下载驱动\"></a>下载驱动</h3><p><code>如果打算安装CUDA10.0及以上的版本则不需要单独安装驱动，cuda10.0自带驱动驱动</code><strong>忽略该驱动的安装</strong></p>\n<p><a href=\"https://www.nvidia.cn/Download/Find.aspx?lang=cn&amp;QNF=1\" target=\"_blank\" rel=\"noopener\">驱动下载地址</a></p>\n<p>例如我们下载Quadro P2000 linux64的驱动</p>\n<p><img src=\"/images/cuda/图片1.png\" alt=\"图片1.png\"></p>\n<p><img src=\"/images/cuda/图片2.png\" alt=\"图片2.png\"></p>\n<p>之所以安装这个驱动是因为要安装的cuda10.0也是410的，之后运行安装驱动程序就好了。</p>\n<h3 id=\"安装cuda10-0\"><a href=\"#安装cuda10-0\" class=\"headerlink\" title=\"安装cuda10.0\"></a>安装cuda10.0</h3><h5 id=\"1，下载安装包\"><a href=\"#1，下载安装包\" class=\"headerlink\" title=\"1，下载安装包\"></a>1，下载安装包</h5><p>​    <a href=\"https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=CentOS&amp;target_version=7&amp;target_type=runfilelocal\" target=\"_blank\" rel=\"noopener\">安装包下载</a>    在该网站上下载安装包</p>\n<p><img src=\"/images/cuda/图片3.png\" alt=\"图片3.png\"></p>\n<h5 id=\"2，版本选择\"><a href=\"#2，版本选择\" class=\"headerlink\" title=\"2，版本选择\"></a>2，版本选择</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">通过以下按钮选择历史版本的cuda，找到10.0下载，然后选择对应的系统</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/图片4.png\" alt=\"图片4.png\"></p>\n<h5 id=\"3，运行-run文件\"><a href=\"#3，运行-run文件\" class=\"headerlink\" title=\"3，运行.run文件\"></a>3，运行.run文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载完安装包放在linux上直接运行.run文件</span><br><span class=\"line\"></span><br><span class=\"line\">chmod +x cuda_10.0.130_410.48_linux.run </span><br><span class=\"line\">./cuda_10.0.130_410.48_linux.run</span><br></pre></td></tr></table></figure>\n<h5 id=\"4，然后一直按回车键直到：\"><a href=\"#4，然后一直按回车键直到：\" class=\"headerlink\" title=\"4，然后一直按回车键直到：\"></a>4，然后一直按回车键直到：</h5><p><img src=\"/images/cuda/图片5.png\" alt=\"图片5.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">回答：accept</span><br></pre></td></tr></table></figure>\n<h5 id=\"5，是否安装驱动\"><a href=\"#5，是否安装驱动\" class=\"headerlink\" title=\"5，是否安装驱动\"></a>5，是否安装驱动</h5><p><img src=\"/images/cuda/图片6.png\" alt=\"图片6.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">是否安装驱动，这里选择安装：y,因为我们自己没有提前安装驱动，如果提前安装过驱动，这里就不选择安装：n</span><br></pre></td></tr></table></figure>\n<h5 id=\"6，是否安装OpenGL\"><a href=\"#6，是否安装OpenGL\" class=\"headerlink\" title=\"6，是否安装OpenGL\"></a>6，是否安装OpenGL</h5><p><img src=\"/images/cuda/图片7.png\" alt=\"图片7.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择;n</span><br></pre></td></tr></table></figure>\n<h5 id=\"7，是否安装x-config\"><a href=\"#7，是否安装x-config\" class=\"headerlink\" title=\"7，是否安装x-config\"></a>7，是否安装x-config</h5><p><img src=\"/images/cuda/图片8.png\" alt=\"图片8.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择：n</span><br></pre></td></tr></table></figure>\n<h5 id=\"8，是否安装Toolkit\"><a href=\"#8，是否安装Toolkit\" class=\"headerlink\" title=\"8，是否安装Toolkit\"></a>8，是否安装Toolkit</h5><p><img src=\"/images/cuda/图片10.png\" alt=\"图片10.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择：y</span><br></pre></td></tr></table></figure>\n<h5 id=\"9，cuda目录\"><a href=\"#9，cuda目录\" class=\"headerlink\" title=\"9，cuda目录\"></a>9，cuda目录</h5><p><img src=\"/images/cuda/图片11.png\" alt=\"图片11.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">直接回车，选择默认安装路径</span><br></pre></td></tr></table></figure>\n<h5 id=\"10，是否创建软连接\"><a href=\"#10，是否创建软连接\" class=\"headerlink\" title=\"10，是否创建软连接\"></a>10，是否创建软连接</h5><p><img src=\"/images/cuda/图片12.png\" alt=\"图片12.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择：y</span><br></pre></td></tr></table></figure>\n<h5 id=\"11，是否安装示例\"><a href=\"#11，是否安装示例\" class=\"headerlink\" title=\"11，是否安装示例\"></a>11，是否安装示例</h5><p><img src=\"/images/cuda/图片13.png\" alt=\"图片13.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">为了节约空间，这个不安装</span><br><span class=\"line\">选择：n</span><br></pre></td></tr></table></figure>\n<h5 id=\"12，然后开始安装\"><a href=\"#12，然后开始安装\" class=\"headerlink\" title=\"12，然后开始安装\"></a>12，然后开始安装</h5><p><img src=\"/images/cuda/图片14.png\" alt=\"图片14.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">表示安装成功</span><br></pre></td></tr></table></figure>\n<h5 id=\"13，添加配置文件\"><a href=\"#13，添加配置文件\" class=\"headerlink\" title=\"13，添加配置文件\"></a>13，添加配置文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim  /etc/profile</span><br><span class=\"line\">写入：</span><br><span class=\"line\">export PATH=/usr/local/cuda-10.0/bin:$PATH</span><br><span class=\"line\">export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH</span><br><span class=\"line\">保存：</span><br><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n<h5 id=\"14，卸载驱动及cuda\"><a href=\"#14，卸载驱动及cuda\" class=\"headerlink\" title=\"14，卸载驱动及cuda\"></a>14，卸载驱动及cuda</h5><p><img src=\"/images/cuda/图片15.png\" alt=\"图片15.png\"></p>\n<font color=\"red\"><strong>注意</strong></font>\n\n<p><code>1,千万不要重复安装显卡驱动，会导致系统损坏</code></p>\n<p><code>2.升级cuda的时候，一定要将旧版本的cuda卸载干净，否则会出现意想不到的错误</code></p>\n<h5 id=\"15，查看命令\"><a href=\"#15，查看命令\" class=\"headerlink\" title=\"15，查看命令\"></a>15，查看命令</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，检查显卡类型</span><br><span class=\"line\">yum install pciutils（如果没有这个命令，则下载）</span><br><span class=\"line\">lspci | grep VGA</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/图片17.png\" alt=\"图片17.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2，检查安装是否成功</span><br><span class=\"line\">nvidia-smi</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/图片16.png\" alt=\"图片16.png\"></p>\n<h3 id=\"错误处理\"><a href=\"#错误处理\" class=\"headerlink\" title=\"错误处理\"></a>错误处理</h3><h5 id=\"1，-usr-bin-perl-bad-interpreter-No-such-file-or-directory\"><a href=\"#1，-usr-bin-perl-bad-interpreter-No-such-file-or-directory\" class=\"headerlink\" title=\"1， /usr/bin/perl: bad interpreter: No such file or directory\"></a>1， /usr/bin/perl: bad interpreter: No such file or directory</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc</span><br><span class=\"line\">yum install perl</span><br></pre></td></tr></table></figure>\n<h5 id=\"2，kernel源安装\"><a href=\"#2，kernel源安装\" class=\"headerlink\" title=\"2，kernel源安装\"></a>2，kernel源安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">检查系统版本</span><br><span class=\"line\">uname -a</span><br><span class=\"line\">yum install kernel-devel-$(uname -r) kernel-headers-$(uname -r)</span><br><span class=\"line\">先查看源是否相同，如果没有则需要下载</span><br></pre></td></tr></table></figure>\n<h5 id=\"3，禁用nouveau（对某些版本需要）\"><a href=\"#3，禁用nouveau（对某些版本需要）\" class=\"headerlink\" title=\"3，禁用nouveau（对某些版本需要）\"></a>3，禁用nouveau（对某些版本需要）</h5><h6 id=\"1，修改文件\"><a href=\"#1，修改文件\" class=\"headerlink\" title=\"1，修改文件\"></a>1，修改文件</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，修改文件</span><br><span class=\"line\">cd /etc/modprobe.d</span><br><span class=\"line\">vim nvidia-installer-disable-nouveau.conf（如果没有这个文件，则手动生成）</span><br><span class=\"line\"> </span><br><span class=\"line\"> 内容：</span><br><span class=\"line\"> # generated by nvidia-installer</span><br><span class=\"line\"> blacklist nouveau</span><br><span class=\"line\"> options nouveau modeset=0</span><br></pre></td></tr></table></figure>\n<h6 id=\"2，备份-initramfs\"><a href=\"#2，备份-initramfs\" class=\"headerlink\" title=\"2，备份 initramfs\"></a>2，备份 initramfs</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak</span><br></pre></td></tr></table></figure>\n<h6 id=\"3，重建-initramfs\"><a href=\"#3，重建-initramfs\" class=\"headerlink\" title=\"3，重建 initramfs\"></a>3，重建 initramfs</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dracut -v /boot/initramfs-$(uname -r).img $(uname -r)</span><br></pre></td></tr></table></figure>\n<h6 id=\"4，重启机器\"><a href=\"#4，重启机器\" class=\"headerlink\" title=\"4，重启机器\"></a>4，重启机器</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n<h6 id=\"5，检查nouveau-driver确保没有被加载\"><a href=\"#5，检查nouveau-driver确保没有被加载\" class=\"headerlink\" title=\"5，检查nouveau driver确保没有被加载\"></a>5，检查nouveau driver确保没有被加载</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lsmod | grep nouveau</span><br><span class=\"line\">没有加载则为空，有加载则如图，说明设置没有生效，需要重新设置</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/nouveau.png\" alt=\"nouveau.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p>​        在转码的过程中，我们可以使用硬件来进行转码的加速，今天记录一下在Centos7环境下安装驱动以及cuda模块。</p>\n<h3 id=\"下载驱动\"><a href=\"#下载驱动\" class=\"headerlink\" title=\"下载驱动\"></a>下载驱动</h3><p><code>如果打算安装CUDA10.0及以上的版本则不需要单独安装驱动，cuda10.0自带驱动驱动</code><strong>忽略该驱动的安装</strong></p>\n<p><a href=\"https://www.nvidia.cn/Download/Find.aspx?lang=cn&amp;QNF=1\" target=\"_blank\" rel=\"noopener\">驱动下载地址</a></p>\n<p>例如我们下载Quadro P2000 linux64的驱动</p>\n<p><img src=\"/images/cuda/图片1.png\" alt=\"图片1.png\"></p>\n<p><img src=\"/images/cuda/图片2.png\" alt=\"图片2.png\"></p>\n<p>之所以安装这个驱动是因为要安装的cuda10.0也是410的，之后运行安装驱动程序就好了。</p>\n<h3 id=\"安装cuda10-0\"><a href=\"#安装cuda10-0\" class=\"headerlink\" title=\"安装cuda10.0\"></a>安装cuda10.0</h3><h5 id=\"1，下载安装包\"><a href=\"#1，下载安装包\" class=\"headerlink\" title=\"1，下载安装包\"></a>1，下载安装包</h5><p>​    <a href=\"https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=CentOS&amp;target_version=7&amp;target_type=runfilelocal\" target=\"_blank\" rel=\"noopener\">安装包下载</a>    在该网站上下载安装包</p>\n<p><img src=\"/images/cuda/图片3.png\" alt=\"图片3.png\"></p>\n<h5 id=\"2，版本选择\"><a href=\"#2，版本选择\" class=\"headerlink\" title=\"2，版本选择\"></a>2，版本选择</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">通过以下按钮选择历史版本的cuda，找到10.0下载，然后选择对应的系统</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/图片4.png\" alt=\"图片4.png\"></p>\n<h5 id=\"3，运行-run文件\"><a href=\"#3，运行-run文件\" class=\"headerlink\" title=\"3，运行.run文件\"></a>3，运行.run文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载完安装包放在linux上直接运行.run文件</span><br><span class=\"line\"></span><br><span class=\"line\">chmod +x cuda_10.0.130_410.48_linux.run </span><br><span class=\"line\">./cuda_10.0.130_410.48_linux.run</span><br></pre></td></tr></table></figure>\n<h5 id=\"4，然后一直按回车键直到：\"><a href=\"#4，然后一直按回车键直到：\" class=\"headerlink\" title=\"4，然后一直按回车键直到：\"></a>4，然后一直按回车键直到：</h5><p><img src=\"/images/cuda/图片5.png\" alt=\"图片5.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">回答：accept</span><br></pre></td></tr></table></figure>\n<h5 id=\"5，是否安装驱动\"><a href=\"#5，是否安装驱动\" class=\"headerlink\" title=\"5，是否安装驱动\"></a>5，是否安装驱动</h5><p><img src=\"/images/cuda/图片6.png\" alt=\"图片6.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">是否安装驱动，这里选择安装：y,因为我们自己没有提前安装驱动，如果提前安装过驱动，这里就不选择安装：n</span><br></pre></td></tr></table></figure>\n<h5 id=\"6，是否安装OpenGL\"><a href=\"#6，是否安装OpenGL\" class=\"headerlink\" title=\"6，是否安装OpenGL\"></a>6，是否安装OpenGL</h5><p><img src=\"/images/cuda/图片7.png\" alt=\"图片7.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择;n</span><br></pre></td></tr></table></figure>\n<h5 id=\"7，是否安装x-config\"><a href=\"#7，是否安装x-config\" class=\"headerlink\" title=\"7，是否安装x-config\"></a>7，是否安装x-config</h5><p><img src=\"/images/cuda/图片8.png\" alt=\"图片8.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择：n</span><br></pre></td></tr></table></figure>\n<h5 id=\"8，是否安装Toolkit\"><a href=\"#8，是否安装Toolkit\" class=\"headerlink\" title=\"8，是否安装Toolkit\"></a>8，是否安装Toolkit</h5><p><img src=\"/images/cuda/图片10.png\" alt=\"图片10.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择：y</span><br></pre></td></tr></table></figure>\n<h5 id=\"9，cuda目录\"><a href=\"#9，cuda目录\" class=\"headerlink\" title=\"9，cuda目录\"></a>9，cuda目录</h5><p><img src=\"/images/cuda/图片11.png\" alt=\"图片11.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">直接回车，选择默认安装路径</span><br></pre></td></tr></table></figure>\n<h5 id=\"10，是否创建软连接\"><a href=\"#10，是否创建软连接\" class=\"headerlink\" title=\"10，是否创建软连接\"></a>10，是否创建软连接</h5><p><img src=\"/images/cuda/图片12.png\" alt=\"图片12.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">选择：y</span><br></pre></td></tr></table></figure>\n<h5 id=\"11，是否安装示例\"><a href=\"#11，是否安装示例\" class=\"headerlink\" title=\"11，是否安装示例\"></a>11，是否安装示例</h5><p><img src=\"/images/cuda/图片13.png\" alt=\"图片13.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">为了节约空间，这个不安装</span><br><span class=\"line\">选择：n</span><br></pre></td></tr></table></figure>\n<h5 id=\"12，然后开始安装\"><a href=\"#12，然后开始安装\" class=\"headerlink\" title=\"12，然后开始安装\"></a>12，然后开始安装</h5><p><img src=\"/images/cuda/图片14.png\" alt=\"图片14.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">表示安装成功</span><br></pre></td></tr></table></figure>\n<h5 id=\"13，添加配置文件\"><a href=\"#13，添加配置文件\" class=\"headerlink\" title=\"13，添加配置文件\"></a>13，添加配置文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim  /etc/profile</span><br><span class=\"line\">写入：</span><br><span class=\"line\">export PATH=/usr/local/cuda-10.0/bin:$PATH</span><br><span class=\"line\">export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH</span><br><span class=\"line\">保存：</span><br><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n<h5 id=\"14，卸载驱动及cuda\"><a href=\"#14，卸载驱动及cuda\" class=\"headerlink\" title=\"14，卸载驱动及cuda\"></a>14，卸载驱动及cuda</h5><p><img src=\"/images/cuda/图片15.png\" alt=\"图片15.png\"></p>\n<font color=\"red\"><strong>注意</strong></font>\n\n<p><code>1,千万不要重复安装显卡驱动，会导致系统损坏</code></p>\n<p><code>2.升级cuda的时候，一定要将旧版本的cuda卸载干净，否则会出现意想不到的错误</code></p>\n<h5 id=\"15，查看命令\"><a href=\"#15，查看命令\" class=\"headerlink\" title=\"15，查看命令\"></a>15，查看命令</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，检查显卡类型</span><br><span class=\"line\">yum install pciutils（如果没有这个命令，则下载）</span><br><span class=\"line\">lspci | grep VGA</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/图片17.png\" alt=\"图片17.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2，检查安装是否成功</span><br><span class=\"line\">nvidia-smi</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/图片16.png\" alt=\"图片16.png\"></p>\n<h3 id=\"错误处理\"><a href=\"#错误处理\" class=\"headerlink\" title=\"错误处理\"></a>错误处理</h3><h5 id=\"1，-usr-bin-perl-bad-interpreter-No-such-file-or-directory\"><a href=\"#1，-usr-bin-perl-bad-interpreter-No-such-file-or-directory\" class=\"headerlink\" title=\"1， /usr/bin/perl: bad interpreter: No such file or directory\"></a>1， /usr/bin/perl: bad interpreter: No such file or directory</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc</span><br><span class=\"line\">yum install perl</span><br></pre></td></tr></table></figure>\n<h5 id=\"2，kernel源安装\"><a href=\"#2，kernel源安装\" class=\"headerlink\" title=\"2，kernel源安装\"></a>2，kernel源安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">检查系统版本</span><br><span class=\"line\">uname -a</span><br><span class=\"line\">yum install kernel-devel-$(uname -r) kernel-headers-$(uname -r)</span><br><span class=\"line\">先查看源是否相同，如果没有则需要下载</span><br></pre></td></tr></table></figure>\n<h5 id=\"3，禁用nouveau（对某些版本需要）\"><a href=\"#3，禁用nouveau（对某些版本需要）\" class=\"headerlink\" title=\"3，禁用nouveau（对某些版本需要）\"></a>3，禁用nouveau（对某些版本需要）</h5><h6 id=\"1，修改文件\"><a href=\"#1，修改文件\" class=\"headerlink\" title=\"1，修改文件\"></a>1，修改文件</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，修改文件</span><br><span class=\"line\">cd /etc/modprobe.d</span><br><span class=\"line\">vim nvidia-installer-disable-nouveau.conf（如果没有这个文件，则手动生成）</span><br><span class=\"line\"> </span><br><span class=\"line\"> 内容：</span><br><span class=\"line\"> # generated by nvidia-installer</span><br><span class=\"line\"> blacklist nouveau</span><br><span class=\"line\"> options nouveau modeset=0</span><br></pre></td></tr></table></figure>\n<h6 id=\"2，备份-initramfs\"><a href=\"#2，备份-initramfs\" class=\"headerlink\" title=\"2，备份 initramfs\"></a>2，备份 initramfs</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak</span><br></pre></td></tr></table></figure>\n<h6 id=\"3，重建-initramfs\"><a href=\"#3，重建-initramfs\" class=\"headerlink\" title=\"3，重建 initramfs\"></a>3，重建 initramfs</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dracut -v /boot/initramfs-$(uname -r).img $(uname -r)</span><br></pre></td></tr></table></figure>\n<h6 id=\"4，重启机器\"><a href=\"#4，重启机器\" class=\"headerlink\" title=\"4，重启机器\"></a>4，重启机器</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">reboot</span><br></pre></td></tr></table></figure>\n<h6 id=\"5，检查nouveau-driver确保没有被加载\"><a href=\"#5，检查nouveau-driver确保没有被加载\" class=\"headerlink\" title=\"5，检查nouveau driver确保没有被加载\"></a>5，检查nouveau driver确保没有被加载</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lsmod | grep nouveau</span><br><span class=\"line\">没有加载则为空，有加载则如图，说明设置没有生效，需要重新设置</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuda/nouveau.png\" alt=\"nouveau.png\"></p>\n"},{"title":"ffmpeg_avfilter的使用详解","abbrlink":4030313287,"date":"2019-03-27T02:23:18.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;在ffmpeg，我们对视音频进行一些处理，如添加水印，有个很方便的库，avfilter，\n\n过滤的过程\n解码后的画面 -> buffer过滤器 -> 其他过滤器 -> buffersink 过滤器 -> 处理好的画面","source":"_posts/ffmpeg-avfilter的使用详解.md","raw":"---\ntitle: ffmpeg_avfilter的使用详解\ncategories: [Media,video]\ntags:\n  - ffmpeg\nabbrlink: 4030313287\ndate: 2019-03-27 10:23:18\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;在ffmpeg，我们对视音频进行一些处理，如添加水印，有个很方便的库，avfilter，\n\n过滤的过程\n解码后的画面 -> buffer过滤器 -> 其他过滤器 -> buffersink 过滤器 -> 处理好的画面","slug":"ffmpeg-avfilter的使用详解","published":1,"updated":"2021-02-08T06:44:49.677Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxw9001dlkq5duet7ugg","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;在ffmpeg，我们对视音频进行一些处理，如添加水印，有个很方便的库，avfilter，</p>\n<p>过滤的过程<br>解码后的画面 -&gt; buffer过滤器 -&gt; 其他过滤器 -&gt; buffersink 过滤器 -&gt; 处理好的画面</p>\n","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;在ffmpeg，我们对视音频进行一些处理，如添加水印，有个很方便的库，avfilter，</p>\n<p>过滤的过程<br>解码后的画面 -&gt; buffer过滤器 -&gt; 其他过滤器 -&gt; buffersink 过滤器 -&gt; 处理好的画面</p>\n"},{"title":"cpp-日志库LOG的使用","abbrlink":1373770285,"date":"2020-09-11T09:52:33.000Z","_content":"\n​\t在开发的时候，我们经常要写日志，这里提供一个日志库的使用方法；\n\n​\t目前我常用的cpp的日志库是这个[easyloggingcpp](https://github.com/amrayn/easyloggingpp)，官网有详细的一些说明怎么使用的，我这里记录一些使用中需要注意的地方：\n\n### 编译\n\neasyloggingcpp编译的时候比较的简单，直接把easyloggingcpp.h和easyloggingcpp.cpp放到自己的项目中进行编译就好了。\n\n### 多线程中使用\n\n在多线程中使用，需要设置几个比较重要的点，不然就会抛出异常的错误，导致程序中断，有以下几点\n\n1. 在编译的时候需要需要添加参数，`-DELPP_THREAD_SAFE`用以支持多线程，使用cmake进行编译时，需要在Cmakefile文件中设置如下参数，并且cmake的版本需要在3.0以上\n\n   ~~~\n   SET(CMAKE_CXX_FLAGS \"-DELPP_THREAD_SAFE\")\n   ~~~\n\n2. 在使用的文件中，需要预定义一个变量\n\n   ~~~\n   #define ELPP_THREAD_SAFE\n   ~~~\n\n### 主进程使用\n\n我们需要在程序的入口位置设置下面的环境变量\n\n~~~\nINITIALIZE_EASYLOGGINGPP\n~~~\n\n","source":"_posts/cpp-日志库LOG的使用.md","raw":"---\ntitle: cpp-日志库LOG的使用\ncategories: [Cpp,log]\ntags:\n  - easyloggingcpp\nabbrlink: 1373770285\ndate: 2020-09-11 17:52:33\n---\n\n​\t在开发的时候，我们经常要写日志，这里提供一个日志库的使用方法；\n\n​\t目前我常用的cpp的日志库是这个[easyloggingcpp](https://github.com/amrayn/easyloggingpp)，官网有详细的一些说明怎么使用的，我这里记录一些使用中需要注意的地方：\n\n### 编译\n\neasyloggingcpp编译的时候比较的简单，直接把easyloggingcpp.h和easyloggingcpp.cpp放到自己的项目中进行编译就好了。\n\n### 多线程中使用\n\n在多线程中使用，需要设置几个比较重要的点，不然就会抛出异常的错误，导致程序中断，有以下几点\n\n1. 在编译的时候需要需要添加参数，`-DELPP_THREAD_SAFE`用以支持多线程，使用cmake进行编译时，需要在Cmakefile文件中设置如下参数，并且cmake的版本需要在3.0以上\n\n   ~~~\n   SET(CMAKE_CXX_FLAGS \"-DELPP_THREAD_SAFE\")\n   ~~~\n\n2. 在使用的文件中，需要预定义一个变量\n\n   ~~~\n   #define ELPP_THREAD_SAFE\n   ~~~\n\n### 主进程使用\n\n我们需要在程序的入口位置设置下面的环境变量\n\n~~~\nINITIALIZE_EASYLOGGINGPP\n~~~\n\n","slug":"cpp-日志库LOG的使用","published":1,"updated":"2021-02-08T06:57:38.499Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwb001glkq5oqmj3bka","content":"<p>​    在开发的时候，我们经常要写日志，这里提供一个日志库的使用方法；</p>\n<p>​    目前我常用的cpp的日志库是这个<a href=\"https://github.com/amrayn/easyloggingpp\" target=\"_blank\" rel=\"noopener\">easyloggingcpp</a>，官网有详细的一些说明怎么使用的，我这里记录一些使用中需要注意的地方：</p>\n<h3 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h3><p>easyloggingcpp编译的时候比较的简单，直接把easyloggingcpp.h和easyloggingcpp.cpp放到自己的项目中进行编译就好了。</p>\n<h3 id=\"多线程中使用\"><a href=\"#多线程中使用\" class=\"headerlink\" title=\"多线程中使用\"></a>多线程中使用</h3><p>在多线程中使用，需要设置几个比较重要的点，不然就会抛出异常的错误，导致程序中断，有以下几点</p>\n<ol>\n<li><p>在编译的时候需要需要添加参数，<code>-DELPP_THREAD_SAFE</code>用以支持多线程，使用cmake进行编译时，需要在Cmakefile文件中设置如下参数，并且cmake的版本需要在3.0以上</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET(CMAKE_CXX_FLAGS &quot;-DELPP_THREAD_SAFE&quot;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在使用的文件中，需要预定义一个变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#define ELPP_THREAD_SAFE</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"主进程使用\"><a href=\"#主进程使用\" class=\"headerlink\" title=\"主进程使用\"></a>主进程使用</h3><p>我们需要在程序的入口位置设置下面的环境变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INITIALIZE_EASYLOGGINGPP</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>​    在开发的时候，我们经常要写日志，这里提供一个日志库的使用方法；</p>\n<p>​    目前我常用的cpp的日志库是这个<a href=\"https://github.com/amrayn/easyloggingpp\" target=\"_blank\" rel=\"noopener\">easyloggingcpp</a>，官网有详细的一些说明怎么使用的，我这里记录一些使用中需要注意的地方：</p>\n<h3 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h3><p>easyloggingcpp编译的时候比较的简单，直接把easyloggingcpp.h和easyloggingcpp.cpp放到自己的项目中进行编译就好了。</p>\n<h3 id=\"多线程中使用\"><a href=\"#多线程中使用\" class=\"headerlink\" title=\"多线程中使用\"></a>多线程中使用</h3><p>在多线程中使用，需要设置几个比较重要的点，不然就会抛出异常的错误，导致程序中断，有以下几点</p>\n<ol>\n<li><p>在编译的时候需要需要添加参数，<code>-DELPP_THREAD_SAFE</code>用以支持多线程，使用cmake进行编译时，需要在Cmakefile文件中设置如下参数，并且cmake的版本需要在3.0以上</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET(CMAKE_CXX_FLAGS &quot;-DELPP_THREAD_SAFE&quot;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在使用的文件中，需要预定义一个变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#define ELPP_THREAD_SAFE</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"主进程使用\"><a href=\"#主进程使用\" class=\"headerlink\" title=\"主进程使用\"></a>主进程使用</h3><p>我们需要在程序的入口位置设置下面的环境变量</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INITIALIZE_EASYLOGGINGPP</span><br></pre></td></tr></table></figure>\n"},{"title":"ffmpeg-内存io模式(内存区做输入或输出)","abbrlink":2452888490,"date":"2020-10-14T07:03:21.000Z","_content":"\n​\t在转码的过程中，我们有时候需要从远程下载文件，当文件很大的时候会占用本地的磁盘空间，同时下载的时间也比较的长，这时候我们考虑直接读取流信息或者写入流信息来进行操作，而不是上传或者下载整个文件来解决。\n\n### 实现方法\n\n​\t转码的基础逻辑不变，仅仅是在输入输出读取的方式不同，我们需要自己实现输入输出的函数。\n\n#### 关键结构体\n\n​\t`AVIOContext`，我们需要初始化这个结构体来存放内存的数据。\n\n### 内存读取数据\n\n​\t\t转码的基本流程不变，仅仅是在开始读取数据的时候有些不同\n\n#### 读取本地文件\n\n![file](/images/ffmpeg/file.png)\n\n#### 读取流文件\n\n![stream](/images/ffmpeg/stream.png)\n\n![read](/images/ffmpeg/readstream.png)\n\n### ffmpeg内存读取数据\n\n​\t如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。![input.png](/images/ffmpeg/stream/input.png)\n\n`fill_iobuffer` 函数是我们自己实现的输入流的函数，内容如下：\n\n~~~cpp\n   359 //读取流数据\n   360 int fill_iobuffer(void *opaque, uint8_t *buf, int buf_size) {\n   361     string hosts = \"192.168.50.31:7480\";\n   362     string ak = \"11043ee2070d01eb5740f9870dfe3abd\";\n   363     string sk = \"bb31a3a96b829976513ee62b4e28ee3f\";\n   364     S3::Client client(hosts, ak, sk);\n   365     static uint64_t offset = 0;\n   366     uint64_t num;\n   367     try {\n   368         // num  = client.GetObject(\"leopardsrc\", \"video-H263-AC3.avi\",offset,\n   369         // buf_size, (char* )buf);\n   370         num = client.GetObject(\"leopardsrc\", \"video-H264-AAC.m4v\", offset,\n   371                                buf_size, (char *)buf);\n   372         offset += num;\n   373         return num;\n   374     }\n   375     catch (S3::S3Exception &e) {\n   376         LOG(ERROR) << e.str();\n   377         return 0;\n   378     }\n   379 }   \n~~~\n\n### ffmpeg内存存储数据\n\n​\t如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。![output.png](/images/ffmpeg/stream/output.png)\n\n`write_buffer` 函数是我们自己实现的输出流的函数，内容如下：\n\n~~~cpp\n   614 int write_buffer(void *opaque, uint8_t *buf, int buf_size) {\n   627     if (!feof(fp_write)) {\n   634         int true_size = fwrite(buf, 1, buf_size, fp_write);\n   635         return true_size;\n   636     } else {\n   637         return -1;\n   638     }\n   639 } \n~~~\n\n​\t目前这个是测试ffmpeg能够支持自己的输出函数，如果是关于s3的输出支持，需要看s3关于流的实现接口。目前s3是不支持流的处理，只能考虑s3的分块上传。\n\n#### 输出到内存注意事项\n\n##### avio_open\n\n​\t当你的输出函数是自己实现的，不是默认的写入到本地文件，则`avio_open`这个函数不能够被调用。如图,加入一个判断，当输出为自定义函数时不调用avio_open函数。![avio.png](/images/ffmpeg/stream/avio.png)\n\n同样，在释放资源的时候也需要做相同的处理。在文件`mediainfo.h`中的`~FileInfoStruct()`函数中加入一层判断。![avio1.png](/images/ffmpeg/stream/avio1.png)\n\n##### 输出封装格式的限制\n\n​\t有一些封装格式不支持以流的方式作为输出，如mp4，错误信息如下：\n\n~~~shell\n[mp4 @ 0x8d0c80] muxer does not support non seekable output\n~~~\n\n​\t解决方法：通过将mp4文件进行碎片化，即生成Fmp4格式来进行操作。如图  ![fmp4.png](/images/ffmpeg/stream/fmp4.png)\n\n​\t我们需要添加`movflags`参数来进行处理。","source":"_posts/ffmpeg-内存io模式-内存区做输入或输出.md","raw":"---\ntitle: ffmpeg-内存io模式(内存区做输入或输出)\ncategories: [Media,video]\ntags:\n  - ffmpeg\n  - io\nabbrlink: 2452888490\ndate: 2020-10-14 15:03:21\n---\n\n​\t在转码的过程中，我们有时候需要从远程下载文件，当文件很大的时候会占用本地的磁盘空间，同时下载的时间也比较的长，这时候我们考虑直接读取流信息或者写入流信息来进行操作，而不是上传或者下载整个文件来解决。\n\n### 实现方法\n\n​\t转码的基础逻辑不变，仅仅是在输入输出读取的方式不同，我们需要自己实现输入输出的函数。\n\n#### 关键结构体\n\n​\t`AVIOContext`，我们需要初始化这个结构体来存放内存的数据。\n\n### 内存读取数据\n\n​\t\t转码的基本流程不变，仅仅是在开始读取数据的时候有些不同\n\n#### 读取本地文件\n\n![file](/images/ffmpeg/file.png)\n\n#### 读取流文件\n\n![stream](/images/ffmpeg/stream.png)\n\n![read](/images/ffmpeg/readstream.png)\n\n### ffmpeg内存读取数据\n\n​\t如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。![input.png](/images/ffmpeg/stream/input.png)\n\n`fill_iobuffer` 函数是我们自己实现的输入流的函数，内容如下：\n\n~~~cpp\n   359 //读取流数据\n   360 int fill_iobuffer(void *opaque, uint8_t *buf, int buf_size) {\n   361     string hosts = \"192.168.50.31:7480\";\n   362     string ak = \"11043ee2070d01eb5740f9870dfe3abd\";\n   363     string sk = \"bb31a3a96b829976513ee62b4e28ee3f\";\n   364     S3::Client client(hosts, ak, sk);\n   365     static uint64_t offset = 0;\n   366     uint64_t num;\n   367     try {\n   368         // num  = client.GetObject(\"leopardsrc\", \"video-H263-AC3.avi\",offset,\n   369         // buf_size, (char* )buf);\n   370         num = client.GetObject(\"leopardsrc\", \"video-H264-AAC.m4v\", offset,\n   371                                buf_size, (char *)buf);\n   372         offset += num;\n   373         return num;\n   374     }\n   375     catch (S3::S3Exception &e) {\n   376         LOG(ERROR) << e.str();\n   377         return 0;\n   378     }\n   379 }   \n~~~\n\n### ffmpeg内存存储数据\n\n​\t如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。![output.png](/images/ffmpeg/stream/output.png)\n\n`write_buffer` 函数是我们自己实现的输出流的函数，内容如下：\n\n~~~cpp\n   614 int write_buffer(void *opaque, uint8_t *buf, int buf_size) {\n   627     if (!feof(fp_write)) {\n   634         int true_size = fwrite(buf, 1, buf_size, fp_write);\n   635         return true_size;\n   636     } else {\n   637         return -1;\n   638     }\n   639 } \n~~~\n\n​\t目前这个是测试ffmpeg能够支持自己的输出函数，如果是关于s3的输出支持，需要看s3关于流的实现接口。目前s3是不支持流的处理，只能考虑s3的分块上传。\n\n#### 输出到内存注意事项\n\n##### avio_open\n\n​\t当你的输出函数是自己实现的，不是默认的写入到本地文件，则`avio_open`这个函数不能够被调用。如图,加入一个判断，当输出为自定义函数时不调用avio_open函数。![avio.png](/images/ffmpeg/stream/avio.png)\n\n同样，在释放资源的时候也需要做相同的处理。在文件`mediainfo.h`中的`~FileInfoStruct()`函数中加入一层判断。![avio1.png](/images/ffmpeg/stream/avio1.png)\n\n##### 输出封装格式的限制\n\n​\t有一些封装格式不支持以流的方式作为输出，如mp4，错误信息如下：\n\n~~~shell\n[mp4 @ 0x8d0c80] muxer does not support non seekable output\n~~~\n\n​\t解决方法：通过将mp4文件进行碎片化，即生成Fmp4格式来进行操作。如图  ![fmp4.png](/images/ffmpeg/stream/fmp4.png)\n\n​\t我们需要添加`movflags`参数来进行处理。","slug":"ffmpeg-内存io模式-内存区做输入或输出","published":1,"updated":"2021-02-08T06:45:33.954Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwc001klkq54lr8bi2n","content":"<p>​    在转码的过程中，我们有时候需要从远程下载文件，当文件很大的时候会占用本地的磁盘空间，同时下载的时间也比较的长，这时候我们考虑直接读取流信息或者写入流信息来进行操作，而不是上传或者下载整个文件来解决。</p>\n<h3 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h3><p>​    转码的基础逻辑不变，仅仅是在输入输出读取的方式不同，我们需要自己实现输入输出的函数。</p>\n<h4 id=\"关键结构体\"><a href=\"#关键结构体\" class=\"headerlink\" title=\"关键结构体\"></a>关键结构体</h4><p>​    <code>AVIOContext</code>，我们需要初始化这个结构体来存放内存的数据。</p>\n<h3 id=\"内存读取数据\"><a href=\"#内存读取数据\" class=\"headerlink\" title=\"内存读取数据\"></a>内存读取数据</h3><p>​        转码的基本流程不变，仅仅是在开始读取数据的时候有些不同</p>\n<h4 id=\"读取本地文件\"><a href=\"#读取本地文件\" class=\"headerlink\" title=\"读取本地文件\"></a>读取本地文件</h4><p><img src=\"/images/ffmpeg/file.png\" alt=\"file\"></p>\n<h4 id=\"读取流文件\"><a href=\"#读取流文件\" class=\"headerlink\" title=\"读取流文件\"></a>读取流文件</h4><p><img src=\"/images/ffmpeg/stream.png\" alt=\"stream\"></p>\n<p><img src=\"/images/ffmpeg/readstream.png\" alt=\"read\"></p>\n<h3 id=\"ffmpeg内存读取数据\"><a href=\"#ffmpeg内存读取数据\" class=\"headerlink\" title=\"ffmpeg内存读取数据\"></a>ffmpeg内存读取数据</h3><p>​    如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。<img src=\"/images/ffmpeg/stream/input.png\" alt=\"input.png\"></p>\n<p><code>fill_iobuffer</code> 函数是我们自己实现的输入流的函数，内容如下：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">359</span> <span class=\"comment\">//读取流数据</span></span><br><span class=\"line\"><span class=\"number\">360</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fill_iobuffer</span><span class=\"params\">(<span class=\"keyword\">void</span> *opaque, <span class=\"keyword\">uint8_t</span> *buf, <span class=\"keyword\">int</span> buf_size)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"number\">361</span>     <span class=\"built_in\">string</span> hosts = <span class=\"string\">\"192.168.50.31:7480\"</span>;</span><br><span class=\"line\"><span class=\"number\">362</span>     <span class=\"built_in\">string</span> ak = <span class=\"string\">\"11043ee2070d01eb5740f9870dfe3abd\"</span>;</span><br><span class=\"line\"><span class=\"number\">363</span>     <span class=\"built_in\">string</span> sk = <span class=\"string\">\"bb31a3a96b829976513ee62b4e28ee3f\"</span>;</span><br><span class=\"line\"><span class=\"number\">364</span>     <span class=\"function\">S3::Client <span class=\"title\">client</span><span class=\"params\">(hosts, ak, sk)</span></span>;</span><br><span class=\"line\"><span class=\"number\">365</span>     <span class=\"keyword\">static</span> <span class=\"keyword\">uint64_t</span> offset = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">366</span>     <span class=\"keyword\">uint64_t</span> num;</span><br><span class=\"line\"><span class=\"number\">367</span>     <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"><span class=\"number\">368</span>         <span class=\"comment\">// num  = client.GetObject(\"leopardsrc\", \"video-H263-AC3.avi\",offset,</span></span><br><span class=\"line\"><span class=\"number\">369</span>         <span class=\"comment\">// buf_size, (char* )buf);</span></span><br><span class=\"line\"><span class=\"number\">370</span>         num = client.GetObject(<span class=\"string\">\"leopardsrc\"</span>, <span class=\"string\">\"video-H264-AAC.m4v\"</span>, offset,</span><br><span class=\"line\"><span class=\"number\">371</span>                                buf_size, (<span class=\"keyword\">char</span> *)buf);</span><br><span class=\"line\"><span class=\"number\">372</span>         offset += num;</span><br><span class=\"line\"><span class=\"number\">373</span>         <span class=\"keyword\">return</span> num;</span><br><span class=\"line\"><span class=\"number\">374</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">375</span>     <span class=\"keyword\">catch</span> (S3::S3Exception &amp;e) &#123;</span><br><span class=\"line\"><span class=\"number\">376</span>         LOG(ERROR) &lt;&lt; e.str();</span><br><span class=\"line\"><span class=\"number\">377</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">378</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">379</span> &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ffmpeg内存存储数据\"><a href=\"#ffmpeg内存存储数据\" class=\"headerlink\" title=\"ffmpeg内存存储数据\"></a>ffmpeg内存存储数据</h3><p>​    如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。<img src=\"/images/ffmpeg/stream/output.png\" alt=\"output.png\"></p>\n<p><code>write_buffer</code> 函数是我们自己实现的输出流的函数，内容如下：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">614</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">write_buffer</span><span class=\"params\">(<span class=\"keyword\">void</span> *opaque, <span class=\"keyword\">uint8_t</span> *buf, <span class=\"keyword\">int</span> buf_size)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"number\">627</span>     <span class=\"keyword\">if</span> (!feof(fp_write)) &#123;</span><br><span class=\"line\"><span class=\"number\">634</span>         <span class=\"keyword\">int</span> true_size = fwrite(buf, <span class=\"number\">1</span>, buf_size, fp_write);</span><br><span class=\"line\"><span class=\"number\">635</span>         <span class=\"keyword\">return</span> true_size;</span><br><span class=\"line\"><span class=\"number\">636</span>     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"><span class=\"number\">637</span>         <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"number\">638</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">639</span> &#125;</span><br></pre></td></tr></table></figure>\n<p>​    目前这个是测试ffmpeg能够支持自己的输出函数，如果是关于s3的输出支持，需要看s3关于流的实现接口。目前s3是不支持流的处理，只能考虑s3的分块上传。</p>\n<h4 id=\"输出到内存注意事项\"><a href=\"#输出到内存注意事项\" class=\"headerlink\" title=\"输出到内存注意事项\"></a>输出到内存注意事项</h4><h5 id=\"avio-open\"><a href=\"#avio-open\" class=\"headerlink\" title=\"avio_open\"></a>avio_open</h5><p>​    当你的输出函数是自己实现的，不是默认的写入到本地文件，则<code>avio_open</code>这个函数不能够被调用。如图,加入一个判断，当输出为自定义函数时不调用avio_open函数。<img src=\"/images/ffmpeg/stream/avio.png\" alt=\"avio.png\"></p>\n<p>同样，在释放资源的时候也需要做相同的处理。在文件<code>mediainfo.h</code>中的<code>~FileInfoStruct()</code>函数中加入一层判断。<img src=\"/images/ffmpeg/stream/avio1.png\" alt=\"avio1.png\"></p>\n<h5 id=\"输出封装格式的限制\"><a href=\"#输出封装格式的限制\" class=\"headerlink\" title=\"输出封装格式的限制\"></a>输出封装格式的限制</h5><p>​    有一些封装格式不支持以流的方式作为输出，如mp4，错误信息如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mp4 @ 0x8d0c80] muxer does not support non seekable output</span><br></pre></td></tr></table></figure>\n<p>​    解决方法：通过将mp4文件进行碎片化，即生成Fmp4格式来进行操作。如图  <img src=\"/images/ffmpeg/stream/fmp4.png\" alt=\"fmp4.png\"></p>\n<p>​    我们需要添加<code>movflags</code>参数来进行处理。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>​    在转码的过程中，我们有时候需要从远程下载文件，当文件很大的时候会占用本地的磁盘空间，同时下载的时间也比较的长，这时候我们考虑直接读取流信息或者写入流信息来进行操作，而不是上传或者下载整个文件来解决。</p>\n<h3 id=\"实现方法\"><a href=\"#实现方法\" class=\"headerlink\" title=\"实现方法\"></a>实现方法</h3><p>​    转码的基础逻辑不变，仅仅是在输入输出读取的方式不同，我们需要自己实现输入输出的函数。</p>\n<h4 id=\"关键结构体\"><a href=\"#关键结构体\" class=\"headerlink\" title=\"关键结构体\"></a>关键结构体</h4><p>​    <code>AVIOContext</code>，我们需要初始化这个结构体来存放内存的数据。</p>\n<h3 id=\"内存读取数据\"><a href=\"#内存读取数据\" class=\"headerlink\" title=\"内存读取数据\"></a>内存读取数据</h3><p>​        转码的基本流程不变，仅仅是在开始读取数据的时候有些不同</p>\n<h4 id=\"读取本地文件\"><a href=\"#读取本地文件\" class=\"headerlink\" title=\"读取本地文件\"></a>读取本地文件</h4><p><img src=\"/images/ffmpeg/file.png\" alt=\"file\"></p>\n<h4 id=\"读取流文件\"><a href=\"#读取流文件\" class=\"headerlink\" title=\"读取流文件\"></a>读取流文件</h4><p><img src=\"/images/ffmpeg/stream.png\" alt=\"stream\"></p>\n<p><img src=\"/images/ffmpeg/readstream.png\" alt=\"read\"></p>\n<h3 id=\"ffmpeg内存读取数据\"><a href=\"#ffmpeg内存读取数据\" class=\"headerlink\" title=\"ffmpeg内存读取数据\"></a>ffmpeg内存读取数据</h3><p>​    如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。<img src=\"/images/ffmpeg/stream/input.png\" alt=\"input.png\"></p>\n<p><code>fill_iobuffer</code> 函数是我们自己实现的输入流的函数，内容如下：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">359</span> <span class=\"comment\">//读取流数据</span></span><br><span class=\"line\"><span class=\"number\">360</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fill_iobuffer</span><span class=\"params\">(<span class=\"keyword\">void</span> *opaque, <span class=\"keyword\">uint8_t</span> *buf, <span class=\"keyword\">int</span> buf_size)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"number\">361</span>     <span class=\"built_in\">string</span> hosts = <span class=\"string\">\"192.168.50.31:7480\"</span>;</span><br><span class=\"line\"><span class=\"number\">362</span>     <span class=\"built_in\">string</span> ak = <span class=\"string\">\"11043ee2070d01eb5740f9870dfe3abd\"</span>;</span><br><span class=\"line\"><span class=\"number\">363</span>     <span class=\"built_in\">string</span> sk = <span class=\"string\">\"bb31a3a96b829976513ee62b4e28ee3f\"</span>;</span><br><span class=\"line\"><span class=\"number\">364</span>     <span class=\"function\">S3::Client <span class=\"title\">client</span><span class=\"params\">(hosts, ak, sk)</span></span>;</span><br><span class=\"line\"><span class=\"number\">365</span>     <span class=\"keyword\">static</span> <span class=\"keyword\">uint64_t</span> offset = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">366</span>     <span class=\"keyword\">uint64_t</span> num;</span><br><span class=\"line\"><span class=\"number\">367</span>     <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\"><span class=\"number\">368</span>         <span class=\"comment\">// num  = client.GetObject(\"leopardsrc\", \"video-H263-AC3.avi\",offset,</span></span><br><span class=\"line\"><span class=\"number\">369</span>         <span class=\"comment\">// buf_size, (char* )buf);</span></span><br><span class=\"line\"><span class=\"number\">370</span>         num = client.GetObject(<span class=\"string\">\"leopardsrc\"</span>, <span class=\"string\">\"video-H264-AAC.m4v\"</span>, offset,</span><br><span class=\"line\"><span class=\"number\">371</span>                                buf_size, (<span class=\"keyword\">char</span> *)buf);</span><br><span class=\"line\"><span class=\"number\">372</span>         offset += num;</span><br><span class=\"line\"><span class=\"number\">373</span>         <span class=\"keyword\">return</span> num;</span><br><span class=\"line\"><span class=\"number\">374</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">375</span>     <span class=\"keyword\">catch</span> (S3::S3Exception &amp;e) &#123;</span><br><span class=\"line\"><span class=\"number\">376</span>         LOG(ERROR) &lt;&lt; e.str();</span><br><span class=\"line\"><span class=\"number\">377</span>         <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">378</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">379</span> &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ffmpeg内存存储数据\"><a href=\"#ffmpeg内存存储数据\" class=\"headerlink\" title=\"ffmpeg内存存储数据\"></a>ffmpeg内存存储数据</h3><p>​    如图,<font color=\"red\">红色框</font>内是当输入是流时的处理，<font color=\"green\">绿色框</font>内是当输入是文件时的处理，二选一即可。<img src=\"/images/ffmpeg/stream/output.png\" alt=\"output.png\"></p>\n<p><code>write_buffer</code> 函数是我们自己实现的输出流的函数，内容如下：</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">614</span> <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">write_buffer</span><span class=\"params\">(<span class=\"keyword\">void</span> *opaque, <span class=\"keyword\">uint8_t</span> *buf, <span class=\"keyword\">int</span> buf_size)</span> </span>&#123;</span><br><span class=\"line\"><span class=\"number\">627</span>     <span class=\"keyword\">if</span> (!feof(fp_write)) &#123;</span><br><span class=\"line\"><span class=\"number\">634</span>         <span class=\"keyword\">int</span> true_size = fwrite(buf, <span class=\"number\">1</span>, buf_size, fp_write);</span><br><span class=\"line\"><span class=\"number\">635</span>         <span class=\"keyword\">return</span> true_size;</span><br><span class=\"line\"><span class=\"number\">636</span>     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"><span class=\"number\">637</span>         <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"number\">638</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">639</span> &#125;</span><br></pre></td></tr></table></figure>\n<p>​    目前这个是测试ffmpeg能够支持自己的输出函数，如果是关于s3的输出支持，需要看s3关于流的实现接口。目前s3是不支持流的处理，只能考虑s3的分块上传。</p>\n<h4 id=\"输出到内存注意事项\"><a href=\"#输出到内存注意事项\" class=\"headerlink\" title=\"输出到内存注意事项\"></a>输出到内存注意事项</h4><h5 id=\"avio-open\"><a href=\"#avio-open\" class=\"headerlink\" title=\"avio_open\"></a>avio_open</h5><p>​    当你的输出函数是自己实现的，不是默认的写入到本地文件，则<code>avio_open</code>这个函数不能够被调用。如图,加入一个判断，当输出为自定义函数时不调用avio_open函数。<img src=\"/images/ffmpeg/stream/avio.png\" alt=\"avio.png\"></p>\n<p>同样，在释放资源的时候也需要做相同的处理。在文件<code>mediainfo.h</code>中的<code>~FileInfoStruct()</code>函数中加入一层判断。<img src=\"/images/ffmpeg/stream/avio1.png\" alt=\"avio1.png\"></p>\n<h5 id=\"输出封装格式的限制\"><a href=\"#输出封装格式的限制\" class=\"headerlink\" title=\"输出封装格式的限制\"></a>输出封装格式的限制</h5><p>​    有一些封装格式不支持以流的方式作为输出，如mp4，错误信息如下：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[mp4 @ 0x8d0c80] muxer does not support non seekable output</span><br></pre></td></tr></table></figure>\n<p>​    解决方法：通过将mp4文件进行碎片化，即生成Fmp4格式来进行操作。如图  <img src=\"/images/ffmpeg/stream/fmp4.png\" alt=\"fmp4.png\"></p>\n<p>​    我们需要添加<code>movflags</code>参数来进行处理。</p>\n"},{"title":"ffmpeg-转码后丢帧的问题","abbrlink":3032443121,"date":"2020-09-29T08:35:30.000Z","_content":"\n在生产环境的使用中，我们转码有时候会出现缺帧的情况，比如一个10s的视频，经过转码后只有了7s，这就是因为转码逻辑没有处理好，导致丢失了大量的帧。\n\n### 函数\n\n##### ffmpeg提供了两组函数，分别用于编码和解码：\n\n- 解码：`avcodec_send_packet()`、`avcodec_receive_frame()`\n- 编码：`avcodec_send_frame()`、`avcodec_receive_packet()`\n\n\n\n##### 在一个循环体内去接收codec的输出\n\n即周期性地调用`avcodec_receive_()`来接收codec输出的数据：\n\n- **解码**：调用`avcodec_receive_frame()`，如果成功会返回一个包含未压缩数据的`AVFrame`。\n\n- **编码**：调用`avcodec_receive_packet()`，如果成功会返回一个包含压缩数据的`AVPacket`。\n\n- **反复**地调用`avcodec_receive_packet()`直到返回 `AVERROR(EAGAIN)`或其他错误。返回`AVERROR(EAGAIN)`错误表示codec需要新的输入来输出更多的数据。对于每个输入的packet或frame，codec一般会输出一个frame或packet，**但是也有可能输出0个或者多于1个**。部分代码实例：\n\n- ~~~cpp\n  1514     while(true){\n    1515         //对于每个输入的packet或者frame，codec一般会输出一个frame或者packet，但是也有可能输出0个或者多于1个\n    1516         //对于多于1个的情况，我们使用while来解决\n    1517         error = avcodec_receive_packet(encCtx, &outputPacket);\n    1518         if (error == AVERROR(EAGAIN)) {\n    1519             error = 0;\n    1520             // cout << \"EAGAIN\" << endl;\n    1521             goto cleanup;\n    1522         } else if (error == AVERROR_EOF) {\n    1523             error = 0;\n    1524             goto cleanup;\n    1525         } else if (error < 0) {\n    1526             av_log(NULL, AV_LOG_ERROR, \"Could not encode frame\\n\");\n    1527             goto cleanup;\n    1528         } else { \n    1529             *dataPresent = 1;\n    1530         }        \n    1531                  \n    1532         outputPacket.stream_index = streamIndex;\n    1533                  \n    1534         //转换pts\n    1535         av_packet_rescale_ts(&outputPacket, encCtx->time_base,\n    1536                              ofmtCtx->streams[streamIndex]->time_base);\n    1537     \n    1538         // if (AVMEDIA_TYPE_AUDIO == encCtx -> codec_type){\n    1539         //  _pts2ms = outputPacket.pts *av_q2d(ofmtCtx -> streams[streamIndex] ->\n    1540         // time_base) * 1000 ;//单位ms(微妙)\n    1541         //}      \n    1542         //_pts2ms = outputPacket.pts *av_q2d(ofmtCtx -> streams[streamIndex] ->\n    1543         // time_base) * 1000 ;//单位ms(微妙)\n    1544         pts2ms = outputPacket.pts *\n    1545                  av_q2d(ofmtCtx->streams[streamIndex]->time_base) *\n    1546                  1000;  //单位ms(微妙)\n    1547                         //编码视频和音频的时候，两者的时间是不一样的，为了保证进度一直向前，所以取最大值\n    1548         if (pts2ms > _pts2ms) _pts2ms = pts2ms;\n    1549         av_log(NULL, AV_LOG_INFO, \"progress: %s\\n\", printProgress().c_str());\n    1550         sendProgress();\n    1551         if (!_ip.empty()) printProgress(_ip, _port);\n    1552                  \n    1553         if (*dataPresent &&\n    1554             (error = av_interleaved_write_frame(ofmtCtx, &outputPacket)) < 0) {\n    1555             av_log(NULL, AV_LOG_ERROR, \"Could not write frame,%s,%s:%d\\n\",\n    1556                    av_err2str(error), __FILE__, __LINE__);\n    1557             goto cleanup;\n    1558         }        \n    1559     }   \n  ~~~\n\n- 流处理结束的时候需要flush（洗刷） codec。因为codec可能在内部缓冲多个frame或packet，出于性能或其他必要的情况（如考虑B帧的情况）。 处理流程如下：\n\n  1. 调用`avcodec_send_()`传入的AVFrame或AVPacket指针设置为NULL。 这将开启draining mode（排水模式）\n\n     ~~~cpp\n       1653     int dataWritten;\n       1654     int ret;       \n       1655     if (NULL != output->videoStream) {\n       1656         do {       \n       1657             dataWritten = 0;\n       1658             ret = encodeMediaFrame(NULL, output->formatContext,\n       1659                                    output->videoCodecCtx, &dataWritten,\n       1660                                    output->videoStream->index);\n       1661             if (0 > ret) {\n       1662                 av_log(NULL, AV_LOG_ERROR,\n       1663                        \"Failed whileflush video encode, %s:%d\\n\", __FILE__,\n       1664                        __LINE__);\n       1665                 return ret;\n       1666             }      \n       1667             av_log(NULL, AV_LOG_INFO, \"flush video encoder data\\n\");\n       1668         } while (dataWritten);\n       1669     }  \n     ~~~\n\n  2. 反复地调用`avcodec_receive_()`直到返回`AVERROR_EOF`的错误，这个方法这个时候不会返回`AVERROR(EAGAIN)`的错误，除非你忘记了开启draining mode\n\n  3. codec可以重新开启，但是需要先调用 `avcodec_flush_buffers()`来重置codec\n\n","source":"_posts/ffmpeg-转码后丢帧的问题.md","raw":"---\ntitle: ffmpeg-转码后丢帧的问题\ncategories: [Media,video]\ntags: ffmpeg\nabbrlink: 3032443121\ndate: 2020-09-29 16:35:30\n---\n\n在生产环境的使用中，我们转码有时候会出现缺帧的情况，比如一个10s的视频，经过转码后只有了7s，这就是因为转码逻辑没有处理好，导致丢失了大量的帧。\n\n### 函数\n\n##### ffmpeg提供了两组函数，分别用于编码和解码：\n\n- 解码：`avcodec_send_packet()`、`avcodec_receive_frame()`\n- 编码：`avcodec_send_frame()`、`avcodec_receive_packet()`\n\n\n\n##### 在一个循环体内去接收codec的输出\n\n即周期性地调用`avcodec_receive_()`来接收codec输出的数据：\n\n- **解码**：调用`avcodec_receive_frame()`，如果成功会返回一个包含未压缩数据的`AVFrame`。\n\n- **编码**：调用`avcodec_receive_packet()`，如果成功会返回一个包含压缩数据的`AVPacket`。\n\n- **反复**地调用`avcodec_receive_packet()`直到返回 `AVERROR(EAGAIN)`或其他错误。返回`AVERROR(EAGAIN)`错误表示codec需要新的输入来输出更多的数据。对于每个输入的packet或frame，codec一般会输出一个frame或packet，**但是也有可能输出0个或者多于1个**。部分代码实例：\n\n- ~~~cpp\n  1514     while(true){\n    1515         //对于每个输入的packet或者frame，codec一般会输出一个frame或者packet，但是也有可能输出0个或者多于1个\n    1516         //对于多于1个的情况，我们使用while来解决\n    1517         error = avcodec_receive_packet(encCtx, &outputPacket);\n    1518         if (error == AVERROR(EAGAIN)) {\n    1519             error = 0;\n    1520             // cout << \"EAGAIN\" << endl;\n    1521             goto cleanup;\n    1522         } else if (error == AVERROR_EOF) {\n    1523             error = 0;\n    1524             goto cleanup;\n    1525         } else if (error < 0) {\n    1526             av_log(NULL, AV_LOG_ERROR, \"Could not encode frame\\n\");\n    1527             goto cleanup;\n    1528         } else { \n    1529             *dataPresent = 1;\n    1530         }        \n    1531                  \n    1532         outputPacket.stream_index = streamIndex;\n    1533                  \n    1534         //转换pts\n    1535         av_packet_rescale_ts(&outputPacket, encCtx->time_base,\n    1536                              ofmtCtx->streams[streamIndex]->time_base);\n    1537     \n    1538         // if (AVMEDIA_TYPE_AUDIO == encCtx -> codec_type){\n    1539         //  _pts2ms = outputPacket.pts *av_q2d(ofmtCtx -> streams[streamIndex] ->\n    1540         // time_base) * 1000 ;//单位ms(微妙)\n    1541         //}      \n    1542         //_pts2ms = outputPacket.pts *av_q2d(ofmtCtx -> streams[streamIndex] ->\n    1543         // time_base) * 1000 ;//单位ms(微妙)\n    1544         pts2ms = outputPacket.pts *\n    1545                  av_q2d(ofmtCtx->streams[streamIndex]->time_base) *\n    1546                  1000;  //单位ms(微妙)\n    1547                         //编码视频和音频的时候，两者的时间是不一样的，为了保证进度一直向前，所以取最大值\n    1548         if (pts2ms > _pts2ms) _pts2ms = pts2ms;\n    1549         av_log(NULL, AV_LOG_INFO, \"progress: %s\\n\", printProgress().c_str());\n    1550         sendProgress();\n    1551         if (!_ip.empty()) printProgress(_ip, _port);\n    1552                  \n    1553         if (*dataPresent &&\n    1554             (error = av_interleaved_write_frame(ofmtCtx, &outputPacket)) < 0) {\n    1555             av_log(NULL, AV_LOG_ERROR, \"Could not write frame,%s,%s:%d\\n\",\n    1556                    av_err2str(error), __FILE__, __LINE__);\n    1557             goto cleanup;\n    1558         }        \n    1559     }   \n  ~~~\n\n- 流处理结束的时候需要flush（洗刷） codec。因为codec可能在内部缓冲多个frame或packet，出于性能或其他必要的情况（如考虑B帧的情况）。 处理流程如下：\n\n  1. 调用`avcodec_send_()`传入的AVFrame或AVPacket指针设置为NULL。 这将开启draining mode（排水模式）\n\n     ~~~cpp\n       1653     int dataWritten;\n       1654     int ret;       \n       1655     if (NULL != output->videoStream) {\n       1656         do {       \n       1657             dataWritten = 0;\n       1658             ret = encodeMediaFrame(NULL, output->formatContext,\n       1659                                    output->videoCodecCtx, &dataWritten,\n       1660                                    output->videoStream->index);\n       1661             if (0 > ret) {\n       1662                 av_log(NULL, AV_LOG_ERROR,\n       1663                        \"Failed whileflush video encode, %s:%d\\n\", __FILE__,\n       1664                        __LINE__);\n       1665                 return ret;\n       1666             }      \n       1667             av_log(NULL, AV_LOG_INFO, \"flush video encoder data\\n\");\n       1668         } while (dataWritten);\n       1669     }  \n     ~~~\n\n  2. 反复地调用`avcodec_receive_()`直到返回`AVERROR_EOF`的错误，这个方法这个时候不会返回`AVERROR(EAGAIN)`的错误，除非你忘记了开启draining mode\n\n  3. codec可以重新开启，但是需要先调用 `avcodec_flush_buffers()`来重置codec\n\n","slug":"ffmpeg-转码后丢帧的问题","published":1,"updated":"2021-02-08T06:46:14.993Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwd001nlkq50ax311eq","content":"<p>在生产环境的使用中，我们转码有时候会出现缺帧的情况，比如一个10s的视频，经过转码后只有了7s，这就是因为转码逻辑没有处理好，导致丢失了大量的帧。</p>\n<h3 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h3><h5 id=\"ffmpeg提供了两组函数，分别用于编码和解码：\"><a href=\"#ffmpeg提供了两组函数，分别用于编码和解码：\" class=\"headerlink\" title=\"ffmpeg提供了两组函数，分别用于编码和解码：\"></a>ffmpeg提供了两组函数，分别用于编码和解码：</h5><ul>\n<li>解码：<code>avcodec_send_packet()</code>、<code>avcodec_receive_frame()</code></li>\n<li>编码：<code>avcodec_send_frame()</code>、<code>avcodec_receive_packet()</code></li>\n</ul>\n<h5 id=\"在一个循环体内去接收codec的输出\"><a href=\"#在一个循环体内去接收codec的输出\" class=\"headerlink\" title=\"在一个循环体内去接收codec的输出\"></a>在一个循环体内去接收codec的输出</h5><p>即周期性地调用<code>avcodec_receive_()</code>来接收codec输出的数据：</p>\n<ul>\n<li><p><strong>解码</strong>：调用<code>avcodec_receive_frame()</code>，如果成功会返回一个包含未压缩数据的<code>AVFrame</code>。</p>\n</li>\n<li><p><strong>编码</strong>：调用<code>avcodec_receive_packet()</code>，如果成功会返回一个包含压缩数据的<code>AVPacket</code>。</p>\n</li>\n<li><p><strong>反复</strong>地调用<code>avcodec_receive_packet()</code>直到返回 <code>AVERROR(EAGAIN)</code>或其他错误。返回<code>AVERROR(EAGAIN)</code>错误表示codec需要新的输入来输出更多的数据。对于每个输入的packet或frame，codec一般会输出一个frame或packet，<strong>但是也有可能输出0个或者多于1个</strong>。部分代码实例：</p>\n</li>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1514</span>     <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>)&#123;</span><br><span class=\"line\">  <span class=\"number\">1515</span>         <span class=\"comment\">//对于每个输入的packet或者frame，codec一般会输出一个frame或者packet，但是也有可能输出0个或者多于1个</span></span><br><span class=\"line\">  <span class=\"number\">1516</span>         <span class=\"comment\">//对于多于1个的情况，我们使用while来解决</span></span><br><span class=\"line\">  <span class=\"number\">1517</span>         error = avcodec_receive_packet(encCtx, &amp;outputPacket);</span><br><span class=\"line\">  <span class=\"number\">1518</span>         <span class=\"keyword\">if</span> (error == AVERROR(EAGAIN)) &#123;</span><br><span class=\"line\">  <span class=\"number\">1519</span>             error = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"number\">1520</span>             <span class=\"comment\">// cout &lt;&lt; \"EAGAIN\" &lt;&lt; endl;</span></span><br><span class=\"line\">  <span class=\"number\">1521</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1522</span>         &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (error == AVERROR_EOF) &#123;</span><br><span class=\"line\">  <span class=\"number\">1523</span>             error = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"number\">1524</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1525</span>         &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (error &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">  <span class=\"number\">1526</span>             av_log(<span class=\"literal\">NULL</span>, AV_LOG_ERROR, <span class=\"string\">\"Could not encode frame\\n\"</span>);</span><br><span class=\"line\">  <span class=\"number\">1527</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1528</span>         &#125; <span class=\"keyword\">else</span> &#123; </span><br><span class=\"line\">  <span class=\"number\">1529</span>             *dataPresent = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"number\">1530</span>         &#125;        </span><br><span class=\"line\">  <span class=\"number\">1531</span>                  </span><br><span class=\"line\">  <span class=\"number\">1532</span>         outputPacket.stream_index = streamIndex;</span><br><span class=\"line\">  <span class=\"number\">1533</span>                  </span><br><span class=\"line\">  <span class=\"number\">1534</span>         <span class=\"comment\">//转换pts</span></span><br><span class=\"line\">  <span class=\"number\">1535</span>         av_packet_rescale_ts(&amp;outputPacket, encCtx-&gt;time_base,</span><br><span class=\"line\">  <span class=\"number\">1536</span>                              ofmtCtx-&gt;streams[streamIndex]-&gt;time_base);</span><br><span class=\"line\">  <span class=\"number\">1537</span>     </span><br><span class=\"line\">  <span class=\"number\">1538</span>         <span class=\"comment\">// if (AVMEDIA_TYPE_AUDIO == encCtx -&gt; codec_type)&#123;</span></span><br><span class=\"line\">  <span class=\"number\">1539</span>         <span class=\"comment\">//  _pts2ms = outputPacket.pts *av_q2d(ofmtCtx -&gt; streams[streamIndex] -&gt;</span></span><br><span class=\"line\">  <span class=\"number\">1540</span>         <span class=\"comment\">// time_base) * 1000 ;//单位ms(微妙)</span></span><br><span class=\"line\">  <span class=\"number\">1541</span>         <span class=\"comment\">//&#125;      </span></span><br><span class=\"line\">  <span class=\"number\">1542</span>         <span class=\"comment\">//_pts2ms = outputPacket.pts *av_q2d(ofmtCtx -&gt; streams[streamIndex] -&gt;</span></span><br><span class=\"line\">  <span class=\"number\">1543</span>         <span class=\"comment\">// time_base) * 1000 ;//单位ms(微妙)</span></span><br><span class=\"line\">  <span class=\"number\">1544</span>         pts2ms = outputPacket.pts *</span><br><span class=\"line\">  <span class=\"number\">1545</span>                  av_q2d(ofmtCtx-&gt;streams[streamIndex]-&gt;time_base) *</span><br><span class=\"line\">  <span class=\"number\">1546</span>                  <span class=\"number\">1000</span>;  <span class=\"comment\">//单位ms(微妙)</span></span><br><span class=\"line\">  <span class=\"number\">1547</span>                         <span class=\"comment\">//编码视频和音频的时候，两者的时间是不一样的，为了保证进度一直向前，所以取最大值</span></span><br><span class=\"line\">  <span class=\"number\">1548</span>         <span class=\"keyword\">if</span> (pts2ms &gt; _pts2ms) _pts2ms = pts2ms;</span><br><span class=\"line\">  <span class=\"number\">1549</span>         av_log(<span class=\"literal\">NULL</span>, AV_LOG_INFO, <span class=\"string\">\"progress: %s\\n\"</span>, printProgress().c_str());</span><br><span class=\"line\">  <span class=\"number\">1550</span>         sendProgress();</span><br><span class=\"line\">  <span class=\"number\">1551</span>         <span class=\"keyword\">if</span> (!_ip.empty()) printProgress(_ip, _port);</span><br><span class=\"line\">  <span class=\"number\">1552</span>                  </span><br><span class=\"line\">  <span class=\"number\">1553</span>         <span class=\"keyword\">if</span> (*dataPresent &amp;&amp;</span><br><span class=\"line\">  <span class=\"number\">1554</span>             (error = av_interleaved_write_frame(ofmtCtx, &amp;outputPacket)) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">  <span class=\"number\">1555</span>             av_log(<span class=\"literal\">NULL</span>, AV_LOG_ERROR, <span class=\"string\">\"Could not write frame,%s,%s:%d\\n\"</span>,</span><br><span class=\"line\">  <span class=\"number\">1556</span>                    av_err2str(error), __FILE__, __LINE__);</span><br><span class=\"line\">  <span class=\"number\">1557</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1558</span>         &#125;        </span><br><span class=\"line\">  <span class=\"number\">1559</span>     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>流处理结束的时候需要flush（洗刷） codec。因为codec可能在内部缓冲多个frame或packet，出于性能或其他必要的情况（如考虑B帧的情况）。 处理流程如下：</p>\n<ol>\n<li><p>调用<code>avcodec_send_()</code>传入的AVFrame或AVPacket指针设置为NULL。 这将开启draining mode（排水模式）</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1653</span>     <span class=\"keyword\">int</span> dataWritten;</span><br><span class=\"line\"><span class=\"number\">1654</span>     <span class=\"keyword\">int</span> ret;       </span><br><span class=\"line\"><span class=\"number\">1655</span>     <span class=\"keyword\">if</span> (<span class=\"literal\">NULL</span> != output-&gt;videoStream) &#123;</span><br><span class=\"line\"><span class=\"number\">1656</span>         <span class=\"keyword\">do</span> &#123;       </span><br><span class=\"line\"><span class=\"number\">1657</span>             dataWritten = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">1658</span>             ret = encodeMediaFrame(<span class=\"literal\">NULL</span>, output-&gt;formatContext,</span><br><span class=\"line\"><span class=\"number\">1659</span>                                    output-&gt;videoCodecCtx, &amp;dataWritten,</span><br><span class=\"line\"><span class=\"number\">1660</span>                                    output-&gt;videoStream-&gt;index);</span><br><span class=\"line\"><span class=\"number\">1661</span>             <span class=\"keyword\">if</span> (<span class=\"number\">0</span> &gt; ret) &#123;</span><br><span class=\"line\"><span class=\"number\">1662</span>                 av_log(<span class=\"literal\">NULL</span>, AV_LOG_ERROR,</span><br><span class=\"line\"><span class=\"number\">1663</span>                        <span class=\"string\">\"Failed whileflush video encode, %s:%d\\n\"</span>, __FILE__,</span><br><span class=\"line\"><span class=\"number\">1664</span>                        __LINE__);</span><br><span class=\"line\"><span class=\"number\">1665</span>                 <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\"><span class=\"number\">1666</span>             &#125;      </span><br><span class=\"line\"><span class=\"number\">1667</span>             av_log(<span class=\"literal\">NULL</span>, AV_LOG_INFO, <span class=\"string\">\"flush video encoder data\\n\"</span>);</span><br><span class=\"line\"><span class=\"number\">1668</span>         &#125; <span class=\"keyword\">while</span> (dataWritten);</span><br><span class=\"line\"><span class=\"number\">1669</span>     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>反复地调用<code>avcodec_receive_()</code>直到返回<code>AVERROR_EOF</code>的错误，这个方法这个时候不会返回<code>AVERROR(EAGAIN)</code>的错误，除非你忘记了开启draining mode</p>\n</li>\n<li><p>codec可以重新开启，但是需要先调用 <code>avcodec_flush_buffers()</code>来重置codec</p>\n</li>\n</ol>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>在生产环境的使用中，我们转码有时候会出现缺帧的情况，比如一个10s的视频，经过转码后只有了7s，这就是因为转码逻辑没有处理好，导致丢失了大量的帧。</p>\n<h3 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h3><h5 id=\"ffmpeg提供了两组函数，分别用于编码和解码：\"><a href=\"#ffmpeg提供了两组函数，分别用于编码和解码：\" class=\"headerlink\" title=\"ffmpeg提供了两组函数，分别用于编码和解码：\"></a>ffmpeg提供了两组函数，分别用于编码和解码：</h5><ul>\n<li>解码：<code>avcodec_send_packet()</code>、<code>avcodec_receive_frame()</code></li>\n<li>编码：<code>avcodec_send_frame()</code>、<code>avcodec_receive_packet()</code></li>\n</ul>\n<h5 id=\"在一个循环体内去接收codec的输出\"><a href=\"#在一个循环体内去接收codec的输出\" class=\"headerlink\" title=\"在一个循环体内去接收codec的输出\"></a>在一个循环体内去接收codec的输出</h5><p>即周期性地调用<code>avcodec_receive_()</code>来接收codec输出的数据：</p>\n<ul>\n<li><p><strong>解码</strong>：调用<code>avcodec_receive_frame()</code>，如果成功会返回一个包含未压缩数据的<code>AVFrame</code>。</p>\n</li>\n<li><p><strong>编码</strong>：调用<code>avcodec_receive_packet()</code>，如果成功会返回一个包含压缩数据的<code>AVPacket</code>。</p>\n</li>\n<li><p><strong>反复</strong>地调用<code>avcodec_receive_packet()</code>直到返回 <code>AVERROR(EAGAIN)</code>或其他错误。返回<code>AVERROR(EAGAIN)</code>错误表示codec需要新的输入来输出更多的数据。对于每个输入的packet或frame，codec一般会输出一个frame或packet，<strong>但是也有可能输出0个或者多于1个</strong>。部分代码实例：</p>\n</li>\n<li><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1514</span>     <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>)&#123;</span><br><span class=\"line\">  <span class=\"number\">1515</span>         <span class=\"comment\">//对于每个输入的packet或者frame，codec一般会输出一个frame或者packet，但是也有可能输出0个或者多于1个</span></span><br><span class=\"line\">  <span class=\"number\">1516</span>         <span class=\"comment\">//对于多于1个的情况，我们使用while来解决</span></span><br><span class=\"line\">  <span class=\"number\">1517</span>         error = avcodec_receive_packet(encCtx, &amp;outputPacket);</span><br><span class=\"line\">  <span class=\"number\">1518</span>         <span class=\"keyword\">if</span> (error == AVERROR(EAGAIN)) &#123;</span><br><span class=\"line\">  <span class=\"number\">1519</span>             error = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"number\">1520</span>             <span class=\"comment\">// cout &lt;&lt; \"EAGAIN\" &lt;&lt; endl;</span></span><br><span class=\"line\">  <span class=\"number\">1521</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1522</span>         &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (error == AVERROR_EOF) &#123;</span><br><span class=\"line\">  <span class=\"number\">1523</span>             error = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"number\">1524</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1525</span>         &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (error &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">  <span class=\"number\">1526</span>             av_log(<span class=\"literal\">NULL</span>, AV_LOG_ERROR, <span class=\"string\">\"Could not encode frame\\n\"</span>);</span><br><span class=\"line\">  <span class=\"number\">1527</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1528</span>         &#125; <span class=\"keyword\">else</span> &#123; </span><br><span class=\"line\">  <span class=\"number\">1529</span>             *dataPresent = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"number\">1530</span>         &#125;        </span><br><span class=\"line\">  <span class=\"number\">1531</span>                  </span><br><span class=\"line\">  <span class=\"number\">1532</span>         outputPacket.stream_index = streamIndex;</span><br><span class=\"line\">  <span class=\"number\">1533</span>                  </span><br><span class=\"line\">  <span class=\"number\">1534</span>         <span class=\"comment\">//转换pts</span></span><br><span class=\"line\">  <span class=\"number\">1535</span>         av_packet_rescale_ts(&amp;outputPacket, encCtx-&gt;time_base,</span><br><span class=\"line\">  <span class=\"number\">1536</span>                              ofmtCtx-&gt;streams[streamIndex]-&gt;time_base);</span><br><span class=\"line\">  <span class=\"number\">1537</span>     </span><br><span class=\"line\">  <span class=\"number\">1538</span>         <span class=\"comment\">// if (AVMEDIA_TYPE_AUDIO == encCtx -&gt; codec_type)&#123;</span></span><br><span class=\"line\">  <span class=\"number\">1539</span>         <span class=\"comment\">//  _pts2ms = outputPacket.pts *av_q2d(ofmtCtx -&gt; streams[streamIndex] -&gt;</span></span><br><span class=\"line\">  <span class=\"number\">1540</span>         <span class=\"comment\">// time_base) * 1000 ;//单位ms(微妙)</span></span><br><span class=\"line\">  <span class=\"number\">1541</span>         <span class=\"comment\">//&#125;      </span></span><br><span class=\"line\">  <span class=\"number\">1542</span>         <span class=\"comment\">//_pts2ms = outputPacket.pts *av_q2d(ofmtCtx -&gt; streams[streamIndex] -&gt;</span></span><br><span class=\"line\">  <span class=\"number\">1543</span>         <span class=\"comment\">// time_base) * 1000 ;//单位ms(微妙)</span></span><br><span class=\"line\">  <span class=\"number\">1544</span>         pts2ms = outputPacket.pts *</span><br><span class=\"line\">  <span class=\"number\">1545</span>                  av_q2d(ofmtCtx-&gt;streams[streamIndex]-&gt;time_base) *</span><br><span class=\"line\">  <span class=\"number\">1546</span>                  <span class=\"number\">1000</span>;  <span class=\"comment\">//单位ms(微妙)</span></span><br><span class=\"line\">  <span class=\"number\">1547</span>                         <span class=\"comment\">//编码视频和音频的时候，两者的时间是不一样的，为了保证进度一直向前，所以取最大值</span></span><br><span class=\"line\">  <span class=\"number\">1548</span>         <span class=\"keyword\">if</span> (pts2ms &gt; _pts2ms) _pts2ms = pts2ms;</span><br><span class=\"line\">  <span class=\"number\">1549</span>         av_log(<span class=\"literal\">NULL</span>, AV_LOG_INFO, <span class=\"string\">\"progress: %s\\n\"</span>, printProgress().c_str());</span><br><span class=\"line\">  <span class=\"number\">1550</span>         sendProgress();</span><br><span class=\"line\">  <span class=\"number\">1551</span>         <span class=\"keyword\">if</span> (!_ip.empty()) printProgress(_ip, _port);</span><br><span class=\"line\">  <span class=\"number\">1552</span>                  </span><br><span class=\"line\">  <span class=\"number\">1553</span>         <span class=\"keyword\">if</span> (*dataPresent &amp;&amp;</span><br><span class=\"line\">  <span class=\"number\">1554</span>             (error = av_interleaved_write_frame(ofmtCtx, &amp;outputPacket)) &lt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">  <span class=\"number\">1555</span>             av_log(<span class=\"literal\">NULL</span>, AV_LOG_ERROR, <span class=\"string\">\"Could not write frame,%s,%s:%d\\n\"</span>,</span><br><span class=\"line\">  <span class=\"number\">1556</span>                    av_err2str(error), __FILE__, __LINE__);</span><br><span class=\"line\">  <span class=\"number\">1557</span>             <span class=\"keyword\">goto</span> cleanup;</span><br><span class=\"line\">  <span class=\"number\">1558</span>         &#125;        </span><br><span class=\"line\">  <span class=\"number\">1559</span>     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>流处理结束的时候需要flush（洗刷） codec。因为codec可能在内部缓冲多个frame或packet，出于性能或其他必要的情况（如考虑B帧的情况）。 处理流程如下：</p>\n<ol>\n<li><p>调用<code>avcodec_send_()</code>传入的AVFrame或AVPacket指针设置为NULL。 这将开启draining mode（排水模式）</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1653</span>     <span class=\"keyword\">int</span> dataWritten;</span><br><span class=\"line\"><span class=\"number\">1654</span>     <span class=\"keyword\">int</span> ret;       </span><br><span class=\"line\"><span class=\"number\">1655</span>     <span class=\"keyword\">if</span> (<span class=\"literal\">NULL</span> != output-&gt;videoStream) &#123;</span><br><span class=\"line\"><span class=\"number\">1656</span>         <span class=\"keyword\">do</span> &#123;       </span><br><span class=\"line\"><span class=\"number\">1657</span>             dataWritten = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">1658</span>             ret = encodeMediaFrame(<span class=\"literal\">NULL</span>, output-&gt;formatContext,</span><br><span class=\"line\"><span class=\"number\">1659</span>                                    output-&gt;videoCodecCtx, &amp;dataWritten,</span><br><span class=\"line\"><span class=\"number\">1660</span>                                    output-&gt;videoStream-&gt;index);</span><br><span class=\"line\"><span class=\"number\">1661</span>             <span class=\"keyword\">if</span> (<span class=\"number\">0</span> &gt; ret) &#123;</span><br><span class=\"line\"><span class=\"number\">1662</span>                 av_log(<span class=\"literal\">NULL</span>, AV_LOG_ERROR,</span><br><span class=\"line\"><span class=\"number\">1663</span>                        <span class=\"string\">\"Failed whileflush video encode, %s:%d\\n\"</span>, __FILE__,</span><br><span class=\"line\"><span class=\"number\">1664</span>                        __LINE__);</span><br><span class=\"line\"><span class=\"number\">1665</span>                 <span class=\"keyword\">return</span> ret;</span><br><span class=\"line\"><span class=\"number\">1666</span>             &#125;      </span><br><span class=\"line\"><span class=\"number\">1667</span>             av_log(<span class=\"literal\">NULL</span>, AV_LOG_INFO, <span class=\"string\">\"flush video encoder data\\n\"</span>);</span><br><span class=\"line\"><span class=\"number\">1668</span>         &#125; <span class=\"keyword\">while</span> (dataWritten);</span><br><span class=\"line\"><span class=\"number\">1669</span>     &#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>反复地调用<code>avcodec_receive_()</code>直到返回<code>AVERROR_EOF</code>的错误，这个方法这个时候不会返回<code>AVERROR(EAGAIN)</code>的错误，除非你忘记了开启draining mode</p>\n</li>\n<li><p>codec可以重新开启，但是需要先调用 <code>avcodec_flush_buffers()</code>来重置codec</p>\n</li>\n</ol>\n</li>\n</ul>\n"},{"title":"ffmpeg-编码的步骤","abbrlink":3394448682,"date":"2019-05-05T06:39:17.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;总结一下编码的大致过程，方便自己下一次的处理，分为音频编码和视频\n\n### 音频编码的过程\n\n#### 1，打开输出的文件流\n```\nAVFormatContext *ofmt_ctx;\navformat_alloc_output_context2(&ofmt_ctx, NULL, NULL, filename);\n```\n\n#### 2，创建输出的音频流\n```\nAVStream *audioStream;\nAVCodec *encoder;\nAVCodecContext *enc_ctx;\naudioStream = avformat_new_stream(ofmt_ctx, NULL);\nif (!audioStream){\n\tav_log();\n}\nencoder = avcodec_find_encoder(AV_CODEC_ID_AAC);\nif(!encoder){\n\tav_log();\n}\n\n```\n#### 3，设置编码的上下文\n```\nenc_ctx = avcodec_alloc_context3(encoder);\nif (!enc_ctx){\n\tav_log();\n}\nenc_ctx -> bit_rate = 64000;\nenc_ctx -> sample_rate = 44100;\nenc_ctx -> channel_layout = 2;//这个可以根据输入来设置\nenc_ctx -> channels = av_get_channel_layout_nb_channels(enc_ctx -> channel_layout);\nenc_ctx -> sample_fmt = encoder -> sample_fmts[0];\nAVRational time_base = {1, enc_ctx -> sample_rate};\nenc_ctx -> time_base = time_base;\n\n```\n#### 4，设置flag\n```\nif (ofmt_ctx -> oformat -> flags & AVFMT_GLOBALHEADER)\n\tenc_ctx -> flags |= AV_CODEC_FLAG_GLOBAL_HEADER;\n```\n\n#### 5，打开编码器\n```\nret = avcodec_open2(enc_ctx, encoder, NULL);\nif (ret < 0){\n\tav_log();\n}\n```\n\n#### 6，设置codec_tag\n```\naudioStream -> codecpar -> codec_tag = 0;\n```\n\n#### 7，copy code to stream\n```\nret = avcodec_parameters_from_context(audioStream -> codecpar, enc_ctx);\n```\n","source":"_posts/ffmpeg-编码的步骤.md","raw":"---\ntitle: ffmpeg-编码的步骤\ncategories: [Media,video]\ntags: ffmpeg\nabbrlink: 3394448682\ndate: 2019-05-05 14:39:17\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;总结一下编码的大致过程，方便自己下一次的处理，分为音频编码和视频\n\n### 音频编码的过程\n\n#### 1，打开输出的文件流\n```\nAVFormatContext *ofmt_ctx;\navformat_alloc_output_context2(&ofmt_ctx, NULL, NULL, filename);\n```\n\n#### 2，创建输出的音频流\n```\nAVStream *audioStream;\nAVCodec *encoder;\nAVCodecContext *enc_ctx;\naudioStream = avformat_new_stream(ofmt_ctx, NULL);\nif (!audioStream){\n\tav_log();\n}\nencoder = avcodec_find_encoder(AV_CODEC_ID_AAC);\nif(!encoder){\n\tav_log();\n}\n\n```\n#### 3，设置编码的上下文\n```\nenc_ctx = avcodec_alloc_context3(encoder);\nif (!enc_ctx){\n\tav_log();\n}\nenc_ctx -> bit_rate = 64000;\nenc_ctx -> sample_rate = 44100;\nenc_ctx -> channel_layout = 2;//这个可以根据输入来设置\nenc_ctx -> channels = av_get_channel_layout_nb_channels(enc_ctx -> channel_layout);\nenc_ctx -> sample_fmt = encoder -> sample_fmts[0];\nAVRational time_base = {1, enc_ctx -> sample_rate};\nenc_ctx -> time_base = time_base;\n\n```\n#### 4，设置flag\n```\nif (ofmt_ctx -> oformat -> flags & AVFMT_GLOBALHEADER)\n\tenc_ctx -> flags |= AV_CODEC_FLAG_GLOBAL_HEADER;\n```\n\n#### 5，打开编码器\n```\nret = avcodec_open2(enc_ctx, encoder, NULL);\nif (ret < 0){\n\tav_log();\n}\n```\n\n#### 6，设置codec_tag\n```\naudioStream -> codecpar -> codec_tag = 0;\n```\n\n#### 7，copy code to stream\n```\nret = avcodec_parameters_from_context(audioStream -> codecpar, enc_ctx);\n```\n","slug":"ffmpeg-编码的步骤","published":1,"updated":"2021-02-08T06:45:14.257Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwf001qlkq5inin6wpg","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;总结一下编码的大致过程，方便自己下一次的处理，分为音频编码和视频</p>\n<h3 id=\"音频编码的过程\"><a href=\"#音频编码的过程\" class=\"headerlink\" title=\"音频编码的过程\"></a>音频编码的过程</h3><h4 id=\"1，打开输出的文件流\"><a href=\"#1，打开输出的文件流\" class=\"headerlink\" title=\"1，打开输出的文件流\"></a>1，打开输出的文件流</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AVFormatContext *ofmt_ctx;</span><br><span class=\"line\">avformat_alloc_output_context2(&amp;ofmt_ctx, NULL, NULL, filename);</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，创建输出的音频流\"><a href=\"#2，创建输出的音频流\" class=\"headerlink\" title=\"2，创建输出的音频流\"></a>2，创建输出的音频流</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AVStream *audioStream;</span><br><span class=\"line\">AVCodec *encoder;</span><br><span class=\"line\">AVCodecContext *enc_ctx;</span><br><span class=\"line\">audioStream = avformat_new_stream(ofmt_ctx, NULL);</span><br><span class=\"line\">if (!audioStream)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">encoder = avcodec_find_encoder(AV_CODEC_ID_AAC);</span><br><span class=\"line\">if(!encoder)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，设置编码的上下文\"><a href=\"#3，设置编码的上下文\" class=\"headerlink\" title=\"3，设置编码的上下文\"></a>3，设置编码的上下文</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">enc_ctx = avcodec_alloc_context3(encoder);</span><br><span class=\"line\">if (!enc_ctx)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enc_ctx -&gt; bit_rate = 64000;</span><br><span class=\"line\">enc_ctx -&gt; sample_rate = 44100;</span><br><span class=\"line\">enc_ctx -&gt; channel_layout = 2;//这个可以根据输入来设置</span><br><span class=\"line\">enc_ctx -&gt; channels = av_get_channel_layout_nb_channels(enc_ctx -&gt; channel_layout);</span><br><span class=\"line\">enc_ctx -&gt; sample_fmt = encoder -&gt; sample_fmts[0];</span><br><span class=\"line\">AVRational time_base = &#123;1, enc_ctx -&gt; sample_rate&#125;;</span><br><span class=\"line\">enc_ctx -&gt; time_base = time_base;</span><br></pre></td></tr></table></figure>\n<h4 id=\"4，设置flag\"><a href=\"#4，设置flag\" class=\"headerlink\" title=\"4，设置flag\"></a>4，设置flag</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (ofmt_ctx -&gt; oformat -&gt; flags &amp; AVFMT_GLOBALHEADER)</span><br><span class=\"line\">\tenc_ctx -&gt; flags |= AV_CODEC_FLAG_GLOBAL_HEADER;</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，打开编码器\"><a href=\"#5，打开编码器\" class=\"headerlink\" title=\"5，打开编码器\"></a>5，打开编码器</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ret = avcodec_open2(enc_ctx, encoder, NULL);</span><br><span class=\"line\">if (ret &lt; 0)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"6，设置codec-tag\"><a href=\"#6，设置codec-tag\" class=\"headerlink\" title=\"6，设置codec_tag\"></a>6，设置codec_tag</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">audioStream -&gt; codecpar -&gt; codec_tag = 0;</span><br></pre></td></tr></table></figure>\n<h4 id=\"7，copy-code-to-stream\"><a href=\"#7，copy-code-to-stream\" class=\"headerlink\" title=\"7，copy code to stream\"></a>7，copy code to stream</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ret = avcodec_parameters_from_context(audioStream -&gt; codecpar, enc_ctx);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;总结一下编码的大致过程，方便自己下一次的处理，分为音频编码和视频</p>\n<h3 id=\"音频编码的过程\"><a href=\"#音频编码的过程\" class=\"headerlink\" title=\"音频编码的过程\"></a>音频编码的过程</h3><h4 id=\"1，打开输出的文件流\"><a href=\"#1，打开输出的文件流\" class=\"headerlink\" title=\"1，打开输出的文件流\"></a>1，打开输出的文件流</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AVFormatContext *ofmt_ctx;</span><br><span class=\"line\">avformat_alloc_output_context2(&amp;ofmt_ctx, NULL, NULL, filename);</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，创建输出的音频流\"><a href=\"#2，创建输出的音频流\" class=\"headerlink\" title=\"2，创建输出的音频流\"></a>2，创建输出的音频流</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AVStream *audioStream;</span><br><span class=\"line\">AVCodec *encoder;</span><br><span class=\"line\">AVCodecContext *enc_ctx;</span><br><span class=\"line\">audioStream = avformat_new_stream(ofmt_ctx, NULL);</span><br><span class=\"line\">if (!audioStream)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">encoder = avcodec_find_encoder(AV_CODEC_ID_AAC);</span><br><span class=\"line\">if(!encoder)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，设置编码的上下文\"><a href=\"#3，设置编码的上下文\" class=\"headerlink\" title=\"3，设置编码的上下文\"></a>3，设置编码的上下文</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">enc_ctx = avcodec_alloc_context3(encoder);</span><br><span class=\"line\">if (!enc_ctx)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">enc_ctx -&gt; bit_rate = 64000;</span><br><span class=\"line\">enc_ctx -&gt; sample_rate = 44100;</span><br><span class=\"line\">enc_ctx -&gt; channel_layout = 2;//这个可以根据输入来设置</span><br><span class=\"line\">enc_ctx -&gt; channels = av_get_channel_layout_nb_channels(enc_ctx -&gt; channel_layout);</span><br><span class=\"line\">enc_ctx -&gt; sample_fmt = encoder -&gt; sample_fmts[0];</span><br><span class=\"line\">AVRational time_base = &#123;1, enc_ctx -&gt; sample_rate&#125;;</span><br><span class=\"line\">enc_ctx -&gt; time_base = time_base;</span><br></pre></td></tr></table></figure>\n<h4 id=\"4，设置flag\"><a href=\"#4，设置flag\" class=\"headerlink\" title=\"4，设置flag\"></a>4，设置flag</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if (ofmt_ctx -&gt; oformat -&gt; flags &amp; AVFMT_GLOBALHEADER)</span><br><span class=\"line\">\tenc_ctx -&gt; flags |= AV_CODEC_FLAG_GLOBAL_HEADER;</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，打开编码器\"><a href=\"#5，打开编码器\" class=\"headerlink\" title=\"5，打开编码器\"></a>5，打开编码器</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ret = avcodec_open2(enc_ctx, encoder, NULL);</span><br><span class=\"line\">if (ret &lt; 0)&#123;</span><br><span class=\"line\">\tav_log();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"6，设置codec-tag\"><a href=\"#6，设置codec-tag\" class=\"headerlink\" title=\"6，设置codec_tag\"></a>6，设置codec_tag</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">audioStream -&gt; codecpar -&gt; codec_tag = 0;</span><br></pre></td></tr></table></figure>\n<h4 id=\"7，copy-code-to-stream\"><a href=\"#7，copy-code-to-stream\" class=\"headerlink\" title=\"7，copy code to stream\"></a>7，copy code to stream</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ret = avcodec_parameters_from_context(audioStream -&gt; codecpar, enc_ctx);</span><br></pre></td></tr></table></figure>\n"},{"title":"gcc-5.1.0源码安装","abbrlink":2230395924,"date":"2020-04-17T02:15:55.000Z","_content":"\n对于一些源码的编译如poco库，需要的GCC的版本要求比较高，所以需要源码编译GCC、\n\n\n\n### 一，源码下载\n\n~~~\n地址：\nhttps://ftp.gnu.org/gnu/gcc/\ngcc-5.1.0 可以支持C++14\n~~~\n\n\n\n### 二，依赖环境安装\n\n~~~\ncd gcc-5.1.0\n./contrib/download_prerequisites\n~~~\n\n\n\n~~~\nBuilding GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+\n地址：\nftp://gcc.gnu.org/pub/gcc/infrastructure/\n\nwget ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2\nwget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2\nwget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz\n~~~\n\n### 三，依赖解压安装\n\n~~~\n1，安装gmp\ntar -jxvf gmp-6.1.0.tar.bz2\ncd gmp-6.1.0\n./configure\nmake && make install\n\nerror:No usable m4 in $PATH or /usr/5bin\nyum install m4\n\n2,安装mpfr\ntar -jxvf mpfr-3.1.4.tar.bz2\ncd mpfr-3.1.4\n./configure\nmake && make install\n\n3,安装mpc\ntar -zxvf mpc-1.0.3.tar.gz\ncd mpc-1.0.3\n./configure\nmake && make install\n~~~\n\n### 四，源码安装\n\n~~~\n./configure  --enable-checking=release --enable-languages=c,c++ --disable-multilib\nmake \nmake install\n\n#将链接复制\ncp -vf /usr/local/lib64/libstdc++.*  /usr/lib64/\ngcc -v\ngcc version 5.1.0 (GCC)\n~~~\n\n","source":"_posts/gcc-5-1-0源码安装.md","raw":"---\ntitle: gcc-5.1.0源码安装\ncategories: [Cpp,gcc]\ntags: gcc\n\nabbrlink: 2230395924\ndate: 2020-04-17 10:15:55\n---\n\n对于一些源码的编译如poco库，需要的GCC的版本要求比较高，所以需要源码编译GCC、\n\n\n\n### 一，源码下载\n\n~~~\n地址：\nhttps://ftp.gnu.org/gnu/gcc/\ngcc-5.1.0 可以支持C++14\n~~~\n\n\n\n### 二，依赖环境安装\n\n~~~\ncd gcc-5.1.0\n./contrib/download_prerequisites\n~~~\n\n\n\n~~~\nBuilding GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+\n地址：\nftp://gcc.gnu.org/pub/gcc/infrastructure/\n\nwget ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2\nwget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2\nwget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz\n~~~\n\n### 三，依赖解压安装\n\n~~~\n1，安装gmp\ntar -jxvf gmp-6.1.0.tar.bz2\ncd gmp-6.1.0\n./configure\nmake && make install\n\nerror:No usable m4 in $PATH or /usr/5bin\nyum install m4\n\n2,安装mpfr\ntar -jxvf mpfr-3.1.4.tar.bz2\ncd mpfr-3.1.4\n./configure\nmake && make install\n\n3,安装mpc\ntar -zxvf mpc-1.0.3.tar.gz\ncd mpc-1.0.3\n./configure\nmake && make install\n~~~\n\n### 四，源码安装\n\n~~~\n./configure  --enable-checking=release --enable-languages=c,c++ --disable-multilib\nmake \nmake install\n\n#将链接复制\ncp -vf /usr/local/lib64/libstdc++.*  /usr/lib64/\ngcc -v\ngcc version 5.1.0 (GCC)\n~~~\n\n","slug":"gcc-5-1-0源码安装","published":1,"updated":"2021-02-08T07:01:11.416Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwg001rlkq5isz3c27u","content":"<p>对于一些源码的编译如poco库，需要的GCC的版本要求比较高，所以需要源码编译GCC、</p>\n<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">地址：</span><br><span class=\"line\">https://ftp.gnu.org/gnu/gcc/</span><br><span class=\"line\">gcc-5.1.0 可以支持C++14</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，依赖环境安装\"><a href=\"#二，依赖环境安装\" class=\"headerlink\" title=\"二，依赖环境安装\"></a>二，依赖环境安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd gcc-5.1.0</span><br><span class=\"line\">./contrib/download_prerequisites</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Building GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+</span><br><span class=\"line\">地址：</span><br><span class=\"line\">ftp://gcc.gnu.org/pub/gcc/infrastructure/</span><br><span class=\"line\"></span><br><span class=\"line\">wget ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2</span><br><span class=\"line\">wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2</span><br><span class=\"line\">wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，依赖解压安装\"><a href=\"#三，依赖解压安装\" class=\"headerlink\" title=\"三，依赖解压安装\"></a>三，依赖解压安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，安装gmp</span><br><span class=\"line\">tar -jxvf gmp-6.1.0.tar.bz2</span><br><span class=\"line\">cd gmp-6.1.0</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\">error:No usable m4 in $PATH or /usr/5bin</span><br><span class=\"line\">yum install m4</span><br><span class=\"line\"></span><br><span class=\"line\">2,安装mpfr</span><br><span class=\"line\">tar -jxvf mpfr-3.1.4.tar.bz2</span><br><span class=\"line\">cd mpfr-3.1.4</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\">3,安装mpc</span><br><span class=\"line\">tar -zxvf mpc-1.0.3.tar.gz</span><br><span class=\"line\">cd mpc-1.0.3</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，源码安装\"><a href=\"#四，源码安装\" class=\"headerlink\" title=\"四，源码安装\"></a>四，源码安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure  --enable-checking=release --enable-languages=c,c++ --disable-multilib</span><br><span class=\"line\">make </span><br><span class=\"line\">make install</span><br><span class=\"line\"></span><br><span class=\"line\">#将链接复制</span><br><span class=\"line\">cp -vf /usr/local/lib64/libstdc++.*  /usr/lib64/</span><br><span class=\"line\">gcc -v</span><br><span class=\"line\">gcc version 5.1.0 (GCC)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>对于一些源码的编译如poco库，需要的GCC的版本要求比较高，所以需要源码编译GCC、</p>\n<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">地址：</span><br><span class=\"line\">https://ftp.gnu.org/gnu/gcc/</span><br><span class=\"line\">gcc-5.1.0 可以支持C++14</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，依赖环境安装\"><a href=\"#二，依赖环境安装\" class=\"headerlink\" title=\"二，依赖环境安装\"></a>二，依赖环境安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd gcc-5.1.0</span><br><span class=\"line\">./contrib/download_prerequisites</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Building GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+</span><br><span class=\"line\">地址：</span><br><span class=\"line\">ftp://gcc.gnu.org/pub/gcc/infrastructure/</span><br><span class=\"line\"></span><br><span class=\"line\">wget ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2</span><br><span class=\"line\">wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2</span><br><span class=\"line\">wget ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，依赖解压安装\"><a href=\"#三，依赖解压安装\" class=\"headerlink\" title=\"三，依赖解压安装\"></a>三，依赖解压安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，安装gmp</span><br><span class=\"line\">tar -jxvf gmp-6.1.0.tar.bz2</span><br><span class=\"line\">cd gmp-6.1.0</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\">error:No usable m4 in $PATH or /usr/5bin</span><br><span class=\"line\">yum install m4</span><br><span class=\"line\"></span><br><span class=\"line\">2,安装mpfr</span><br><span class=\"line\">tar -jxvf mpfr-3.1.4.tar.bz2</span><br><span class=\"line\">cd mpfr-3.1.4</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br><span class=\"line\"></span><br><span class=\"line\">3,安装mpc</span><br><span class=\"line\">tar -zxvf mpc-1.0.3.tar.gz</span><br><span class=\"line\">cd mpc-1.0.3</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，源码安装\"><a href=\"#四，源码安装\" class=\"headerlink\" title=\"四，源码安装\"></a>四，源码安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure  --enable-checking=release --enable-languages=c,c++ --disable-multilib</span><br><span class=\"line\">make </span><br><span class=\"line\">make install</span><br><span class=\"line\"></span><br><span class=\"line\">#将链接复制</span><br><span class=\"line\">cp -vf /usr/local/lib64/libstdc++.*  /usr/lib64/</span><br><span class=\"line\">gcc -v</span><br><span class=\"line\">gcc version 5.1.0 (GCC)</span><br></pre></td></tr></table></figure>\n"},{"title":"ffmpeg-源码编译支持GPU","abbrlink":2764140538,"date":"2020-01-14T11:09:01.000Z","_content":"\n> ​\t源码编译需要很多的库的支持，一种是基础的库，一种是你需要的编解码信息的库\n\n## 一，ffmpeg源码的下载\n\n~~~\n在git上找个你需要的版本的库，直接通过git下载\ngit clone https://github.com/FFmpeg/FFmpeg.git\n\nffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52\ncuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）\ndrive 驱动版本 Driver Version: 410.48 \nnv-codec-headers 版本 sdk/8.1\n~~~\n\n## 二，基础环境的准备\n\n~~~\nyum -y install autoconf automake freetype-devel gcc gcc-c++ git libtool make nasm pkgconfig zlib-devel bzip2 bzip2-devel\n~~~\n\n## 三，编码过程\n\n#### 1，设置环境路径\n\n> ​\t在  /etc/profile 文件中，设置 PKG_CONFIG_PATH  路径\n\n~~~\nvim /etc/profile\nexport PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig\n~~~\n\n#### 2，编码\n\n> ​\t配置好configure之后，通过make可以一步步试探你缺少的库是什么，然后在下载，编译\n>\n> 下载完之后，通过命令来配置你需要的东西\n> ./configure  --help\n\n~~~\nmake 编译的常用命令\n./configure\nmake -j 10 (编译，并行10个核来一起编译，可以取消)\nmake install (安装)\nmake disclean (卸载)\nmake clean (清除编译)\n~~~\n\n#### 3，解决gnutls的问题\n\n![gnutls](/images/gnutls.png)\n\n>我们需要手动的安装gnutls，gnutls3.5.19版本的可以，大于这个版本的有问题,\n>\n>http://www.linuxfromscratch.org/blfs/view/svn/postlfs/gnutls.html \n>\n>有安装的方法\n\n~~~\n1,安装gnutls需要先安装gnutls，所有先手动下载这个\nwget https://ftp.gnu.org/gnu/nettle/nettle-3.1.1.tar.gz\ntar zxf nettle-3.1.1.tar.gz  \n./configure --enable-shared\nmake\nmake install\n2,安装gnutls\nwget https://www.gnupg.org/ftp/gcrypt/gnutls/v3.5/gnutls-3.5.19.tar.xz\nxz  -d gnutls-3.5.19.tar.xz\ntar xf gnutls-3.5.19.tar\ncd gnutls-3.5.19\n./configure --enable-shared\nmake\nmake install\n~~~\n\n在安装gnutls时，我们使用./configure --enable-shared时，可能遇到以下的问题;\n\n* ![gmp](/images/gmp.png)\n\n  > 解决：\n  >\n  > yum install gmp-devel\n\n* ![libtasn1.png](/images/libtasn1.png)\n\n  > 解决：\n  >\n  > yum install libffi libffi-devel\n  >\n  > ./configure --enable-shared --with-included-libtasn1\n\n\n\n* ![unistring.png](/images/unistring.png)\n\n  > 解决：\n  >\n  > yum install libunistring-devel\n  >\n  > ./configure --enable-shared --with-included-libtasn1 --with-included-unistring\n\n* ![P11.png](/images/P11.png)\n\n  > 解决：\n  >\n  > yum install p11-kit-devel\n\n* ![dnssec.png](/images/dnssec.png)\n\n  > yum install unbound unbound-devel unbound-libs\n  >\n  > ./configure --enable-shared --with-included-libtasn1 --with-included-unistring\n\n  \n\n#### 4，解决ladspa.h的问题\n\n![ladspa.png](/images/ladspa.png)\n\n~~~\nyum install  ladspa*\n~~~\n\n#### 5，解决libass的问题\n\n![libass.png](/images/libass.png)\n\n~~~\nyum install libass*\n~~~\n\n#### 6，解决libdc1394-2的问题\n\n~~~\n1,官网下载源码\nhttps://sourceforge.net/projects/libdc1394/files/libdc1394-2/\n2，编译\n./configure\nmake\nmake install\n~~~\n\n#### 7，解决libgsm的问题\n\n![libgsm.png](/images/libgsm.png)\n\n~~~\nyum install gsm-tools gsm-devel\n~~~\n\n#### 8，解决libmp3lame版本的问题\n\n![libmp3lame.png](/images/libmp3lame.png)\n\n~~~\n源码安装，地址\ngit clone https://github.com/gypified/libmp3lame.git\n./configure\nmake\nmake install\n~~~\n\n#### 9，解决libopencore_amrnb的问题\n\n![libopencore_amrnb.png](/images/libopencore_amrnb.png)\n\n~~~\n官网下载源码，再手动编译\nhttps://sourceforge.net/projects/opencore-amr/files/opencore-amr/\n ./configure\n make\n make install\n~~~\n\n\n\n#### 10，解决opencv的问题\n\n#### 11，解决openh264的问题\n\n![openh264.png](/images/openh264.png)\n\n~~~\n从git上下载源码\ngit clone https://github.com/cisco/openh264\n如果下载失败，则直接下载zip包，然后解压安装\nmake ARCH=x86_64\nmake install\n~~~\n\n#### 12，解决libopenjp2版本的问题\n\n![libopenjp2.png](/images/libopenjp2.png)\n\n~~~\ngit下载源码来编译安装\ngit clone https://github.com/uclouvain/openjpeg.git\n如果下载不下来，则下载zip包解压安装 \nunzip openjpeg-master.zip\ncmake 安装\nmkdir build\ncd build\ncmake .. -DCMAKE_BUILD_TYPE=Release\nmake -j 10\nmake install\n~~~\n\n#### 13，解决opus的问题\n\n![opus.png](/images/opus.png)\n\n~~~\n#需要手动的下载安装\nhttps://ftp.osuosl.org/pub/xiph/releases/opus/\n#安装步骤\nwget http://downloads.xiph.org/releases/opus/opus-1.2.1.tar.gz\ntar -zxvf opus-1.2.1.tar.gz\ncd opus-1.2.1\n./configure\nmake\nmake install\n#注意：如果pkg_config没有找到，需要手动的设置路径，见前面PKG_CONFIG_PATH路径的设置，如果设置好之后，库也存在还是不行，则要检查是否使用yum下载了低版本的，若是则删除\nyum remove opus-1.0.2-6.el7.x86_64 opus-tools-0.1.6-1.el7.x86_64 opusfile-0.5-1.el7.x86_64 opus-devel-1.0.2-6.el7.x86_64 opusfile-devel-0.5-1.el7.x86_64\n~~~\n\n\n\n#### 14，解决libpulse的问题\n\n#### 15，解决libsoxr的问题\n\n![libsoxr.png](/images/libsoxr.png)\n\n~~~\n#手动下载包，然后编译安装\nhttps://sourceforge.net/projects/soxr/files/\ntar -xvf soxr-0.1.3-Source.tar\n./go\ncd Realse\nmake install\n~~~\n\n在执行go的时候可能遇到这个问题,则需要下载cmake高级版本\n\n![go.png](/images/go.png)\n\n~~~\n# cmake 安装\nhttps://cmake.org/download/\ntar -zxvf cmake-3.13.0-rc1.tar.gz\n./configure\nmake\nmake install\n~~~\n\n#### 16，解决speex的问题\n\n![speex.png](/images/speex.png)\n\n~~~\n##手动下载安装包，编译，选择 libspeex下载\nhttps://xiph.org/downloads/\n./configure  --enable-shared\nmake\nmake install\n~~~\n\n#### 17，解决libtheora的问题\n\n![libtheora.png](/images/libtheora.png)\n\n~~~\n## 手动下载安装包，编译，选择libtheora下载\nhttps://xiph.org/downloads/\nunzip libtheora-1.1.1.zip\n./configure\nmake\nmake install\n\n~~~\n\n在configure的过程中，可能error,则我们需要下载安装这个\n\n![ogg.png](/images/ogg.png)\n\n~~~\nyum install libogg*\n~~~\n\n#### 18，解决libv412的问题\n\n#### 19，解决vorbis的问题\n\n![vorbis.png](/images/vorbis.png)\n\n~~~\ngit clone https://github.com/xiph/vorbis.git\n./autogen.sh\n./configure  --enable-shared\nmake\nmake install\n~~~\n\n#### 20，解决libx264的问题\n\n![h264.png](/images/libx264.png)\n\n~~~\ngit clone --depth 1 http://git.videolan.org/git/x264\n./configure --enable-shared\nmake\nmake install\n~~~\n\n如果编译时报错，则需要安装nasm\n\n~~~\ncurl -O -L http://www.nasm.us/pub/nasm/releasebuilds/2.13.02/nasm-2.13.02.tar.bz2  \ntar -xjvf nasm-2.13.02.tar.bz2\ncd nasm-2.13.02\n./autogen.sh \n./configure  --enable-shared \nmake\nmake install\n\n~~~\n\n#### 21，解决libx265的问题\n\n![x265.png](/images/x265.png)\n\n~~~\ngit clone  --depth 1 https://github.com/videolan/x265.git\ncd x265\ncd build\ncmake ../source\nmake\nmake install\n~~~\n\n\n\n#### 22，解决libxvid的问题\n\n![libxvid.png](/images/libxvid.png)\n\n~~~\n##官网下载\nhttps://www.xvid.com/download/\n## 按下图过程来查找\n## 然后按照README来安装\ncd build/generic\n./configure\nmake -j 10\n\nmake install\n~~~\n\n![ xvid](/images/xvid.png)\n\n![readme.png](C:/Users/Administrator/Desktop/leopard4.1/images/readme.png)\n\n![bar.png](/images/bar.png)\n\n#### 23，解决openal的问题\n\n![openal.png](/images/openal.png)\n\n~~~\nyum install openal-soft openal-soft-devel\n~~~\n\n\n\n#### 24，解决libcdio的问题\n\n#### 25，解决bzlib的问题\n\n#### 26，解决libxcb的问题\n\n![libxcb.png](/images/libxcb.png)\n\n~~~\nyum install libxcb-devel\n~~~\n\n\n\n## 四，添加硬件编解码\n\n#### 1，查看机器上显卡的型号\n\n~~~\nlspci | grep VGA\n~~~\n\n![vga](/images/vga.png)\n\n#### 2，安装对应显卡的驱动\n\n~~~\nhttps://www.nvidia.com/Download/index.aspx?lang=en-us\n安装的方法见显卡驱动安装的文档\n~~~\n\n#### 3，重新编译ffmpeg\n\n~~~\n在./configure时添加以下的选项，来重新编译ffmpeg，既可以驱动显卡\n--enable-cuda-sdk \\\n--enable-cuvid \\\n--enable-nvenc \\\n--enable-nonfree \\\n--enable-libnpp \\\n--extra-cflags=-I/usr/local/cuda/include \\\n--extra-ldflags=-L/usr/local/cuda/lib64 \\\n~~~\n\n#### 4，查看是否安装成功\n\n~~~\n使用ffmpeg -hwaccels命令查看支持的硬件加速选项\nffmpeg -hwaccels\n~~~\n\n![hw.png](/images/hw.png)\n\n#### 5，查看cuvid提供的GPU编解码器\n\n~~~\nffmpeg -codecs | grep cuvid\n~~~\n\n![cuvid.png](/images/cuvid.png)\n\n#### 6，使用GPU进行转码\n\n> 用GPU进行转码的命令和软转码命令不太一样，CPU转码的时候，我们可以依赖ffmpeg识别输入视频的编码格式并选择对应的解码器，但ffmpeg只会自动选择CPU解码器，要让ffmpeg使用GPU解码器，必须先用ffprobe识别出输入视频的编码格式，然后在命令行中指定对应的GPU解码器。\n>\n> 例如，将h264编码的源视频转码为指定尺寸和码率的h264编码视频：\n\n~~~\nffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/video-H264-AAC.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4\n\n-hwaccel cuvid：指定使用cuvid硬件加速\n-c:v h264_cuvid：使用h264_cuvid进行视频解码\n-c:v h264_nvenc：使用h264_nvenc进行视频编码\n-vf scale_npp=1280:-1：指定输出视频的宽高，注意，这里和软解码时使用的-vf scale=x:x不一样\n转码期间使用nvidia-smi查看显卡状态，能够看到ffmpeg确实是在使用GPU进行转码：\n~~~\n\n如果在执行命令的时候报错，则需要,进行nv-codec-headers和驱动的版本匹配的处理\n\n![drive.png](/images/drive.png)\n\n我开始编译nv-codec-headers使用的是最新版本9.1的，编译出错，有两种方法，一种是升级drive的版本，升级到430以上，这个比较的麻烦，另一种是降低nv-codec-headers的版本，我降低到8.1版本，就可以成功\n\n~~~\nffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52\ncuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）\ndrive 驱动版本 Driver Version: 410.48 \nnv-codec-headers 版本 sdk/8.1\n~~~\n\n#### 7,在容器中使用NVIDIA\n\n~~~\n在将自己的服务打包成镜像的时候，开始没有设置环境变量，导致怎么都无法调用NVIDIA进行硬件的转码；\n最后查询了很多的资料，发现需要添加一个环境变量，在Dockfile中\nENV NVIDIA_DRIVER_CAPABILITIES video,compute,utility\n才能保证容器中使用成功\n~~~\n\n\n\n#### 8，gpu和cpu转码测试\n\n​\t对于同一个视频，分别采用cpu和GPU两种方式来进行转码，对比这两者之间的效率\n\n~~~\n#机器信息\n逻辑核：24\n内存：64G\n24  Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz\n系统：CentOS Linux release 7.6.1810 (Core)\n#视频信息：\nname: 11.mkv\nsize： 1.1G\nVideo: h264 (High), yuv420p(progressive), 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 1k tbn, 50 tbc (default)\nAudio: ac3, 48000 Hz, stereo, fltp, 192 kb/s (default)\n#软件转码：\n[time] ffmpeg  -i video/11.mkv -c:v libx264 -b:v 2048k -vf scale=1280:-1 -y /root/transcode.mp4\n#结果\nreal\t11m18.807s\nuser\t180m16.290s\nsys\t\t1m36.925s\ncpu占用\t平均1600%\n[time] ./softhw /root/video/11.mkv /opt/nvitra1.mp4\nreal\t14m51.166s\nuser\t220m2.857s\nsys\t\t1m21.718s\ncpu占用  平均1600%\n#硬件转码：\n[time] ffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/11.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4\n#结果\nreal\t1m45.228s\nuser\t1m15.910s\nsys\t\t0m18.734s\ncpu占用\t平均90%\n[time] ./hw /root/video/11.mkv /opt/nvitra.mp4\nreal\t1m29.478s\nuser\t0m22.754s\nsys\t\t0m23.465s\ncpu占用 50%\n~~~\n\n#### 8，指定显卡进行转码\n\n~~~\nffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i <input> -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y <output>\n\nffmpeg -hwaccel cuvid -hwaccel_device 1 -c:v h264_cuvid -i <input> -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y <output>\n\nffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i /root/source_media/flv.flv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1  -y /root/flv.mp4\n~~~\n\n\n\n\n\n\n\n","source":"_posts/ffmpeg-源码编译支持GPU.md","raw":"---\ntitle: ffmpeg-源码编译支持GPU\ncategories: [Media,video]\ntags:\n  - ffmpeg\n  - GPU\nabbrlink: 2764140538\ndate: 2020-01-14 19:09:01\n---\n\n> ​\t源码编译需要很多的库的支持，一种是基础的库，一种是你需要的编解码信息的库\n\n## 一，ffmpeg源码的下载\n\n~~~\n在git上找个你需要的版本的库，直接通过git下载\ngit clone https://github.com/FFmpeg/FFmpeg.git\n\nffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52\ncuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）\ndrive 驱动版本 Driver Version: 410.48 \nnv-codec-headers 版本 sdk/8.1\n~~~\n\n## 二，基础环境的准备\n\n~~~\nyum -y install autoconf automake freetype-devel gcc gcc-c++ git libtool make nasm pkgconfig zlib-devel bzip2 bzip2-devel\n~~~\n\n## 三，编码过程\n\n#### 1，设置环境路径\n\n> ​\t在  /etc/profile 文件中，设置 PKG_CONFIG_PATH  路径\n\n~~~\nvim /etc/profile\nexport PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig\n~~~\n\n#### 2，编码\n\n> ​\t配置好configure之后，通过make可以一步步试探你缺少的库是什么，然后在下载，编译\n>\n> 下载完之后，通过命令来配置你需要的东西\n> ./configure  --help\n\n~~~\nmake 编译的常用命令\n./configure\nmake -j 10 (编译，并行10个核来一起编译，可以取消)\nmake install (安装)\nmake disclean (卸载)\nmake clean (清除编译)\n~~~\n\n#### 3，解决gnutls的问题\n\n![gnutls](/images/gnutls.png)\n\n>我们需要手动的安装gnutls，gnutls3.5.19版本的可以，大于这个版本的有问题,\n>\n>http://www.linuxfromscratch.org/blfs/view/svn/postlfs/gnutls.html \n>\n>有安装的方法\n\n~~~\n1,安装gnutls需要先安装gnutls，所有先手动下载这个\nwget https://ftp.gnu.org/gnu/nettle/nettle-3.1.1.tar.gz\ntar zxf nettle-3.1.1.tar.gz  \n./configure --enable-shared\nmake\nmake install\n2,安装gnutls\nwget https://www.gnupg.org/ftp/gcrypt/gnutls/v3.5/gnutls-3.5.19.tar.xz\nxz  -d gnutls-3.5.19.tar.xz\ntar xf gnutls-3.5.19.tar\ncd gnutls-3.5.19\n./configure --enable-shared\nmake\nmake install\n~~~\n\n在安装gnutls时，我们使用./configure --enable-shared时，可能遇到以下的问题;\n\n* ![gmp](/images/gmp.png)\n\n  > 解决：\n  >\n  > yum install gmp-devel\n\n* ![libtasn1.png](/images/libtasn1.png)\n\n  > 解决：\n  >\n  > yum install libffi libffi-devel\n  >\n  > ./configure --enable-shared --with-included-libtasn1\n\n\n\n* ![unistring.png](/images/unistring.png)\n\n  > 解决：\n  >\n  > yum install libunistring-devel\n  >\n  > ./configure --enable-shared --with-included-libtasn1 --with-included-unistring\n\n* ![P11.png](/images/P11.png)\n\n  > 解决：\n  >\n  > yum install p11-kit-devel\n\n* ![dnssec.png](/images/dnssec.png)\n\n  > yum install unbound unbound-devel unbound-libs\n  >\n  > ./configure --enable-shared --with-included-libtasn1 --with-included-unistring\n\n  \n\n#### 4，解决ladspa.h的问题\n\n![ladspa.png](/images/ladspa.png)\n\n~~~\nyum install  ladspa*\n~~~\n\n#### 5，解决libass的问题\n\n![libass.png](/images/libass.png)\n\n~~~\nyum install libass*\n~~~\n\n#### 6，解决libdc1394-2的问题\n\n~~~\n1,官网下载源码\nhttps://sourceforge.net/projects/libdc1394/files/libdc1394-2/\n2，编译\n./configure\nmake\nmake install\n~~~\n\n#### 7，解决libgsm的问题\n\n![libgsm.png](/images/libgsm.png)\n\n~~~\nyum install gsm-tools gsm-devel\n~~~\n\n#### 8，解决libmp3lame版本的问题\n\n![libmp3lame.png](/images/libmp3lame.png)\n\n~~~\n源码安装，地址\ngit clone https://github.com/gypified/libmp3lame.git\n./configure\nmake\nmake install\n~~~\n\n#### 9，解决libopencore_amrnb的问题\n\n![libopencore_amrnb.png](/images/libopencore_amrnb.png)\n\n~~~\n官网下载源码，再手动编译\nhttps://sourceforge.net/projects/opencore-amr/files/opencore-amr/\n ./configure\n make\n make install\n~~~\n\n\n\n#### 10，解决opencv的问题\n\n#### 11，解决openh264的问题\n\n![openh264.png](/images/openh264.png)\n\n~~~\n从git上下载源码\ngit clone https://github.com/cisco/openh264\n如果下载失败，则直接下载zip包，然后解压安装\nmake ARCH=x86_64\nmake install\n~~~\n\n#### 12，解决libopenjp2版本的问题\n\n![libopenjp2.png](/images/libopenjp2.png)\n\n~~~\ngit下载源码来编译安装\ngit clone https://github.com/uclouvain/openjpeg.git\n如果下载不下来，则下载zip包解压安装 \nunzip openjpeg-master.zip\ncmake 安装\nmkdir build\ncd build\ncmake .. -DCMAKE_BUILD_TYPE=Release\nmake -j 10\nmake install\n~~~\n\n#### 13，解决opus的问题\n\n![opus.png](/images/opus.png)\n\n~~~\n#需要手动的下载安装\nhttps://ftp.osuosl.org/pub/xiph/releases/opus/\n#安装步骤\nwget http://downloads.xiph.org/releases/opus/opus-1.2.1.tar.gz\ntar -zxvf opus-1.2.1.tar.gz\ncd opus-1.2.1\n./configure\nmake\nmake install\n#注意：如果pkg_config没有找到，需要手动的设置路径，见前面PKG_CONFIG_PATH路径的设置，如果设置好之后，库也存在还是不行，则要检查是否使用yum下载了低版本的，若是则删除\nyum remove opus-1.0.2-6.el7.x86_64 opus-tools-0.1.6-1.el7.x86_64 opusfile-0.5-1.el7.x86_64 opus-devel-1.0.2-6.el7.x86_64 opusfile-devel-0.5-1.el7.x86_64\n~~~\n\n\n\n#### 14，解决libpulse的问题\n\n#### 15，解决libsoxr的问题\n\n![libsoxr.png](/images/libsoxr.png)\n\n~~~\n#手动下载包，然后编译安装\nhttps://sourceforge.net/projects/soxr/files/\ntar -xvf soxr-0.1.3-Source.tar\n./go\ncd Realse\nmake install\n~~~\n\n在执行go的时候可能遇到这个问题,则需要下载cmake高级版本\n\n![go.png](/images/go.png)\n\n~~~\n# cmake 安装\nhttps://cmake.org/download/\ntar -zxvf cmake-3.13.0-rc1.tar.gz\n./configure\nmake\nmake install\n~~~\n\n#### 16，解决speex的问题\n\n![speex.png](/images/speex.png)\n\n~~~\n##手动下载安装包，编译，选择 libspeex下载\nhttps://xiph.org/downloads/\n./configure  --enable-shared\nmake\nmake install\n~~~\n\n#### 17，解决libtheora的问题\n\n![libtheora.png](/images/libtheora.png)\n\n~~~\n## 手动下载安装包，编译，选择libtheora下载\nhttps://xiph.org/downloads/\nunzip libtheora-1.1.1.zip\n./configure\nmake\nmake install\n\n~~~\n\n在configure的过程中，可能error,则我们需要下载安装这个\n\n![ogg.png](/images/ogg.png)\n\n~~~\nyum install libogg*\n~~~\n\n#### 18，解决libv412的问题\n\n#### 19，解决vorbis的问题\n\n![vorbis.png](/images/vorbis.png)\n\n~~~\ngit clone https://github.com/xiph/vorbis.git\n./autogen.sh\n./configure  --enable-shared\nmake\nmake install\n~~~\n\n#### 20，解决libx264的问题\n\n![h264.png](/images/libx264.png)\n\n~~~\ngit clone --depth 1 http://git.videolan.org/git/x264\n./configure --enable-shared\nmake\nmake install\n~~~\n\n如果编译时报错，则需要安装nasm\n\n~~~\ncurl -O -L http://www.nasm.us/pub/nasm/releasebuilds/2.13.02/nasm-2.13.02.tar.bz2  \ntar -xjvf nasm-2.13.02.tar.bz2\ncd nasm-2.13.02\n./autogen.sh \n./configure  --enable-shared \nmake\nmake install\n\n~~~\n\n#### 21，解决libx265的问题\n\n![x265.png](/images/x265.png)\n\n~~~\ngit clone  --depth 1 https://github.com/videolan/x265.git\ncd x265\ncd build\ncmake ../source\nmake\nmake install\n~~~\n\n\n\n#### 22，解决libxvid的问题\n\n![libxvid.png](/images/libxvid.png)\n\n~~~\n##官网下载\nhttps://www.xvid.com/download/\n## 按下图过程来查找\n## 然后按照README来安装\ncd build/generic\n./configure\nmake -j 10\n\nmake install\n~~~\n\n![ xvid](/images/xvid.png)\n\n![readme.png](C:/Users/Administrator/Desktop/leopard4.1/images/readme.png)\n\n![bar.png](/images/bar.png)\n\n#### 23，解决openal的问题\n\n![openal.png](/images/openal.png)\n\n~~~\nyum install openal-soft openal-soft-devel\n~~~\n\n\n\n#### 24，解决libcdio的问题\n\n#### 25，解决bzlib的问题\n\n#### 26，解决libxcb的问题\n\n![libxcb.png](/images/libxcb.png)\n\n~~~\nyum install libxcb-devel\n~~~\n\n\n\n## 四，添加硬件编解码\n\n#### 1，查看机器上显卡的型号\n\n~~~\nlspci | grep VGA\n~~~\n\n![vga](/images/vga.png)\n\n#### 2，安装对应显卡的驱动\n\n~~~\nhttps://www.nvidia.com/Download/index.aspx?lang=en-us\n安装的方法见显卡驱动安装的文档\n~~~\n\n#### 3，重新编译ffmpeg\n\n~~~\n在./configure时添加以下的选项，来重新编译ffmpeg，既可以驱动显卡\n--enable-cuda-sdk \\\n--enable-cuvid \\\n--enable-nvenc \\\n--enable-nonfree \\\n--enable-libnpp \\\n--extra-cflags=-I/usr/local/cuda/include \\\n--extra-ldflags=-L/usr/local/cuda/lib64 \\\n~~~\n\n#### 4，查看是否安装成功\n\n~~~\n使用ffmpeg -hwaccels命令查看支持的硬件加速选项\nffmpeg -hwaccels\n~~~\n\n![hw.png](/images/hw.png)\n\n#### 5，查看cuvid提供的GPU编解码器\n\n~~~\nffmpeg -codecs | grep cuvid\n~~~\n\n![cuvid.png](/images/cuvid.png)\n\n#### 6，使用GPU进行转码\n\n> 用GPU进行转码的命令和软转码命令不太一样，CPU转码的时候，我们可以依赖ffmpeg识别输入视频的编码格式并选择对应的解码器，但ffmpeg只会自动选择CPU解码器，要让ffmpeg使用GPU解码器，必须先用ffprobe识别出输入视频的编码格式，然后在命令行中指定对应的GPU解码器。\n>\n> 例如，将h264编码的源视频转码为指定尺寸和码率的h264编码视频：\n\n~~~\nffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/video-H264-AAC.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4\n\n-hwaccel cuvid：指定使用cuvid硬件加速\n-c:v h264_cuvid：使用h264_cuvid进行视频解码\n-c:v h264_nvenc：使用h264_nvenc进行视频编码\n-vf scale_npp=1280:-1：指定输出视频的宽高，注意，这里和软解码时使用的-vf scale=x:x不一样\n转码期间使用nvidia-smi查看显卡状态，能够看到ffmpeg确实是在使用GPU进行转码：\n~~~\n\n如果在执行命令的时候报错，则需要,进行nv-codec-headers和驱动的版本匹配的处理\n\n![drive.png](/images/drive.png)\n\n我开始编译nv-codec-headers使用的是最新版本9.1的，编译出错，有两种方法，一种是升级drive的版本，升级到430以上，这个比较的麻烦，另一种是降低nv-codec-headers的版本，我降低到8.1版本，就可以成功\n\n~~~\nffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52\ncuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）\ndrive 驱动版本 Driver Version: 410.48 \nnv-codec-headers 版本 sdk/8.1\n~~~\n\n#### 7,在容器中使用NVIDIA\n\n~~~\n在将自己的服务打包成镜像的时候，开始没有设置环境变量，导致怎么都无法调用NVIDIA进行硬件的转码；\n最后查询了很多的资料，发现需要添加一个环境变量，在Dockfile中\nENV NVIDIA_DRIVER_CAPABILITIES video,compute,utility\n才能保证容器中使用成功\n~~~\n\n\n\n#### 8，gpu和cpu转码测试\n\n​\t对于同一个视频，分别采用cpu和GPU两种方式来进行转码，对比这两者之间的效率\n\n~~~\n#机器信息\n逻辑核：24\n内存：64G\n24  Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz\n系统：CentOS Linux release 7.6.1810 (Core)\n#视频信息：\nname: 11.mkv\nsize： 1.1G\nVideo: h264 (High), yuv420p(progressive), 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 1k tbn, 50 tbc (default)\nAudio: ac3, 48000 Hz, stereo, fltp, 192 kb/s (default)\n#软件转码：\n[time] ffmpeg  -i video/11.mkv -c:v libx264 -b:v 2048k -vf scale=1280:-1 -y /root/transcode.mp4\n#结果\nreal\t11m18.807s\nuser\t180m16.290s\nsys\t\t1m36.925s\ncpu占用\t平均1600%\n[time] ./softhw /root/video/11.mkv /opt/nvitra1.mp4\nreal\t14m51.166s\nuser\t220m2.857s\nsys\t\t1m21.718s\ncpu占用  平均1600%\n#硬件转码：\n[time] ffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/11.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4\n#结果\nreal\t1m45.228s\nuser\t1m15.910s\nsys\t\t0m18.734s\ncpu占用\t平均90%\n[time] ./hw /root/video/11.mkv /opt/nvitra.mp4\nreal\t1m29.478s\nuser\t0m22.754s\nsys\t\t0m23.465s\ncpu占用 50%\n~~~\n\n#### 8，指定显卡进行转码\n\n~~~\nffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i <input> -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y <output>\n\nffmpeg -hwaccel cuvid -hwaccel_device 1 -c:v h264_cuvid -i <input> -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y <output>\n\nffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i /root/source_media/flv.flv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1  -y /root/flv.mp4\n~~~\n\n\n\n\n\n\n\n","slug":"ffmpeg-源码编译支持GPU","published":1,"updated":"2021-02-08T06:45:58.209Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwh001ulkq5fkeclqog","content":"<blockquote>\n<p>​    源码编译需要很多的库的支持，一种是基础的库，一种是你需要的编解码信息的库</p>\n</blockquote>\n<h2 id=\"一，ffmpeg源码的下载\"><a href=\"#一，ffmpeg源码的下载\" class=\"headerlink\" title=\"一，ffmpeg源码的下载\"></a>一，ffmpeg源码的下载</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在git上找个你需要的版本的库，直接通过git下载</span><br><span class=\"line\">git clone https://github.com/FFmpeg/FFmpeg.git</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52</span><br><span class=\"line\">cuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）</span><br><span class=\"line\">drive 驱动版本 Driver Version: 410.48 </span><br><span class=\"line\">nv-codec-headers 版本 sdk/8.1</span><br></pre></td></tr></table></figure>\n<h2 id=\"二，基础环境的准备\"><a href=\"#二，基础环境的准备\" class=\"headerlink\" title=\"二，基础环境的准备\"></a>二，基础环境的准备</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install autoconf automake freetype-devel gcc gcc-c++ git libtool make nasm pkgconfig zlib-devel bzip2 bzip2-devel</span><br></pre></td></tr></table></figure>\n<h2 id=\"三，编码过程\"><a href=\"#三，编码过程\" class=\"headerlink\" title=\"三，编码过程\"></a>三，编码过程</h2><h4 id=\"1，设置环境路径\"><a href=\"#1，设置环境路径\" class=\"headerlink\" title=\"1，设置环境路径\"></a>1，设置环境路径</h4><blockquote>\n<p>​    在  /etc/profile 文件中，设置 PKG_CONFIG_PATH  路径</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\">export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，编码\"><a href=\"#2，编码\" class=\"headerlink\" title=\"2，编码\"></a>2，编码</h4><blockquote>\n<p>​    配置好configure之后，通过make可以一步步试探你缺少的库是什么，然后在下载，编译</p>\n<p>下载完之后，通过命令来配置你需要的东西<br>./configure  –help</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make 编译的常用命令</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make -j 10 (编译，并行10个核来一起编译，可以取消)</span><br><span class=\"line\">make install (安装)</span><br><span class=\"line\">make disclean (卸载)</span><br><span class=\"line\">make clean (清除编译)</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，解决gnutls的问题\"><a href=\"#3，解决gnutls的问题\" class=\"headerlink\" title=\"3，解决gnutls的问题\"></a>3，解决gnutls的问题</h4><p><img src=\"/images/gnutls.png\" alt=\"gnutls\"></p>\n<blockquote>\n<p>我们需要手动的安装gnutls，gnutls3.5.19版本的可以，大于这个版本的有问题,</p>\n<p><a href=\"http://www.linuxfromscratch.org/blfs/view/svn/postlfs/gnutls.html\" target=\"_blank\" rel=\"noopener\">http://www.linuxfromscratch.org/blfs/view/svn/postlfs/gnutls.html</a> </p>\n<p>有安装的方法</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,安装gnutls需要先安装gnutls，所有先手动下载这个</span><br><span class=\"line\">wget https://ftp.gnu.org/gnu/nettle/nettle-3.1.1.tar.gz</span><br><span class=\"line\">tar zxf nettle-3.1.1.tar.gz  </span><br><span class=\"line\">./configure --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\">2,安装gnutls</span><br><span class=\"line\">wget https://www.gnupg.org/ftp/gcrypt/gnutls/v3.5/gnutls-3.5.19.tar.xz</span><br><span class=\"line\">xz  -d gnutls-3.5.19.tar.xz</span><br><span class=\"line\">tar xf gnutls-3.5.19.tar</span><br><span class=\"line\">cd gnutls-3.5.19</span><br><span class=\"line\">./configure --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>在安装gnutls时，我们使用./configure –enable-shared时，可能遇到以下的问题;</p>\n<ul>\n<li><p><img src=\"/images/gmp.png\" alt=\"gmp\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install gmp-devel</p>\n</blockquote>\n</li>\n<li><p><img src=\"/images/libtasn1.png\" alt=\"libtasn1.png\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install libffi libffi-devel</p>\n<p>./configure –enable-shared –with-included-libtasn1</p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li><p><img src=\"/images/unistring.png\" alt=\"unistring.png\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install libunistring-devel</p>\n<p>./configure –enable-shared –with-included-libtasn1 –with-included-unistring</p>\n</blockquote>\n</li>\n<li><p><img src=\"/images/P11.png\" alt=\"P11.png\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install p11-kit-devel</p>\n</blockquote>\n</li>\n<li><p><img src=\"/images/dnssec.png\" alt=\"dnssec.png\"></p>\n<blockquote>\n<p>yum install unbound unbound-devel unbound-libs</p>\n<p>./configure –enable-shared –with-included-libtasn1 –with-included-unistring</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"4，解决ladspa-h的问题\"><a href=\"#4，解决ladspa-h的问题\" class=\"headerlink\" title=\"4，解决ladspa.h的问题\"></a>4，解决ladspa.h的问题</h4><p><img src=\"/images/ladspa.png\" alt=\"ladspa.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install  ladspa*</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，解决libass的问题\"><a href=\"#5，解决libass的问题\" class=\"headerlink\" title=\"5，解决libass的问题\"></a>5，解决libass的问题</h4><p><img src=\"/images/libass.png\" alt=\"libass.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libass*</span><br></pre></td></tr></table></figure>\n<h4 id=\"6，解决libdc1394-2的问题\"><a href=\"#6，解决libdc1394-2的问题\" class=\"headerlink\" title=\"6，解决libdc1394-2的问题\"></a>6，解决libdc1394-2的问题</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,官网下载源码</span><br><span class=\"line\">https://sourceforge.net/projects/libdc1394/files/libdc1394-2/</span><br><span class=\"line\">2，编译</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"7，解决libgsm的问题\"><a href=\"#7，解决libgsm的问题\" class=\"headerlink\" title=\"7，解决libgsm的问题\"></a>7，解决libgsm的问题</h4><p><img src=\"/images/libgsm.png\" alt=\"libgsm.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gsm-tools gsm-devel</span><br></pre></td></tr></table></figure>\n<h4 id=\"8，解决libmp3lame版本的问题\"><a href=\"#8，解决libmp3lame版本的问题\" class=\"headerlink\" title=\"8，解决libmp3lame版本的问题\"></a>8，解决libmp3lame版本的问题</h4><p><img src=\"/images/libmp3lame.png\" alt=\"libmp3lame.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">源码安装，地址</span><br><span class=\"line\">git clone https://github.com/gypified/libmp3lame.git</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"9，解决libopencore-amrnb的问题\"><a href=\"#9，解决libopencore-amrnb的问题\" class=\"headerlink\" title=\"9，解决libopencore_amrnb的问题\"></a>9，解决libopencore_amrnb的问题</h4><p><img src=\"/images/libopencore_amrnb.png\" alt=\"libopencore_amrnb.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">官网下载源码，再手动编译</span><br><span class=\"line\">https://sourceforge.net/projects/opencore-amr/files/opencore-amr/</span><br><span class=\"line\"> ./configure</span><br><span class=\"line\"> make</span><br><span class=\"line\"> make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"10，解决opencv的问题\"><a href=\"#10，解决opencv的问题\" class=\"headerlink\" title=\"10，解决opencv的问题\"></a>10，解决opencv的问题</h4><h4 id=\"11，解决openh264的问题\"><a href=\"#11，解决openh264的问题\" class=\"headerlink\" title=\"11，解决openh264的问题\"></a>11，解决openh264的问题</h4><p><img src=\"/images/openh264.png\" alt=\"openh264.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">从git上下载源码</span><br><span class=\"line\">git clone https://github.com/cisco/openh264</span><br><span class=\"line\">如果下载失败，则直接下载zip包，然后解压安装</span><br><span class=\"line\">make ARCH=x86_64</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"12，解决libopenjp2版本的问题\"><a href=\"#12，解决libopenjp2版本的问题\" class=\"headerlink\" title=\"12，解决libopenjp2版本的问题\"></a>12，解决libopenjp2版本的问题</h4><p><img src=\"/images/libopenjp2.png\" alt=\"libopenjp2.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git下载源码来编译安装</span><br><span class=\"line\">git clone https://github.com/uclouvain/openjpeg.git</span><br><span class=\"line\">如果下载不下来，则下载zip包解压安装 </span><br><span class=\"line\">unzip openjpeg-master.zip</span><br><span class=\"line\">cmake 安装</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br><span class=\"line\">cmake .. -DCMAKE_BUILD_TYPE=Release</span><br><span class=\"line\">make -j 10</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"13，解决opus的问题\"><a href=\"#13，解决opus的问题\" class=\"headerlink\" title=\"13，解决opus的问题\"></a>13，解决opus的问题</h4><p><img src=\"/images/opus.png\" alt=\"opus.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#需要手动的下载安装</span><br><span class=\"line\">https://ftp.osuosl.org/pub/xiph/releases/opus/</span><br><span class=\"line\">#安装步骤</span><br><span class=\"line\">wget http://downloads.xiph.org/releases/opus/opus-1.2.1.tar.gz</span><br><span class=\"line\">tar -zxvf opus-1.2.1.tar.gz</span><br><span class=\"line\">cd opus-1.2.1</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\">#注意：如果pkg_config没有找到，需要手动的设置路径，见前面PKG_CONFIG_PATH路径的设置，如果设置好之后，库也存在还是不行，则要检查是否使用yum下载了低版本的，若是则删除</span><br><span class=\"line\">yum remove opus-1.0.2-6.el7.x86_64 opus-tools-0.1.6-1.el7.x86_64 opusfile-0.5-1.el7.x86_64 opus-devel-1.0.2-6.el7.x86_64 opusfile-devel-0.5-1.el7.x86_64</span><br></pre></td></tr></table></figure>\n<h4 id=\"14，解决libpulse的问题\"><a href=\"#14，解决libpulse的问题\" class=\"headerlink\" title=\"14，解决libpulse的问题\"></a>14，解决libpulse的问题</h4><h4 id=\"15，解决libsoxr的问题\"><a href=\"#15，解决libsoxr的问题\" class=\"headerlink\" title=\"15，解决libsoxr的问题\"></a>15，解决libsoxr的问题</h4><p><img src=\"/images/libsoxr.png\" alt=\"libsoxr.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#手动下载包，然后编译安装</span><br><span class=\"line\">https://sourceforge.net/projects/soxr/files/</span><br><span class=\"line\">tar -xvf soxr-0.1.3-Source.tar</span><br><span class=\"line\">./go</span><br><span class=\"line\">cd Realse</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>在执行go的时候可能遇到这个问题,则需要下载cmake高级版本</p>\n<p><img src=\"/images/go.png\" alt=\"go.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># cmake 安装</span><br><span class=\"line\">https://cmake.org/download/</span><br><span class=\"line\">tar -zxvf cmake-3.13.0-rc1.tar.gz</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"16，解决speex的问题\"><a href=\"#16，解决speex的问题\" class=\"headerlink\" title=\"16，解决speex的问题\"></a>16，解决speex的问题</h4><p><img src=\"/images/speex.png\" alt=\"speex.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##手动下载安装包，编译，选择 libspeex下载</span><br><span class=\"line\">https://xiph.org/downloads/</span><br><span class=\"line\">./configure  --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"17，解决libtheora的问题\"><a href=\"#17，解决libtheora的问题\" class=\"headerlink\" title=\"17，解决libtheora的问题\"></a>17，解决libtheora的问题</h4><p><img src=\"/images/libtheora.png\" alt=\"libtheora.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 手动下载安装包，编译，选择libtheora下载</span><br><span class=\"line\">https://xiph.org/downloads/</span><br><span class=\"line\">unzip libtheora-1.1.1.zip</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>在configure的过程中，可能error,则我们需要下载安装这个</p>\n<p><img src=\"/images/ogg.png\" alt=\"ogg.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libogg*</span><br></pre></td></tr></table></figure>\n<h4 id=\"18，解决libv412的问题\"><a href=\"#18，解决libv412的问题\" class=\"headerlink\" title=\"18，解决libv412的问题\"></a>18，解决libv412的问题</h4><h4 id=\"19，解决vorbis的问题\"><a href=\"#19，解决vorbis的问题\" class=\"headerlink\" title=\"19，解决vorbis的问题\"></a>19，解决vorbis的问题</h4><p><img src=\"/images/vorbis.png\" alt=\"vorbis.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/xiph/vorbis.git</span><br><span class=\"line\">./autogen.sh</span><br><span class=\"line\">./configure  --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"20，解决libx264的问题\"><a href=\"#20，解决libx264的问题\" class=\"headerlink\" title=\"20，解决libx264的问题\"></a>20，解决libx264的问题</h4><p><img src=\"/images/libx264.png\" alt=\"h264.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone --depth 1 http://git.videolan.org/git/x264</span><br><span class=\"line\">./configure --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>如果编译时报错，则需要安装nasm</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -O -L http://www.nasm.us/pub/nasm/releasebuilds/2.13.02/nasm-2.13.02.tar.bz2  </span><br><span class=\"line\">tar -xjvf nasm-2.13.02.tar.bz2</span><br><span class=\"line\">cd nasm-2.13.02</span><br><span class=\"line\">./autogen.sh </span><br><span class=\"line\">./configure  --enable-shared </span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"21，解决libx265的问题\"><a href=\"#21，解决libx265的问题\" class=\"headerlink\" title=\"21，解决libx265的问题\"></a>21，解决libx265的问题</h4><p><img src=\"/images/x265.png\" alt=\"x265.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone  --depth 1 https://github.com/videolan/x265.git</span><br><span class=\"line\">cd x265</span><br><span class=\"line\">cd build</span><br><span class=\"line\">cmake ../source</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"22，解决libxvid的问题\"><a href=\"#22，解决libxvid的问题\" class=\"headerlink\" title=\"22，解决libxvid的问题\"></a>22，解决libxvid的问题</h4><p><img src=\"/images/libxvid.png\" alt=\"libxvid.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##官网下载</span><br><span class=\"line\">https://www.xvid.com/download/</span><br><span class=\"line\">## 按下图过程来查找</span><br><span class=\"line\">## 然后按照README来安装</span><br><span class=\"line\">cd build/generic</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make -j 10</span><br><span class=\"line\"></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/xvid.png\" alt=\" xvid\"></p>\n<p><img src=\"C:/Users/Administrator/Desktop/leopard4.1/images/readme.png\" alt=\"readme.png\"></p>\n<p><img src=\"/images/bar.png\" alt=\"bar.png\"></p>\n<h4 id=\"23，解决openal的问题\"><a href=\"#23，解决openal的问题\" class=\"headerlink\" title=\"23，解决openal的问题\"></a>23，解决openal的问题</h4><p><img src=\"/images/openal.png\" alt=\"openal.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install openal-soft openal-soft-devel</span><br></pre></td></tr></table></figure>\n<h4 id=\"24，解决libcdio的问题\"><a href=\"#24，解决libcdio的问题\" class=\"headerlink\" title=\"24，解决libcdio的问题\"></a>24，解决libcdio的问题</h4><h4 id=\"25，解决bzlib的问题\"><a href=\"#25，解决bzlib的问题\" class=\"headerlink\" title=\"25，解决bzlib的问题\"></a>25，解决bzlib的问题</h4><h4 id=\"26，解决libxcb的问题\"><a href=\"#26，解决libxcb的问题\" class=\"headerlink\" title=\"26，解决libxcb的问题\"></a>26，解决libxcb的问题</h4><p><img src=\"/images/libxcb.png\" alt=\"libxcb.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libxcb-devel</span><br></pre></td></tr></table></figure>\n<h2 id=\"四，添加硬件编解码\"><a href=\"#四，添加硬件编解码\" class=\"headerlink\" title=\"四，添加硬件编解码\"></a>四，添加硬件编解码</h2><h4 id=\"1，查看机器上显卡的型号\"><a href=\"#1，查看机器上显卡的型号\" class=\"headerlink\" title=\"1，查看机器上显卡的型号\"></a>1，查看机器上显卡的型号</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lspci | grep VGA</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/vga.png\" alt=\"vga\"></p>\n<h4 id=\"2，安装对应显卡的驱动\"><a href=\"#2，安装对应显卡的驱动\" class=\"headerlink\" title=\"2，安装对应显卡的驱动\"></a>2，安装对应显卡的驱动</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://www.nvidia.com/Download/index.aspx?lang=en-us</span><br><span class=\"line\">安装的方法见显卡驱动安装的文档</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，重新编译ffmpeg\"><a href=\"#3，重新编译ffmpeg\" class=\"headerlink\" title=\"3，重新编译ffmpeg\"></a>3，重新编译ffmpeg</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在./configure时添加以下的选项，来重新编译ffmpeg，既可以驱动显卡</span><br><span class=\"line\">--enable-cuda-sdk \\</span><br><span class=\"line\">--enable-cuvid \\</span><br><span class=\"line\">--enable-nvenc \\</span><br><span class=\"line\">--enable-nonfree \\</span><br><span class=\"line\">--enable-libnpp \\</span><br><span class=\"line\">--extra-cflags=-I/usr/local/cuda/include \\</span><br><span class=\"line\">--extra-ldflags=-L/usr/local/cuda/lib64 \\</span><br></pre></td></tr></table></figure>\n<h4 id=\"4，查看是否安装成功\"><a href=\"#4，查看是否安装成功\" class=\"headerlink\" title=\"4，查看是否安装成功\"></a>4，查看是否安装成功</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">使用ffmpeg -hwaccels命令查看支持的硬件加速选项</span><br><span class=\"line\">ffmpeg -hwaccels</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/hw.png\" alt=\"hw.png\"></p>\n<h4 id=\"5，查看cuvid提供的GPU编解码器\"><a href=\"#5，查看cuvid提供的GPU编解码器\" class=\"headerlink\" title=\"5，查看cuvid提供的GPU编解码器\"></a>5，查看cuvid提供的GPU编解码器</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -codecs | grep cuvid</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuvid.png\" alt=\"cuvid.png\"></p>\n<h4 id=\"6，使用GPU进行转码\"><a href=\"#6，使用GPU进行转码\" class=\"headerlink\" title=\"6，使用GPU进行转码\"></a>6，使用GPU进行转码</h4><blockquote>\n<p>用GPU进行转码的命令和软转码命令不太一样，CPU转码的时候，我们可以依赖ffmpeg识别输入视频的编码格式并选择对应的解码器，但ffmpeg只会自动选择CPU解码器，要让ffmpeg使用GPU解码器，必须先用ffprobe识别出输入视频的编码格式，然后在命令行中指定对应的GPU解码器。</p>\n<p>例如，将h264编码的源视频转码为指定尺寸和码率的h264编码视频：</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/video-H264-AAC.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4</span><br><span class=\"line\"></span><br><span class=\"line\">-hwaccel cuvid：指定使用cuvid硬件加速</span><br><span class=\"line\">-c:v h264_cuvid：使用h264_cuvid进行视频解码</span><br><span class=\"line\">-c:v h264_nvenc：使用h264_nvenc进行视频编码</span><br><span class=\"line\">-vf scale_npp=1280:-1：指定输出视频的宽高，注意，这里和软解码时使用的-vf scale=x:x不一样</span><br><span class=\"line\">转码期间使用nvidia-smi查看显卡状态，能够看到ffmpeg确实是在使用GPU进行转码：</span><br></pre></td></tr></table></figure>\n<p>如果在执行命令的时候报错，则需要,进行nv-codec-headers和驱动的版本匹配的处理</p>\n<p><img src=\"/images/drive.png\" alt=\"drive.png\"></p>\n<p>我开始编译nv-codec-headers使用的是最新版本9.1的，编译出错，有两种方法，一种是升级drive的版本，升级到430以上，这个比较的麻烦，另一种是降低nv-codec-headers的版本，我降低到8.1版本，就可以成功</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52</span><br><span class=\"line\">cuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）</span><br><span class=\"line\">drive 驱动版本 Driver Version: 410.48 </span><br><span class=\"line\">nv-codec-headers 版本 sdk/8.1</span><br></pre></td></tr></table></figure>\n<h4 id=\"7-在容器中使用NVIDIA\"><a href=\"#7-在容器中使用NVIDIA\" class=\"headerlink\" title=\"7,在容器中使用NVIDIA\"></a>7,在容器中使用NVIDIA</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在将自己的服务打包成镜像的时候，开始没有设置环境变量，导致怎么都无法调用NVIDIA进行硬件的转码；</span><br><span class=\"line\">最后查询了很多的资料，发现需要添加一个环境变量，在Dockfile中</span><br><span class=\"line\">ENV NVIDIA_DRIVER_CAPABILITIES video,compute,utility</span><br><span class=\"line\">才能保证容器中使用成功</span><br></pre></td></tr></table></figure>\n<h4 id=\"8，gpu和cpu转码测试\"><a href=\"#8，gpu和cpu转码测试\" class=\"headerlink\" title=\"8，gpu和cpu转码测试\"></a>8，gpu和cpu转码测试</h4><p>​    对于同一个视频，分别采用cpu和GPU两种方式来进行转码，对比这两者之间的效率</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#机器信息</span><br><span class=\"line\">逻辑核：24</span><br><span class=\"line\">内存：64G</span><br><span class=\"line\">24  Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz</span><br><span class=\"line\">系统：CentOS Linux release 7.6.1810 (Core)</span><br><span class=\"line\">#视频信息：</span><br><span class=\"line\">name: 11.mkv</span><br><span class=\"line\">size： 1.1G</span><br><span class=\"line\">Video: h264 (High), yuv420p(progressive), 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 1k tbn, 50 tbc (default)</span><br><span class=\"line\">Audio: ac3, 48000 Hz, stereo, fltp, 192 kb/s (default)</span><br><span class=\"line\">#软件转码：</span><br><span class=\"line\">[time] ffmpeg  -i video/11.mkv -c:v libx264 -b:v 2048k -vf scale=1280:-1 -y /root/transcode.mp4</span><br><span class=\"line\">#结果</span><br><span class=\"line\">real\t11m18.807s</span><br><span class=\"line\">user\t180m16.290s</span><br><span class=\"line\">sys\t\t1m36.925s</span><br><span class=\"line\">cpu占用\t平均1600%</span><br><span class=\"line\">[time] ./softhw /root/video/11.mkv /opt/nvitra1.mp4</span><br><span class=\"line\">real\t14m51.166s</span><br><span class=\"line\">user\t220m2.857s</span><br><span class=\"line\">sys\t\t1m21.718s</span><br><span class=\"line\">cpu占用  平均1600%</span><br><span class=\"line\">#硬件转码：</span><br><span class=\"line\">[time] ffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/11.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4</span><br><span class=\"line\">#结果</span><br><span class=\"line\">real\t1m45.228s</span><br><span class=\"line\">user\t1m15.910s</span><br><span class=\"line\">sys\t\t0m18.734s</span><br><span class=\"line\">cpu占用\t平均90%</span><br><span class=\"line\">[time] ./hw /root/video/11.mkv /opt/nvitra.mp4</span><br><span class=\"line\">real\t1m29.478s</span><br><span class=\"line\">user\t0m22.754s</span><br><span class=\"line\">sys\t\t0m23.465s</span><br><span class=\"line\">cpu占用 50%</span><br></pre></td></tr></table></figure>\n<h4 id=\"8，指定显卡进行转码\"><a href=\"#8，指定显卡进行转码\" class=\"headerlink\" title=\"8，指定显卡进行转码\"></a>8，指定显卡进行转码</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i &lt;input&gt; -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y &lt;output&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg -hwaccel cuvid -hwaccel_device 1 -c:v h264_cuvid -i &lt;input&gt; -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y &lt;output&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i /root/source_media/flv.flv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1  -y /root/flv.mp4</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>​    源码编译需要很多的库的支持，一种是基础的库，一种是你需要的编解码信息的库</p>\n</blockquote>\n<h2 id=\"一，ffmpeg源码的下载\"><a href=\"#一，ffmpeg源码的下载\" class=\"headerlink\" title=\"一，ffmpeg源码的下载\"></a>一，ffmpeg源码的下载</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在git上找个你需要的版本的库，直接通过git下载</span><br><span class=\"line\">git clone https://github.com/FFmpeg/FFmpeg.git</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52</span><br><span class=\"line\">cuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）</span><br><span class=\"line\">drive 驱动版本 Driver Version: 410.48 </span><br><span class=\"line\">nv-codec-headers 版本 sdk/8.1</span><br></pre></td></tr></table></figure>\n<h2 id=\"二，基础环境的准备\"><a href=\"#二，基础环境的准备\" class=\"headerlink\" title=\"二，基础环境的准备\"></a>二，基础环境的准备</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install autoconf automake freetype-devel gcc gcc-c++ git libtool make nasm pkgconfig zlib-devel bzip2 bzip2-devel</span><br></pre></td></tr></table></figure>\n<h2 id=\"三，编码过程\"><a href=\"#三，编码过程\" class=\"headerlink\" title=\"三，编码过程\"></a>三，编码过程</h2><h4 id=\"1，设置环境路径\"><a href=\"#1，设置环境路径\" class=\"headerlink\" title=\"1，设置环境路径\"></a>1，设置环境路径</h4><blockquote>\n<p>​    在  /etc/profile 文件中，设置 PKG_CONFIG_PATH  路径</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\">export PKG_CONFIG_PATH=/usr/local/lib64/pkgconfig:/usr/lib64/pkgconfig:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，编码\"><a href=\"#2，编码\" class=\"headerlink\" title=\"2，编码\"></a>2，编码</h4><blockquote>\n<p>​    配置好configure之后，通过make可以一步步试探你缺少的库是什么，然后在下载，编译</p>\n<p>下载完之后，通过命令来配置你需要的东西<br>./configure  –help</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make 编译的常用命令</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make -j 10 (编译，并行10个核来一起编译，可以取消)</span><br><span class=\"line\">make install (安装)</span><br><span class=\"line\">make disclean (卸载)</span><br><span class=\"line\">make clean (清除编译)</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，解决gnutls的问题\"><a href=\"#3，解决gnutls的问题\" class=\"headerlink\" title=\"3，解决gnutls的问题\"></a>3，解决gnutls的问题</h4><p><img src=\"/images/gnutls.png\" alt=\"gnutls\"></p>\n<blockquote>\n<p>我们需要手动的安装gnutls，gnutls3.5.19版本的可以，大于这个版本的有问题,</p>\n<p><a href=\"http://www.linuxfromscratch.org/blfs/view/svn/postlfs/gnutls.html\" target=\"_blank\" rel=\"noopener\">http://www.linuxfromscratch.org/blfs/view/svn/postlfs/gnutls.html</a> </p>\n<p>有安装的方法</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,安装gnutls需要先安装gnutls，所有先手动下载这个</span><br><span class=\"line\">wget https://ftp.gnu.org/gnu/nettle/nettle-3.1.1.tar.gz</span><br><span class=\"line\">tar zxf nettle-3.1.1.tar.gz  </span><br><span class=\"line\">./configure --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\">2,安装gnutls</span><br><span class=\"line\">wget https://www.gnupg.org/ftp/gcrypt/gnutls/v3.5/gnutls-3.5.19.tar.xz</span><br><span class=\"line\">xz  -d gnutls-3.5.19.tar.xz</span><br><span class=\"line\">tar xf gnutls-3.5.19.tar</span><br><span class=\"line\">cd gnutls-3.5.19</span><br><span class=\"line\">./configure --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>在安装gnutls时，我们使用./configure –enable-shared时，可能遇到以下的问题;</p>\n<ul>\n<li><p><img src=\"/images/gmp.png\" alt=\"gmp\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install gmp-devel</p>\n</blockquote>\n</li>\n<li><p><img src=\"/images/libtasn1.png\" alt=\"libtasn1.png\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install libffi libffi-devel</p>\n<p>./configure –enable-shared –with-included-libtasn1</p>\n</blockquote>\n</li>\n</ul>\n<ul>\n<li><p><img src=\"/images/unistring.png\" alt=\"unistring.png\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install libunistring-devel</p>\n<p>./configure –enable-shared –with-included-libtasn1 –with-included-unistring</p>\n</blockquote>\n</li>\n<li><p><img src=\"/images/P11.png\" alt=\"P11.png\"></p>\n<blockquote>\n<p>解决：</p>\n<p>yum install p11-kit-devel</p>\n</blockquote>\n</li>\n<li><p><img src=\"/images/dnssec.png\" alt=\"dnssec.png\"></p>\n<blockquote>\n<p>yum install unbound unbound-devel unbound-libs</p>\n<p>./configure –enable-shared –with-included-libtasn1 –with-included-unistring</p>\n</blockquote>\n</li>\n</ul>\n<h4 id=\"4，解决ladspa-h的问题\"><a href=\"#4，解决ladspa-h的问题\" class=\"headerlink\" title=\"4，解决ladspa.h的问题\"></a>4，解决ladspa.h的问题</h4><p><img src=\"/images/ladspa.png\" alt=\"ladspa.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install  ladspa*</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，解决libass的问题\"><a href=\"#5，解决libass的问题\" class=\"headerlink\" title=\"5，解决libass的问题\"></a>5，解决libass的问题</h4><p><img src=\"/images/libass.png\" alt=\"libass.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libass*</span><br></pre></td></tr></table></figure>\n<h4 id=\"6，解决libdc1394-2的问题\"><a href=\"#6，解决libdc1394-2的问题\" class=\"headerlink\" title=\"6，解决libdc1394-2的问题\"></a>6，解决libdc1394-2的问题</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,官网下载源码</span><br><span class=\"line\">https://sourceforge.net/projects/libdc1394/files/libdc1394-2/</span><br><span class=\"line\">2，编译</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"7，解决libgsm的问题\"><a href=\"#7，解决libgsm的问题\" class=\"headerlink\" title=\"7，解决libgsm的问题\"></a>7，解决libgsm的问题</h4><p><img src=\"/images/libgsm.png\" alt=\"libgsm.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gsm-tools gsm-devel</span><br></pre></td></tr></table></figure>\n<h4 id=\"8，解决libmp3lame版本的问题\"><a href=\"#8，解决libmp3lame版本的问题\" class=\"headerlink\" title=\"8，解决libmp3lame版本的问题\"></a>8，解决libmp3lame版本的问题</h4><p><img src=\"/images/libmp3lame.png\" alt=\"libmp3lame.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">源码安装，地址</span><br><span class=\"line\">git clone https://github.com/gypified/libmp3lame.git</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"9，解决libopencore-amrnb的问题\"><a href=\"#9，解决libopencore-amrnb的问题\" class=\"headerlink\" title=\"9，解决libopencore_amrnb的问题\"></a>9，解决libopencore_amrnb的问题</h4><p><img src=\"/images/libopencore_amrnb.png\" alt=\"libopencore_amrnb.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">官网下载源码，再手动编译</span><br><span class=\"line\">https://sourceforge.net/projects/opencore-amr/files/opencore-amr/</span><br><span class=\"line\"> ./configure</span><br><span class=\"line\"> make</span><br><span class=\"line\"> make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"10，解决opencv的问题\"><a href=\"#10，解决opencv的问题\" class=\"headerlink\" title=\"10，解决opencv的问题\"></a>10，解决opencv的问题</h4><h4 id=\"11，解决openh264的问题\"><a href=\"#11，解决openh264的问题\" class=\"headerlink\" title=\"11，解决openh264的问题\"></a>11，解决openh264的问题</h4><p><img src=\"/images/openh264.png\" alt=\"openh264.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">从git上下载源码</span><br><span class=\"line\">git clone https://github.com/cisco/openh264</span><br><span class=\"line\">如果下载失败，则直接下载zip包，然后解压安装</span><br><span class=\"line\">make ARCH=x86_64</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"12，解决libopenjp2版本的问题\"><a href=\"#12，解决libopenjp2版本的问题\" class=\"headerlink\" title=\"12，解决libopenjp2版本的问题\"></a>12，解决libopenjp2版本的问题</h4><p><img src=\"/images/libopenjp2.png\" alt=\"libopenjp2.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git下载源码来编译安装</span><br><span class=\"line\">git clone https://github.com/uclouvain/openjpeg.git</span><br><span class=\"line\">如果下载不下来，则下载zip包解压安装 </span><br><span class=\"line\">unzip openjpeg-master.zip</span><br><span class=\"line\">cmake 安装</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br><span class=\"line\">cmake .. -DCMAKE_BUILD_TYPE=Release</span><br><span class=\"line\">make -j 10</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"13，解决opus的问题\"><a href=\"#13，解决opus的问题\" class=\"headerlink\" title=\"13，解决opus的问题\"></a>13，解决opus的问题</h4><p><img src=\"/images/opus.png\" alt=\"opus.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#需要手动的下载安装</span><br><span class=\"line\">https://ftp.osuosl.org/pub/xiph/releases/opus/</span><br><span class=\"line\">#安装步骤</span><br><span class=\"line\">wget http://downloads.xiph.org/releases/opus/opus-1.2.1.tar.gz</span><br><span class=\"line\">tar -zxvf opus-1.2.1.tar.gz</span><br><span class=\"line\">cd opus-1.2.1</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\">#注意：如果pkg_config没有找到，需要手动的设置路径，见前面PKG_CONFIG_PATH路径的设置，如果设置好之后，库也存在还是不行，则要检查是否使用yum下载了低版本的，若是则删除</span><br><span class=\"line\">yum remove opus-1.0.2-6.el7.x86_64 opus-tools-0.1.6-1.el7.x86_64 opusfile-0.5-1.el7.x86_64 opus-devel-1.0.2-6.el7.x86_64 opusfile-devel-0.5-1.el7.x86_64</span><br></pre></td></tr></table></figure>\n<h4 id=\"14，解决libpulse的问题\"><a href=\"#14，解决libpulse的问题\" class=\"headerlink\" title=\"14，解决libpulse的问题\"></a>14，解决libpulse的问题</h4><h4 id=\"15，解决libsoxr的问题\"><a href=\"#15，解决libsoxr的问题\" class=\"headerlink\" title=\"15，解决libsoxr的问题\"></a>15，解决libsoxr的问题</h4><p><img src=\"/images/libsoxr.png\" alt=\"libsoxr.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#手动下载包，然后编译安装</span><br><span class=\"line\">https://sourceforge.net/projects/soxr/files/</span><br><span class=\"line\">tar -xvf soxr-0.1.3-Source.tar</span><br><span class=\"line\">./go</span><br><span class=\"line\">cd Realse</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>在执行go的时候可能遇到这个问题,则需要下载cmake高级版本</p>\n<p><img src=\"/images/go.png\" alt=\"go.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># cmake 安装</span><br><span class=\"line\">https://cmake.org/download/</span><br><span class=\"line\">tar -zxvf cmake-3.13.0-rc1.tar.gz</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"16，解决speex的问题\"><a href=\"#16，解决speex的问题\" class=\"headerlink\" title=\"16，解决speex的问题\"></a>16，解决speex的问题</h4><p><img src=\"/images/speex.png\" alt=\"speex.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##手动下载安装包，编译，选择 libspeex下载</span><br><span class=\"line\">https://xiph.org/downloads/</span><br><span class=\"line\">./configure  --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"17，解决libtheora的问题\"><a href=\"#17，解决libtheora的问题\" class=\"headerlink\" title=\"17，解决libtheora的问题\"></a>17，解决libtheora的问题</h4><p><img src=\"/images/libtheora.png\" alt=\"libtheora.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 手动下载安装包，编译，选择libtheora下载</span><br><span class=\"line\">https://xiph.org/downloads/</span><br><span class=\"line\">unzip libtheora-1.1.1.zip</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>在configure的过程中，可能error,则我们需要下载安装这个</p>\n<p><img src=\"/images/ogg.png\" alt=\"ogg.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libogg*</span><br></pre></td></tr></table></figure>\n<h4 id=\"18，解决libv412的问题\"><a href=\"#18，解决libv412的问题\" class=\"headerlink\" title=\"18，解决libv412的问题\"></a>18，解决libv412的问题</h4><h4 id=\"19，解决vorbis的问题\"><a href=\"#19，解决vorbis的问题\" class=\"headerlink\" title=\"19，解决vorbis的问题\"></a>19，解决vorbis的问题</h4><p><img src=\"/images/vorbis.png\" alt=\"vorbis.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/xiph/vorbis.git</span><br><span class=\"line\">./autogen.sh</span><br><span class=\"line\">./configure  --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"20，解决libx264的问题\"><a href=\"#20，解决libx264的问题\" class=\"headerlink\" title=\"20，解决libx264的问题\"></a>20，解决libx264的问题</h4><p><img src=\"/images/libx264.png\" alt=\"h264.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone --depth 1 http://git.videolan.org/git/x264</span><br><span class=\"line\">./configure --enable-shared</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p>如果编译时报错，则需要安装nasm</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -O -L http://www.nasm.us/pub/nasm/releasebuilds/2.13.02/nasm-2.13.02.tar.bz2  </span><br><span class=\"line\">tar -xjvf nasm-2.13.02.tar.bz2</span><br><span class=\"line\">cd nasm-2.13.02</span><br><span class=\"line\">./autogen.sh </span><br><span class=\"line\">./configure  --enable-shared </span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"21，解决libx265的问题\"><a href=\"#21，解决libx265的问题\" class=\"headerlink\" title=\"21，解决libx265的问题\"></a>21，解决libx265的问题</h4><p><img src=\"/images/x265.png\" alt=\"x265.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone  --depth 1 https://github.com/videolan/x265.git</span><br><span class=\"line\">cd x265</span><br><span class=\"line\">cd build</span><br><span class=\"line\">cmake ../source</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"22，解决libxvid的问题\"><a href=\"#22，解决libxvid的问题\" class=\"headerlink\" title=\"22，解决libxvid的问题\"></a>22，解决libxvid的问题</h4><p><img src=\"/images/libxvid.png\" alt=\"libxvid.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">##官网下载</span><br><span class=\"line\">https://www.xvid.com/download/</span><br><span class=\"line\">## 按下图过程来查找</span><br><span class=\"line\">## 然后按照README来安装</span><br><span class=\"line\">cd build/generic</span><br><span class=\"line\">./configure</span><br><span class=\"line\">make -j 10</span><br><span class=\"line\"></span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/xvid.png\" alt=\" xvid\"></p>\n<p><img src=\"C:/Users/Administrator/Desktop/leopard4.1/images/readme.png\" alt=\"readme.png\"></p>\n<p><img src=\"/images/bar.png\" alt=\"bar.png\"></p>\n<h4 id=\"23，解决openal的问题\"><a href=\"#23，解决openal的问题\" class=\"headerlink\" title=\"23，解决openal的问题\"></a>23，解决openal的问题</h4><p><img src=\"/images/openal.png\" alt=\"openal.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install openal-soft openal-soft-devel</span><br></pre></td></tr></table></figure>\n<h4 id=\"24，解决libcdio的问题\"><a href=\"#24，解决libcdio的问题\" class=\"headerlink\" title=\"24，解决libcdio的问题\"></a>24，解决libcdio的问题</h4><h4 id=\"25，解决bzlib的问题\"><a href=\"#25，解决bzlib的问题\" class=\"headerlink\" title=\"25，解决bzlib的问题\"></a>25，解决bzlib的问题</h4><h4 id=\"26，解决libxcb的问题\"><a href=\"#26，解决libxcb的问题\" class=\"headerlink\" title=\"26，解决libxcb的问题\"></a>26，解决libxcb的问题</h4><p><img src=\"/images/libxcb.png\" alt=\"libxcb.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libxcb-devel</span><br></pre></td></tr></table></figure>\n<h2 id=\"四，添加硬件编解码\"><a href=\"#四，添加硬件编解码\" class=\"headerlink\" title=\"四，添加硬件编解码\"></a>四，添加硬件编解码</h2><h4 id=\"1，查看机器上显卡的型号\"><a href=\"#1，查看机器上显卡的型号\" class=\"headerlink\" title=\"1，查看机器上显卡的型号\"></a>1，查看机器上显卡的型号</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lspci | grep VGA</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/vga.png\" alt=\"vga\"></p>\n<h4 id=\"2，安装对应显卡的驱动\"><a href=\"#2，安装对应显卡的驱动\" class=\"headerlink\" title=\"2，安装对应显卡的驱动\"></a>2，安装对应显卡的驱动</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://www.nvidia.com/Download/index.aspx?lang=en-us</span><br><span class=\"line\">安装的方法见显卡驱动安装的文档</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，重新编译ffmpeg\"><a href=\"#3，重新编译ffmpeg\" class=\"headerlink\" title=\"3，重新编译ffmpeg\"></a>3，重新编译ffmpeg</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在./configure时添加以下的选项，来重新编译ffmpeg，既可以驱动显卡</span><br><span class=\"line\">--enable-cuda-sdk \\</span><br><span class=\"line\">--enable-cuvid \\</span><br><span class=\"line\">--enable-nvenc \\</span><br><span class=\"line\">--enable-nonfree \\</span><br><span class=\"line\">--enable-libnpp \\</span><br><span class=\"line\">--extra-cflags=-I/usr/local/cuda/include \\</span><br><span class=\"line\">--extra-ldflags=-L/usr/local/cuda/lib64 \\</span><br></pre></td></tr></table></figure>\n<h4 id=\"4，查看是否安装成功\"><a href=\"#4，查看是否安装成功\" class=\"headerlink\" title=\"4，查看是否安装成功\"></a>4，查看是否安装成功</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">使用ffmpeg -hwaccels命令查看支持的硬件加速选项</span><br><span class=\"line\">ffmpeg -hwaccels</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/hw.png\" alt=\"hw.png\"></p>\n<h4 id=\"5，查看cuvid提供的GPU编解码器\"><a href=\"#5，查看cuvid提供的GPU编解码器\" class=\"headerlink\" title=\"5，查看cuvid提供的GPU编解码器\"></a>5，查看cuvid提供的GPU编解码器</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -codecs | grep cuvid</span><br></pre></td></tr></table></figure>\n<p><img src=\"/images/cuvid.png\" alt=\"cuvid.png\"></p>\n<h4 id=\"6，使用GPU进行转码\"><a href=\"#6，使用GPU进行转码\" class=\"headerlink\" title=\"6，使用GPU进行转码\"></a>6，使用GPU进行转码</h4><blockquote>\n<p>用GPU进行转码的命令和软转码命令不太一样，CPU转码的时候，我们可以依赖ffmpeg识别输入视频的编码格式并选择对应的解码器，但ffmpeg只会自动选择CPU解码器，要让ffmpeg使用GPU解码器，必须先用ffprobe识别出输入视频的编码格式，然后在命令行中指定对应的GPU解码器。</p>\n<p>例如，将h264编码的源视频转码为指定尺寸和码率的h264编码视频：</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/video-H264-AAC.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4</span><br><span class=\"line\"></span><br><span class=\"line\">-hwaccel cuvid：指定使用cuvid硬件加速</span><br><span class=\"line\">-c:v h264_cuvid：使用h264_cuvid进行视频解码</span><br><span class=\"line\">-c:v h264_nvenc：使用h264_nvenc进行视频编码</span><br><span class=\"line\">-vf scale_npp=1280:-1：指定输出视频的宽高，注意，这里和软解码时使用的-vf scale=x:x不一样</span><br><span class=\"line\">转码期间使用nvidia-smi查看显卡状态，能够看到ffmpeg确实是在使用GPU进行转码：</span><br></pre></td></tr></table></figure>\n<p>如果在执行命令的时候报错，则需要,进行nv-codec-headers和驱动的版本匹配的处理</p>\n<p><img src=\"/images/drive.png\" alt=\"drive.png\"></p>\n<p>我开始编译nv-codec-headers使用的是最新版本9.1的，编译出错，有两种方法，一种是升级drive的版本，升级到430以上，这个比较的麻烦，另一种是降低nv-codec-headers的版本，我降低到8.1版本，就可以成功</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg 版本 ffmpeg version n4.1.1-3-g53f3f52</span><br><span class=\"line\">cuda 版本 CUDA Version 10.0.130（这个版本自带驱动，可以不用安装驱动）</span><br><span class=\"line\">drive 驱动版本 Driver Version: 410.48 </span><br><span class=\"line\">nv-codec-headers 版本 sdk/8.1</span><br></pre></td></tr></table></figure>\n<h4 id=\"7-在容器中使用NVIDIA\"><a href=\"#7-在容器中使用NVIDIA\" class=\"headerlink\" title=\"7,在容器中使用NVIDIA\"></a>7,在容器中使用NVIDIA</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在将自己的服务打包成镜像的时候，开始没有设置环境变量，导致怎么都无法调用NVIDIA进行硬件的转码；</span><br><span class=\"line\">最后查询了很多的资料，发现需要添加一个环境变量，在Dockfile中</span><br><span class=\"line\">ENV NVIDIA_DRIVER_CAPABILITIES video,compute,utility</span><br><span class=\"line\">才能保证容器中使用成功</span><br></pre></td></tr></table></figure>\n<h4 id=\"8，gpu和cpu转码测试\"><a href=\"#8，gpu和cpu转码测试\" class=\"headerlink\" title=\"8，gpu和cpu转码测试\"></a>8，gpu和cpu转码测试</h4><p>​    对于同一个视频，分别采用cpu和GPU两种方式来进行转码，对比这两者之间的效率</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#机器信息</span><br><span class=\"line\">逻辑核：24</span><br><span class=\"line\">内存：64G</span><br><span class=\"line\">24  Intel(R) Xeon(R) CPU E5-2620 v2 @ 2.10GHz</span><br><span class=\"line\">系统：CentOS Linux release 7.6.1810 (Core)</span><br><span class=\"line\">#视频信息：</span><br><span class=\"line\">name: 11.mkv</span><br><span class=\"line\">size： 1.1G</span><br><span class=\"line\">Video: h264 (High), yuv420p(progressive), 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 1k tbn, 50 tbc (default)</span><br><span class=\"line\">Audio: ac3, 48000 Hz, stereo, fltp, 192 kb/s (default)</span><br><span class=\"line\">#软件转码：</span><br><span class=\"line\">[time] ffmpeg  -i video/11.mkv -c:v libx264 -b:v 2048k -vf scale=1280:-1 -y /root/transcode.mp4</span><br><span class=\"line\">#结果</span><br><span class=\"line\">real\t11m18.807s</span><br><span class=\"line\">user\t180m16.290s</span><br><span class=\"line\">sys\t\t1m36.925s</span><br><span class=\"line\">cpu占用\t平均1600%</span><br><span class=\"line\">[time] ./softhw /root/video/11.mkv /opt/nvitra1.mp4</span><br><span class=\"line\">real\t14m51.166s</span><br><span class=\"line\">user\t220m2.857s</span><br><span class=\"line\">sys\t\t1m21.718s</span><br><span class=\"line\">cpu占用  平均1600%</span><br><span class=\"line\">#硬件转码：</span><br><span class=\"line\">[time] ffmpeg  -hwaccel cuvid -c:v h264_cuvid -i video/11.mkv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y /root/transcode.mp4</span><br><span class=\"line\">#结果</span><br><span class=\"line\">real\t1m45.228s</span><br><span class=\"line\">user\t1m15.910s</span><br><span class=\"line\">sys\t\t0m18.734s</span><br><span class=\"line\">cpu占用\t平均90%</span><br><span class=\"line\">[time] ./hw /root/video/11.mkv /opt/nvitra.mp4</span><br><span class=\"line\">real\t1m29.478s</span><br><span class=\"line\">user\t0m22.754s</span><br><span class=\"line\">sys\t\t0m23.465s</span><br><span class=\"line\">cpu占用 50%</span><br></pre></td></tr></table></figure>\n<h4 id=\"8，指定显卡进行转码\"><a href=\"#8，指定显卡进行转码\" class=\"headerlink\" title=\"8，指定显卡进行转码\"></a>8，指定显卡进行转码</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i &lt;input&gt; -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y &lt;output&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg -hwaccel cuvid -hwaccel_device 1 -c:v h264_cuvid -i &lt;input&gt; -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1 -y &lt;output&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">ffmpeg -hwaccel cuvid -hwaccel_device 0 -c:v h264_cuvid -i /root/source_media/flv.flv -c:v h264_nvenc -b:v 2048k -vf scale_npp=1280:-1  -y /root/flv.mp4</span><br></pre></td></tr></table></figure>\n"},{"title":"git-大文件上传管理","abbrlink":3538252460,"date":"2020-05-22T08:32:56.000Z","_content":"\n### git lfs安装和配置\n\ngit lfs 需要客户端支持, 请根据自己的操作系统下载对应的客户端\n\n[git lfs客户端下载](https://git-lfs.github.com/)\n\n`以Centos7为例，下载客户端后运行rpm安装`\n\n~~~\nrpm -i git-lfs-2.2.1-1.el7.x86_64.rpm\ngit lfs install（完成初始化）\n~~~\n\n\n\n### 设置管理的文件类型\n\n~~~\n#压缩包\ngit lfs track *.tar *.tar.gz *.tgz *.zip *.7z\n#图片\ngit lfs track *.jpg *.png *.jpeg *.bmp *.gif *.tiff\n#库\ngit lfs track *.jar *.war *.so *.so.*\n#非文本文档\ngit  lfs  track *.doc *.docx *.ppt *.pptx *.pdf *.xls *.xlsx\n#安装包\ngit  lfs  track *.rpm *.deb *.img *.iso\n~~~\n\n`设置完之后会在项目根目录下出现.gitattributes文件`","source":"_posts/git-大文件上传管理.md","raw":"---\ntitle: git-大文件上传管理\ncategories: [Tool,git]\ntags: lfs\nabbrlink: 3538252460\ndate: 2020-05-22 16:32:56\n---\n\n### git lfs安装和配置\n\ngit lfs 需要客户端支持, 请根据自己的操作系统下载对应的客户端\n\n[git lfs客户端下载](https://git-lfs.github.com/)\n\n`以Centos7为例，下载客户端后运行rpm安装`\n\n~~~\nrpm -i git-lfs-2.2.1-1.el7.x86_64.rpm\ngit lfs install（完成初始化）\n~~~\n\n\n\n### 设置管理的文件类型\n\n~~~\n#压缩包\ngit lfs track *.tar *.tar.gz *.tgz *.zip *.7z\n#图片\ngit lfs track *.jpg *.png *.jpeg *.bmp *.gif *.tiff\n#库\ngit lfs track *.jar *.war *.so *.so.*\n#非文本文档\ngit  lfs  track *.doc *.docx *.ppt *.pptx *.pdf *.xls *.xlsx\n#安装包\ngit  lfs  track *.rpm *.deb *.img *.iso\n~~~\n\n`设置完之后会在项目根目录下出现.gitattributes文件`","slug":"git-大文件上传管理","published":1,"updated":"2021-02-08T06:54:56.364Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwl001ylkq53dwmdwzw","content":"<h3 id=\"git-lfs安装和配置\"><a href=\"#git-lfs安装和配置\" class=\"headerlink\" title=\"git lfs安装和配置\"></a>git lfs安装和配置</h3><p>git lfs 需要客户端支持, 请根据自己的操作系统下载对应的客户端</p>\n<p><a href=\"https://git-lfs.github.com/\" target=\"_blank\" rel=\"noopener\">git lfs客户端下载</a></p>\n<p><code>以Centos7为例，下载客户端后运行rpm安装</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -i git-lfs-2.2.1-1.el7.x86_64.rpm</span><br><span class=\"line\">git lfs install（完成初始化）</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置管理的文件类型\"><a href=\"#设置管理的文件类型\" class=\"headerlink\" title=\"设置管理的文件类型\"></a>设置管理的文件类型</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#压缩包</span><br><span class=\"line\">git lfs track *.tar *.tar.gz *.tgz *.zip *.7z</span><br><span class=\"line\">#图片</span><br><span class=\"line\">git lfs track *.jpg *.png *.jpeg *.bmp *.gif *.tiff</span><br><span class=\"line\">#库</span><br><span class=\"line\">git lfs track *.jar *.war *.so *.so.*</span><br><span class=\"line\">#非文本文档</span><br><span class=\"line\">git  lfs  track *.doc *.docx *.ppt *.pptx *.pdf *.xls *.xlsx</span><br><span class=\"line\">#安装包</span><br><span class=\"line\">git  lfs  track *.rpm *.deb *.img *.iso</span><br></pre></td></tr></table></figure>\n<p><code>设置完之后会在项目根目录下出现.gitattributes文件</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"git-lfs安装和配置\"><a href=\"#git-lfs安装和配置\" class=\"headerlink\" title=\"git lfs安装和配置\"></a>git lfs安装和配置</h3><p>git lfs 需要客户端支持, 请根据自己的操作系统下载对应的客户端</p>\n<p><a href=\"https://git-lfs.github.com/\" target=\"_blank\" rel=\"noopener\">git lfs客户端下载</a></p>\n<p><code>以Centos7为例，下载客户端后运行rpm安装</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -i git-lfs-2.2.1-1.el7.x86_64.rpm</span><br><span class=\"line\">git lfs install（完成初始化）</span><br></pre></td></tr></table></figure>\n<h3 id=\"设置管理的文件类型\"><a href=\"#设置管理的文件类型\" class=\"headerlink\" title=\"设置管理的文件类型\"></a>设置管理的文件类型</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#压缩包</span><br><span class=\"line\">git lfs track *.tar *.tar.gz *.tgz *.zip *.7z</span><br><span class=\"line\">#图片</span><br><span class=\"line\">git lfs track *.jpg *.png *.jpeg *.bmp *.gif *.tiff</span><br><span class=\"line\">#库</span><br><span class=\"line\">git lfs track *.jar *.war *.so *.so.*</span><br><span class=\"line\">#非文本文档</span><br><span class=\"line\">git  lfs  track *.doc *.docx *.ppt *.pptx *.pdf *.xls *.xlsx</span><br><span class=\"line\">#安装包</span><br><span class=\"line\">git  lfs  track *.rpm *.deb *.img *.iso</span><br></pre></td></tr></table></figure>\n<p><code>设置完之后会在项目根目录下出现.gitattributes文件</code></p>\n"},{"title":"git-常用的命令","abbrlink":2063445917,"date":"2019-03-15T08:27:10.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;记录一些git常用的命令，便于在长时间不用时能够有个地方查阅，下面的几个是经常用到的。在windows下使用git，许多朋友都说无法使用一些状态（修改，保存，提交）图标，是因为图标显示不是git本身的功能呢，我们需要下载TortoiseGit才能使用图标。\n\n### 文件管理\n\n##### 重命名文件夹\n```\ngit  mv -f oldfolder newfolder\n```\n\n##### 删除新增的多个文件\n\n~~~\ngit clean -xdf\n~~~\n\n### 提交管理\n\n##### 删除中间的某次提交\n\n```\ngit revert commit id\n```\n\n##### 版本回退\n```\ngit reset --hard commitid\n这个不会保留之前的记录\n```\n##### 撤销本地提交\n```\ngit reset --soft commitid\ngit reset --mixed commitid\n两者的区别，--soft会将改动放在缓存区 --mixed不会讲改动放在缓存区\n```\n\n##### 撤销远程的提交\n```\ngit log\ngit reset --hard commitid\ngit push origin HEAD:master --force\n```\n\n##### 强制提交\n```\ngit push -u origin master -f\n```\n\n### 分支管理\n\n##### 将某个分支的提交copy到另一个分支上\n\n```\n例如，有两个分支，a,b,想要将a的某次提交，copy到b分支上\n1,在a分支上 git log 查询commitid\n2,git checkout b  切换分支\n3,git cherry-pick commitid\n```\n\n##### 统计当前分支的提交数目\n```\ngit rev-list HEAD | wc -l\n```\n##### 删除缓存的远程分支列表\n\n~~~\ngit remote prune origin\nor\ngit fetch -p\n~~~\n\n### stash管理\n\n##### 冻结当前的分支修改\n\n~~~\ngit stash save \"说明信息选填\"\n~~~\n\n##### 列出所有的工作现场存储\n\n~~~\ngit stash list\n~~~\n\n##### 恢复某个工作现场\n\n~~~\ngit stash apply stash@{n}\n~~~\n\n##### 删除存储的某个工作现场\n\n~~~\ngit stash drop stash@{n}\n~~~\n\n##### 恢复的同时把stash内容也删除了\n\n~~~\ngit stash pop stash@{n} \n~~~\n\n### config\n\n##### 解决git clone 项目中某个文件都需要输入密码\n\n~~~\ngit config --global credential.helper store\n~~~\n\n##### 配置邮件和用户名\n\n~~~\ngit config --global user.email \"xxx\"\ngit config --global user.name \"xxx\"\n~~~\n\n### tag管理\n\n##### 列出本地标签\n\n~~~\ngit tag\n~~~\n\n##### 切换到某个tag\n\n~~~\ngit checkout tagName\n~~~\n\n##### 本地打标签 -a 指定标签名， -m 指定说明文字\n\n~~~\ngit  tag -a v4.1.1 -m \"删除临时文件\"\n~~~\n\n##### 本地tag推送到远程\n\n###### 单一\n\n~~~\ngit push origin tagName\n#\ngit push origin v4.1.1\n~~~\n\n###### 多个\n\n~~~\ngit push --tags\n~~~\n\n##### 删除远程tag\n\n~~~\ngit push origin --delete tag tagName\n~~~\n\n##### 删除本地tag\n\n~~~\ngit tag -d tagName\n~~~\n\n##### 拉取tag到本地\n\n~~~\ngit fetch origin tag tagName\n~~~\n\n\n\n","source":"_posts/git-常用的命令.md","raw":"---\ntitle: git-常用的命令\ncategories: [Tool,git]\ntags: cmd\nabbrlink: 2063445917\ndate: 2019-03-15 16:27:10\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;记录一些git常用的命令，便于在长时间不用时能够有个地方查阅，下面的几个是经常用到的。在windows下使用git，许多朋友都说无法使用一些状态（修改，保存，提交）图标，是因为图标显示不是git本身的功能呢，我们需要下载TortoiseGit才能使用图标。\n\n### 文件管理\n\n##### 重命名文件夹\n```\ngit  mv -f oldfolder newfolder\n```\n\n##### 删除新增的多个文件\n\n~~~\ngit clean -xdf\n~~~\n\n### 提交管理\n\n##### 删除中间的某次提交\n\n```\ngit revert commit id\n```\n\n##### 版本回退\n```\ngit reset --hard commitid\n这个不会保留之前的记录\n```\n##### 撤销本地提交\n```\ngit reset --soft commitid\ngit reset --mixed commitid\n两者的区别，--soft会将改动放在缓存区 --mixed不会讲改动放在缓存区\n```\n\n##### 撤销远程的提交\n```\ngit log\ngit reset --hard commitid\ngit push origin HEAD:master --force\n```\n\n##### 强制提交\n```\ngit push -u origin master -f\n```\n\n### 分支管理\n\n##### 将某个分支的提交copy到另一个分支上\n\n```\n例如，有两个分支，a,b,想要将a的某次提交，copy到b分支上\n1,在a分支上 git log 查询commitid\n2,git checkout b  切换分支\n3,git cherry-pick commitid\n```\n\n##### 统计当前分支的提交数目\n```\ngit rev-list HEAD | wc -l\n```\n##### 删除缓存的远程分支列表\n\n~~~\ngit remote prune origin\nor\ngit fetch -p\n~~~\n\n### stash管理\n\n##### 冻结当前的分支修改\n\n~~~\ngit stash save \"说明信息选填\"\n~~~\n\n##### 列出所有的工作现场存储\n\n~~~\ngit stash list\n~~~\n\n##### 恢复某个工作现场\n\n~~~\ngit stash apply stash@{n}\n~~~\n\n##### 删除存储的某个工作现场\n\n~~~\ngit stash drop stash@{n}\n~~~\n\n##### 恢复的同时把stash内容也删除了\n\n~~~\ngit stash pop stash@{n} \n~~~\n\n### config\n\n##### 解决git clone 项目中某个文件都需要输入密码\n\n~~~\ngit config --global credential.helper store\n~~~\n\n##### 配置邮件和用户名\n\n~~~\ngit config --global user.email \"xxx\"\ngit config --global user.name \"xxx\"\n~~~\n\n### tag管理\n\n##### 列出本地标签\n\n~~~\ngit tag\n~~~\n\n##### 切换到某个tag\n\n~~~\ngit checkout tagName\n~~~\n\n##### 本地打标签 -a 指定标签名， -m 指定说明文字\n\n~~~\ngit  tag -a v4.1.1 -m \"删除临时文件\"\n~~~\n\n##### 本地tag推送到远程\n\n###### 单一\n\n~~~\ngit push origin tagName\n#\ngit push origin v4.1.1\n~~~\n\n###### 多个\n\n~~~\ngit push --tags\n~~~\n\n##### 删除远程tag\n\n~~~\ngit push origin --delete tag tagName\n~~~\n\n##### 删除本地tag\n\n~~~\ngit tag -d tagName\n~~~\n\n##### 拉取tag到本地\n\n~~~\ngit fetch origin tag tagName\n~~~\n\n\n\n","slug":"git-常用的命令","published":1,"updated":"2021-02-08T06:54:42.439Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwn0021lkq5lmuczl9v","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;记录一些git常用的命令，便于在长时间不用时能够有个地方查阅，下面的几个是经常用到的。在windows下使用git，许多朋友都说无法使用一些状态（修改，保存，提交）图标，是因为图标显示不是git本身的功能呢，我们需要下载TortoiseGit才能使用图标。</p>\n<h3 id=\"文件管理\"><a href=\"#文件管理\" class=\"headerlink\" title=\"文件管理\"></a>文件管理</h3><h5 id=\"重命名文件夹\"><a href=\"#重命名文件夹\" class=\"headerlink\" title=\"重命名文件夹\"></a>重命名文件夹</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git  mv -f oldfolder newfolder</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除新增的多个文件\"><a href=\"#删除新增的多个文件\" class=\"headerlink\" title=\"删除新增的多个文件\"></a>删除新增的多个文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clean -xdf</span><br></pre></td></tr></table></figure>\n<h3 id=\"提交管理\"><a href=\"#提交管理\" class=\"headerlink\" title=\"提交管理\"></a>提交管理</h3><h5 id=\"删除中间的某次提交\"><a href=\"#删除中间的某次提交\" class=\"headerlink\" title=\"删除中间的某次提交\"></a>删除中间的某次提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git revert commit id</span><br></pre></td></tr></table></figure>\n<h5 id=\"版本回退\"><a href=\"#版本回退\" class=\"headerlink\" title=\"版本回退\"></a>版本回退</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --hard commitid</span><br><span class=\"line\">这个不会保留之前的记录</span><br></pre></td></tr></table></figure>\n<h5 id=\"撤销本地提交\"><a href=\"#撤销本地提交\" class=\"headerlink\" title=\"撤销本地提交\"></a>撤销本地提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --soft commitid</span><br><span class=\"line\">git reset --mixed commitid</span><br><span class=\"line\">两者的区别，--soft会将改动放在缓存区 --mixed不会讲改动放在缓存区</span><br></pre></td></tr></table></figure>\n<h5 id=\"撤销远程的提交\"><a href=\"#撤销远程的提交\" class=\"headerlink\" title=\"撤销远程的提交\"></a>撤销远程的提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log</span><br><span class=\"line\">git reset --hard commitid</span><br><span class=\"line\">git push origin HEAD:master --force</span><br></pre></td></tr></table></figure>\n<h5 id=\"强制提交\"><a href=\"#强制提交\" class=\"headerlink\" title=\"强制提交\"></a>强制提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push -u origin master -f</span><br></pre></td></tr></table></figure>\n<h3 id=\"分支管理\"><a href=\"#分支管理\" class=\"headerlink\" title=\"分支管理\"></a>分支管理</h3><h5 id=\"将某个分支的提交copy到另一个分支上\"><a href=\"#将某个分支的提交copy到另一个分支上\" class=\"headerlink\" title=\"将某个分支的提交copy到另一个分支上\"></a>将某个分支的提交copy到另一个分支上</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">例如，有两个分支，a,b,想要将a的某次提交，copy到b分支上</span><br><span class=\"line\">1,在a分支上 git log 查询commitid</span><br><span class=\"line\">2,git checkout b  切换分支</span><br><span class=\"line\">3,git cherry-pick commitid</span><br></pre></td></tr></table></figure>\n<h5 id=\"统计当前分支的提交数目\"><a href=\"#统计当前分支的提交数目\" class=\"headerlink\" title=\"统计当前分支的提交数目\"></a>统计当前分支的提交数目</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rev-list HEAD | wc -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除缓存的远程分支列表\"><a href=\"#删除缓存的远程分支列表\" class=\"headerlink\" title=\"删除缓存的远程分支列表\"></a>删除缓存的远程分支列表</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote prune origin</span><br><span class=\"line\">or</span><br><span class=\"line\">git fetch -p</span><br></pre></td></tr></table></figure>\n<h3 id=\"stash管理\"><a href=\"#stash管理\" class=\"headerlink\" title=\"stash管理\"></a>stash管理</h3><h5 id=\"冻结当前的分支修改\"><a href=\"#冻结当前的分支修改\" class=\"headerlink\" title=\"冻结当前的分支修改\"></a>冻结当前的分支修改</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash save &quot;说明信息选填&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"列出所有的工作现场存储\"><a href=\"#列出所有的工作现场存储\" class=\"headerlink\" title=\"列出所有的工作现场存储\"></a>列出所有的工作现场存储</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash list</span><br></pre></td></tr></table></figure>\n<h5 id=\"恢复某个工作现场\"><a href=\"#恢复某个工作现场\" class=\"headerlink\" title=\"恢复某个工作现场\"></a>恢复某个工作现场</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash apply stash@&#123;n&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除存储的某个工作现场\"><a href=\"#删除存储的某个工作现场\" class=\"headerlink\" title=\"删除存储的某个工作现场\"></a>删除存储的某个工作现场</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash drop stash@&#123;n&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"恢复的同时把stash内容也删除了\"><a href=\"#恢复的同时把stash内容也删除了\" class=\"headerlink\" title=\"恢复的同时把stash内容也删除了\"></a>恢复的同时把stash内容也删除了</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash pop stash@&#123;n&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"config\"><a href=\"#config\" class=\"headerlink\" title=\"config\"></a>config</h3><h5 id=\"解决git-clone-项目中某个文件都需要输入密码\"><a href=\"#解决git-clone-项目中某个文件都需要输入密码\" class=\"headerlink\" title=\"解决git clone 项目中某个文件都需要输入密码\"></a>解决git clone 项目中某个文件都需要输入密码</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global credential.helper store</span><br></pre></td></tr></table></figure>\n<h5 id=\"配置邮件和用户名\"><a href=\"#配置邮件和用户名\" class=\"headerlink\" title=\"配置邮件和用户名\"></a>配置邮件和用户名</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.email &quot;xxx&quot;</span><br><span class=\"line\">git config --global user.name &quot;xxx&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"tag管理\"><a href=\"#tag管理\" class=\"headerlink\" title=\"tag管理\"></a>tag管理</h3><h5 id=\"列出本地标签\"><a href=\"#列出本地标签\" class=\"headerlink\" title=\"列出本地标签\"></a>列出本地标签</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag</span><br></pre></td></tr></table></figure>\n<h5 id=\"切换到某个tag\"><a href=\"#切换到某个tag\" class=\"headerlink\" title=\"切换到某个tag\"></a>切换到某个tag</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout tagName</span><br></pre></td></tr></table></figure>\n<h5 id=\"本地打标签-a-指定标签名，-m-指定说明文字\"><a href=\"#本地打标签-a-指定标签名，-m-指定说明文字\" class=\"headerlink\" title=\"本地打标签 -a 指定标签名， -m 指定说明文字\"></a>本地打标签 -a 指定标签名， -m 指定说明文字</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git  tag -a v4.1.1 -m &quot;删除临时文件&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"本地tag推送到远程\"><a href=\"#本地tag推送到远程\" class=\"headerlink\" title=\"本地tag推送到远程\"></a>本地tag推送到远程</h5><h6 id=\"单一\"><a href=\"#单一\" class=\"headerlink\" title=\"单一\"></a>单一</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin tagName</span><br><span class=\"line\">#</span><br><span class=\"line\">git push origin v4.1.1</span><br></pre></td></tr></table></figure>\n<h6 id=\"多个\"><a href=\"#多个\" class=\"headerlink\" title=\"多个\"></a>多个</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push --tags</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除远程tag\"><a href=\"#删除远程tag\" class=\"headerlink\" title=\"删除远程tag\"></a>删除远程tag</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin --delete tag tagName</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除本地tag\"><a href=\"#删除本地tag\" class=\"headerlink\" title=\"删除本地tag\"></a>删除本地tag</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag -d tagName</span><br></pre></td></tr></table></figure>\n<h5 id=\"拉取tag到本地\"><a href=\"#拉取tag到本地\" class=\"headerlink\" title=\"拉取tag到本地\"></a>拉取tag到本地</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch origin tag tagName</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;记录一些git常用的命令，便于在长时间不用时能够有个地方查阅，下面的几个是经常用到的。在windows下使用git，许多朋友都说无法使用一些状态（修改，保存，提交）图标，是因为图标显示不是git本身的功能呢，我们需要下载TortoiseGit才能使用图标。</p>\n<h3 id=\"文件管理\"><a href=\"#文件管理\" class=\"headerlink\" title=\"文件管理\"></a>文件管理</h3><h5 id=\"重命名文件夹\"><a href=\"#重命名文件夹\" class=\"headerlink\" title=\"重命名文件夹\"></a>重命名文件夹</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git  mv -f oldfolder newfolder</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除新增的多个文件\"><a href=\"#删除新增的多个文件\" class=\"headerlink\" title=\"删除新增的多个文件\"></a>删除新增的多个文件</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clean -xdf</span><br></pre></td></tr></table></figure>\n<h3 id=\"提交管理\"><a href=\"#提交管理\" class=\"headerlink\" title=\"提交管理\"></a>提交管理</h3><h5 id=\"删除中间的某次提交\"><a href=\"#删除中间的某次提交\" class=\"headerlink\" title=\"删除中间的某次提交\"></a>删除中间的某次提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git revert commit id</span><br></pre></td></tr></table></figure>\n<h5 id=\"版本回退\"><a href=\"#版本回退\" class=\"headerlink\" title=\"版本回退\"></a>版本回退</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --hard commitid</span><br><span class=\"line\">这个不会保留之前的记录</span><br></pre></td></tr></table></figure>\n<h5 id=\"撤销本地提交\"><a href=\"#撤销本地提交\" class=\"headerlink\" title=\"撤销本地提交\"></a>撤销本地提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --soft commitid</span><br><span class=\"line\">git reset --mixed commitid</span><br><span class=\"line\">两者的区别，--soft会将改动放在缓存区 --mixed不会讲改动放在缓存区</span><br></pre></td></tr></table></figure>\n<h5 id=\"撤销远程的提交\"><a href=\"#撤销远程的提交\" class=\"headerlink\" title=\"撤销远程的提交\"></a>撤销远程的提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log</span><br><span class=\"line\">git reset --hard commitid</span><br><span class=\"line\">git push origin HEAD:master --force</span><br></pre></td></tr></table></figure>\n<h5 id=\"强制提交\"><a href=\"#强制提交\" class=\"headerlink\" title=\"强制提交\"></a>强制提交</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push -u origin master -f</span><br></pre></td></tr></table></figure>\n<h3 id=\"分支管理\"><a href=\"#分支管理\" class=\"headerlink\" title=\"分支管理\"></a>分支管理</h3><h5 id=\"将某个分支的提交copy到另一个分支上\"><a href=\"#将某个分支的提交copy到另一个分支上\" class=\"headerlink\" title=\"将某个分支的提交copy到另一个分支上\"></a>将某个分支的提交copy到另一个分支上</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">例如，有两个分支，a,b,想要将a的某次提交，copy到b分支上</span><br><span class=\"line\">1,在a分支上 git log 查询commitid</span><br><span class=\"line\">2,git checkout b  切换分支</span><br><span class=\"line\">3,git cherry-pick commitid</span><br></pre></td></tr></table></figure>\n<h5 id=\"统计当前分支的提交数目\"><a href=\"#统计当前分支的提交数目\" class=\"headerlink\" title=\"统计当前分支的提交数目\"></a>统计当前分支的提交数目</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git rev-list HEAD | wc -l</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除缓存的远程分支列表\"><a href=\"#删除缓存的远程分支列表\" class=\"headerlink\" title=\"删除缓存的远程分支列表\"></a>删除缓存的远程分支列表</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote prune origin</span><br><span class=\"line\">or</span><br><span class=\"line\">git fetch -p</span><br></pre></td></tr></table></figure>\n<h3 id=\"stash管理\"><a href=\"#stash管理\" class=\"headerlink\" title=\"stash管理\"></a>stash管理</h3><h5 id=\"冻结当前的分支修改\"><a href=\"#冻结当前的分支修改\" class=\"headerlink\" title=\"冻结当前的分支修改\"></a>冻结当前的分支修改</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash save &quot;说明信息选填&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"列出所有的工作现场存储\"><a href=\"#列出所有的工作现场存储\" class=\"headerlink\" title=\"列出所有的工作现场存储\"></a>列出所有的工作现场存储</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash list</span><br></pre></td></tr></table></figure>\n<h5 id=\"恢复某个工作现场\"><a href=\"#恢复某个工作现场\" class=\"headerlink\" title=\"恢复某个工作现场\"></a>恢复某个工作现场</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash apply stash@&#123;n&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除存储的某个工作现场\"><a href=\"#删除存储的某个工作现场\" class=\"headerlink\" title=\"删除存储的某个工作现场\"></a>删除存储的某个工作现场</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash drop stash@&#123;n&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"恢复的同时把stash内容也删除了\"><a href=\"#恢复的同时把stash内容也删除了\" class=\"headerlink\" title=\"恢复的同时把stash内容也删除了\"></a>恢复的同时把stash内容也删除了</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git stash pop stash@&#123;n&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"config\"><a href=\"#config\" class=\"headerlink\" title=\"config\"></a>config</h3><h5 id=\"解决git-clone-项目中某个文件都需要输入密码\"><a href=\"#解决git-clone-项目中某个文件都需要输入密码\" class=\"headerlink\" title=\"解决git clone 项目中某个文件都需要输入密码\"></a>解决git clone 项目中某个文件都需要输入密码</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global credential.helper store</span><br></pre></td></tr></table></figure>\n<h5 id=\"配置邮件和用户名\"><a href=\"#配置邮件和用户名\" class=\"headerlink\" title=\"配置邮件和用户名\"></a>配置邮件和用户名</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.email &quot;xxx&quot;</span><br><span class=\"line\">git config --global user.name &quot;xxx&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"tag管理\"><a href=\"#tag管理\" class=\"headerlink\" title=\"tag管理\"></a>tag管理</h3><h5 id=\"列出本地标签\"><a href=\"#列出本地标签\" class=\"headerlink\" title=\"列出本地标签\"></a>列出本地标签</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag</span><br></pre></td></tr></table></figure>\n<h5 id=\"切换到某个tag\"><a href=\"#切换到某个tag\" class=\"headerlink\" title=\"切换到某个tag\"></a>切换到某个tag</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout tagName</span><br></pre></td></tr></table></figure>\n<h5 id=\"本地打标签-a-指定标签名，-m-指定说明文字\"><a href=\"#本地打标签-a-指定标签名，-m-指定说明文字\" class=\"headerlink\" title=\"本地打标签 -a 指定标签名， -m 指定说明文字\"></a>本地打标签 -a 指定标签名， -m 指定说明文字</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git  tag -a v4.1.1 -m &quot;删除临时文件&quot;</span><br></pre></td></tr></table></figure>\n<h5 id=\"本地tag推送到远程\"><a href=\"#本地tag推送到远程\" class=\"headerlink\" title=\"本地tag推送到远程\"></a>本地tag推送到远程</h5><h6 id=\"单一\"><a href=\"#单一\" class=\"headerlink\" title=\"单一\"></a>单一</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin tagName</span><br><span class=\"line\">#</span><br><span class=\"line\">git push origin v4.1.1</span><br></pre></td></tr></table></figure>\n<h6 id=\"多个\"><a href=\"#多个\" class=\"headerlink\" title=\"多个\"></a>多个</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push --tags</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除远程tag\"><a href=\"#删除远程tag\" class=\"headerlink\" title=\"删除远程tag\"></a>删除远程tag</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin --delete tag tagName</span><br></pre></td></tr></table></figure>\n<h5 id=\"删除本地tag\"><a href=\"#删除本地tag\" class=\"headerlink\" title=\"删除本地tag\"></a>删除本地tag</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag -d tagName</span><br></pre></td></tr></table></figure>\n<h5 id=\"拉取tag到本地\"><a href=\"#拉取tag到本地\" class=\"headerlink\" title=\"拉取tag到本地\"></a>拉取tag到本地</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch origin tag tagName</span><br></pre></td></tr></table></figure>\n"},{"title":"github-解决GitHub clone慢的问题","abbrlink":814027255,"date":"2020-06-01T07:23:20.000Z","_content":"\n哎，有时候自己在GitHub上下载东西的时候总是很慢，这里记载一下几个加快的方法\n\n\n\n### 一，使用gitee码云来进行clone\n\n将需要clone的项目，先转移到码云上，然后通过码云来下载本地，速度很快；\n\n\n\n### 二，修改hosts\n\n通过[查询IP地址网站](https://www.ipaddress.com/)查询下面两个域名的IP地址\n\n~~~\ngithub.global.ssl.fastly.net\n~~~\n\n~~~\ngithub.com\n~~~\n\n##### 在linux上  vim /etc/hosts\n\n~~~\n199.232.69.194 github.global.ssl.fastly.net\n140.82.113.3 github.com\n~~~\n\n##### 在Windows上 修改 C:\\Windows\\System32\\drivers\\etc\\hosts\n\n1. 对于Windows下的hosts执行需要权限，我们可以将其先拷贝到桌面，修改后再copy回去\n\n2. 打开cmd命令行，执行下面的命令\n\n3. ~~~\n   ipconfig/flushdns\n   ~~~\n\n   ","source":"_posts/github-解决GitHub-clone慢的问题.md","raw":"---\ntitle: github-解决GitHub clone慢的问题\ncategories: [Tool,git]\ntags: git\nabbrlink: 814027255\ndate: 2020-06-01 15:23:20\n---\n\n哎，有时候自己在GitHub上下载东西的时候总是很慢，这里记载一下几个加快的方法\n\n\n\n### 一，使用gitee码云来进行clone\n\n将需要clone的项目，先转移到码云上，然后通过码云来下载本地，速度很快；\n\n\n\n### 二，修改hosts\n\n通过[查询IP地址网站](https://www.ipaddress.com/)查询下面两个域名的IP地址\n\n~~~\ngithub.global.ssl.fastly.net\n~~~\n\n~~~\ngithub.com\n~~~\n\n##### 在linux上  vim /etc/hosts\n\n~~~\n199.232.69.194 github.global.ssl.fastly.net\n140.82.113.3 github.com\n~~~\n\n##### 在Windows上 修改 C:\\Windows\\System32\\drivers\\etc\\hosts\n\n1. 对于Windows下的hosts执行需要权限，我们可以将其先拷贝到桌面，修改后再copy回去\n\n2. 打开cmd命令行，执行下面的命令\n\n3. ~~~\n   ipconfig/flushdns\n   ~~~\n\n   ","slug":"github-解决GitHub-clone慢的问题","published":1,"updated":"2021-02-08T06:54:22.385Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwo0024lkq572w41guu","content":"<p>哎，有时候自己在GitHub上下载东西的时候总是很慢，这里记载一下几个加快的方法</p>\n<h3 id=\"一，使用gitee码云来进行clone\"><a href=\"#一，使用gitee码云来进行clone\" class=\"headerlink\" title=\"一，使用gitee码云来进行clone\"></a>一，使用gitee码云来进行clone</h3><p>将需要clone的项目，先转移到码云上，然后通过码云来下载本地，速度很快；</p>\n<h3 id=\"二，修改hosts\"><a href=\"#二，修改hosts\" class=\"headerlink\" title=\"二，修改hosts\"></a>二，修改hosts</h3><p>通过<a href=\"https://www.ipaddress.com/\" target=\"_blank\" rel=\"noopener\">查询IP地址网站</a>查询下面两个域名的IP地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">github.com</span><br></pre></td></tr></table></figure>\n<h5 id=\"在linux上-vim-etc-hosts\"><a href=\"#在linux上-vim-etc-hosts\" class=\"headerlink\" title=\"在linux上  vim /etc/hosts\"></a>在linux上  vim /etc/hosts</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">199.232.69.194 github.global.ssl.fastly.net</span><br><span class=\"line\">140.82.113.3 github.com</span><br></pre></td></tr></table></figure>\n<h5 id=\"在Windows上-修改-C-Windows-System32-drivers-etc-hosts\"><a href=\"#在Windows上-修改-C-Windows-System32-drivers-etc-hosts\" class=\"headerlink\" title=\"在Windows上 修改 C:\\Windows\\System32\\drivers\\etc\\hosts\"></a>在Windows上 修改 C:\\Windows\\System32\\drivers\\etc\\hosts</h5><ol>\n<li><p>对于Windows下的hosts执行需要权限，我们可以将其先拷贝到桌面，修改后再copy回去</p>\n</li>\n<li><p>打开cmd命令行，执行下面的命令</p>\n</li>\n<li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ipconfig/flushdns</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p>哎，有时候自己在GitHub上下载东西的时候总是很慢，这里记载一下几个加快的方法</p>\n<h3 id=\"一，使用gitee码云来进行clone\"><a href=\"#一，使用gitee码云来进行clone\" class=\"headerlink\" title=\"一，使用gitee码云来进行clone\"></a>一，使用gitee码云来进行clone</h3><p>将需要clone的项目，先转移到码云上，然后通过码云来下载本地，速度很快；</p>\n<h3 id=\"二，修改hosts\"><a href=\"#二，修改hosts\" class=\"headerlink\" title=\"二，修改hosts\"></a>二，修改hosts</h3><p>通过<a href=\"https://www.ipaddress.com/\" target=\"_blank\" rel=\"noopener\">查询IP地址网站</a>查询下面两个域名的IP地址</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">github.com</span><br></pre></td></tr></table></figure>\n<h5 id=\"在linux上-vim-etc-hosts\"><a href=\"#在linux上-vim-etc-hosts\" class=\"headerlink\" title=\"在linux上  vim /etc/hosts\"></a>在linux上  vim /etc/hosts</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">199.232.69.194 github.global.ssl.fastly.net</span><br><span class=\"line\">140.82.113.3 github.com</span><br></pre></td></tr></table></figure>\n<h5 id=\"在Windows上-修改-C-Windows-System32-drivers-etc-hosts\"><a href=\"#在Windows上-修改-C-Windows-System32-drivers-etc-hosts\" class=\"headerlink\" title=\"在Windows上 修改 C:\\Windows\\System32\\drivers\\etc\\hosts\"></a>在Windows上 修改 C:\\Windows\\System32\\drivers\\etc\\hosts</h5><ol>\n<li><p>对于Windows下的hosts执行需要权限，我们可以将其先拷贝到桌面，修改后再copy回去</p>\n</li>\n<li><p>打开cmd命令行，执行下面的命令</p>\n</li>\n<li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ipconfig/flushdns</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n"},{"title":"grpc编译","abbrlink":1473358207,"date":"2020-01-14T10:54:12.000Z","_content":"\n~~~\n环境 centos7\n~~~\n\n## 一，安装编译依赖的环境\n\n~~~\nyum install -y pkgconfig autoconf automake libtool make gcc-c++ unzip\nyum install -y gflags-devel gtest-devel clang libcxx-devel\nyum install -y openssl  openssl-devel\nyum install -y  libunwind libunwind-devel\nyum install -y epel-release\nyum install -y golang\n~~~\n\n\n\n## 二，源码下载\n\n~~~\ngit clone https://github.com/grpc/grpc.git\ncd grpc\ngit submodule update --init\n\n~~~\n\n## 三，编译\n\n#### 1，编译cmake\n\n~~~\n需要下载cmake高级版本，yum安装的版本太低\nhttps://cmake.org/download/\n源码安装cmake，\n（1）删除原来版本的cmake\n（2）./configure\n（3）make && make install\n如果找不到，则创建软链接\nln -s /usr/local/bin/cmake /usr/bin/cmake\n~~~\n\n#### 2，先编译protobuf\n\n~~~\ncd third_party/protobuf\ngit submodule update --init --recursive\n./autogen.sh\n./configure --prefix=/usr/local/helios/protobuf\nmake \nmake check\nmake install\n2,建立软链接\nln -s /usr/local/helios/protobuf/bin/protoc /usr/local/bin/protoc\n检测是否安装成功\nprotoc --version\n~~~\n\n\n\n#### 3，编译grpc（cmake)\n\n~~~\ncd grpc\nmkdir -p  cmake/build\ncmake -DBUILD_SHARED_LIBS=on -DCMAKE_INSTALL_PREFIX=/usr/local/helios/grpc -DCMAKE_BUILD_TYPE=DEBUG -Wno-dev ../../\nmake\nmake install\n~~~\n\n#### 4，编译（make,不建议使用）\n\n~~~\n2,编译grpc\ncd grpc根目录\nmake -j 4\nmake install\n~~~\n\n#### 5，问题\n\n~~~\n对于cpp的使用，当编译好了之后，运行helloworld程序，没有响应，有很大的问题\nhttps://github.com/grpc/grpc/issues/21280#issuecomment-558164977\n\n解决方法：修改源码（不使用）\nvim / src / core / lib / surface / init.cc\n\ndiff --git a/src/core/lib/surface/init.cc b/src/core/lib/surface/init.cc\nindex 2812427f7a..3c6a547b20 100644\n--- a/src/core/lib/surface/init.cc\n+++ b/src/core/lib/surface/init.cc\n@@ -156,7 +156,7 @@ void grpc_init(void) {\n      * at the appropriate time */\n     grpc_register_security_filters();\n     register_builtin_channel_init();\n-    grpc_tracer_init();将源码中的这个给注销\n+    // grpc_tracer_init();\n     /* no more changes to channel init pipelines */\n     grpc_channel_init_finalize();\n     grpc_iomgr_start();\n     \n修改源码：\nvim src/core/lib/debug/trace.cc\n void TraceFlagList::Add(TraceFlag* flag) {\n+  TraceFlag* t;\n+  for (t = root_tracer_; t; t = t -> next_tracer_) {\n+       if (t == flag ) return;\n+  }\n   flag->next_tracer_ = root_tracer_;\n   root_tracer_ = flag;\n遍历链表，如果存在则不加入\n~~~\n\n#### 6，运行helloworld程序\n\n~~~\ncd examples/cpp/helloworld\nmake\n\n出现问题：\nwhich: no grpc_cpp_plugin in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)\n因为自己配置的路径，所以先给grpc_cpp_plugin  建立软连接\nln -s /usr/local/helios/grpc/bin/grpc_cpp_plugin   /usr/local/bin/grpc_cpp_plugin\n\n\nhelloworld.pb.h:10:40: fatal error: google/protobuf/port_def.inc: No such file or directory\n配置cpp头文件路径\nexport CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/local/helios/grpc/include\n\n\nPackage protobuf was not found in the pkg-config search path.\nPerhaps you should add the directory containing `protobuf.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'protobuf' found\nPackage grpc was not found in the pkg-config search path.\nPerhaps you should add the directory containing `grpc.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'grpc' found\n配置pkgconfig搜索路径\nexport PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/helios/protobuf/lib/pkgconfig/:/usr/local/helios/grpc/lib/pkgconfig/\n\nerror while loading shared libraries: libgrpc_plugin_support.so.1: cannot open shared object file\n配置cpp动态库搜索路径\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/helios/grpc/lib/:/usr/local/helios/grpc/lib64/:/usr/local/helios/protobuf/lib\n~~~\n\n","source":"_posts/grpc编译.md","raw":"---\ntitle: grpc编译\ncategories: [Cpp,protocol]\ntags: grpc\nabbrlink: 1473358207\ndate: 2020-01-14 18:54:12\n---\n\n~~~\n环境 centos7\n~~~\n\n## 一，安装编译依赖的环境\n\n~~~\nyum install -y pkgconfig autoconf automake libtool make gcc-c++ unzip\nyum install -y gflags-devel gtest-devel clang libcxx-devel\nyum install -y openssl  openssl-devel\nyum install -y  libunwind libunwind-devel\nyum install -y epel-release\nyum install -y golang\n~~~\n\n\n\n## 二，源码下载\n\n~~~\ngit clone https://github.com/grpc/grpc.git\ncd grpc\ngit submodule update --init\n\n~~~\n\n## 三，编译\n\n#### 1，编译cmake\n\n~~~\n需要下载cmake高级版本，yum安装的版本太低\nhttps://cmake.org/download/\n源码安装cmake，\n（1）删除原来版本的cmake\n（2）./configure\n（3）make && make install\n如果找不到，则创建软链接\nln -s /usr/local/bin/cmake /usr/bin/cmake\n~~~\n\n#### 2，先编译protobuf\n\n~~~\ncd third_party/protobuf\ngit submodule update --init --recursive\n./autogen.sh\n./configure --prefix=/usr/local/helios/protobuf\nmake \nmake check\nmake install\n2,建立软链接\nln -s /usr/local/helios/protobuf/bin/protoc /usr/local/bin/protoc\n检测是否安装成功\nprotoc --version\n~~~\n\n\n\n#### 3，编译grpc（cmake)\n\n~~~\ncd grpc\nmkdir -p  cmake/build\ncmake -DBUILD_SHARED_LIBS=on -DCMAKE_INSTALL_PREFIX=/usr/local/helios/grpc -DCMAKE_BUILD_TYPE=DEBUG -Wno-dev ../../\nmake\nmake install\n~~~\n\n#### 4，编译（make,不建议使用）\n\n~~~\n2,编译grpc\ncd grpc根目录\nmake -j 4\nmake install\n~~~\n\n#### 5，问题\n\n~~~\n对于cpp的使用，当编译好了之后，运行helloworld程序，没有响应，有很大的问题\nhttps://github.com/grpc/grpc/issues/21280#issuecomment-558164977\n\n解决方法：修改源码（不使用）\nvim / src / core / lib / surface / init.cc\n\ndiff --git a/src/core/lib/surface/init.cc b/src/core/lib/surface/init.cc\nindex 2812427f7a..3c6a547b20 100644\n--- a/src/core/lib/surface/init.cc\n+++ b/src/core/lib/surface/init.cc\n@@ -156,7 +156,7 @@ void grpc_init(void) {\n      * at the appropriate time */\n     grpc_register_security_filters();\n     register_builtin_channel_init();\n-    grpc_tracer_init();将源码中的这个给注销\n+    // grpc_tracer_init();\n     /* no more changes to channel init pipelines */\n     grpc_channel_init_finalize();\n     grpc_iomgr_start();\n     \n修改源码：\nvim src/core/lib/debug/trace.cc\n void TraceFlagList::Add(TraceFlag* flag) {\n+  TraceFlag* t;\n+  for (t = root_tracer_; t; t = t -> next_tracer_) {\n+       if (t == flag ) return;\n+  }\n   flag->next_tracer_ = root_tracer_;\n   root_tracer_ = flag;\n遍历链表，如果存在则不加入\n~~~\n\n#### 6，运行helloworld程序\n\n~~~\ncd examples/cpp/helloworld\nmake\n\n出现问题：\nwhich: no grpc_cpp_plugin in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)\n因为自己配置的路径，所以先给grpc_cpp_plugin  建立软连接\nln -s /usr/local/helios/grpc/bin/grpc_cpp_plugin   /usr/local/bin/grpc_cpp_plugin\n\n\nhelloworld.pb.h:10:40: fatal error: google/protobuf/port_def.inc: No such file or directory\n配置cpp头文件路径\nexport CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/local/helios/grpc/include\n\n\nPackage protobuf was not found in the pkg-config search path.\nPerhaps you should add the directory containing `protobuf.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'protobuf' found\nPackage grpc was not found in the pkg-config search path.\nPerhaps you should add the directory containing `grpc.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'grpc' found\n配置pkgconfig搜索路径\nexport PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/helios/protobuf/lib/pkgconfig/:/usr/local/helios/grpc/lib/pkgconfig/\n\nerror while loading shared libraries: libgrpc_plugin_support.so.1: cannot open shared object file\n配置cpp动态库搜索路径\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/helios/grpc/lib/:/usr/local/helios/grpc/lib64/:/usr/local/helios/protobuf/lib\n~~~\n\n","slug":"grpc编译","published":1,"updated":"2021-02-08T07:01:34.568Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwq0027lkq59m0a3er3","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">环境 centos7</span><br></pre></td></tr></table></figure>\n<h2 id=\"一，安装编译依赖的环境\"><a href=\"#一，安装编译依赖的环境\" class=\"headerlink\" title=\"一，安装编译依赖的环境\"></a>一，安装编译依赖的环境</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y pkgconfig autoconf automake libtool make gcc-c++ unzip</span><br><span class=\"line\">yum install -y gflags-devel gtest-devel clang libcxx-devel</span><br><span class=\"line\">yum install -y openssl  openssl-devel</span><br><span class=\"line\">yum install -y  libunwind libunwind-devel</span><br><span class=\"line\">yum install -y epel-release</span><br><span class=\"line\">yum install -y golang</span><br></pre></td></tr></table></figure>\n<h2 id=\"二，源码下载\"><a href=\"#二，源码下载\" class=\"headerlink\" title=\"二，源码下载\"></a>二，源码下载</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/grpc/grpc.git</span><br><span class=\"line\">cd grpc</span><br><span class=\"line\">git submodule update --init</span><br></pre></td></tr></table></figure>\n<h2 id=\"三，编译\"><a href=\"#三，编译\" class=\"headerlink\" title=\"三，编译\"></a>三，编译</h2><h4 id=\"1，编译cmake\"><a href=\"#1，编译cmake\" class=\"headerlink\" title=\"1，编译cmake\"></a>1，编译cmake</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要下载cmake高级版本，yum安装的版本太低</span><br><span class=\"line\">https://cmake.org/download/</span><br><span class=\"line\">源码安装cmake，</span><br><span class=\"line\">（1）删除原来版本的cmake</span><br><span class=\"line\">（2）./configure</span><br><span class=\"line\">（3）make &amp;&amp; make install</span><br><span class=\"line\">如果找不到，则创建软链接</span><br><span class=\"line\">ln -s /usr/local/bin/cmake /usr/bin/cmake</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，先编译protobuf\"><a href=\"#2，先编译protobuf\" class=\"headerlink\" title=\"2，先编译protobuf\"></a>2，先编译protobuf</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd third_party/protobuf</span><br><span class=\"line\">git submodule update --init --recursive</span><br><span class=\"line\">./autogen.sh</span><br><span class=\"line\">./configure --prefix=/usr/local/helios/protobuf</span><br><span class=\"line\">make </span><br><span class=\"line\">make check</span><br><span class=\"line\">make install</span><br><span class=\"line\">2,建立软链接</span><br><span class=\"line\">ln -s /usr/local/helios/protobuf/bin/protoc /usr/local/bin/protoc</span><br><span class=\"line\">检测是否安装成功</span><br><span class=\"line\">protoc --version</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，编译grpc（cmake\"><a href=\"#3，编译grpc（cmake\" class=\"headerlink\" title=\"3，编译grpc（cmake)\"></a>3，编译grpc（cmake)</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd grpc</span><br><span class=\"line\">mkdir -p  cmake/build</span><br><span class=\"line\">cmake -DBUILD_SHARED_LIBS=on -DCMAKE_INSTALL_PREFIX=/usr/local/helios/grpc -DCMAKE_BUILD_TYPE=DEBUG -Wno-dev ../../</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"4，编译（make-不建议使用）\"><a href=\"#4，编译（make-不建议使用）\" class=\"headerlink\" title=\"4，编译（make,不建议使用）\"></a>4，编译（make,不建议使用）</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2,编译grpc</span><br><span class=\"line\">cd grpc根目录</span><br><span class=\"line\">make -j 4</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，问题\"><a href=\"#5，问题\" class=\"headerlink\" title=\"5，问题\"></a>5，问题</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对于cpp的使用，当编译好了之后，运行helloworld程序，没有响应，有很大的问题</span><br><span class=\"line\">https://github.com/grpc/grpc/issues/21280#issuecomment-558164977</span><br><span class=\"line\"></span><br><span class=\"line\">解决方法：修改源码（不使用）</span><br><span class=\"line\">vim / src / core / lib / surface / init.cc</span><br><span class=\"line\"></span><br><span class=\"line\">diff --git a/src/core/lib/surface/init.cc b/src/core/lib/surface/init.cc</span><br><span class=\"line\">index 2812427f7a..3c6a547b20 100644</span><br><span class=\"line\">--- a/src/core/lib/surface/init.cc</span><br><span class=\"line\">+++ b/src/core/lib/surface/init.cc</span><br><span class=\"line\">@@ -156,7 +156,7 @@ void grpc_init(void) &#123;</span><br><span class=\"line\">      * at the appropriate time */</span><br><span class=\"line\">     grpc_register_security_filters();</span><br><span class=\"line\">     register_builtin_channel_init();</span><br><span class=\"line\">-    grpc_tracer_init();将源码中的这个给注销</span><br><span class=\"line\">+    // grpc_tracer_init();</span><br><span class=\"line\">     /* no more changes to channel init pipelines */</span><br><span class=\"line\">     grpc_channel_init_finalize();</span><br><span class=\"line\">     grpc_iomgr_start();</span><br><span class=\"line\">     </span><br><span class=\"line\">修改源码：</span><br><span class=\"line\">vim src/core/lib/debug/trace.cc</span><br><span class=\"line\"> void TraceFlagList::Add(TraceFlag* flag) &#123;</span><br><span class=\"line\">+  TraceFlag* t;</span><br><span class=\"line\">+  for (t = root_tracer_; t; t = t -&gt; next_tracer_) &#123;</span><br><span class=\"line\">+       if (t == flag ) return;</span><br><span class=\"line\">+  &#125;</span><br><span class=\"line\">   flag-&gt;next_tracer_ = root_tracer_;</span><br><span class=\"line\">   root_tracer_ = flag;</span><br><span class=\"line\">遍历链表，如果存在则不加入</span><br></pre></td></tr></table></figure>\n<h4 id=\"6，运行helloworld程序\"><a href=\"#6，运行helloworld程序\" class=\"headerlink\" title=\"6，运行helloworld程序\"></a>6，运行helloworld程序</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd examples/cpp/helloworld</span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\">出现问题：</span><br><span class=\"line\">which: no grpc_cpp_plugin in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)</span><br><span class=\"line\">因为自己配置的路径，所以先给grpc_cpp_plugin  建立软连接</span><br><span class=\"line\">ln -s /usr/local/helios/grpc/bin/grpc_cpp_plugin   /usr/local/bin/grpc_cpp_plugin</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">helloworld.pb.h:10:40: fatal error: google/protobuf/port_def.inc: No such file or directory</span><br><span class=\"line\">配置cpp头文件路径</span><br><span class=\"line\">export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/local/helios/grpc/include</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Package protobuf was not found in the pkg-config search path.</span><br><span class=\"line\">Perhaps you should add the directory containing `protobuf.pc&apos;</span><br><span class=\"line\">to the PKG_CONFIG_PATH environment variable</span><br><span class=\"line\">No package &apos;protobuf&apos; found</span><br><span class=\"line\">Package grpc was not found in the pkg-config search path.</span><br><span class=\"line\">Perhaps you should add the directory containing `grpc.pc&apos;</span><br><span class=\"line\">to the PKG_CONFIG_PATH environment variable</span><br><span class=\"line\">No package &apos;grpc&apos; found</span><br><span class=\"line\">配置pkgconfig搜索路径</span><br><span class=\"line\">export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/helios/protobuf/lib/pkgconfig/:/usr/local/helios/grpc/lib/pkgconfig/</span><br><span class=\"line\"></span><br><span class=\"line\">error while loading shared libraries: libgrpc_plugin_support.so.1: cannot open shared object file</span><br><span class=\"line\">配置cpp动态库搜索路径</span><br><span class=\"line\">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/helios/grpc/lib/:/usr/local/helios/grpc/lib64/:/usr/local/helios/protobuf/lib</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">环境 centos7</span><br></pre></td></tr></table></figure>\n<h2 id=\"一，安装编译依赖的环境\"><a href=\"#一，安装编译依赖的环境\" class=\"headerlink\" title=\"一，安装编译依赖的环境\"></a>一，安装编译依赖的环境</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y pkgconfig autoconf automake libtool make gcc-c++ unzip</span><br><span class=\"line\">yum install -y gflags-devel gtest-devel clang libcxx-devel</span><br><span class=\"line\">yum install -y openssl  openssl-devel</span><br><span class=\"line\">yum install -y  libunwind libunwind-devel</span><br><span class=\"line\">yum install -y epel-release</span><br><span class=\"line\">yum install -y golang</span><br></pre></td></tr></table></figure>\n<h2 id=\"二，源码下载\"><a href=\"#二，源码下载\" class=\"headerlink\" title=\"二，源码下载\"></a>二，源码下载</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/grpc/grpc.git</span><br><span class=\"line\">cd grpc</span><br><span class=\"line\">git submodule update --init</span><br></pre></td></tr></table></figure>\n<h2 id=\"三，编译\"><a href=\"#三，编译\" class=\"headerlink\" title=\"三，编译\"></a>三，编译</h2><h4 id=\"1，编译cmake\"><a href=\"#1，编译cmake\" class=\"headerlink\" title=\"1，编译cmake\"></a>1，编译cmake</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要下载cmake高级版本，yum安装的版本太低</span><br><span class=\"line\">https://cmake.org/download/</span><br><span class=\"line\">源码安装cmake，</span><br><span class=\"line\">（1）删除原来版本的cmake</span><br><span class=\"line\">（2）./configure</span><br><span class=\"line\">（3）make &amp;&amp; make install</span><br><span class=\"line\">如果找不到，则创建软链接</span><br><span class=\"line\">ln -s /usr/local/bin/cmake /usr/bin/cmake</span><br></pre></td></tr></table></figure>\n<h4 id=\"2，先编译protobuf\"><a href=\"#2，先编译protobuf\" class=\"headerlink\" title=\"2，先编译protobuf\"></a>2，先编译protobuf</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd third_party/protobuf</span><br><span class=\"line\">git submodule update --init --recursive</span><br><span class=\"line\">./autogen.sh</span><br><span class=\"line\">./configure --prefix=/usr/local/helios/protobuf</span><br><span class=\"line\">make </span><br><span class=\"line\">make check</span><br><span class=\"line\">make install</span><br><span class=\"line\">2,建立软链接</span><br><span class=\"line\">ln -s /usr/local/helios/protobuf/bin/protoc /usr/local/bin/protoc</span><br><span class=\"line\">检测是否安装成功</span><br><span class=\"line\">protoc --version</span><br></pre></td></tr></table></figure>\n<h4 id=\"3，编译grpc（cmake\"><a href=\"#3，编译grpc（cmake\" class=\"headerlink\" title=\"3，编译grpc（cmake)\"></a>3，编译grpc（cmake)</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd grpc</span><br><span class=\"line\">mkdir -p  cmake/build</span><br><span class=\"line\">cmake -DBUILD_SHARED_LIBS=on -DCMAKE_INSTALL_PREFIX=/usr/local/helios/grpc -DCMAKE_BUILD_TYPE=DEBUG -Wno-dev ../../</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"4，编译（make-不建议使用）\"><a href=\"#4，编译（make-不建议使用）\" class=\"headerlink\" title=\"4，编译（make,不建议使用）\"></a>4，编译（make,不建议使用）</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2,编译grpc</span><br><span class=\"line\">cd grpc根目录</span><br><span class=\"line\">make -j 4</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，问题\"><a href=\"#5，问题\" class=\"headerlink\" title=\"5，问题\"></a>5，问题</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对于cpp的使用，当编译好了之后，运行helloworld程序，没有响应，有很大的问题</span><br><span class=\"line\">https://github.com/grpc/grpc/issues/21280#issuecomment-558164977</span><br><span class=\"line\"></span><br><span class=\"line\">解决方法：修改源码（不使用）</span><br><span class=\"line\">vim / src / core / lib / surface / init.cc</span><br><span class=\"line\"></span><br><span class=\"line\">diff --git a/src/core/lib/surface/init.cc b/src/core/lib/surface/init.cc</span><br><span class=\"line\">index 2812427f7a..3c6a547b20 100644</span><br><span class=\"line\">--- a/src/core/lib/surface/init.cc</span><br><span class=\"line\">+++ b/src/core/lib/surface/init.cc</span><br><span class=\"line\">@@ -156,7 +156,7 @@ void grpc_init(void) &#123;</span><br><span class=\"line\">      * at the appropriate time */</span><br><span class=\"line\">     grpc_register_security_filters();</span><br><span class=\"line\">     register_builtin_channel_init();</span><br><span class=\"line\">-    grpc_tracer_init();将源码中的这个给注销</span><br><span class=\"line\">+    // grpc_tracer_init();</span><br><span class=\"line\">     /* no more changes to channel init pipelines */</span><br><span class=\"line\">     grpc_channel_init_finalize();</span><br><span class=\"line\">     grpc_iomgr_start();</span><br><span class=\"line\">     </span><br><span class=\"line\">修改源码：</span><br><span class=\"line\">vim src/core/lib/debug/trace.cc</span><br><span class=\"line\"> void TraceFlagList::Add(TraceFlag* flag) &#123;</span><br><span class=\"line\">+  TraceFlag* t;</span><br><span class=\"line\">+  for (t = root_tracer_; t; t = t -&gt; next_tracer_) &#123;</span><br><span class=\"line\">+       if (t == flag ) return;</span><br><span class=\"line\">+  &#125;</span><br><span class=\"line\">   flag-&gt;next_tracer_ = root_tracer_;</span><br><span class=\"line\">   root_tracer_ = flag;</span><br><span class=\"line\">遍历链表，如果存在则不加入</span><br></pre></td></tr></table></figure>\n<h4 id=\"6，运行helloworld程序\"><a href=\"#6，运行helloworld程序\" class=\"headerlink\" title=\"6，运行helloworld程序\"></a>6，运行helloworld程序</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd examples/cpp/helloworld</span><br><span class=\"line\">make</span><br><span class=\"line\"></span><br><span class=\"line\">出现问题：</span><br><span class=\"line\">which: no grpc_cpp_plugin in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)</span><br><span class=\"line\">因为自己配置的路径，所以先给grpc_cpp_plugin  建立软连接</span><br><span class=\"line\">ln -s /usr/local/helios/grpc/bin/grpc_cpp_plugin   /usr/local/bin/grpc_cpp_plugin</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">helloworld.pb.h:10:40: fatal error: google/protobuf/port_def.inc: No such file or directory</span><br><span class=\"line\">配置cpp头文件路径</span><br><span class=\"line\">export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/local/helios/grpc/include</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Package protobuf was not found in the pkg-config search path.</span><br><span class=\"line\">Perhaps you should add the directory containing `protobuf.pc&apos;</span><br><span class=\"line\">to the PKG_CONFIG_PATH environment variable</span><br><span class=\"line\">No package &apos;protobuf&apos; found</span><br><span class=\"line\">Package grpc was not found in the pkg-config search path.</span><br><span class=\"line\">Perhaps you should add the directory containing `grpc.pc&apos;</span><br><span class=\"line\">to the PKG_CONFIG_PATH environment variable</span><br><span class=\"line\">No package &apos;grpc&apos; found</span><br><span class=\"line\">配置pkgconfig搜索路径</span><br><span class=\"line\">export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/helios/protobuf/lib/pkgconfig/:/usr/local/helios/grpc/lib/pkgconfig/</span><br><span class=\"line\"></span><br><span class=\"line\">error while loading shared libraries: libgrpc_plugin_support.so.1: cannot open shared object file</span><br><span class=\"line\">配置cpp动态库搜索路径</span><br><span class=\"line\">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/helios/grpc/lib/:/usr/local/helios/grpc/lib64/:/usr/local/helios/protobuf/lib</span><br></pre></td></tr></table></figure>\n"},{"title":"Hello World","abbrlink":1243066710,"_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\nabbrlink: 1243066710\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2021-02-08T05:47:04.032Z","updated":"2021-02-08T05:47:04.033Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwr002alkq5ijiuzl11","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"hexo-gulp压缩","abbrlink":2127593710,"date":"2020-05-25T02:21:08.000Z","_content":"\n### 插件安装\n\n~~~\n#全局安装\nnpm install gulp -g\n#站点目录安装\nnpm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify --save\n\n~~~\n\n在这里说明一下，使用该工具可以压缩 HTML、CSS、JavaScript 文件，但我并没有压缩 JavaScript 文件，因为有很大的概率会报错，实际也并不需要压缩，因为大部分 JavaScript 都已压缩过。\n\n如果你也考虑不压缩 JavaScript 文件，可以选择不安装 `gulp-uglify`。\n\n### gulpfile.js\n\n在站点文件夹的根目录下，新建一个文件。命名为gulpfile.js\n\n~~~\nvar gulp = require('gulp');\n\n// Plugins 模块获取\nvar minifycss = require('gulp-minify-css');\nvar uglify = require('gulp-uglify');\nvar htmlmin = require('gulp-htmlmin');\nvar htmlclean = require('gulp-htmlclean');\n\n// 压缩 css\ngulp.task('minify-css', function () {\n\treturn gulp.src('./public/**/*.css')\n\t\t.pipe(minifycss())\n\t\t.pipe(gulp.dest('./public'));\n});\n\n// 压缩 html\ngulp.task('minify-html', function () {\n\treturn gulp.src('./public/**/*.html')\n\t\t.pipe(htmlclean())\n\t\t.pipe(htmlmin({\n\t\t\tremoveComments: true,\n\t\t\tminifyJS: true,\n\t\t\tminifyCSS: true,\n\t\t\tminifyURLs: true,\n\t\t}))\n\t\t.pipe(gulp.dest('./public'))\n});\n\n// 压缩 js 不压缩 min.js\ngulp.task('minify-js', function () {\n\treturn gulp.src(['./public/**/*.js', '!./public/**/*.min.js'])\n\t\t.pipe(uglify())\n\t\t.pipe(gulp.dest('./public'));\n});\n\n// 4.0 以前的写法 \n// gulp.task('default', [\n  //   'minify-html', 'minify-css', 'minify-js'\n// ]);\n\n// 4.0 以后的写法\n// 执行 gulp 命令时执行的任务\ngulp.task('default', gulp.parallel('minify-html', 'minify-css', 'minify-js'));\n\n~~~\n\n`如果不压缩 JavaScript 文件，则将上述代码中有关 `minify-js` 的代码删除即可`\n\n\n\n### 运行结果\n\n~~~\n[10:24:57] Starting 'default'...\n[10:24:57] Starting 'minify-html'...\n[10:24:57] Starting 'minify-css'...\n[10:24:57] Starting 'minify-js'...\n[10:25:05] Finished 'minify-css' after 8.3 s\n[10:25:05] Finished 'minify-js' after 8.49 s\n[10:25:09] Finished 'minify-html' after 12 s\n[10:25:09] Finished 'default' after 12 s\n\n~~~\n\n","source":"_posts/hexo-gulp压缩.md","raw":"---\ntitle: hexo-gulp压缩\ncategories: [Tool,hexo]\ntags: gulp\nabbrlink: 2127593710\ndate: 2020-05-25 10:21:08\n---\n\n### 插件安装\n\n~~~\n#全局安装\nnpm install gulp -g\n#站点目录安装\nnpm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify --save\n\n~~~\n\n在这里说明一下，使用该工具可以压缩 HTML、CSS、JavaScript 文件，但我并没有压缩 JavaScript 文件，因为有很大的概率会报错，实际也并不需要压缩，因为大部分 JavaScript 都已压缩过。\n\n如果你也考虑不压缩 JavaScript 文件，可以选择不安装 `gulp-uglify`。\n\n### gulpfile.js\n\n在站点文件夹的根目录下，新建一个文件。命名为gulpfile.js\n\n~~~\nvar gulp = require('gulp');\n\n// Plugins 模块获取\nvar minifycss = require('gulp-minify-css');\nvar uglify = require('gulp-uglify');\nvar htmlmin = require('gulp-htmlmin');\nvar htmlclean = require('gulp-htmlclean');\n\n// 压缩 css\ngulp.task('minify-css', function () {\n\treturn gulp.src('./public/**/*.css')\n\t\t.pipe(minifycss())\n\t\t.pipe(gulp.dest('./public'));\n});\n\n// 压缩 html\ngulp.task('minify-html', function () {\n\treturn gulp.src('./public/**/*.html')\n\t\t.pipe(htmlclean())\n\t\t.pipe(htmlmin({\n\t\t\tremoveComments: true,\n\t\t\tminifyJS: true,\n\t\t\tminifyCSS: true,\n\t\t\tminifyURLs: true,\n\t\t}))\n\t\t.pipe(gulp.dest('./public'))\n});\n\n// 压缩 js 不压缩 min.js\ngulp.task('minify-js', function () {\n\treturn gulp.src(['./public/**/*.js', '!./public/**/*.min.js'])\n\t\t.pipe(uglify())\n\t\t.pipe(gulp.dest('./public'));\n});\n\n// 4.0 以前的写法 \n// gulp.task('default', [\n  //   'minify-html', 'minify-css', 'minify-js'\n// ]);\n\n// 4.0 以后的写法\n// 执行 gulp 命令时执行的任务\ngulp.task('default', gulp.parallel('minify-html', 'minify-css', 'minify-js'));\n\n~~~\n\n`如果不压缩 JavaScript 文件，则将上述代码中有关 `minify-js` 的代码删除即可`\n\n\n\n### 运行结果\n\n~~~\n[10:24:57] Starting 'default'...\n[10:24:57] Starting 'minify-html'...\n[10:24:57] Starting 'minify-css'...\n[10:24:57] Starting 'minify-js'...\n[10:25:05] Finished 'minify-css' after 8.3 s\n[10:25:05] Finished 'minify-js' after 8.49 s\n[10:25:09] Finished 'minify-html' after 12 s\n[10:25:09] Finished 'default' after 12 s\n\n~~~\n\n","slug":"hexo-gulp压缩","published":1,"updated":"2021-02-08T06:55:20.795Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwt002clkq5r13u1lac","content":"<h3 id=\"插件安装\"><a href=\"#插件安装\" class=\"headerlink\" title=\"插件安装\"></a>插件安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#全局安装</span><br><span class=\"line\">npm install gulp -g</span><br><span class=\"line\">#站点目录安装</span><br><span class=\"line\">npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify --save</span><br></pre></td></tr></table></figure>\n<p>在这里说明一下，使用该工具可以压缩 HTML、CSS、JavaScript 文件，但我并没有压缩 JavaScript 文件，因为有很大的概率会报错，实际也并不需要压缩，因为大部分 JavaScript 都已压缩过。</p>\n<p>如果你也考虑不压缩 JavaScript 文件，可以选择不安装 <code>gulp-uglify</code>。</p>\n<h3 id=\"gulpfile-js\"><a href=\"#gulpfile-js\" class=\"headerlink\" title=\"gulpfile.js\"></a>gulpfile.js</h3><p>在站点文件夹的根目录下，新建一个文件。命名为gulpfile.js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Plugins 模块获取</span><br><span class=\"line\">var minifycss = require(&apos;gulp-minify-css&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var htmlmin = require(&apos;gulp-htmlmin&apos;);</span><br><span class=\"line\">var htmlclean = require(&apos;gulp-htmlclean&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 压缩 css</span><br><span class=\"line\">gulp.task(&apos;minify-css&apos;, function () &#123;</span><br><span class=\"line\">\treturn gulp.src(&apos;./public/**/*.css&apos;)</span><br><span class=\"line\">\t\t.pipe(minifycss())</span><br><span class=\"line\">\t\t.pipe(gulp.dest(&apos;./public&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 压缩 html</span><br><span class=\"line\">gulp.task(&apos;minify-html&apos;, function () &#123;</span><br><span class=\"line\">\treturn gulp.src(&apos;./public/**/*.html&apos;)</span><br><span class=\"line\">\t\t.pipe(htmlclean())</span><br><span class=\"line\">\t\t.pipe(htmlmin(&#123;</span><br><span class=\"line\">\t\t\tremoveComments: true,</span><br><span class=\"line\">\t\t\tminifyJS: true,</span><br><span class=\"line\">\t\t\tminifyCSS: true,</span><br><span class=\"line\">\t\t\tminifyURLs: true,</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t\t.pipe(gulp.dest(&apos;./public&apos;))</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 压缩 js 不压缩 min.js</span><br><span class=\"line\">gulp.task(&apos;minify-js&apos;, function () &#123;</span><br><span class=\"line\">\treturn gulp.src([&apos;./public/**/*.js&apos;, &apos;!./public/**/*.min.js&apos;])</span><br><span class=\"line\">\t\t.pipe(uglify())</span><br><span class=\"line\">\t\t.pipe(gulp.dest(&apos;./public&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 4.0 以前的写法 </span><br><span class=\"line\">// gulp.task(&apos;default&apos;, [</span><br><span class=\"line\">  //   &apos;minify-html&apos;, &apos;minify-css&apos;, &apos;minify-js&apos;</span><br><span class=\"line\">// ]);</span><br><span class=\"line\"></span><br><span class=\"line\">// 4.0 以后的写法</span><br><span class=\"line\">// 执行 gulp 命令时执行的任务</span><br><span class=\"line\">gulp.task(&apos;default&apos;, gulp.parallel(&apos;minify-html&apos;, &apos;minify-css&apos;, &apos;minify-js&apos;));</span><br></pre></td></tr></table></figure>\n<p><code>如果不压缩 JavaScript 文件，则将上述代码中有关</code>minify-js<code>的代码删除即可</code></p>\n<h3 id=\"运行结果\"><a href=\"#运行结果\" class=\"headerlink\" title=\"运行结果\"></a>运行结果</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[10:24:57] Starting &apos;default&apos;...</span><br><span class=\"line\">[10:24:57] Starting &apos;minify-html&apos;...</span><br><span class=\"line\">[10:24:57] Starting &apos;minify-css&apos;...</span><br><span class=\"line\">[10:24:57] Starting &apos;minify-js&apos;...</span><br><span class=\"line\">[10:25:05] Finished &apos;minify-css&apos; after 8.3 s</span><br><span class=\"line\">[10:25:05] Finished &apos;minify-js&apos; after 8.49 s</span><br><span class=\"line\">[10:25:09] Finished &apos;minify-html&apos; after 12 s</span><br><span class=\"line\">[10:25:09] Finished &apos;default&apos; after 12 s</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"插件安装\"><a href=\"#插件安装\" class=\"headerlink\" title=\"插件安装\"></a>插件安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#全局安装</span><br><span class=\"line\">npm install gulp -g</span><br><span class=\"line\">#站点目录安装</span><br><span class=\"line\">npm install gulp-htmlclean gulp-htmlmin gulp-minify-css gulp-uglify --save</span><br></pre></td></tr></table></figure>\n<p>在这里说明一下，使用该工具可以压缩 HTML、CSS、JavaScript 文件，但我并没有压缩 JavaScript 文件，因为有很大的概率会报错，实际也并不需要压缩，因为大部分 JavaScript 都已压缩过。</p>\n<p>如果你也考虑不压缩 JavaScript 文件，可以选择不安装 <code>gulp-uglify</code>。</p>\n<h3 id=\"gulpfile-js\"><a href=\"#gulpfile-js\" class=\"headerlink\" title=\"gulpfile.js\"></a>gulpfile.js</h3><p>在站点文件夹的根目录下，新建一个文件。命名为gulpfile.js</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var gulp = require(&apos;gulp&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">// Plugins 模块获取</span><br><span class=\"line\">var minifycss = require(&apos;gulp-minify-css&apos;);</span><br><span class=\"line\">var uglify = require(&apos;gulp-uglify&apos;);</span><br><span class=\"line\">var htmlmin = require(&apos;gulp-htmlmin&apos;);</span><br><span class=\"line\">var htmlclean = require(&apos;gulp-htmlclean&apos;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 压缩 css</span><br><span class=\"line\">gulp.task(&apos;minify-css&apos;, function () &#123;</span><br><span class=\"line\">\treturn gulp.src(&apos;./public/**/*.css&apos;)</span><br><span class=\"line\">\t\t.pipe(minifycss())</span><br><span class=\"line\">\t\t.pipe(gulp.dest(&apos;./public&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 压缩 html</span><br><span class=\"line\">gulp.task(&apos;minify-html&apos;, function () &#123;</span><br><span class=\"line\">\treturn gulp.src(&apos;./public/**/*.html&apos;)</span><br><span class=\"line\">\t\t.pipe(htmlclean())</span><br><span class=\"line\">\t\t.pipe(htmlmin(&#123;</span><br><span class=\"line\">\t\t\tremoveComments: true,</span><br><span class=\"line\">\t\t\tminifyJS: true,</span><br><span class=\"line\">\t\t\tminifyCSS: true,</span><br><span class=\"line\">\t\t\tminifyURLs: true,</span><br><span class=\"line\">\t\t&#125;))</span><br><span class=\"line\">\t\t.pipe(gulp.dest(&apos;./public&apos;))</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 压缩 js 不压缩 min.js</span><br><span class=\"line\">gulp.task(&apos;minify-js&apos;, function () &#123;</span><br><span class=\"line\">\treturn gulp.src([&apos;./public/**/*.js&apos;, &apos;!./public/**/*.min.js&apos;])</span><br><span class=\"line\">\t\t.pipe(uglify())</span><br><span class=\"line\">\t\t.pipe(gulp.dest(&apos;./public&apos;));</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">// 4.0 以前的写法 </span><br><span class=\"line\">// gulp.task(&apos;default&apos;, [</span><br><span class=\"line\">  //   &apos;minify-html&apos;, &apos;minify-css&apos;, &apos;minify-js&apos;</span><br><span class=\"line\">// ]);</span><br><span class=\"line\"></span><br><span class=\"line\">// 4.0 以后的写法</span><br><span class=\"line\">// 执行 gulp 命令时执行的任务</span><br><span class=\"line\">gulp.task(&apos;default&apos;, gulp.parallel(&apos;minify-html&apos;, &apos;minify-css&apos;, &apos;minify-js&apos;));</span><br></pre></td></tr></table></figure>\n<p><code>如果不压缩 JavaScript 文件，则将上述代码中有关</code>minify-js<code>的代码删除即可</code></p>\n<h3 id=\"运行结果\"><a href=\"#运行结果\" class=\"headerlink\" title=\"运行结果\"></a>运行结果</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[10:24:57] Starting &apos;default&apos;...</span><br><span class=\"line\">[10:24:57] Starting &apos;minify-html&apos;...</span><br><span class=\"line\">[10:24:57] Starting &apos;minify-css&apos;...</span><br><span class=\"line\">[10:24:57] Starting &apos;minify-js&apos;...</span><br><span class=\"line\">[10:25:05] Finished &apos;minify-css&apos; after 8.3 s</span><br><span class=\"line\">[10:25:05] Finished &apos;minify-js&apos; after 8.49 s</span><br><span class=\"line\">[10:25:09] Finished &apos;minify-html&apos; after 12 s</span><br><span class=\"line\">[10:25:09] Finished &apos;default&apos; after 12 s</span><br></pre></td></tr></table></figure>\n"},{"title":"hexo-next主题配置","abbrlink":1968653668,"date":"2020-05-07T08:46:52.000Z","_content":"\n\n\n主要记录一下自己在搭建个人博客的时候，一些配置，基本上是查阅别人的文章，这里记录一下\n\n### 一，hexo安装\n\n[hexo安装](https://www.jianshu.com/p/eded1dd2d794)\n\n[next主题设置](https://www.jianshu.com/p/b20fc983005f)\n\n\n\n### 二，添加LocalSearch搜索\n\n~~~\n npm install hexo-generator-searchdb --save\n \n 编辑主题配置文件，启用本地搜素\n # Local search\nlocal_search:\n  enable: true\n~~~\n\n### 三，网站访问量统计\n\n![baidu.png](/images/blog/baidu.png)\n\n### 四，阅读次数统计\n\n[LeanCloud添加阅读次数](https://www.cnblogs.com/lijianming180/p/12433189.html)\n\n### 五，添加评论\n\n[valine](https://blog.csdn.net/jiunian_2761/article/details/97388997)\n\n### 六，域名申请\n\n[域名申请](https://blog.csdn.net/linshuhe1/article/details/73013730)\n\n### 七，谷歌检索\n\n[谷歌检索](https://www.itrhx.com/2019/09/17/A48-submit-search-engine-inclusion/)\n\n### 八，永久文章链接\n\n[abbrlink](https://www.jianshu.com/p/c7de2ae59975)\n\n### 九，404\n\n[404错误](https://www.jianshu.com/p/2349c763cc02)\n\n### 十，码云+GitHub部署\n\n![gitee.png](/images/blog/gitee.png)\n\n~~~\n需要在站点配置文件中配置gitee和GitHub的仓库地址\n然后就可以部署了，不过我们在gitee上部署后，每次都需要手动的去更新gitee page，才能生效\n~~~\n\n","source":"_posts/hexo-next主题配置.md","raw":"---\ntitle: hexo-next主题配置\ncategories: [Tool,hexo]\ntags: next\nabbrlink: 1968653668\ndate: 2020-05-07 16:46:52\n---\n\n\n\n主要记录一下自己在搭建个人博客的时候，一些配置，基本上是查阅别人的文章，这里记录一下\n\n### 一，hexo安装\n\n[hexo安装](https://www.jianshu.com/p/eded1dd2d794)\n\n[next主题设置](https://www.jianshu.com/p/b20fc983005f)\n\n\n\n### 二，添加LocalSearch搜索\n\n~~~\n npm install hexo-generator-searchdb --save\n \n 编辑主题配置文件，启用本地搜素\n # Local search\nlocal_search:\n  enable: true\n~~~\n\n### 三，网站访问量统计\n\n![baidu.png](/images/blog/baidu.png)\n\n### 四，阅读次数统计\n\n[LeanCloud添加阅读次数](https://www.cnblogs.com/lijianming180/p/12433189.html)\n\n### 五，添加评论\n\n[valine](https://blog.csdn.net/jiunian_2761/article/details/97388997)\n\n### 六，域名申请\n\n[域名申请](https://blog.csdn.net/linshuhe1/article/details/73013730)\n\n### 七，谷歌检索\n\n[谷歌检索](https://www.itrhx.com/2019/09/17/A48-submit-search-engine-inclusion/)\n\n### 八，永久文章链接\n\n[abbrlink](https://www.jianshu.com/p/c7de2ae59975)\n\n### 九，404\n\n[404错误](https://www.jianshu.com/p/2349c763cc02)\n\n### 十，码云+GitHub部署\n\n![gitee.png](/images/blog/gitee.png)\n\n~~~\n需要在站点配置文件中配置gitee和GitHub的仓库地址\n然后就可以部署了，不过我们在gitee上部署后，每次都需要手动的去更新gitee page，才能生效\n~~~\n\n","slug":"hexo-next主题配置","published":1,"updated":"2021-02-08T06:55:52.268Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwu002elkq5lpdhuciy","content":"<p>主要记录一下自己在搭建个人博客的时候，一些配置，基本上是查阅别人的文章，这里记录一下</p>\n<h3 id=\"一，hexo安装\"><a href=\"#一，hexo安装\" class=\"headerlink\" title=\"一，hexo安装\"></a>一，hexo安装</h3><p><a href=\"https://www.jianshu.com/p/eded1dd2d794\" target=\"_blank\" rel=\"noopener\">hexo安装</a></p>\n<p><a href=\"https://www.jianshu.com/p/b20fc983005f\" target=\"_blank\" rel=\"noopener\">next主题设置</a></p>\n<h3 id=\"二，添加LocalSearch搜索\"><a href=\"#二，添加LocalSearch搜索\" class=\"headerlink\" title=\"二，添加LocalSearch搜索\"></a>二，添加LocalSearch搜索</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> npm install hexo-generator-searchdb --save</span><br><span class=\"line\"> </span><br><span class=\"line\"> 编辑主题配置文件，启用本地搜素</span><br><span class=\"line\"> # Local search</span><br><span class=\"line\">local_search:</span><br><span class=\"line\">  enable: true</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，网站访问量统计\"><a href=\"#三，网站访问量统计\" class=\"headerlink\" title=\"三，网站访问量统计\"></a>三，网站访问量统计</h3><p><img src=\"/images/blog/baidu.png\" alt=\"baidu.png\"></p>\n<h3 id=\"四，阅读次数统计\"><a href=\"#四，阅读次数统计\" class=\"headerlink\" title=\"四，阅读次数统计\"></a>四，阅读次数统计</h3><p><a href=\"https://www.cnblogs.com/lijianming180/p/12433189.html\" target=\"_blank\" rel=\"noopener\">LeanCloud添加阅读次数</a></p>\n<h3 id=\"五，添加评论\"><a href=\"#五，添加评论\" class=\"headerlink\" title=\"五，添加评论\"></a>五，添加评论</h3><p><a href=\"https://blog.csdn.net/jiunian_2761/article/details/97388997\" target=\"_blank\" rel=\"noopener\">valine</a></p>\n<h3 id=\"六，域名申请\"><a href=\"#六，域名申请\" class=\"headerlink\" title=\"六，域名申请\"></a>六，域名申请</h3><p><a href=\"https://blog.csdn.net/linshuhe1/article/details/73013730\" target=\"_blank\" rel=\"noopener\">域名申请</a></p>\n<h3 id=\"七，谷歌检索\"><a href=\"#七，谷歌检索\" class=\"headerlink\" title=\"七，谷歌检索\"></a>七，谷歌检索</h3><p><a href=\"https://www.itrhx.com/2019/09/17/A48-submit-search-engine-inclusion/\" target=\"_blank\" rel=\"noopener\">谷歌检索</a></p>\n<h3 id=\"八，永久文章链接\"><a href=\"#八，永久文章链接\" class=\"headerlink\" title=\"八，永久文章链接\"></a>八，永久文章链接</h3><p><a href=\"https://www.jianshu.com/p/c7de2ae59975\" target=\"_blank\" rel=\"noopener\">abbrlink</a></p>\n<h3 id=\"九，404\"><a href=\"#九，404\" class=\"headerlink\" title=\"九，404\"></a>九，404</h3><p><a href=\"https://www.jianshu.com/p/2349c763cc02\" target=\"_blank\" rel=\"noopener\">404错误</a></p>\n<h3 id=\"十，码云-GitHub部署\"><a href=\"#十，码云-GitHub部署\" class=\"headerlink\" title=\"十，码云+GitHub部署\"></a>十，码云+GitHub部署</h3><p><img src=\"/images/blog/gitee.png\" alt=\"gitee.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要在站点配置文件中配置gitee和GitHub的仓库地址</span><br><span class=\"line\">然后就可以部署了，不过我们在gitee上部署后，每次都需要手动的去更新gitee page，才能生效</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>主要记录一下自己在搭建个人博客的时候，一些配置，基本上是查阅别人的文章，这里记录一下</p>\n<h3 id=\"一，hexo安装\"><a href=\"#一，hexo安装\" class=\"headerlink\" title=\"一，hexo安装\"></a>一，hexo安装</h3><p><a href=\"https://www.jianshu.com/p/eded1dd2d794\" target=\"_blank\" rel=\"noopener\">hexo安装</a></p>\n<p><a href=\"https://www.jianshu.com/p/b20fc983005f\" target=\"_blank\" rel=\"noopener\">next主题设置</a></p>\n<h3 id=\"二，添加LocalSearch搜索\"><a href=\"#二，添加LocalSearch搜索\" class=\"headerlink\" title=\"二，添加LocalSearch搜索\"></a>二，添加LocalSearch搜索</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> npm install hexo-generator-searchdb --save</span><br><span class=\"line\"> </span><br><span class=\"line\"> 编辑主题配置文件，启用本地搜素</span><br><span class=\"line\"> # Local search</span><br><span class=\"line\">local_search:</span><br><span class=\"line\">  enable: true</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，网站访问量统计\"><a href=\"#三，网站访问量统计\" class=\"headerlink\" title=\"三，网站访问量统计\"></a>三，网站访问量统计</h3><p><img src=\"/images/blog/baidu.png\" alt=\"baidu.png\"></p>\n<h3 id=\"四，阅读次数统计\"><a href=\"#四，阅读次数统计\" class=\"headerlink\" title=\"四，阅读次数统计\"></a>四，阅读次数统计</h3><p><a href=\"https://www.cnblogs.com/lijianming180/p/12433189.html\" target=\"_blank\" rel=\"noopener\">LeanCloud添加阅读次数</a></p>\n<h3 id=\"五，添加评论\"><a href=\"#五，添加评论\" class=\"headerlink\" title=\"五，添加评论\"></a>五，添加评论</h3><p><a href=\"https://blog.csdn.net/jiunian_2761/article/details/97388997\" target=\"_blank\" rel=\"noopener\">valine</a></p>\n<h3 id=\"六，域名申请\"><a href=\"#六，域名申请\" class=\"headerlink\" title=\"六，域名申请\"></a>六，域名申请</h3><p><a href=\"https://blog.csdn.net/linshuhe1/article/details/73013730\" target=\"_blank\" rel=\"noopener\">域名申请</a></p>\n<h3 id=\"七，谷歌检索\"><a href=\"#七，谷歌检索\" class=\"headerlink\" title=\"七，谷歌检索\"></a>七，谷歌检索</h3><p><a href=\"https://www.itrhx.com/2019/09/17/A48-submit-search-engine-inclusion/\" target=\"_blank\" rel=\"noopener\">谷歌检索</a></p>\n<h3 id=\"八，永久文章链接\"><a href=\"#八，永久文章链接\" class=\"headerlink\" title=\"八，永久文章链接\"></a>八，永久文章链接</h3><p><a href=\"https://www.jianshu.com/p/c7de2ae59975\" target=\"_blank\" rel=\"noopener\">abbrlink</a></p>\n<h3 id=\"九，404\"><a href=\"#九，404\" class=\"headerlink\" title=\"九，404\"></a>九，404</h3><p><a href=\"https://www.jianshu.com/p/2349c763cc02\" target=\"_blank\" rel=\"noopener\">404错误</a></p>\n<h3 id=\"十，码云-GitHub部署\"><a href=\"#十，码云-GitHub部署\" class=\"headerlink\" title=\"十，码云+GitHub部署\"></a>十，码云+GitHub部署</h3><p><img src=\"/images/blog/gitee.png\" alt=\"gitee.png\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要在站点配置文件中配置gitee和GitHub的仓库地址</span><br><span class=\"line\">然后就可以部署了，不过我们在gitee上部署后，每次都需要手动的去更新gitee page，才能生效</span><br></pre></td></tr></table></figure>\n"},{"title":"hexo-代码块添加复制功能","abbrlink":853195356,"date":"2020-05-25T02:58:19.000Z","_content":"\n### 一，添加copy-code.swig\n\n在博客根目录下，输入：\n\n~~~\ncd themes/next/layout/_third-party/\n~~~\n\n然后在次文件夹下创建copy-code.swig的文件，内容如下\n\n~~~\n{% if theme.codeblock.copy_button.enable %}\n  <style>\n    .copy-btn {\n      display: inline-block;\n      padding: 6px 12px;\n      font-size: 13px;\n      font-weight: 700;\n      line-height: 20px;\n      color: #333;\n      white-space: nowrap;\n      vertical-align: middle;\n      cursor: pointer;\n      background-color: #eee;\n      background-image: linear-gradient(#fcfcfc, #eee);\n      border: 1px solid #d5d5d5;\n      border-radius: 3px;\n      user-select: none;\n      outline: 0;\n    }\n\n    .highlight-wrap .copy-btn {\n      transition: opacity .3s ease-in-out;\n      opacity: 0;\n      padding: 2px 6px;\n      position: absolute;\n      right: 4px;\n      top: 8px;\n    }\n\n    .highlight-wrap:hover .copy-btn,\n    .highlight-wrap .copy-btn:focus {\n      opacity: 1\n    }\n\n    .highlight-wrap {\n      position: relative;\n    }\n  </style>\n  \n  <script>\n    $('.highlight').each(function (i, e) {\n      var $wrap = $('<div>').addClass('highlight-wrap')\n      $(e).after($wrap)\n      $wrap.append($('<button>').addClass('copy-btn').append('{{__(\"post.copy_button\")}}').on('click', function (e) {\n        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {\n          return $(e).text()\n        }).toArray().join('\\n')\n        var ta = document.createElement('textarea')\n        document.body.appendChild(ta)\n        ta.style.position = 'absolute'\n        ta.style.top = '0px'\n        ta.style.left = '0px'\n        ta.value = code\n        ta.select()\n        ta.focus()\n        var result = document.execCommand('copy')\n        document.body.removeChild(ta)\n        {% if theme.codeblock.copy_button.show_result %}\n          if(result)$(this).text('{{__(\"post.copy_success\")}}')\n          else $(this).text('{{__(\"post.copy_failure\")}}')\n        {% endif %}\n        $(this).blur()\n      })).on('mouseleave', function (e) {\n        var $b = $(this).find('.copy-btn')\n        setTimeout(function () {\n          $b.text('{{__(\"post.copy_button\")}}')\n        }, 300)\n      }).append(e)\n    })\n  </script>\n{% endif %}\n~~~\n\n\n\n然后返回上一层目录，即`layout`文件夹下，编辑_layout.swig,如下图\n\n![codecopy.png](/images/codecopy.png)\n\n在图中位置添加：\n\n~~~\n{% include '_third-party/copy-code.swig' %}\n~~~\n\n\n\n[参考这位作者的文章](https://qiming.info/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/)","source":"_posts/hexo-代码块添加复制功能.md","raw":"---\ntitle: hexo-代码块添加复制功能\ncategories: [Tool,hexo]\ntags: hexo\nabbrlink: 853195356\ndate: 2020-05-25 10:58:19\n---\n\n### 一，添加copy-code.swig\n\n在博客根目录下，输入：\n\n~~~\ncd themes/next/layout/_third-party/\n~~~\n\n然后在次文件夹下创建copy-code.swig的文件，内容如下\n\n~~~\n{% if theme.codeblock.copy_button.enable %}\n  <style>\n    .copy-btn {\n      display: inline-block;\n      padding: 6px 12px;\n      font-size: 13px;\n      font-weight: 700;\n      line-height: 20px;\n      color: #333;\n      white-space: nowrap;\n      vertical-align: middle;\n      cursor: pointer;\n      background-color: #eee;\n      background-image: linear-gradient(#fcfcfc, #eee);\n      border: 1px solid #d5d5d5;\n      border-radius: 3px;\n      user-select: none;\n      outline: 0;\n    }\n\n    .highlight-wrap .copy-btn {\n      transition: opacity .3s ease-in-out;\n      opacity: 0;\n      padding: 2px 6px;\n      position: absolute;\n      right: 4px;\n      top: 8px;\n    }\n\n    .highlight-wrap:hover .copy-btn,\n    .highlight-wrap .copy-btn:focus {\n      opacity: 1\n    }\n\n    .highlight-wrap {\n      position: relative;\n    }\n  </style>\n  \n  <script>\n    $('.highlight').each(function (i, e) {\n      var $wrap = $('<div>').addClass('highlight-wrap')\n      $(e).after($wrap)\n      $wrap.append($('<button>').addClass('copy-btn').append('{{__(\"post.copy_button\")}}').on('click', function (e) {\n        var code = $(this).parent().find('.code').find('.line').map(function (i, e) {\n          return $(e).text()\n        }).toArray().join('\\n')\n        var ta = document.createElement('textarea')\n        document.body.appendChild(ta)\n        ta.style.position = 'absolute'\n        ta.style.top = '0px'\n        ta.style.left = '0px'\n        ta.value = code\n        ta.select()\n        ta.focus()\n        var result = document.execCommand('copy')\n        document.body.removeChild(ta)\n        {% if theme.codeblock.copy_button.show_result %}\n          if(result)$(this).text('{{__(\"post.copy_success\")}}')\n          else $(this).text('{{__(\"post.copy_failure\")}}')\n        {% endif %}\n        $(this).blur()\n      })).on('mouseleave', function (e) {\n        var $b = $(this).find('.copy-btn')\n        setTimeout(function () {\n          $b.text('{{__(\"post.copy_button\")}}')\n        }, 300)\n      }).append(e)\n    })\n  </script>\n{% endif %}\n~~~\n\n\n\n然后返回上一层目录，即`layout`文件夹下，编辑_layout.swig,如下图\n\n![codecopy.png](/images/codecopy.png)\n\n在图中位置添加：\n\n~~~\n{% include '_third-party/copy-code.swig' %}\n~~~\n\n\n\n[参考这位作者的文章](https://qiming.info/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/)","slug":"hexo-代码块添加复制功能","published":1,"updated":"2021-02-08T06:56:07.622Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwv002ilkq5fbo3es0n","content":"<h3 id=\"一，添加copy-code-swig\"><a href=\"#一，添加copy-code-swig\" class=\"headerlink\" title=\"一，添加copy-code.swig\"></a>一，添加copy-code.swig</h3><p>在博客根目录下，输入：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd themes/next/layout/_third-party/</span><br></pre></td></tr></table></figure>\n<p>然后在次文件夹下创建copy-code.swig的文件，内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% if theme.codeblock.copy_button.enable %&#125;</span><br><span class=\"line\">  &lt;style&gt;</span><br><span class=\"line\">    .copy-btn &#123;</span><br><span class=\"line\">      display: inline-block;</span><br><span class=\"line\">      padding: 6px 12px;</span><br><span class=\"line\">      font-size: 13px;</span><br><span class=\"line\">      font-weight: 700;</span><br><span class=\"line\">      line-height: 20px;</span><br><span class=\"line\">      color: #333;</span><br><span class=\"line\">      white-space: nowrap;</span><br><span class=\"line\">      vertical-align: middle;</span><br><span class=\"line\">      cursor: pointer;</span><br><span class=\"line\">      background-color: #eee;</span><br><span class=\"line\">      background-image: linear-gradient(#fcfcfc, #eee);</span><br><span class=\"line\">      border: 1px solid #d5d5d5;</span><br><span class=\"line\">      border-radius: 3px;</span><br><span class=\"line\">      user-select: none;</span><br><span class=\"line\">      outline: 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .highlight-wrap .copy-btn &#123;</span><br><span class=\"line\">      transition: opacity .3s ease-in-out;</span><br><span class=\"line\">      opacity: 0;</span><br><span class=\"line\">      padding: 2px 6px;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      right: 4px;</span><br><span class=\"line\">      top: 8px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .highlight-wrap:hover .copy-btn,</span><br><span class=\"line\">    .highlight-wrap .copy-btn:focus &#123;</span><br><span class=\"line\">      opacity: 1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .highlight-wrap &#123;</span><br><span class=\"line\">      position: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;/style&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &lt;script&gt;</span><br><span class=\"line\">    $(&apos;.highlight&apos;).each(function (i, e) &#123;</span><br><span class=\"line\">      var $wrap = $(&apos;&lt;div&gt;&apos;).addClass(&apos;highlight-wrap&apos;)</span><br><span class=\"line\">      $(e).after($wrap)</span><br><span class=\"line\">      $wrap.append($(&apos;&lt;button&gt;&apos;).addClass(&apos;copy-btn&apos;).append(&apos;&#123;&#123;__(&quot;post.copy_button&quot;)&#125;&#125;&apos;).on(&apos;click&apos;, function (e) &#123;</span><br><span class=\"line\">        var code = $(this).parent().find(&apos;.code&apos;).find(&apos;.line&apos;).map(function (i, e) &#123;</span><br><span class=\"line\">          return $(e).text()</span><br><span class=\"line\">        &#125;).toArray().join(&apos;\\n&apos;)</span><br><span class=\"line\">        var ta = document.createElement(&apos;textarea&apos;)</span><br><span class=\"line\">        document.body.appendChild(ta)</span><br><span class=\"line\">        ta.style.position = &apos;absolute&apos;</span><br><span class=\"line\">        ta.style.top = &apos;0px&apos;</span><br><span class=\"line\">        ta.style.left = &apos;0px&apos;</span><br><span class=\"line\">        ta.value = code</span><br><span class=\"line\">        ta.select()</span><br><span class=\"line\">        ta.focus()</span><br><span class=\"line\">        var result = document.execCommand(&apos;copy&apos;)</span><br><span class=\"line\">        document.body.removeChild(ta)</span><br><span class=\"line\">        &#123;% if theme.codeblock.copy_button.show_result %&#125;</span><br><span class=\"line\">          if(result)$(this).text(&apos;&#123;&#123;__(&quot;post.copy_success&quot;)&#125;&#125;&apos;)</span><br><span class=\"line\">          else $(this).text(&apos;&#123;&#123;__(&quot;post.copy_failure&quot;)&#125;&#125;&apos;)</span><br><span class=\"line\">        &#123;% endif %&#125;</span><br><span class=\"line\">        $(this).blur()</span><br><span class=\"line\">      &#125;)).on(&apos;mouseleave&apos;, function (e) &#123;</span><br><span class=\"line\">        var $b = $(this).find(&apos;.copy-btn&apos;)</span><br><span class=\"line\">        setTimeout(function () &#123;</span><br><span class=\"line\">          $b.text(&apos;&#123;&#123;__(&quot;post.copy_button&quot;)&#125;&#125;&apos;)</span><br><span class=\"line\">        &#125;, 300)</span><br><span class=\"line\">      &#125;).append(e)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &lt;/script&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n<p>然后返回上一层目录，即<code>layout</code>文件夹下，编辑_layout.swig,如下图</p>\n<p><img src=\"/images/codecopy.png\" alt=\"codecopy.png\"></p>\n<p>在图中位置添加：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% include &apos;_third-party/copy-code.swig&apos; %&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://qiming.info/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/\" target=\"_blank\" rel=\"noopener\">参考这位作者的文章</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一，添加copy-code-swig\"><a href=\"#一，添加copy-code-swig\" class=\"headerlink\" title=\"一，添加copy-code.swig\"></a>一，添加copy-code.swig</h3><p>在博客根目录下，输入：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd themes/next/layout/_third-party/</span><br></pre></td></tr></table></figure>\n<p>然后在次文件夹下创建copy-code.swig的文件，内容如下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% if theme.codeblock.copy_button.enable %&#125;</span><br><span class=\"line\">  &lt;style&gt;</span><br><span class=\"line\">    .copy-btn &#123;</span><br><span class=\"line\">      display: inline-block;</span><br><span class=\"line\">      padding: 6px 12px;</span><br><span class=\"line\">      font-size: 13px;</span><br><span class=\"line\">      font-weight: 700;</span><br><span class=\"line\">      line-height: 20px;</span><br><span class=\"line\">      color: #333;</span><br><span class=\"line\">      white-space: nowrap;</span><br><span class=\"line\">      vertical-align: middle;</span><br><span class=\"line\">      cursor: pointer;</span><br><span class=\"line\">      background-color: #eee;</span><br><span class=\"line\">      background-image: linear-gradient(#fcfcfc, #eee);</span><br><span class=\"line\">      border: 1px solid #d5d5d5;</span><br><span class=\"line\">      border-radius: 3px;</span><br><span class=\"line\">      user-select: none;</span><br><span class=\"line\">      outline: 0;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .highlight-wrap .copy-btn &#123;</span><br><span class=\"line\">      transition: opacity .3s ease-in-out;</span><br><span class=\"line\">      opacity: 0;</span><br><span class=\"line\">      padding: 2px 6px;</span><br><span class=\"line\">      position: absolute;</span><br><span class=\"line\">      right: 4px;</span><br><span class=\"line\">      top: 8px;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .highlight-wrap:hover .copy-btn,</span><br><span class=\"line\">    .highlight-wrap .copy-btn:focus &#123;</span><br><span class=\"line\">      opacity: 1</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    .highlight-wrap &#123;</span><br><span class=\"line\">      position: relative;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;/style&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">  &lt;script&gt;</span><br><span class=\"line\">    $(&apos;.highlight&apos;).each(function (i, e) &#123;</span><br><span class=\"line\">      var $wrap = $(&apos;&lt;div&gt;&apos;).addClass(&apos;highlight-wrap&apos;)</span><br><span class=\"line\">      $(e).after($wrap)</span><br><span class=\"line\">      $wrap.append($(&apos;&lt;button&gt;&apos;).addClass(&apos;copy-btn&apos;).append(&apos;&#123;&#123;__(&quot;post.copy_button&quot;)&#125;&#125;&apos;).on(&apos;click&apos;, function (e) &#123;</span><br><span class=\"line\">        var code = $(this).parent().find(&apos;.code&apos;).find(&apos;.line&apos;).map(function (i, e) &#123;</span><br><span class=\"line\">          return $(e).text()</span><br><span class=\"line\">        &#125;).toArray().join(&apos;\\n&apos;)</span><br><span class=\"line\">        var ta = document.createElement(&apos;textarea&apos;)</span><br><span class=\"line\">        document.body.appendChild(ta)</span><br><span class=\"line\">        ta.style.position = &apos;absolute&apos;</span><br><span class=\"line\">        ta.style.top = &apos;0px&apos;</span><br><span class=\"line\">        ta.style.left = &apos;0px&apos;</span><br><span class=\"line\">        ta.value = code</span><br><span class=\"line\">        ta.select()</span><br><span class=\"line\">        ta.focus()</span><br><span class=\"line\">        var result = document.execCommand(&apos;copy&apos;)</span><br><span class=\"line\">        document.body.removeChild(ta)</span><br><span class=\"line\">        &#123;% if theme.codeblock.copy_button.show_result %&#125;</span><br><span class=\"line\">          if(result)$(this).text(&apos;&#123;&#123;__(&quot;post.copy_success&quot;)&#125;&#125;&apos;)</span><br><span class=\"line\">          else $(this).text(&apos;&#123;&#123;__(&quot;post.copy_failure&quot;)&#125;&#125;&apos;)</span><br><span class=\"line\">        &#123;% endif %&#125;</span><br><span class=\"line\">        $(this).blur()</span><br><span class=\"line\">      &#125;)).on(&apos;mouseleave&apos;, function (e) &#123;</span><br><span class=\"line\">        var $b = $(this).find(&apos;.copy-btn&apos;)</span><br><span class=\"line\">        setTimeout(function () &#123;</span><br><span class=\"line\">          $b.text(&apos;&#123;&#123;__(&quot;post.copy_button&quot;)&#125;&#125;&apos;)</span><br><span class=\"line\">        &#125;, 300)</span><br><span class=\"line\">      &#125;).append(e)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &lt;/script&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n<p>然后返回上一层目录，即<code>layout</code>文件夹下，编辑_layout.swig,如下图</p>\n<p><img src=\"/images/codecopy.png\" alt=\"codecopy.png\"></p>\n<p>在图中位置添加：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% include &apos;_third-party/copy-code.swig&apos; %&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://qiming.info/Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E5%8A%A0%E5%85%A5%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/\" target=\"_blank\" rel=\"noopener\">参考这位作者的文章</a></p>\n"},{"title":"hexo-常用命令","abbrlink":3973852728,"date":"2019-04-12T10:35:51.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;记录一下hexo经常使用的命令，发现自己好久没有hexo，命令都不记得了。\n\n### 新建文章\n```\nhexo new \"postname\" (hexo n postname)\n```\n\n### 新建页面\n```\nhexo new page \"pagename\"\n```\n\n### 启动本地web服务\n```\nhexo server (hexo s)\n本地网址：localhost:4000\n```\n### 生成静态文件\n```\nhexo generate (hexo g)\n```\n\n### 生成部署\n```\nhexo d -g\n```\n\n### 生成预览\n```\nhexo s -g\n```\n\n### 清理public文件夹\n```\nhexo clean \n```","source":"_posts/hexo-常用命令.md","raw":"---\ntitle: hexo-常用命令\ncategories: [Tool,hexo]\ntags:\n  - cmd\nabbrlink: 3973852728\ndate: 2019-04-12 18:35:51\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;记录一下hexo经常使用的命令，发现自己好久没有hexo，命令都不记得了。\n\n### 新建文章\n```\nhexo new \"postname\" (hexo n postname)\n```\n\n### 新建页面\n```\nhexo new page \"pagename\"\n```\n\n### 启动本地web服务\n```\nhexo server (hexo s)\n本地网址：localhost:4000\n```\n### 生成静态文件\n```\nhexo generate (hexo g)\n```\n\n### 生成部署\n```\nhexo d -g\n```\n\n### 生成预览\n```\nhexo s -g\n```\n\n### 清理public文件夹\n```\nhexo clean \n```","slug":"hexo-常用命令","published":1,"updated":"2021-02-08T06:55:36.925Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwx002klkq5294qc9wb","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;记录一下hexo经常使用的命令，发现自己好久没有hexo，命令都不记得了。</p>\n<h3 id=\"新建文章\"><a href=\"#新建文章\" class=\"headerlink\" title=\"新建文章\"></a>新建文章</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new &quot;postname&quot; (hexo n postname)</span><br></pre></td></tr></table></figure>\n<h3 id=\"新建页面\"><a href=\"#新建页面\" class=\"headerlink\" title=\"新建页面\"></a>新建页面</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page &quot;pagename&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动本地web服务\"><a href=\"#启动本地web服务\" class=\"headerlink\" title=\"启动本地web服务\"></a>启动本地web服务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo server (hexo s)</span><br><span class=\"line\">本地网址：localhost:4000</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成静态文件\"><a href=\"#生成静态文件\" class=\"headerlink\" title=\"生成静态文件\"></a>生成静态文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo generate (hexo g)</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成部署\"><a href=\"#生成部署\" class=\"headerlink\" title=\"生成部署\"></a>生成部署</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成预览\"><a href=\"#生成预览\" class=\"headerlink\" title=\"生成预览\"></a>生成预览</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo s -g</span><br></pre></td></tr></table></figure>\n<h3 id=\"清理public文件夹\"><a href=\"#清理public文件夹\" class=\"headerlink\" title=\"清理public文件夹\"></a>清理public文件夹</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;记录一下hexo经常使用的命令，发现自己好久没有hexo，命令都不记得了。</p>\n<h3 id=\"新建文章\"><a href=\"#新建文章\" class=\"headerlink\" title=\"新建文章\"></a>新建文章</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new &quot;postname&quot; (hexo n postname)</span><br></pre></td></tr></table></figure>\n<h3 id=\"新建页面\"><a href=\"#新建页面\" class=\"headerlink\" title=\"新建页面\"></a>新建页面</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo new page &quot;pagename&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动本地web服务\"><a href=\"#启动本地web服务\" class=\"headerlink\" title=\"启动本地web服务\"></a>启动本地web服务</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo server (hexo s)</span><br><span class=\"line\">本地网址：localhost:4000</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成静态文件\"><a href=\"#生成静态文件\" class=\"headerlink\" title=\"生成静态文件\"></a>生成静态文件</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo generate (hexo g)</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成部署\"><a href=\"#生成部署\" class=\"headerlink\" title=\"生成部署\"></a>生成部署</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo d -g</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成预览\"><a href=\"#生成预览\" class=\"headerlink\" title=\"生成预览\"></a>生成预览</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo s -g</span><br></pre></td></tr></table></figure>\n<h3 id=\"清理public文件夹\"><a href=\"#清理public文件夹\" class=\"headerlink\" title=\"清理public文件夹\"></a>清理public文件夹</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean</span><br></pre></td></tr></table></figure>"},{"title":"image-libraw相机图片库源码编译","abbrlink":1731984249,"date":"2020-01-17T09:37:04.000Z","_content":"\n~~~\nLibRaw is a library for reading RAW files from digital photo cameras (CRW/CR2, NEF, RAF, DNG, MOS, KDC, DCR, etc, virtually all RAW formats are supported).\n~~~\n\n### 一，源码下载\n\n~~~\ngit clone https://github.com/LibRaw/LibRaw.git\n~~~\n\n### 二，编译环境准备\n\n~~~\n1，查看文件DEVELOPER-NOTES，提示我们,执行mkdist.sh脚本来生成编译的东西\n2， 安装需要的软件\n\t yum install autoconf automake freetype-devel gcc gcc-c++ libtool make pkgconfig -y\n\t yum install wget -y\n\t yum install lcms2 lcms2-devel -y\n\t yum install jasper jasper-devel\n~~~\n\n### 三，准备编译遇到的错误\n\n~~~\n下载dcraw.c失败，我们需要手动的下载\n修改mkdist.sh脚本文件\nwget https://www.dechifro.org/dcraw/dcraw.c\n然后在执行 mkdist.sh脚本\n~~~\n\n### 四，编译\n\n~~~\n./configure --prefix=/usr/local/helios CXX=/usr/local/bin/g++\nmake\nmake install\n\n~~~\n\n### 五，执行遇到的问题\n\n~~~\n在程序中执行 open_file CR2的时候程序崩溃，因为自己的g++编译是4.8.5的，但是更新到4.9.2后就成功了\n~~~\n\n","source":"_posts/image-libraw相机图片库源码编译.md","raw":"---\ntitle: image-libraw相机图片库源码编译\ncategories: [Media,image]\ntags: libraw\nabbrlink: 1731984249\ndate: 2020-01-17 17:37:04\n---\n\n~~~\nLibRaw is a library for reading RAW files from digital photo cameras (CRW/CR2, NEF, RAF, DNG, MOS, KDC, DCR, etc, virtually all RAW formats are supported).\n~~~\n\n### 一，源码下载\n\n~~~\ngit clone https://github.com/LibRaw/LibRaw.git\n~~~\n\n### 二，编译环境准备\n\n~~~\n1，查看文件DEVELOPER-NOTES，提示我们,执行mkdist.sh脚本来生成编译的东西\n2， 安装需要的软件\n\t yum install autoconf automake freetype-devel gcc gcc-c++ libtool make pkgconfig -y\n\t yum install wget -y\n\t yum install lcms2 lcms2-devel -y\n\t yum install jasper jasper-devel\n~~~\n\n### 三，准备编译遇到的错误\n\n~~~\n下载dcraw.c失败，我们需要手动的下载\n修改mkdist.sh脚本文件\nwget https://www.dechifro.org/dcraw/dcraw.c\n然后在执行 mkdist.sh脚本\n~~~\n\n### 四，编译\n\n~~~\n./configure --prefix=/usr/local/helios CXX=/usr/local/bin/g++\nmake\nmake install\n\n~~~\n\n### 五，执行遇到的问题\n\n~~~\n在程序中执行 open_file CR2的时候程序崩溃，因为自己的g++编译是4.8.5的，但是更新到4.9.2后就成功了\n~~~\n\n","slug":"image-libraw相机图片库源码编译","published":1,"updated":"2021-02-08T06:48:11.931Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxwy002plkq5yqs16a1j","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LibRaw is a library for reading RAW files from digital photo cameras (CRW/CR2, NEF, RAF, DNG, MOS, KDC, DCR, etc, virtually all RAW formats are supported).</span><br></pre></td></tr></table></figure>\n<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/LibRaw/LibRaw.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，编译环境准备\"><a href=\"#二，编译环境准备\" class=\"headerlink\" title=\"二，编译环境准备\"></a>二，编译环境准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，查看文件DEVELOPER-NOTES，提示我们,执行mkdist.sh脚本来生成编译的东西</span><br><span class=\"line\">2， 安装需要的软件</span><br><span class=\"line\">\t yum install autoconf automake freetype-devel gcc gcc-c++ libtool make pkgconfig -y</span><br><span class=\"line\">\t yum install wget -y</span><br><span class=\"line\">\t yum install lcms2 lcms2-devel -y</span><br><span class=\"line\">\t yum install jasper jasper-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，准备编译遇到的错误\"><a href=\"#三，准备编译遇到的错误\" class=\"headerlink\" title=\"三，准备编译遇到的错误\"></a>三，准备编译遇到的错误</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载dcraw.c失败，我们需要手动的下载</span><br><span class=\"line\">修改mkdist.sh脚本文件</span><br><span class=\"line\">wget https://www.dechifro.org/dcraw/dcraw.c</span><br><span class=\"line\">然后在执行 mkdist.sh脚本</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，编译\"><a href=\"#四，编译\" class=\"headerlink\" title=\"四，编译\"></a>四，编译</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/helios CXX=/usr/local/bin/g++</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"五，执行遇到的问题\"><a href=\"#五，执行遇到的问题\" class=\"headerlink\" title=\"五，执行遇到的问题\"></a>五，执行遇到的问题</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在程序中执行 open_file CR2的时候程序崩溃，因为自己的g++编译是4.8.5的，但是更新到4.9.2后就成功了</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LibRaw is a library for reading RAW files from digital photo cameras (CRW/CR2, NEF, RAF, DNG, MOS, KDC, DCR, etc, virtually all RAW formats are supported).</span><br></pre></td></tr></table></figure>\n<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/LibRaw/LibRaw.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，编译环境准备\"><a href=\"#二，编译环境准备\" class=\"headerlink\" title=\"二，编译环境准备\"></a>二，编译环境准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，查看文件DEVELOPER-NOTES，提示我们,执行mkdist.sh脚本来生成编译的东西</span><br><span class=\"line\">2， 安装需要的软件</span><br><span class=\"line\">\t yum install autoconf automake freetype-devel gcc gcc-c++ libtool make pkgconfig -y</span><br><span class=\"line\">\t yum install wget -y</span><br><span class=\"line\">\t yum install lcms2 lcms2-devel -y</span><br><span class=\"line\">\t yum install jasper jasper-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，准备编译遇到的错误\"><a href=\"#三，准备编译遇到的错误\" class=\"headerlink\" title=\"三，准备编译遇到的错误\"></a>三，准备编译遇到的错误</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">下载dcraw.c失败，我们需要手动的下载</span><br><span class=\"line\">修改mkdist.sh脚本文件</span><br><span class=\"line\">wget https://www.dechifro.org/dcraw/dcraw.c</span><br><span class=\"line\">然后在执行 mkdist.sh脚本</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，编译\"><a href=\"#四，编译\" class=\"headerlink\" title=\"四，编译\"></a>四，编译</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --prefix=/usr/local/helios CXX=/usr/local/bin/g++</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n<h3 id=\"五，执行遇到的问题\"><a href=\"#五，执行遇到的问题\" class=\"headerlink\" title=\"五，执行遇到的问题\"></a>五，执行遇到的问题</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在程序中执行 open_file CR2的时候程序崩溃，因为自己的g++编译是4.8.5的，但是更新到4.9.2后就成功了</span><br></pre></td></tr></table></figure>\n"},{"title":"image-libvips图片处理库源码编译","abbrlink":3448999942,"date":"2020-01-15T01:43:01.000Z","_content":"\n~~~\n目前主要是用于苹果平台图片heic图片的转码处理\n~~~\n\n### 1，从GitHub上下载源码\n\n~~~\ngit  clone  https://github.com/libvips/libvips.git\n~~~\n\n### 2，下载需要的依赖\n\n~~~\nyum install gtk-doc\nyum install gobject-introspection\nyum install gobject-introspection-devel\nyum install expat-devel\nyum install glib glib-devel\nyum install gcc gcc-c++\nyum install make pkgconfig autoconf automake\n~~~\n\n### 3，编译出现的问题\n\n~~~\nlibpango-1.0.so: undefined reference to `fribidi_get_par_embedding_levels_ex'\n\n检查ldd /usr/lib64/libpango-1.0.so发现，有一个ibfribidi.so.0 => /lib64/libfribidi.so.0链接开始链接的是我自己的，有问题，改回来就好了，可能是版本冲突的原因，需要保证链接库的版本一致\n~~~\n\n\n\n### 3，安装我们需要支持的图片格式依赖\n\n~~~\nyum install -y libjpeg-turbo libjpeg-turbo-devel\nyum install -y libexif libexif-devel\nyum install -y giflib giflib-devel\nyum install -y librsvg2 librsvg2-devel\nyum install -y libtiff libtiff-devel \nyum install -y libwebp libwebp-devel\nyum install -y libpng libpng-devel\nyum install -y  libgsf libgsf-devel\nyum install -y poppler-glib poppler-glib-devel\nyum install -y openslide openslide-devel\nyum install -y orc orc-devel\nyum install -y libimagequant libimagequant-devel\nyum install -y cfitsio cfitsio-devel\nyum install -y matio matio-devel\nyum install -y fftw fftw-devel\n~~~\n\n### 4，安装libheif\n\n~~~\n1,git 源码安装libde265,## 注意这个必须安装，不然在编译libvips时，虽然configure表示支持，但是在真正使用的时候会报错\n\n2，git源码安装libheif，需要注意 配置libde265支持\n~~~\n\n#### 5，编译\n\n~~~\n1，./configure\n2,make && make install\n自己写的myconfig.sh文件\n\n  1 #!/bin/sh                                                                                                                          \n  2 commoninclude=/usr/include\n  3 commonlib=/usr/lib64\n  4  \n  5 CPPFLAGS=\"-g -Wall -I${commoninclude}  -L${commonlib}\"    \\\n  6 CXXFLAGS=\"-g -Wall -I${commoninclude}  -L${commonlib}\"    \\\n  7 PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:/usr/local/heif/lib/pkgconfig\"         \\\n  8 ./configure  --enable-gtk-doc-pdf=yes --prefix=/usr/local/vips    \\\n\n~~~\n\n","source":"_posts/image-libvips图片处理库源码编译.md","raw":"---\ntitle: image-libvips图片处理库源码编译\ncategories: [Media,image]\ntags: libvips\nabbrlink: 3448999942\ndate: 2020-01-15 09:43:01\n---\n\n~~~\n目前主要是用于苹果平台图片heic图片的转码处理\n~~~\n\n### 1，从GitHub上下载源码\n\n~~~\ngit  clone  https://github.com/libvips/libvips.git\n~~~\n\n### 2，下载需要的依赖\n\n~~~\nyum install gtk-doc\nyum install gobject-introspection\nyum install gobject-introspection-devel\nyum install expat-devel\nyum install glib glib-devel\nyum install gcc gcc-c++\nyum install make pkgconfig autoconf automake\n~~~\n\n### 3，编译出现的问题\n\n~~~\nlibpango-1.0.so: undefined reference to `fribidi_get_par_embedding_levels_ex'\n\n检查ldd /usr/lib64/libpango-1.0.so发现，有一个ibfribidi.so.0 => /lib64/libfribidi.so.0链接开始链接的是我自己的，有问题，改回来就好了，可能是版本冲突的原因，需要保证链接库的版本一致\n~~~\n\n\n\n### 3，安装我们需要支持的图片格式依赖\n\n~~~\nyum install -y libjpeg-turbo libjpeg-turbo-devel\nyum install -y libexif libexif-devel\nyum install -y giflib giflib-devel\nyum install -y librsvg2 librsvg2-devel\nyum install -y libtiff libtiff-devel \nyum install -y libwebp libwebp-devel\nyum install -y libpng libpng-devel\nyum install -y  libgsf libgsf-devel\nyum install -y poppler-glib poppler-glib-devel\nyum install -y openslide openslide-devel\nyum install -y orc orc-devel\nyum install -y libimagequant libimagequant-devel\nyum install -y cfitsio cfitsio-devel\nyum install -y matio matio-devel\nyum install -y fftw fftw-devel\n~~~\n\n### 4，安装libheif\n\n~~~\n1,git 源码安装libde265,## 注意这个必须安装，不然在编译libvips时，虽然configure表示支持，但是在真正使用的时候会报错\n\n2，git源码安装libheif，需要注意 配置libde265支持\n~~~\n\n#### 5，编译\n\n~~~\n1，./configure\n2,make && make install\n自己写的myconfig.sh文件\n\n  1 #!/bin/sh                                                                                                                          \n  2 commoninclude=/usr/include\n  3 commonlib=/usr/lib64\n  4  \n  5 CPPFLAGS=\"-g -Wall -I${commoninclude}  -L${commonlib}\"    \\\n  6 CXXFLAGS=\"-g -Wall -I${commoninclude}  -L${commonlib}\"    \\\n  7 PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:/usr/local/heif/lib/pkgconfig\"         \\\n  8 ./configure  --enable-gtk-doc-pdf=yes --prefix=/usr/local/vips    \\\n\n~~~\n\n","slug":"image-libvips图片处理库源码编译","published":1,"updated":"2021-02-08T06:48:36.310Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx0002slkq5wib51qx8","content":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">目前主要是用于苹果平台图片heic图片的转码处理</span><br></pre></td></tr></table></figure>\n<h3 id=\"1，从GitHub上下载源码\"><a href=\"#1，从GitHub上下载源码\" class=\"headerlink\" title=\"1，从GitHub上下载源码\"></a>1，从GitHub上下载源码</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git  clone  https://github.com/libvips/libvips.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"2，下载需要的依赖\"><a href=\"#2，下载需要的依赖\" class=\"headerlink\" title=\"2，下载需要的依赖\"></a>2，下载需要的依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gtk-doc</span><br><span class=\"line\">yum install gobject-introspection</span><br><span class=\"line\">yum install gobject-introspection-devel</span><br><span class=\"line\">yum install expat-devel</span><br><span class=\"line\">yum install glib glib-devel</span><br><span class=\"line\">yum install gcc gcc-c++</span><br><span class=\"line\">yum install make pkgconfig autoconf automake</span><br></pre></td></tr></table></figure>\n<h3 id=\"3，编译出现的问题\"><a href=\"#3，编译出现的问题\" class=\"headerlink\" title=\"3，编译出现的问题\"></a>3，编译出现的问题</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libpango-1.0.so: undefined reference to `fribidi_get_par_embedding_levels_ex&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">检查ldd /usr/lib64/libpango-1.0.so发现，有一个ibfribidi.so.0 =&gt; /lib64/libfribidi.so.0链接开始链接的是我自己的，有问题，改回来就好了，可能是版本冲突的原因，需要保证链接库的版本一致</span><br></pre></td></tr></table></figure>\n<h3 id=\"3，安装我们需要支持的图片格式依赖\"><a href=\"#3，安装我们需要支持的图片格式依赖\" class=\"headerlink\" title=\"3，安装我们需要支持的图片格式依赖\"></a>3，安装我们需要支持的图片格式依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y libjpeg-turbo libjpeg-turbo-devel</span><br><span class=\"line\">yum install -y libexif libexif-devel</span><br><span class=\"line\">yum install -y giflib giflib-devel</span><br><span class=\"line\">yum install -y librsvg2 librsvg2-devel</span><br><span class=\"line\">yum install -y libtiff libtiff-devel </span><br><span class=\"line\">yum install -y libwebp libwebp-devel</span><br><span class=\"line\">yum install -y libpng libpng-devel</span><br><span class=\"line\">yum install -y  libgsf libgsf-devel</span><br><span class=\"line\">yum install -y poppler-glib poppler-glib-devel</span><br><span class=\"line\">yum install -y openslide openslide-devel</span><br><span class=\"line\">yum install -y orc orc-devel</span><br><span class=\"line\">yum install -y libimagequant libimagequant-devel</span><br><span class=\"line\">yum install -y cfitsio cfitsio-devel</span><br><span class=\"line\">yum install -y matio matio-devel</span><br><span class=\"line\">yum install -y fftw fftw-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"4，安装libheif\"><a href=\"#4，安装libheif\" class=\"headerlink\" title=\"4，安装libheif\"></a>4，安装libheif</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,git 源码安装libde265,## 注意这个必须安装，不然在编译libvips时，虽然configure表示支持，但是在真正使用的时候会报错</span><br><span class=\"line\"></span><br><span class=\"line\">2，git源码安装libheif，需要注意 配置libde265支持</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，编译\"><a href=\"#5，编译\" class=\"headerlink\" title=\"5，编译\"></a>5，编译</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，./configure</span><br><span class=\"line\">2,make &amp;&amp; make install</span><br><span class=\"line\">自己写的myconfig.sh文件</span><br><span class=\"line\"></span><br><span class=\"line\">  1 #!/bin/sh                                                                                                                          </span><br><span class=\"line\">  2 commoninclude=/usr/include</span><br><span class=\"line\">  3 commonlib=/usr/lib64</span><br><span class=\"line\">  4  </span><br><span class=\"line\">  5 CPPFLAGS=&quot;-g -Wall -I$&#123;commoninclude&#125;  -L$&#123;commonlib&#125;&quot;    \\</span><br><span class=\"line\">  6 CXXFLAGS=&quot;-g -Wall -I$&#123;commoninclude&#125;  -L$&#123;commonlib&#125;&quot;    \\</span><br><span class=\"line\">  7 PKG_CONFIG_PATH=&quot;/usr/local/lib/pkgconfig:/usr/local/heif/lib/pkgconfig&quot;         \\</span><br><span class=\"line\">  8 ./configure  --enable-gtk-doc-pdf=yes --prefix=/usr/local/vips    \\</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">目前主要是用于苹果平台图片heic图片的转码处理</span><br></pre></td></tr></table></figure>\n<h3 id=\"1，从GitHub上下载源码\"><a href=\"#1，从GitHub上下载源码\" class=\"headerlink\" title=\"1，从GitHub上下载源码\"></a>1，从GitHub上下载源码</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git  clone  https://github.com/libvips/libvips.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"2，下载需要的依赖\"><a href=\"#2，下载需要的依赖\" class=\"headerlink\" title=\"2，下载需要的依赖\"></a>2，下载需要的依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gtk-doc</span><br><span class=\"line\">yum install gobject-introspection</span><br><span class=\"line\">yum install gobject-introspection-devel</span><br><span class=\"line\">yum install expat-devel</span><br><span class=\"line\">yum install glib glib-devel</span><br><span class=\"line\">yum install gcc gcc-c++</span><br><span class=\"line\">yum install make pkgconfig autoconf automake</span><br></pre></td></tr></table></figure>\n<h3 id=\"3，编译出现的问题\"><a href=\"#3，编译出现的问题\" class=\"headerlink\" title=\"3，编译出现的问题\"></a>3，编译出现的问题</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libpango-1.0.so: undefined reference to `fribidi_get_par_embedding_levels_ex&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">检查ldd /usr/lib64/libpango-1.0.so发现，有一个ibfribidi.so.0 =&gt; /lib64/libfribidi.so.0链接开始链接的是我自己的，有问题，改回来就好了，可能是版本冲突的原因，需要保证链接库的版本一致</span><br></pre></td></tr></table></figure>\n<h3 id=\"3，安装我们需要支持的图片格式依赖\"><a href=\"#3，安装我们需要支持的图片格式依赖\" class=\"headerlink\" title=\"3，安装我们需要支持的图片格式依赖\"></a>3，安装我们需要支持的图片格式依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y libjpeg-turbo libjpeg-turbo-devel</span><br><span class=\"line\">yum install -y libexif libexif-devel</span><br><span class=\"line\">yum install -y giflib giflib-devel</span><br><span class=\"line\">yum install -y librsvg2 librsvg2-devel</span><br><span class=\"line\">yum install -y libtiff libtiff-devel </span><br><span class=\"line\">yum install -y libwebp libwebp-devel</span><br><span class=\"line\">yum install -y libpng libpng-devel</span><br><span class=\"line\">yum install -y  libgsf libgsf-devel</span><br><span class=\"line\">yum install -y poppler-glib poppler-glib-devel</span><br><span class=\"line\">yum install -y openslide openslide-devel</span><br><span class=\"line\">yum install -y orc orc-devel</span><br><span class=\"line\">yum install -y libimagequant libimagequant-devel</span><br><span class=\"line\">yum install -y cfitsio cfitsio-devel</span><br><span class=\"line\">yum install -y matio matio-devel</span><br><span class=\"line\">yum install -y fftw fftw-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"4，安装libheif\"><a href=\"#4，安装libheif\" class=\"headerlink\" title=\"4，安装libheif\"></a>4，安装libheif</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,git 源码安装libde265,## 注意这个必须安装，不然在编译libvips时，虽然configure表示支持，但是在真正使用的时候会报错</span><br><span class=\"line\"></span><br><span class=\"line\">2，git源码安装libheif，需要注意 配置libde265支持</span><br></pre></td></tr></table></figure>\n<h4 id=\"5，编译\"><a href=\"#5，编译\" class=\"headerlink\" title=\"5，编译\"></a>5，编译</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，./configure</span><br><span class=\"line\">2,make &amp;&amp; make install</span><br><span class=\"line\">自己写的myconfig.sh文件</span><br><span class=\"line\"></span><br><span class=\"line\">  1 #!/bin/sh                                                                                                                          </span><br><span class=\"line\">  2 commoninclude=/usr/include</span><br><span class=\"line\">  3 commonlib=/usr/lib64</span><br><span class=\"line\">  4  </span><br><span class=\"line\">  5 CPPFLAGS=&quot;-g -Wall -I$&#123;commoninclude&#125;  -L$&#123;commonlib&#125;&quot;    \\</span><br><span class=\"line\">  6 CXXFLAGS=&quot;-g -Wall -I$&#123;commoninclude&#125;  -L$&#123;commonlib&#125;&quot;    \\</span><br><span class=\"line\">  7 PKG_CONFIG_PATH=&quot;/usr/local/lib/pkgconfig:/usr/local/heif/lib/pkgconfig&quot;         \\</span><br><span class=\"line\">  8 ./configure  --enable-gtk-doc-pdf=yes --prefix=/usr/local/vips    \\</span><br></pre></td></tr></table></figure>\n"},{"title":"image-图片处理库总结","abbrlink":3226112650,"date":"2020-01-15T01:47:54.000Z","_content":"\n### 一，提取exif信息的库\n\n[Exif](https://www.exiv2.org/)\n\n~~~\nExiv2 是一个用来提取图片中的EXIF、LPTC 和 XMP 元数据信息的C++类库。同时还提供了命令行工具。示例代码： Exiv2::Image::AutoPtr image =Exiv2::ImageFactory::open(argv[1]);assert(image.get() != 0);image->readMetadata(); Exi... 更多Exiv2信息 \n~~~\n\n[libvips](https://github.com/libvips/libvips)\n\n~~~\nlibvips是一个需求驱动的水平线程 图像处理库。与类似的库相比，libvips运行迅速且几乎不占用内存。libvips是根据LGPL 2.1+许可的。\n\n它具有约300种运算， 涵盖算术，直方图，卷积，形态运算，频率滤波，颜色，重采样，统计等。它支持多种数字类型，从8位int到128位复数。图像可以具有任意数量的波段。它支持各种图像格式，包括JPEG，TIFF，PNG，WebP，HEIC，FITS，Matlab，OpenEXR，PDF，SVG，HDR，PPM / PGM / PFM，CSV，GIF，分析，NIfTI，DeepZoom和OpenSlide 。它还可以通过ImageMagick或GraphicsMagick加载图像，使其与DICOM等格式一起使用。\n\n主要用这个处理苹果平台heic图片格式的转码\n~~~\n\n[CImg](http://cimg.eu/)\n\n~~~\n就一个.h文件所以用起来很简明，但感觉功能上不如CxImage。可以与CxImage配合使用，因为CImg提供了基于\nlapack的矩阵运算函数和完善的线性滤波卷积函数，同时CImg做像素运算还是很方便的。另外，独有Display类可以方便的\n实现各种显示，包括显示图像、打字、画线等等。还有，该库有个基于光流的多尺度图像配准例子，很好.\n\n使用很方便，但是对于特殊的格式如heic，相机原生格式不支持\n~~~\n\n\n\n[libraw](https://www.libraw.org/docs)\n\n~~~\nLibRaw是一个用于从数码相机读取RAW文件的库（CRW / CR2，NEF，RAF，DNG，MOS，KDC，DCR等，实际上支持所有RAW格式）。\n\n它特别注意正确检索后续RAW转换所需的数据。\n\n该库旨在使用RAW文件作为初始数据嵌入RAW转换器，数据分析器和其他程序中。\n~~~\n\n\n\n[CxImage](https://www.codeproject.com/Articles/1300/CxImage)\n\n~~~\n对CxImage考察的印象：该开发包完全开放源代码，图像封装为一个类，功能极为强大，与Windows、MFC支持极好，支\n持图像的多种操作（线性滤波、中值滤波、直方图操作、旋转缩放、区域选取、阈值处理、膨胀腐蚀、alpha混合等等），支\n持从文件、内存或者win32api定义的位图图像格式中读取图像，支持将图像显示在任意窗口，功能可谓很强大了，而且对像\n素的操作很方便，另外还有一个界面很强的demo，可以直接在上面进行二次开发，推荐使用！\n缺点：里面的子库很多，用起来可能较麻烦；而且感觉速度稍慢，不如后面提到的freeimage\n但功能真的十分强大啊！\n\n主要使用这个处理相机原生图片，可以linux下自己不会编译\n~~~\n\n[OpenCV](https://opencv.org/)\n\n~~~\n对OpenCV的印象：功能十分的强大，而且支持目前先进的图像处理技术，体系十分完善，操作手册很详细，手册首先给大\n家补计算机视觉的知识，几乎涵盖了近10年内的主流算法；然后将图像格式和矩阵运算，然后将各个算法的实现函数。我用\n它来做了一个Harris角点检测器和Canny边缘检测器，总共就花了一个小时（第一次用OpenCV）。而且该库显示图像极其\n方便，两句话就可以。但该库似乎不大稳定，对32F和16S、8U的图像数据支持上bug重重。我用cvFilter2D函数进行线性\n滤波，屡屡出错，后来一查原来是大bug。后来用cvmGet来取矩阵元素也是频繁出错，仔细检查了N遍确保程序没问题之后\n在yahoogroup上找到答案：仍然是bug。。。但好歹该库是开放的，所以自己可以修改；而且支持CVS。另外该库用的是\nIPL矩阵库，速度奇快～～\n\n目前没有使用\n~~~\n\n","source":"_posts/image-图片处理库总结.md","raw":"---\ntitle: image-图片处理库总结\ncategories: [Media,image]\ntags:\nabbrlink: 3226112650\ndate: 2020-01-15 09:47:54\n---\n\n### 一，提取exif信息的库\n\n[Exif](https://www.exiv2.org/)\n\n~~~\nExiv2 是一个用来提取图片中的EXIF、LPTC 和 XMP 元数据信息的C++类库。同时还提供了命令行工具。示例代码： Exiv2::Image::AutoPtr image =Exiv2::ImageFactory::open(argv[1]);assert(image.get() != 0);image->readMetadata(); Exi... 更多Exiv2信息 \n~~~\n\n[libvips](https://github.com/libvips/libvips)\n\n~~~\nlibvips是一个需求驱动的水平线程 图像处理库。与类似的库相比，libvips运行迅速且几乎不占用内存。libvips是根据LGPL 2.1+许可的。\n\n它具有约300种运算， 涵盖算术，直方图，卷积，形态运算，频率滤波，颜色，重采样，统计等。它支持多种数字类型，从8位int到128位复数。图像可以具有任意数量的波段。它支持各种图像格式，包括JPEG，TIFF，PNG，WebP，HEIC，FITS，Matlab，OpenEXR，PDF，SVG，HDR，PPM / PGM / PFM，CSV，GIF，分析，NIfTI，DeepZoom和OpenSlide 。它还可以通过ImageMagick或GraphicsMagick加载图像，使其与DICOM等格式一起使用。\n\n主要用这个处理苹果平台heic图片格式的转码\n~~~\n\n[CImg](http://cimg.eu/)\n\n~~~\n就一个.h文件所以用起来很简明，但感觉功能上不如CxImage。可以与CxImage配合使用，因为CImg提供了基于\nlapack的矩阵运算函数和完善的线性滤波卷积函数，同时CImg做像素运算还是很方便的。另外，独有Display类可以方便的\n实现各种显示，包括显示图像、打字、画线等等。还有，该库有个基于光流的多尺度图像配准例子，很好.\n\n使用很方便，但是对于特殊的格式如heic，相机原生格式不支持\n~~~\n\n\n\n[libraw](https://www.libraw.org/docs)\n\n~~~\nLibRaw是一个用于从数码相机读取RAW文件的库（CRW / CR2，NEF，RAF，DNG，MOS，KDC，DCR等，实际上支持所有RAW格式）。\n\n它特别注意正确检索后续RAW转换所需的数据。\n\n该库旨在使用RAW文件作为初始数据嵌入RAW转换器，数据分析器和其他程序中。\n~~~\n\n\n\n[CxImage](https://www.codeproject.com/Articles/1300/CxImage)\n\n~~~\n对CxImage考察的印象：该开发包完全开放源代码，图像封装为一个类，功能极为强大，与Windows、MFC支持极好，支\n持图像的多种操作（线性滤波、中值滤波、直方图操作、旋转缩放、区域选取、阈值处理、膨胀腐蚀、alpha混合等等），支\n持从文件、内存或者win32api定义的位图图像格式中读取图像，支持将图像显示在任意窗口，功能可谓很强大了，而且对像\n素的操作很方便，另外还有一个界面很强的demo，可以直接在上面进行二次开发，推荐使用！\n缺点：里面的子库很多，用起来可能较麻烦；而且感觉速度稍慢，不如后面提到的freeimage\n但功能真的十分强大啊！\n\n主要使用这个处理相机原生图片，可以linux下自己不会编译\n~~~\n\n[OpenCV](https://opencv.org/)\n\n~~~\n对OpenCV的印象：功能十分的强大，而且支持目前先进的图像处理技术，体系十分完善，操作手册很详细，手册首先给大\n家补计算机视觉的知识，几乎涵盖了近10年内的主流算法；然后将图像格式和矩阵运算，然后将各个算法的实现函数。我用\n它来做了一个Harris角点检测器和Canny边缘检测器，总共就花了一个小时（第一次用OpenCV）。而且该库显示图像极其\n方便，两句话就可以。但该库似乎不大稳定，对32F和16S、8U的图像数据支持上bug重重。我用cvFilter2D函数进行线性\n滤波，屡屡出错，后来一查原来是大bug。后来用cvmGet来取矩阵元素也是频繁出错，仔细检查了N遍确保程序没问题之后\n在yahoogroup上找到答案：仍然是bug。。。但好歹该库是开放的，所以自己可以修改；而且支持CVS。另外该库用的是\nIPL矩阵库，速度奇快～～\n\n目前没有使用\n~~~\n\n","slug":"image-图片处理库总结","published":1,"updated":"2021-02-08T06:48:55.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx1002vlkq5ys9nrlkj","content":"<h3 id=\"一，提取exif信息的库\"><a href=\"#一，提取exif信息的库\" class=\"headerlink\" title=\"一，提取exif信息的库\"></a>一，提取exif信息的库</h3><p><a href=\"https://www.exiv2.org/\" target=\"_blank\" rel=\"noopener\">Exif</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exiv2 是一个用来提取图片中的EXIF、LPTC 和 XMP 元数据信息的C++类库。同时还提供了命令行工具。示例代码： Exiv2::Image::AutoPtr image =Exiv2::ImageFactory::open(argv[1]);assert(image.get() != 0);image-&gt;readMetadata(); Exi... 更多Exiv2信息</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/libvips/libvips\" target=\"_blank\" rel=\"noopener\">libvips</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libvips是一个需求驱动的水平线程 图像处理库。与类似的库相比，libvips运行迅速且几乎不占用内存。libvips是根据LGPL 2.1+许可的。</span><br><span class=\"line\"></span><br><span class=\"line\">它具有约300种运算， 涵盖算术，直方图，卷积，形态运算，频率滤波，颜色，重采样，统计等。它支持多种数字类型，从8位int到128位复数。图像可以具有任意数量的波段。它支持各种图像格式，包括JPEG，TIFF，PNG，WebP，HEIC，FITS，Matlab，OpenEXR，PDF，SVG，HDR，PPM / PGM / PFM，CSV，GIF，分析，NIfTI，DeepZoom和OpenSlide 。它还可以通过ImageMagick或GraphicsMagick加载图像，使其与DICOM等格式一起使用。</span><br><span class=\"line\"></span><br><span class=\"line\">主要用这个处理苹果平台heic图片格式的转码</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://cimg.eu/\" target=\"_blank\" rel=\"noopener\">CImg</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">就一个.h文件所以用起来很简明，但感觉功能上不如CxImage。可以与CxImage配合使用，因为CImg提供了基于</span><br><span class=\"line\">lapack的矩阵运算函数和完善的线性滤波卷积函数，同时CImg做像素运算还是很方便的。另外，独有Display类可以方便的</span><br><span class=\"line\">实现各种显示，包括显示图像、打字、画线等等。还有，该库有个基于光流的多尺度图像配准例子，很好.</span><br><span class=\"line\"></span><br><span class=\"line\">使用很方便，但是对于特殊的格式如heic，相机原生格式不支持</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.libraw.org/docs\" target=\"_blank\" rel=\"noopener\">libraw</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LibRaw是一个用于从数码相机读取RAW文件的库（CRW / CR2，NEF，RAF，DNG，MOS，KDC，DCR等，实际上支持所有RAW格式）。</span><br><span class=\"line\"></span><br><span class=\"line\">它特别注意正确检索后续RAW转换所需的数据。</span><br><span class=\"line\"></span><br><span class=\"line\">该库旨在使用RAW文件作为初始数据嵌入RAW转换器，数据分析器和其他程序中。</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.codeproject.com/Articles/1300/CxImage\" target=\"_blank\" rel=\"noopener\">CxImage</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对CxImage考察的印象：该开发包完全开放源代码，图像封装为一个类，功能极为强大，与Windows、MFC支持极好，支</span><br><span class=\"line\">持图像的多种操作（线性滤波、中值滤波、直方图操作、旋转缩放、区域选取、阈值处理、膨胀腐蚀、alpha混合等等），支</span><br><span class=\"line\">持从文件、内存或者win32api定义的位图图像格式中读取图像，支持将图像显示在任意窗口，功能可谓很强大了，而且对像</span><br><span class=\"line\">素的操作很方便，另外还有一个界面很强的demo，可以直接在上面进行二次开发，推荐使用！</span><br><span class=\"line\">缺点：里面的子库很多，用起来可能较麻烦；而且感觉速度稍慢，不如后面提到的freeimage</span><br><span class=\"line\">但功能真的十分强大啊！</span><br><span class=\"line\"></span><br><span class=\"line\">主要使用这个处理相机原生图片，可以linux下自己不会编译</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://opencv.org/\" target=\"_blank\" rel=\"noopener\">OpenCV</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对OpenCV的印象：功能十分的强大，而且支持目前先进的图像处理技术，体系十分完善，操作手册很详细，手册首先给大</span><br><span class=\"line\">家补计算机视觉的知识，几乎涵盖了近10年内的主流算法；然后将图像格式和矩阵运算，然后将各个算法的实现函数。我用</span><br><span class=\"line\">它来做了一个Harris角点检测器和Canny边缘检测器，总共就花了一个小时（第一次用OpenCV）。而且该库显示图像极其</span><br><span class=\"line\">方便，两句话就可以。但该库似乎不大稳定，对32F和16S、8U的图像数据支持上bug重重。我用cvFilter2D函数进行线性</span><br><span class=\"line\">滤波，屡屡出错，后来一查原来是大bug。后来用cvmGet来取矩阵元素也是频繁出错，仔细检查了N遍确保程序没问题之后</span><br><span class=\"line\">在yahoogroup上找到答案：仍然是bug。。。但好歹该库是开放的，所以自己可以修改；而且支持CVS。另外该库用的是</span><br><span class=\"line\">IPL矩阵库，速度奇快～～</span><br><span class=\"line\"></span><br><span class=\"line\">目前没有使用</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一，提取exif信息的库\"><a href=\"#一，提取exif信息的库\" class=\"headerlink\" title=\"一，提取exif信息的库\"></a>一，提取exif信息的库</h3><p><a href=\"https://www.exiv2.org/\" target=\"_blank\" rel=\"noopener\">Exif</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Exiv2 是一个用来提取图片中的EXIF、LPTC 和 XMP 元数据信息的C++类库。同时还提供了命令行工具。示例代码： Exiv2::Image::AutoPtr image =Exiv2::ImageFactory::open(argv[1]);assert(image.get() != 0);image-&gt;readMetadata(); Exi... 更多Exiv2信息</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://github.com/libvips/libvips\" target=\"_blank\" rel=\"noopener\">libvips</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">libvips是一个需求驱动的水平线程 图像处理库。与类似的库相比，libvips运行迅速且几乎不占用内存。libvips是根据LGPL 2.1+许可的。</span><br><span class=\"line\"></span><br><span class=\"line\">它具有约300种运算， 涵盖算术，直方图，卷积，形态运算，频率滤波，颜色，重采样，统计等。它支持多种数字类型，从8位int到128位复数。图像可以具有任意数量的波段。它支持各种图像格式，包括JPEG，TIFF，PNG，WebP，HEIC，FITS，Matlab，OpenEXR，PDF，SVG，HDR，PPM / PGM / PFM，CSV，GIF，分析，NIfTI，DeepZoom和OpenSlide 。它还可以通过ImageMagick或GraphicsMagick加载图像，使其与DICOM等格式一起使用。</span><br><span class=\"line\"></span><br><span class=\"line\">主要用这个处理苹果平台heic图片格式的转码</span><br></pre></td></tr></table></figure>\n<p><a href=\"http://cimg.eu/\" target=\"_blank\" rel=\"noopener\">CImg</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">就一个.h文件所以用起来很简明，但感觉功能上不如CxImage。可以与CxImage配合使用，因为CImg提供了基于</span><br><span class=\"line\">lapack的矩阵运算函数和完善的线性滤波卷积函数，同时CImg做像素运算还是很方便的。另外，独有Display类可以方便的</span><br><span class=\"line\">实现各种显示，包括显示图像、打字、画线等等。还有，该库有个基于光流的多尺度图像配准例子，很好.</span><br><span class=\"line\"></span><br><span class=\"line\">使用很方便，但是对于特殊的格式如heic，相机原生格式不支持</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.libraw.org/docs\" target=\"_blank\" rel=\"noopener\">libraw</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LibRaw是一个用于从数码相机读取RAW文件的库（CRW / CR2，NEF，RAF，DNG，MOS，KDC，DCR等，实际上支持所有RAW格式）。</span><br><span class=\"line\"></span><br><span class=\"line\">它特别注意正确检索后续RAW转换所需的数据。</span><br><span class=\"line\"></span><br><span class=\"line\">该库旨在使用RAW文件作为初始数据嵌入RAW转换器，数据分析器和其他程序中。</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://www.codeproject.com/Articles/1300/CxImage\" target=\"_blank\" rel=\"noopener\">CxImage</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对CxImage考察的印象：该开发包完全开放源代码，图像封装为一个类，功能极为强大，与Windows、MFC支持极好，支</span><br><span class=\"line\">持图像的多种操作（线性滤波、中值滤波、直方图操作、旋转缩放、区域选取、阈值处理、膨胀腐蚀、alpha混合等等），支</span><br><span class=\"line\">持从文件、内存或者win32api定义的位图图像格式中读取图像，支持将图像显示在任意窗口，功能可谓很强大了，而且对像</span><br><span class=\"line\">素的操作很方便，另外还有一个界面很强的demo，可以直接在上面进行二次开发，推荐使用！</span><br><span class=\"line\">缺点：里面的子库很多，用起来可能较麻烦；而且感觉速度稍慢，不如后面提到的freeimage</span><br><span class=\"line\">但功能真的十分强大啊！</span><br><span class=\"line\"></span><br><span class=\"line\">主要使用这个处理相机原生图片，可以linux下自己不会编译</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://opencv.org/\" target=\"_blank\" rel=\"noopener\">OpenCV</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对OpenCV的印象：功能十分的强大，而且支持目前先进的图像处理技术，体系十分完善，操作手册很详细，手册首先给大</span><br><span class=\"line\">家补计算机视觉的知识，几乎涵盖了近10年内的主流算法；然后将图像格式和矩阵运算，然后将各个算法的实现函数。我用</span><br><span class=\"line\">它来做了一个Harris角点检测器和Canny边缘检测器，总共就花了一个小时（第一次用OpenCV）。而且该库显示图像极其</span><br><span class=\"line\">方便，两句话就可以。但该库似乎不大稳定，对32F和16S、8U的图像数据支持上bug重重。我用cvFilter2D函数进行线性</span><br><span class=\"line\">滤波，屡屡出错，后来一查原来是大bug。后来用cvmGet来取矩阵元素也是频繁出错，仔细检查了N遍确保程序没问题之后</span><br><span class=\"line\">在yahoogroup上找到答案：仍然是bug。。。但好歹该库是开放的，所以自己可以修改；而且支持CVS。另外该库用的是</span><br><span class=\"line\">IPL矩阵库，速度奇快～～</span><br><span class=\"line\"></span><br><span class=\"line\">目前没有使用</span><br></pre></td></tr></table></figure>\n"},{"title":"json-cpp处理json","abbrlink":3190039070,"date":"2020-06-16T03:27:54.000Z","_content":"\ncpp处理json常用的库\n\n### poco-json\n\npoco库中处理json的模块，将其转换为json字符串时键名会按照字母的顺序排列\n\n### jsoncpp\n\njsoncpp这个库，将其转换为json字符串时键名也会按照字母的顺序排序\n\n#### 1，下载\n\n[jsonspp下载](https://sourceforge.net/projects/jsoncpp/)\n\n#### 2，安装\n\n##### scons下载\n\n使用scons来安装，如果yum没有找到，则需要[更新yum库](http://www.helioswei.top/article/3859923575.html)\n\n~~~\nyum install scons -y\n~~~\n\n##### 编译jsoncpp\n\n编译好的链接库，存放在jsoncpp源目录下的libs中`libjson_linux-gcc-4.8.5_libmt.so`，头文件放在include目录下\n\n~~~\ncd jsoncpp的源目录\n\nscons platform=linux-gcc\n~~~\n\n### protobuf\n\n序列化，这个将其转换为json字符串时会按照message的顺序，比较的好。\n\n#### 1，使用步骤\n\n##### 先写proto的文件 status.proto\n\n~~~\nsyntax = \"proto3\";                                                                                                                    \npackage biyi;\n \nmessage UnifiedLog{\n    Cont content = 1;\n    string sign = 2;\n}\n \nmessage Cont{\n    string time_iso8601 = 1;\n    string companyId = 2;\n    string company = 3;\n    string projectNameCN = 4;\n    string projectName = 5;\n    string componentName = 6;\n    string componentMethodName = 7;\n    string componentType = 8;\n    string componentVer = 9;\n    string componentLang = 10; \n    string userName = 11; \n \n}\n~~~\n\n##### cpp调用\n\n~~~\n#include <iostream>\n#include \"../build/proto/status.pb.h\"\n#include <google/protobuf/util/json_util.h>\n \nnamespace proto = google::protobuf::util;\n \nusing namespace biyi;\nusing namespace std;\n \nint main() {\n    UnifiedLog uniLog;\n    uniLog.set_sign(\n        \"68f3ea8baebbaddc5a47d6d955ecf53892edb4d3d8a3afe08cf4518204d30af5\");\n    uniLog.mutable_content()->set_time_iso8601(\"2020-03-09T11:11:14+08:00\");\n    uniLog.mutable_content()->set_companyid(\"000\");\n    uniLog.mutable_content()->set_company(\"ctsi\");\n    uniLog.mutable_content()->set_projectnamecn(\"001\");\n    uniLog.mutable_content()->set_projectname(\"biyi\");\n    uniLog.mutable_content()->set_componentname(\"micro-service-statics\");\n    uniLog.mutable_content()->set_componentmethodname(\"DemoBean.echo\");\n    uniLog.mutable_content()->set_componenttype(\"微服务组件\");\n    uniLog.mutable_content()->set_componentver(\"v1.0.0\");\n    uniLog.mutable_content()->set_componentlang(\"java\");\n    uniLog.mutable_content()->set_username(\"admin\");\n \n    cout << uniLog.sign() << endl;\n    // message to json string\n    string str;\n    proto::Status status = proto::MessageToJsonString(uniLog, &str);\n    if (!status.ok()) {\n        cout << status.ToString() << endl;\n    } else {\n        cout << \"str: \" << str << endl;\n    }\n \n    return 0;\n} \n~~~\n\n\n\n","source":"_posts/json-cpp处理json.md","raw":"---\ntitle: json-cpp处理json\ncategories: [Cpp,protocol]\ntags: json\nabbrlink: 3190039070\ndate: 2020-06-16 11:27:54\n---\n\ncpp处理json常用的库\n\n### poco-json\n\npoco库中处理json的模块，将其转换为json字符串时键名会按照字母的顺序排列\n\n### jsoncpp\n\njsoncpp这个库，将其转换为json字符串时键名也会按照字母的顺序排序\n\n#### 1，下载\n\n[jsonspp下载](https://sourceforge.net/projects/jsoncpp/)\n\n#### 2，安装\n\n##### scons下载\n\n使用scons来安装，如果yum没有找到，则需要[更新yum库](http://www.helioswei.top/article/3859923575.html)\n\n~~~\nyum install scons -y\n~~~\n\n##### 编译jsoncpp\n\n编译好的链接库，存放在jsoncpp源目录下的libs中`libjson_linux-gcc-4.8.5_libmt.so`，头文件放在include目录下\n\n~~~\ncd jsoncpp的源目录\n\nscons platform=linux-gcc\n~~~\n\n### protobuf\n\n序列化，这个将其转换为json字符串时会按照message的顺序，比较的好。\n\n#### 1，使用步骤\n\n##### 先写proto的文件 status.proto\n\n~~~\nsyntax = \"proto3\";                                                                                                                    \npackage biyi;\n \nmessage UnifiedLog{\n    Cont content = 1;\n    string sign = 2;\n}\n \nmessage Cont{\n    string time_iso8601 = 1;\n    string companyId = 2;\n    string company = 3;\n    string projectNameCN = 4;\n    string projectName = 5;\n    string componentName = 6;\n    string componentMethodName = 7;\n    string componentType = 8;\n    string componentVer = 9;\n    string componentLang = 10; \n    string userName = 11; \n \n}\n~~~\n\n##### cpp调用\n\n~~~\n#include <iostream>\n#include \"../build/proto/status.pb.h\"\n#include <google/protobuf/util/json_util.h>\n \nnamespace proto = google::protobuf::util;\n \nusing namespace biyi;\nusing namespace std;\n \nint main() {\n    UnifiedLog uniLog;\n    uniLog.set_sign(\n        \"68f3ea8baebbaddc5a47d6d955ecf53892edb4d3d8a3afe08cf4518204d30af5\");\n    uniLog.mutable_content()->set_time_iso8601(\"2020-03-09T11:11:14+08:00\");\n    uniLog.mutable_content()->set_companyid(\"000\");\n    uniLog.mutable_content()->set_company(\"ctsi\");\n    uniLog.mutable_content()->set_projectnamecn(\"001\");\n    uniLog.mutable_content()->set_projectname(\"biyi\");\n    uniLog.mutable_content()->set_componentname(\"micro-service-statics\");\n    uniLog.mutable_content()->set_componentmethodname(\"DemoBean.echo\");\n    uniLog.mutable_content()->set_componenttype(\"微服务组件\");\n    uniLog.mutable_content()->set_componentver(\"v1.0.0\");\n    uniLog.mutable_content()->set_componentlang(\"java\");\n    uniLog.mutable_content()->set_username(\"admin\");\n \n    cout << uniLog.sign() << endl;\n    // message to json string\n    string str;\n    proto::Status status = proto::MessageToJsonString(uniLog, &str);\n    if (!status.ok()) {\n        cout << status.ToString() << endl;\n    } else {\n        cout << \"str: \" << str << endl;\n    }\n \n    return 0;\n} \n~~~\n\n\n\n","slug":"json-cpp处理json","published":1,"updated":"2021-02-08T07:00:50.448Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx3002zlkq5w3cn927x","content":"<p>cpp处理json常用的库</p>\n<h3 id=\"poco-json\"><a href=\"#poco-json\" class=\"headerlink\" title=\"poco-json\"></a>poco-json</h3><p>poco库中处理json的模块，将其转换为json字符串时键名会按照字母的顺序排列</p>\n<h3 id=\"jsoncpp\"><a href=\"#jsoncpp\" class=\"headerlink\" title=\"jsoncpp\"></a>jsoncpp</h3><p>jsoncpp这个库，将其转换为json字符串时键名也会按照字母的顺序排序</p>\n<h4 id=\"1，下载\"><a href=\"#1，下载\" class=\"headerlink\" title=\"1，下载\"></a>1，下载</h4><p><a href=\"https://sourceforge.net/projects/jsoncpp/\" target=\"_blank\" rel=\"noopener\">jsonspp下载</a></p>\n<h4 id=\"2，安装\"><a href=\"#2，安装\" class=\"headerlink\" title=\"2，安装\"></a>2，安装</h4><h5 id=\"scons下载\"><a href=\"#scons下载\" class=\"headerlink\" title=\"scons下载\"></a>scons下载</h5><p>使用scons来安装，如果yum没有找到，则需要<a href=\"http://www.helioswei.top/article/3859923575.html\">更新yum库</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install scons -y</span><br></pre></td></tr></table></figure>\n<h5 id=\"编译jsoncpp\"><a href=\"#编译jsoncpp\" class=\"headerlink\" title=\"编译jsoncpp\"></a>编译jsoncpp</h5><p>编译好的链接库，存放在jsoncpp源目录下的libs中<code>libjson_linux-gcc-4.8.5_libmt.so</code>，头文件放在include目录下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd jsoncpp的源目录</span><br><span class=\"line\"></span><br><span class=\"line\">scons platform=linux-gcc</span><br></pre></td></tr></table></figure>\n<h3 id=\"protobuf\"><a href=\"#protobuf\" class=\"headerlink\" title=\"protobuf\"></a>protobuf</h3><p>序列化，这个将其转换为json字符串时会按照message的顺序，比较的好。</p>\n<h4 id=\"1，使用步骤\"><a href=\"#1，使用步骤\" class=\"headerlink\" title=\"1，使用步骤\"></a>1，使用步骤</h4><h5 id=\"先写proto的文件-status-proto\"><a href=\"#先写proto的文件-status-proto\" class=\"headerlink\" title=\"先写proto的文件 status.proto\"></a>先写proto的文件 status.proto</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">syntax = &quot;proto3&quot;;                                                                                                                    </span><br><span class=\"line\">package biyi;</span><br><span class=\"line\"> </span><br><span class=\"line\">message UnifiedLog&#123;</span><br><span class=\"line\">    Cont content = 1;</span><br><span class=\"line\">    string sign = 2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">message Cont&#123;</span><br><span class=\"line\">    string time_iso8601 = 1;</span><br><span class=\"line\">    string companyId = 2;</span><br><span class=\"line\">    string company = 3;</span><br><span class=\"line\">    string projectNameCN = 4;</span><br><span class=\"line\">    string projectName = 5;</span><br><span class=\"line\">    string componentName = 6;</span><br><span class=\"line\">    string componentMethodName = 7;</span><br><span class=\"line\">    string componentType = 8;</span><br><span class=\"line\">    string componentVer = 9;</span><br><span class=\"line\">    string componentLang = 10; </span><br><span class=\"line\">    string userName = 11; </span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"cpp调用\"><a href=\"#cpp调用\" class=\"headerlink\" title=\"cpp调用\"></a>cpp调用</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#include &quot;../build/proto/status.pb.h&quot;</span><br><span class=\"line\">#include &lt;google/protobuf/util/json_util.h&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">namespace proto = google::protobuf::util;</span><br><span class=\"line\"> </span><br><span class=\"line\">using namespace biyi;</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\"> </span><br><span class=\"line\">int main() &#123;</span><br><span class=\"line\">    UnifiedLog uniLog;</span><br><span class=\"line\">    uniLog.set_sign(</span><br><span class=\"line\">        &quot;68f3ea8baebbaddc5a47d6d955ecf53892edb4d3d8a3afe08cf4518204d30af5&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_time_iso8601(&quot;2020-03-09T11:11:14+08:00&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_companyid(&quot;000&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_company(&quot;ctsi&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_projectnamecn(&quot;001&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_projectname(&quot;biyi&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentname(&quot;micro-service-statics&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentmethodname(&quot;DemoBean.echo&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componenttype(&quot;微服务组件&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentver(&quot;v1.0.0&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentlang(&quot;java&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_username(&quot;admin&quot;);</span><br><span class=\"line\"> </span><br><span class=\"line\">    cout &lt;&lt; uniLog.sign() &lt;&lt; endl;</span><br><span class=\"line\">    // message to json string</span><br><span class=\"line\">    string str;</span><br><span class=\"line\">    proto::Status status = proto::MessageToJsonString(uniLog, &amp;str);</span><br><span class=\"line\">    if (!status.ok()) &#123;</span><br><span class=\"line\">        cout &lt;&lt; status.ToString() &lt;&lt; endl;</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        cout &lt;&lt; &quot;str: &quot; &lt;&lt; str &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>cpp处理json常用的库</p>\n<h3 id=\"poco-json\"><a href=\"#poco-json\" class=\"headerlink\" title=\"poco-json\"></a>poco-json</h3><p>poco库中处理json的模块，将其转换为json字符串时键名会按照字母的顺序排列</p>\n<h3 id=\"jsoncpp\"><a href=\"#jsoncpp\" class=\"headerlink\" title=\"jsoncpp\"></a>jsoncpp</h3><p>jsoncpp这个库，将其转换为json字符串时键名也会按照字母的顺序排序</p>\n<h4 id=\"1，下载\"><a href=\"#1，下载\" class=\"headerlink\" title=\"1，下载\"></a>1，下载</h4><p><a href=\"https://sourceforge.net/projects/jsoncpp/\" target=\"_blank\" rel=\"noopener\">jsonspp下载</a></p>\n<h4 id=\"2，安装\"><a href=\"#2，安装\" class=\"headerlink\" title=\"2，安装\"></a>2，安装</h4><h5 id=\"scons下载\"><a href=\"#scons下载\" class=\"headerlink\" title=\"scons下载\"></a>scons下载</h5><p>使用scons来安装，如果yum没有找到，则需要<a href=\"http://www.helioswei.top/article/3859923575.html\">更新yum库</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install scons -y</span><br></pre></td></tr></table></figure>\n<h5 id=\"编译jsoncpp\"><a href=\"#编译jsoncpp\" class=\"headerlink\" title=\"编译jsoncpp\"></a>编译jsoncpp</h5><p>编译好的链接库，存放在jsoncpp源目录下的libs中<code>libjson_linux-gcc-4.8.5_libmt.so</code>，头文件放在include目录下</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd jsoncpp的源目录</span><br><span class=\"line\"></span><br><span class=\"line\">scons platform=linux-gcc</span><br></pre></td></tr></table></figure>\n<h3 id=\"protobuf\"><a href=\"#protobuf\" class=\"headerlink\" title=\"protobuf\"></a>protobuf</h3><p>序列化，这个将其转换为json字符串时会按照message的顺序，比较的好。</p>\n<h4 id=\"1，使用步骤\"><a href=\"#1，使用步骤\" class=\"headerlink\" title=\"1，使用步骤\"></a>1，使用步骤</h4><h5 id=\"先写proto的文件-status-proto\"><a href=\"#先写proto的文件-status-proto\" class=\"headerlink\" title=\"先写proto的文件 status.proto\"></a>先写proto的文件 status.proto</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">syntax = &quot;proto3&quot;;                                                                                                                    </span><br><span class=\"line\">package biyi;</span><br><span class=\"line\"> </span><br><span class=\"line\">message UnifiedLog&#123;</span><br><span class=\"line\">    Cont content = 1;</span><br><span class=\"line\">    string sign = 2;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">message Cont&#123;</span><br><span class=\"line\">    string time_iso8601 = 1;</span><br><span class=\"line\">    string companyId = 2;</span><br><span class=\"line\">    string company = 3;</span><br><span class=\"line\">    string projectNameCN = 4;</span><br><span class=\"line\">    string projectName = 5;</span><br><span class=\"line\">    string componentName = 6;</span><br><span class=\"line\">    string componentMethodName = 7;</span><br><span class=\"line\">    string componentType = 8;</span><br><span class=\"line\">    string componentVer = 9;</span><br><span class=\"line\">    string componentLang = 10; </span><br><span class=\"line\">    string userName = 11; </span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"cpp调用\"><a href=\"#cpp调用\" class=\"headerlink\" title=\"cpp调用\"></a>cpp调用</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include &lt;iostream&gt;</span><br><span class=\"line\">#include &quot;../build/proto/status.pb.h&quot;</span><br><span class=\"line\">#include &lt;google/protobuf/util/json_util.h&gt;</span><br><span class=\"line\"> </span><br><span class=\"line\">namespace proto = google::protobuf::util;</span><br><span class=\"line\"> </span><br><span class=\"line\">using namespace biyi;</span><br><span class=\"line\">using namespace std;</span><br><span class=\"line\"> </span><br><span class=\"line\">int main() &#123;</span><br><span class=\"line\">    UnifiedLog uniLog;</span><br><span class=\"line\">    uniLog.set_sign(</span><br><span class=\"line\">        &quot;68f3ea8baebbaddc5a47d6d955ecf53892edb4d3d8a3afe08cf4518204d30af5&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_time_iso8601(&quot;2020-03-09T11:11:14+08:00&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_companyid(&quot;000&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_company(&quot;ctsi&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_projectnamecn(&quot;001&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_projectname(&quot;biyi&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentname(&quot;micro-service-statics&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentmethodname(&quot;DemoBean.echo&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componenttype(&quot;微服务组件&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentver(&quot;v1.0.0&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_componentlang(&quot;java&quot;);</span><br><span class=\"line\">    uniLog.mutable_content()-&gt;set_username(&quot;admin&quot;);</span><br><span class=\"line\"> </span><br><span class=\"line\">    cout &lt;&lt; uniLog.sign() &lt;&lt; endl;</span><br><span class=\"line\">    // message to json string</span><br><span class=\"line\">    string str;</span><br><span class=\"line\">    proto::Status status = proto::MessageToJsonString(uniLog, &amp;str);</span><br><span class=\"line\">    if (!status.ok()) &#123;</span><br><span class=\"line\">        cout &lt;&lt; status.ToString() &lt;&lt; endl;</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">        cout &lt;&lt; &quot;str: &quot; &lt;&lt; str &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">    return 0;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"mupdf-源码安装","abbrlink":3549577056,"date":"2020-04-29T03:44:14.000Z","_content":"\n### 一，源码下载\n\n~~~\n直接到官网上下载源码包\nhttps://www.mupdf.com/downloads/index.html\nmupdf-1.16.1-source.tar.gz\n~~~\n\n\n\n### 二，相关依赖下载\n\n~~~\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\nYou should have received a copy of the GNU Affero General Public License along with this program. If not, see http://www.gnu.org/licenses\n\nyum install freeglut-devel\n~~~\n\n### 三，编译安装\n\n~~~\nmake prefix=/usr/local install\n~~~\n\n### 四，使用注意\n\n在cmake的项目中使用静态库的时候，你只能生成静态链接库，在生成应用的时候，链接静态库和动态库都是一样的用法","source":"_posts/mupdf-源码安装.md","raw":"---\ntitle: mupdf-源码安装\ncategories: [Media,doc]\ntags: mupdf\nabbrlink: 3549577056\ndate: 2020-04-29 11:44:14\n---\n\n### 一，源码下载\n\n~~~\n直接到官网上下载源码包\nhttps://www.mupdf.com/downloads/index.html\nmupdf-1.16.1-source.tar.gz\n~~~\n\n\n\n### 二，相关依赖下载\n\n~~~\nThis program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\nYou should have received a copy of the GNU Affero General Public License along with this program. If not, see http://www.gnu.org/licenses\n\nyum install freeglut-devel\n~~~\n\n### 三，编译安装\n\n~~~\nmake prefix=/usr/local install\n~~~\n\n### 四，使用注意\n\n在cmake的项目中使用静态库的时候，你只能生成静态链接库，在生成应用的时候，链接静态库和动态库都是一样的用法","slug":"mupdf-源码安装","published":1,"updated":"2021-02-08T06:47:13.548Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx40031lkq5cr1g1kz5","content":"<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">直接到官网上下载源码包</span><br><span class=\"line\">https://www.mupdf.com/downloads/index.html</span><br><span class=\"line\">mupdf-1.16.1-source.tar.gz</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，相关依赖下载\"><a href=\"#二，相关依赖下载\" class=\"headerlink\" title=\"二，相关依赖下载\"></a>二，相关依赖下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span><br><span class=\"line\">You should have received a copy of the GNU Affero General Public License along with this program. If not, see http://www.gnu.org/licenses</span><br><span class=\"line\"></span><br><span class=\"line\">yum install freeglut-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，编译安装\"><a href=\"#三，编译安装\" class=\"headerlink\" title=\"三，编译安装\"></a>三，编译安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make prefix=/usr/local install</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，使用注意\"><a href=\"#四，使用注意\" class=\"headerlink\" title=\"四，使用注意\"></a>四，使用注意</h3><p>在cmake的项目中使用静态库的时候，你只能生成静态链接库，在生成应用的时候，链接静态库和动态库都是一样的用法</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">直接到官网上下载源码包</span><br><span class=\"line\">https://www.mupdf.com/downloads/index.html</span><br><span class=\"line\">mupdf-1.16.1-source.tar.gz</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，相关依赖下载\"><a href=\"#二，相关依赖下载\" class=\"headerlink\" title=\"二，相关依赖下载\"></a>二，相关依赖下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span><br><span class=\"line\">You should have received a copy of the GNU Affero General Public License along with this program. If not, see http://www.gnu.org/licenses</span><br><span class=\"line\"></span><br><span class=\"line\">yum install freeglut-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，编译安装\"><a href=\"#三，编译安装\" class=\"headerlink\" title=\"三，编译安装\"></a>三，编译安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make prefix=/usr/local install</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，使用注意\"><a href=\"#四，使用注意\" class=\"headerlink\" title=\"四，使用注意\"></a>四，使用注意</h3><p>在cmake的项目中使用静态库的时候，你只能生成静态链接库，在生成应用的时候，链接静态库和动态库都是一样的用法</p>\n"},{"title":"mysql-centos7源码安装mysql8.0","abbrlink":1044847951,"date":"2020-04-17T02:24:23.000Z","_content":"\n\t因为直接通过yum安装的是mariadb，所以我们需要通过另外的方法来进行安装\n\n### 一，下载mysql\n\n地址：[https://dev.mysql.com/downloads/repo/yum/](https://dev.mysql.com/downloads/repo/yum/)。选择对应版本下载\n\n### 二，使用wget下载\n\n~~~\n在网站上看对应的版本号就好了\nwget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm\n~~~\n\n### 三，安装mysql的源\n\n~~~\nyum -y localinstall mysql80-community-release-el7-1.noarch.rpm（对应版本）\n~~~\n\n### 四，在线安装mysql\n\n~~~\nyum -y install mysql-community-server\n~~~\n\n### 五，linux下设置不区分大小写\n\n  1. 使用root账号登录，修改/etc/my.cnf；\n  2. 在[mysqld]下加入一行：lower_case_table_names=1\n  3. mysqld --user=mysql --lower-case-table-names=1 --initialize-insecure datadir=/var/lib/mysql\n\n### 六，设置开机自启\n\n~~~\nsystemctl enable mysqld\nsystemctl daemon-reload\n~~~\n\n### 七，修改本地root的密码\n\n  1. 查看root账户的临时密码，vim  /var/log/mysqld.log\n  2. 登录mysql，mysql -u root -p，输入1，中的临时密码\n  3. ALTER USER 'root'@'localhost' IDENTIFIED BY '你的密码';\n     修改密码为 你的密码 (备注：默认密码策略要求密码必须是大小写字母数字特殊字母的组合，至少8位)\n\n### 八， 修改密码策略要求\n\n~默认密码策略要求密码是大小写字母+数字+特殊字母的组合而且最少8位,不需要修改策略的可以跳过这步~\n\n~~~\n1，查看密码的策略\nSHOW VARIABLES LIKE 'validate_password%';\n2，修改密码的策略\nset global validate_password.check_user_name=OFF;\nset global validate_password.policy=LOW;\nset global validate_password.length=4;\nflush privileges;\n3，修改密码\nALTER USER 'root'@'localhost' IDENTIFIED BY 'root';\n~~~\n\n### 九，设置允许远程连接\n\n~~~\n1，重新登录mysql；\n2，选择mysql表； use mysql;\n3,更新表的内容；\nupdate user set Host='%' where User='root';\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;//可能会报错，执行两次即可（不成功就再flush privileges;一次）\n~~~\n\n### 十，查看加密方式\n\n~~~\nselect user, host, plugin, authentication_string from user\\G;查看加密方式\n8.0加密方式（caching_sha2_password）有些客户端还不支持 ，导致客户端连接失败，所以使用mysql_native_password加密\nalter user 'root'@'%' identified with mysql_native_password by 'helios2020';\n\n~~~\n\n### 九，卸载mysql\n\n~~~\n删除Mysql\nyum remove mysql mysql-server mysql-libs mysql-server;\nfind / -name mysql 将找到的相关东西delete掉\n(rm -rf /var/lib/mysql)；\nrpm -qa|grep mysql(查询出来的东东yum remove掉)\nrm /etc/my.cnf （可能不存在）\n~~~\n\n","source":"_posts/mysql-centos7源码安装mysql8-0.md","raw":"---\ntitle: mysql-centos7源码安装mysql8.0\ncategories: [Database,mysql]\ntags: mysql\nabbrlink: 1044847951\ndate: 2020-04-17 10:24:23\n---\n\n\t因为直接通过yum安装的是mariadb，所以我们需要通过另外的方法来进行安装\n\n### 一，下载mysql\n\n地址：[https://dev.mysql.com/downloads/repo/yum/](https://dev.mysql.com/downloads/repo/yum/)。选择对应版本下载\n\n### 二，使用wget下载\n\n~~~\n在网站上看对应的版本号就好了\nwget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm\n~~~\n\n### 三，安装mysql的源\n\n~~~\nyum -y localinstall mysql80-community-release-el7-1.noarch.rpm（对应版本）\n~~~\n\n### 四，在线安装mysql\n\n~~~\nyum -y install mysql-community-server\n~~~\n\n### 五，linux下设置不区分大小写\n\n  1. 使用root账号登录，修改/etc/my.cnf；\n  2. 在[mysqld]下加入一行：lower_case_table_names=1\n  3. mysqld --user=mysql --lower-case-table-names=1 --initialize-insecure datadir=/var/lib/mysql\n\n### 六，设置开机自启\n\n~~~\nsystemctl enable mysqld\nsystemctl daemon-reload\n~~~\n\n### 七，修改本地root的密码\n\n  1. 查看root账户的临时密码，vim  /var/log/mysqld.log\n  2. 登录mysql，mysql -u root -p，输入1，中的临时密码\n  3. ALTER USER 'root'@'localhost' IDENTIFIED BY '你的密码';\n     修改密码为 你的密码 (备注：默认密码策略要求密码必须是大小写字母数字特殊字母的组合，至少8位)\n\n### 八， 修改密码策略要求\n\n~默认密码策略要求密码是大小写字母+数字+特殊字母的组合而且最少8位,不需要修改策略的可以跳过这步~\n\n~~~\n1，查看密码的策略\nSHOW VARIABLES LIKE 'validate_password%';\n2，修改密码的策略\nset global validate_password.check_user_name=OFF;\nset global validate_password.policy=LOW;\nset global validate_password.length=4;\nflush privileges;\n3，修改密码\nALTER USER 'root'@'localhost' IDENTIFIED BY 'root';\n~~~\n\n### 九，设置允许远程连接\n\n~~~\n1，重新登录mysql；\n2，选择mysql表； use mysql;\n3,更新表的内容；\nupdate user set Host='%' where User='root';\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;//可能会报错，执行两次即可（不成功就再flush privileges;一次）\n~~~\n\n### 十，查看加密方式\n\n~~~\nselect user, host, plugin, authentication_string from user\\G;查看加密方式\n8.0加密方式（caching_sha2_password）有些客户端还不支持 ，导致客户端连接失败，所以使用mysql_native_password加密\nalter user 'root'@'%' identified with mysql_native_password by 'helios2020';\n\n~~~\n\n### 九，卸载mysql\n\n~~~\n删除Mysql\nyum remove mysql mysql-server mysql-libs mysql-server;\nfind / -name mysql 将找到的相关东西delete掉\n(rm -rf /var/lib/mysql)；\nrpm -qa|grep mysql(查询出来的东东yum remove掉)\nrm /etc/my.cnf （可能不存在）\n~~~\n\n","slug":"mysql-centos7源码安装mysql8-0","published":1,"updated":"2021-02-08T06:50:28.210Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx60035lkq5jg3alhbt","content":"<pre><code>因为直接通过yum安装的是mariadb，所以我们需要通过另外的方法来进行安装\n</code></pre><h3 id=\"一，下载mysql\"><a href=\"#一，下载mysql\" class=\"headerlink\" title=\"一，下载mysql\"></a>一，下载mysql</h3><p>地址：<a href=\"https://dev.mysql.com/downloads/repo/yum/\" target=\"_blank\" rel=\"noopener\">https://dev.mysql.com/downloads/repo/yum/</a>。选择对应版本下载</p>\n<h3 id=\"二，使用wget下载\"><a href=\"#二，使用wget下载\" class=\"headerlink\" title=\"二，使用wget下载\"></a>二，使用wget下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在网站上看对应的版本号就好了</span><br><span class=\"line\">wget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，安装mysql的源\"><a href=\"#三，安装mysql的源\" class=\"headerlink\" title=\"三，安装mysql的源\"></a>三，安装mysql的源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y localinstall mysql80-community-release-el7-1.noarch.rpm（对应版本）</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，在线安装mysql\"><a href=\"#四，在线安装mysql\" class=\"headerlink\" title=\"四，在线安装mysql\"></a>四，在线安装mysql</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure>\n<h3 id=\"五，linux下设置不区分大小写\"><a href=\"#五，linux下设置不区分大小写\" class=\"headerlink\" title=\"五，linux下设置不区分大小写\"></a>五，linux下设置不区分大小写</h3><ol>\n<li>使用root账号登录，修改/etc/my.cnf；</li>\n<li>在[mysqld]下加入一行：lower_case_table_names=1</li>\n<li>mysqld –user=mysql –lower-case-table-names=1 –initialize-insecure datadir=/var/lib/mysql</li>\n</ol>\n<h3 id=\"六，设置开机自启\"><a href=\"#六，设置开机自启\" class=\"headerlink\" title=\"六，设置开机自启\"></a>六，设置开机自启</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable mysqld</span><br><span class=\"line\">systemctl daemon-reload</span><br></pre></td></tr></table></figure>\n<h3 id=\"七，修改本地root的密码\"><a href=\"#七，修改本地root的密码\" class=\"headerlink\" title=\"七，修改本地root的密码\"></a>七，修改本地root的密码</h3><ol>\n<li>查看root账户的临时密码，vim  /var/log/mysqld.log</li>\n<li>登录mysql，mysql -u root -p，输入1，中的临时密码</li>\n<li>ALTER USER ‘root‘@’localhost’ IDENTIFIED BY ‘你的密码’;<br>修改密码为 你的密码 (备注：默认密码策略要求密码必须是大小写字母数字特殊字母的组合，至少8位)</li>\n</ol>\n<h3 id=\"八，-修改密码策略要求\"><a href=\"#八，-修改密码策略要求\" class=\"headerlink\" title=\"八， 修改密码策略要求\"></a>八， 修改密码策略要求</h3><p>~默认密码策略要求密码是大小写字母+数字+特殊字母的组合而且最少8位,不需要修改策略的可以跳过这步~</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，查看密码的策略</span><br><span class=\"line\">SHOW VARIABLES LIKE &apos;validate_password%&apos;;</span><br><span class=\"line\">2，修改密码的策略</span><br><span class=\"line\">set global validate_password.check_user_name=OFF;</span><br><span class=\"line\">set global validate_password.policy=LOW;</span><br><span class=\"line\">set global validate_password.length=4;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\">3，修改密码</span><br><span class=\"line\">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"九，设置允许远程连接\"><a href=\"#九，设置允许远程连接\" class=\"headerlink\" title=\"九，设置允许远程连接\"></a>九，设置允许远程连接</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，重新登录mysql；</span><br><span class=\"line\">2，选择mysql表； use mysql;</span><br><span class=\"line\">3,更新表的内容；</span><br><span class=\"line\">update user set Host=&apos;%&apos; where User=&apos;root&apos;;</span><br><span class=\"line\">GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; WITH GRANT OPTION;//可能会报错，执行两次即可（不成功就再flush privileges;一次）</span><br></pre></td></tr></table></figure>\n<h3 id=\"十，查看加密方式\"><a href=\"#十，查看加密方式\" class=\"headerlink\" title=\"十，查看加密方式\"></a>十，查看加密方式</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select user, host, plugin, authentication_string from user\\G;查看加密方式</span><br><span class=\"line\">8.0加密方式（caching_sha2_password）有些客户端还不支持 ，导致客户端连接失败，所以使用mysql_native_password加密</span><br><span class=\"line\">alter user &apos;root&apos;@&apos;%&apos; identified with mysql_native_password by &apos;helios2020&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"九，卸载mysql\"><a href=\"#九，卸载mysql\" class=\"headerlink\" title=\"九，卸载mysql\"></a>九，卸载mysql</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">删除Mysql</span><br><span class=\"line\">yum remove mysql mysql-server mysql-libs mysql-server;</span><br><span class=\"line\">find / -name mysql 将找到的相关东西delete掉</span><br><span class=\"line\">(rm -rf /var/lib/mysql)；</span><br><span class=\"line\">rpm -qa|grep mysql(查询出来的东东yum remove掉)</span><br><span class=\"line\">rm /etc/my.cnf （可能不存在）</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<pre><code>因为直接通过yum安装的是mariadb，所以我们需要通过另外的方法来进行安装\n</code></pre><h3 id=\"一，下载mysql\"><a href=\"#一，下载mysql\" class=\"headerlink\" title=\"一，下载mysql\"></a>一，下载mysql</h3><p>地址：<a href=\"https://dev.mysql.com/downloads/repo/yum/\" target=\"_blank\" rel=\"noopener\">https://dev.mysql.com/downloads/repo/yum/</a>。选择对应版本下载</p>\n<h3 id=\"二，使用wget下载\"><a href=\"#二，使用wget下载\" class=\"headerlink\" title=\"二，使用wget下载\"></a>二，使用wget下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在网站上看对应的版本号就好了</span><br><span class=\"line\">wget https://repo.mysql.com//mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，安装mysql的源\"><a href=\"#三，安装mysql的源\" class=\"headerlink\" title=\"三，安装mysql的源\"></a>三，安装mysql的源</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y localinstall mysql80-community-release-el7-1.noarch.rpm（对应版本）</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，在线安装mysql\"><a href=\"#四，在线安装mysql\" class=\"headerlink\" title=\"四，在线安装mysql\"></a>四，在线安装mysql</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure>\n<h3 id=\"五，linux下设置不区分大小写\"><a href=\"#五，linux下设置不区分大小写\" class=\"headerlink\" title=\"五，linux下设置不区分大小写\"></a>五，linux下设置不区分大小写</h3><ol>\n<li>使用root账号登录，修改/etc/my.cnf；</li>\n<li>在[mysqld]下加入一行：lower_case_table_names=1</li>\n<li>mysqld –user=mysql –lower-case-table-names=1 –initialize-insecure datadir=/var/lib/mysql</li>\n</ol>\n<h3 id=\"六，设置开机自启\"><a href=\"#六，设置开机自启\" class=\"headerlink\" title=\"六，设置开机自启\"></a>六，设置开机自启</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl enable mysqld</span><br><span class=\"line\">systemctl daemon-reload</span><br></pre></td></tr></table></figure>\n<h3 id=\"七，修改本地root的密码\"><a href=\"#七，修改本地root的密码\" class=\"headerlink\" title=\"七，修改本地root的密码\"></a>七，修改本地root的密码</h3><ol>\n<li>查看root账户的临时密码，vim  /var/log/mysqld.log</li>\n<li>登录mysql，mysql -u root -p，输入1，中的临时密码</li>\n<li>ALTER USER ‘root‘@’localhost’ IDENTIFIED BY ‘你的密码’;<br>修改密码为 你的密码 (备注：默认密码策略要求密码必须是大小写字母数字特殊字母的组合，至少8位)</li>\n</ol>\n<h3 id=\"八，-修改密码策略要求\"><a href=\"#八，-修改密码策略要求\" class=\"headerlink\" title=\"八， 修改密码策略要求\"></a>八， 修改密码策略要求</h3><p>~默认密码策略要求密码是大小写字母+数字+特殊字母的组合而且最少8位,不需要修改策略的可以跳过这步~</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，查看密码的策略</span><br><span class=\"line\">SHOW VARIABLES LIKE &apos;validate_password%&apos;;</span><br><span class=\"line\">2，修改密码的策略</span><br><span class=\"line\">set global validate_password.check_user_name=OFF;</span><br><span class=\"line\">set global validate_password.policy=LOW;</span><br><span class=\"line\">set global validate_password.length=4;</span><br><span class=\"line\">flush privileges;</span><br><span class=\"line\">3，修改密码</span><br><span class=\"line\">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"九，设置允许远程连接\"><a href=\"#九，设置允许远程连接\" class=\"headerlink\" title=\"九，设置允许远程连接\"></a>九，设置允许远程连接</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，重新登录mysql；</span><br><span class=\"line\">2，选择mysql表； use mysql;</span><br><span class=\"line\">3,更新表的内容；</span><br><span class=\"line\">update user set Host=&apos;%&apos; where User=&apos;root&apos;;</span><br><span class=\"line\">GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; WITH GRANT OPTION;//可能会报错，执行两次即可（不成功就再flush privileges;一次）</span><br></pre></td></tr></table></figure>\n<h3 id=\"十，查看加密方式\"><a href=\"#十，查看加密方式\" class=\"headerlink\" title=\"十，查看加密方式\"></a>十，查看加密方式</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select user, host, plugin, authentication_string from user\\G;查看加密方式</span><br><span class=\"line\">8.0加密方式（caching_sha2_password）有些客户端还不支持 ，导致客户端连接失败，所以使用mysql_native_password加密</span><br><span class=\"line\">alter user &apos;root&apos;@&apos;%&apos; identified with mysql_native_password by &apos;helios2020&apos;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"九，卸载mysql\"><a href=\"#九，卸载mysql\" class=\"headerlink\" title=\"九，卸载mysql\"></a>九，卸载mysql</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">删除Mysql</span><br><span class=\"line\">yum remove mysql mysql-server mysql-libs mysql-server;</span><br><span class=\"line\">find / -name mysql 将找到的相关东西delete掉</span><br><span class=\"line\">(rm -rf /var/lib/mysql)；</span><br><span class=\"line\">rpm -qa|grep mysql(查询出来的东东yum remove掉)</span><br><span class=\"line\">rm /etc/my.cnf （可能不存在）</span><br></pre></td></tr></table></figure>\n"},{"title":"mysql-mysql常用命令","abbrlink":4107582643,"date":"2020-05-28T06:33:43.000Z","_content":"\n记录一下常用的mysql数据库的命令\n\n### 数据库导入\n\n~~~\nmysql -uroot -phelios2020 </opt/vidFactory/database/sql/initDatatbase.sql\n~~~\n\n### 数据库导出\n\n~~~\nmysqldump -uroot -p 数据库名 > initDatatbase.sql\n~~~\n\n### database\n\n##### 展示数据库\n\n~~~\nshow databases;\n~~~\n\n##### 使用数据库\n\n~~~\nuse vidfactory;\n~~~\n\n### table\n\n##### 展示表\n\n~~~\nshow tables;\n~~~\n\n##### 插入数据\n\n###### 插入所有字段\n\n~~~\ninset into tableName values(值1，值2，值3....)\n~~~\n\n###### 插入某些字段\n\n~~~\ninset into tableName(列名a,列名b,列名c) values(值1，值2，值3);\n~~~\n\n##### 查看某个表的结构\n\n~~~\ndesc tableName \\G;\n~~~\n\n","source":"_posts/mysql-mysql常用命令.md","raw":"---\ntitle: mysql-mysql常用命令\ncategories: [Database,mysql]\ntags: cmd\nabbrlink: 4107582643\ndate: 2020-05-28 14:33:43\n---\n\n记录一下常用的mysql数据库的命令\n\n### 数据库导入\n\n~~~\nmysql -uroot -phelios2020 </opt/vidFactory/database/sql/initDatatbase.sql\n~~~\n\n### 数据库导出\n\n~~~\nmysqldump -uroot -p 数据库名 > initDatatbase.sql\n~~~\n\n### database\n\n##### 展示数据库\n\n~~~\nshow databases;\n~~~\n\n##### 使用数据库\n\n~~~\nuse vidfactory;\n~~~\n\n### table\n\n##### 展示表\n\n~~~\nshow tables;\n~~~\n\n##### 插入数据\n\n###### 插入所有字段\n\n~~~\ninset into tableName values(值1，值2，值3....)\n~~~\n\n###### 插入某些字段\n\n~~~\ninset into tableName(列名a,列名b,列名c) values(值1，值2，值3);\n~~~\n\n##### 查看某个表的结构\n\n~~~\ndesc tableName \\G;\n~~~\n\n","slug":"mysql-mysql常用命令","published":1,"updated":"2021-02-08T06:52:08.073Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx70038lkq58pswdq3k","content":"<p>记录一下常用的mysql数据库的命令</p>\n<h3 id=\"数据库导入\"><a href=\"#数据库导入\" class=\"headerlink\" title=\"数据库导入\"></a>数据库导入</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -phelios2020 &lt;/opt/vidFactory/database/sql/initDatatbase.sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"数据库导出\"><a href=\"#数据库导出\" class=\"headerlink\" title=\"数据库导出\"></a>数据库导出</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p 数据库名 &gt; initDatatbase.sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"database\"><a href=\"#database\" class=\"headerlink\" title=\"database\"></a>database</h3><h5 id=\"展示数据库\"><a href=\"#展示数据库\" class=\"headerlink\" title=\"展示数据库\"></a>展示数据库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show databases;</span><br></pre></td></tr></table></figure>\n<h5 id=\"使用数据库\"><a href=\"#使用数据库\" class=\"headerlink\" title=\"使用数据库\"></a>使用数据库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use vidfactory;</span><br></pre></td></tr></table></figure>\n<h3 id=\"table\"><a href=\"#table\" class=\"headerlink\" title=\"table\"></a>table</h3><h5 id=\"展示表\"><a href=\"#展示表\" class=\"headerlink\" title=\"展示表\"></a>展示表</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show tables;</span><br></pre></td></tr></table></figure>\n<h5 id=\"插入数据\"><a href=\"#插入数据\" class=\"headerlink\" title=\"插入数据\"></a>插入数据</h5><h6 id=\"插入所有字段\"><a href=\"#插入所有字段\" class=\"headerlink\" title=\"插入所有字段\"></a>插入所有字段</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inset into tableName values(值1，值2，值3....)</span><br></pre></td></tr></table></figure>\n<h6 id=\"插入某些字段\"><a href=\"#插入某些字段\" class=\"headerlink\" title=\"插入某些字段\"></a>插入某些字段</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inset into tableName(列名a,列名b,列名c) values(值1，值2，值3);</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看某个表的结构\"><a href=\"#查看某个表的结构\" class=\"headerlink\" title=\"查看某个表的结构\"></a>查看某个表的结构</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc tableName \\G;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>记录一下常用的mysql数据库的命令</p>\n<h3 id=\"数据库导入\"><a href=\"#数据库导入\" class=\"headerlink\" title=\"数据库导入\"></a>数据库导入</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -phelios2020 &lt;/opt/vidFactory/database/sql/initDatatbase.sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"数据库导出\"><a href=\"#数据库导出\" class=\"headerlink\" title=\"数据库导出\"></a>数据库导出</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqldump -uroot -p 数据库名 &gt; initDatatbase.sql</span><br></pre></td></tr></table></figure>\n<h3 id=\"database\"><a href=\"#database\" class=\"headerlink\" title=\"database\"></a>database</h3><h5 id=\"展示数据库\"><a href=\"#展示数据库\" class=\"headerlink\" title=\"展示数据库\"></a>展示数据库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show databases;</span><br></pre></td></tr></table></figure>\n<h5 id=\"使用数据库\"><a href=\"#使用数据库\" class=\"headerlink\" title=\"使用数据库\"></a>使用数据库</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use vidfactory;</span><br></pre></td></tr></table></figure>\n<h3 id=\"table\"><a href=\"#table\" class=\"headerlink\" title=\"table\"></a>table</h3><h5 id=\"展示表\"><a href=\"#展示表\" class=\"headerlink\" title=\"展示表\"></a>展示表</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show tables;</span><br></pre></td></tr></table></figure>\n<h5 id=\"插入数据\"><a href=\"#插入数据\" class=\"headerlink\" title=\"插入数据\"></a>插入数据</h5><h6 id=\"插入所有字段\"><a href=\"#插入所有字段\" class=\"headerlink\" title=\"插入所有字段\"></a>插入所有字段</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inset into tableName values(值1，值2，值3....)</span><br></pre></td></tr></table></figure>\n<h6 id=\"插入某些字段\"><a href=\"#插入某些字段\" class=\"headerlink\" title=\"插入某些字段\"></a>插入某些字段</h6><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inset into tableName(列名a,列名b,列名c) values(值1，值2，值3);</span><br></pre></td></tr></table></figure>\n<h5 id=\"查看某个表的结构\"><a href=\"#查看某个表的结构\" class=\"headerlink\" title=\"查看某个表的结构\"></a>查看某个表的结构</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc tableName \\G;</span><br></pre></td></tr></table></figure>\n"},{"title":"opencv-源码安装","abbrlink":3084764285,"date":"2020-04-29T03:41:25.000Z","_content":"\n### 一，源码下载\n\n​\t\t通过git源码下载OpenCV，直接在GitHub上下载的速度特别慢，所以我们需要先将其fork，然后同步到gitee上面，通过自己的gitee账号来进行下载，这个速度比较快。\n\n~~~\ngit clone https://gitee.com/helioswei/opencv.git\n~~~\n\n\n\n### 二，源码编译\n\n##### 1，cmake版本需求\n\n~~~\nCMake 3.5.1 or higher is required.  You are running version 2.8.12.2\n我们需要先源码编译cmake\n~~~\n\n\n\n##### 2，安装相关的依赖\n\n~~~\n1，需要Python的依赖包\n\n~~~\n\n\n\n##### 2，编译\n\n~~~\n在OpenCV目录中，创建build目录，然后直接cmake\ncd opencv\nmkdir build\ncd build\ncmake ..\n~~~\n\n","source":"_posts/opencv-源码安装.md","raw":"---\ntitle: opencv-源码安装\ncategories: [Media,image]\ntags: opencv\nabbrlink: 3084764285\ndate: 2020-04-29 11:41:25\n---\n\n### 一，源码下载\n\n​\t\t通过git源码下载OpenCV，直接在GitHub上下载的速度特别慢，所以我们需要先将其fork，然后同步到gitee上面，通过自己的gitee账号来进行下载，这个速度比较快。\n\n~~~\ngit clone https://gitee.com/helioswei/opencv.git\n~~~\n\n\n\n### 二，源码编译\n\n##### 1，cmake版本需求\n\n~~~\nCMake 3.5.1 or higher is required.  You are running version 2.8.12.2\n我们需要先源码编译cmake\n~~~\n\n\n\n##### 2，安装相关的依赖\n\n~~~\n1，需要Python的依赖包\n\n~~~\n\n\n\n##### 2，编译\n\n~~~\n在OpenCV目录中，创建build目录，然后直接cmake\ncd opencv\nmkdir build\ncd build\ncmake ..\n~~~\n\n","slug":"opencv-源码安装","published":1,"updated":"2021-02-08T06:47:45.581Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxx9003clkq5s7vf6qf9","content":"<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><p>​        通过git源码下载OpenCV，直接在GitHub上下载的速度特别慢，所以我们需要先将其fork，然后同步到gitee上面，通过自己的gitee账号来进行下载，这个速度比较快。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://gitee.com/helioswei/opencv.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，源码编译\"><a href=\"#二，源码编译\" class=\"headerlink\" title=\"二，源码编译\"></a>二，源码编译</h3><h5 id=\"1，cmake版本需求\"><a href=\"#1，cmake版本需求\" class=\"headerlink\" title=\"1，cmake版本需求\"></a>1，cmake版本需求</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CMake 3.5.1 or higher is required.  You are running version 2.8.12.2</span><br><span class=\"line\">我们需要先源码编译cmake</span><br></pre></td></tr></table></figure>\n<h5 id=\"2，安装相关的依赖\"><a href=\"#2，安装相关的依赖\" class=\"headerlink\" title=\"2，安装相关的依赖\"></a>2，安装相关的依赖</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，需要Python的依赖包</span><br></pre></td></tr></table></figure>\n<h5 id=\"2，编译\"><a href=\"#2，编译\" class=\"headerlink\" title=\"2，编译\"></a>2，编译</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在OpenCV目录中，创建build目录，然后直接cmake</span><br><span class=\"line\">cd opencv</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br><span class=\"line\">cmake ..</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一，源码下载\"><a href=\"#一，源码下载\" class=\"headerlink\" title=\"一，源码下载\"></a>一，源码下载</h3><p>​        通过git源码下载OpenCV，直接在GitHub上下载的速度特别慢，所以我们需要先将其fork，然后同步到gitee上面，通过自己的gitee账号来进行下载，这个速度比较快。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://gitee.com/helioswei/opencv.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，源码编译\"><a href=\"#二，源码编译\" class=\"headerlink\" title=\"二，源码编译\"></a>二，源码编译</h3><h5 id=\"1，cmake版本需求\"><a href=\"#1，cmake版本需求\" class=\"headerlink\" title=\"1，cmake版本需求\"></a>1，cmake版本需求</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CMake 3.5.1 or higher is required.  You are running version 2.8.12.2</span><br><span class=\"line\">我们需要先源码编译cmake</span><br></pre></td></tr></table></figure>\n<h5 id=\"2，安装相关的依赖\"><a href=\"#2，安装相关的依赖\" class=\"headerlink\" title=\"2，安装相关的依赖\"></a>2，安装相关的依赖</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1，需要Python的依赖包</span><br></pre></td></tr></table></figure>\n<h5 id=\"2，编译\"><a href=\"#2，编译\" class=\"headerlink\" title=\"2，编译\"></a>2，编译</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在OpenCV目录中，创建build目录，然后直接cmake</span><br><span class=\"line\">cd opencv</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br><span class=\"line\">cmake ..</span><br></pre></td></tr></table></figure>\n"},{"title":"poco-源码编译包含mysql","abbrlink":3587508548,"date":"2020-04-17T02:08:59.000Z","_content":"\n### 一，源码下载库\n\n~~~\n先在git上fork，然后同步到码云上，在clone可以加快下载的速度\ngit clone https://gitee.com/helioswei/poco.git\n~~~\n\n\n\n### 二，编译环境准备\n\n~~~\nyum install gcc-c++ make openssl-devel\n~~~\n\n\n\n### 三，安装mysql\n\n~~~\n见mysql的源码安装，安装时没有头文件，所以我们需要安装头文件\nyum install mysql-devel\n~~~\n\n\n\n### 四，编译\n\n~~~\n需要提前安装GCC5.1.0来支持c++14\n./configure --shared --prefix=/usr/local/poco  --cflags=-std=c++14 --include-path=/usr/include/mysql/ --library-path=/usr/lib64/mysql/ --omit=Data/ODBC,MongoDB,PDF\n~~~\n\n","source":"_posts/poco-源码编译包含mysql.md","raw":"---\ntitle: poco-源码编译包含mysql\ncategories: Cpp\ntags:\n  - poco\nabbrlink: 3587508548\ndate: 2020-04-17 10:08:59\n---\n\n### 一，源码下载库\n\n~~~\n先在git上fork，然后同步到码云上，在clone可以加快下载的速度\ngit clone https://gitee.com/helioswei/poco.git\n~~~\n\n\n\n### 二，编译环境准备\n\n~~~\nyum install gcc-c++ make openssl-devel\n~~~\n\n\n\n### 三，安装mysql\n\n~~~\n见mysql的源码安装，安装时没有头文件，所以我们需要安装头文件\nyum install mysql-devel\n~~~\n\n\n\n### 四，编译\n\n~~~\n需要提前安装GCC5.1.0来支持c++14\n./configure --shared --prefix=/usr/local/poco  --cflags=-std=c++14 --include-path=/usr/include/mysql/ --library-path=/usr/lib64/mysql/ --omit=Data/ODBC,MongoDB,PDF\n~~~\n\n","slug":"poco-源码编译包含mysql","published":1,"updated":"2021-02-08T06:29:40.426Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxa003glkq5496b7ant","content":"<h3 id=\"一，源码下载库\"><a href=\"#一，源码下载库\" class=\"headerlink\" title=\"一，源码下载库\"></a>一，源码下载库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">先在git上fork，然后同步到码云上，在clone可以加快下载的速度</span><br><span class=\"line\">git clone https://gitee.com/helioswei/poco.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，编译环境准备\"><a href=\"#二，编译环境准备\" class=\"headerlink\" title=\"二，编译环境准备\"></a>二，编译环境准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc-c++ make openssl-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，安装mysql\"><a href=\"#三，安装mysql\" class=\"headerlink\" title=\"三，安装mysql\"></a>三，安装mysql</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">见mysql的源码安装，安装时没有头文件，所以我们需要安装头文件</span><br><span class=\"line\">yum install mysql-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，编译\"><a href=\"#四，编译\" class=\"headerlink\" title=\"四，编译\"></a>四，编译</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要提前安装GCC5.1.0来支持c++14</span><br><span class=\"line\">./configure --shared --prefix=/usr/local/poco  --cflags=-std=c++14 --include-path=/usr/include/mysql/ --library-path=/usr/lib64/mysql/ --omit=Data/ODBC,MongoDB,PDF</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"一，源码下载库\"><a href=\"#一，源码下载库\" class=\"headerlink\" title=\"一，源码下载库\"></a>一，源码下载库</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">先在git上fork，然后同步到码云上，在clone可以加快下载的速度</span><br><span class=\"line\">git clone https://gitee.com/helioswei/poco.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"二，编译环境准备\"><a href=\"#二，编译环境准备\" class=\"headerlink\" title=\"二，编译环境准备\"></a>二，编译环境准备</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc-c++ make openssl-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"三，安装mysql\"><a href=\"#三，安装mysql\" class=\"headerlink\" title=\"三，安装mysql\"></a>三，安装mysql</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">见mysql的源码安装，安装时没有头文件，所以我们需要安装头文件</span><br><span class=\"line\">yum install mysql-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"四，编译\"><a href=\"#四，编译\" class=\"headerlink\" title=\"四，编译\"></a>四，编译</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">需要提前安装GCC5.1.0来支持c++14</span><br><span class=\"line\">./configure --shared --prefix=/usr/local/poco  --cflags=-std=c++14 --include-path=/usr/include/mysql/ --library-path=/usr/lib64/mysql/ --omit=Data/ODBC,MongoDB,PDF</span><br></pre></td></tr></table></figure>\n"},{"title":"rabbitmq-AMQPCPP使用问题记录","abbrlink":3077642244,"date":"2020-09-29T08:57:46.000Z","_content":"\n​\t\t记录[AMQP_CPP](https://github.com/CopernicaMarketingSoftware/AMQP-CPP)的使用过程中出现的问题，我是用的主要是`LibEvHandler`这个类来进行处理的,以下所有的问题都是在这个基础上面,仔细的查看头文件可以了解更多的使用方法。\n\n### 任务执行长时间后导致连接丢失的问题\n\n`LibEvHandler`中对于rabbitmq的默认心跳是60s，如果当前队列没有任务处理，则其会自动的发送心跳，保持client和server之间的连接，如果你执行某个任务的时间过长，大于60s，则在执行任务期间，其不会自动的发送心跳导致两者之间的连接断开，导致下次获取数据时提示链接错误，获取数据失败。解决办法：\n\n1. 重写LibEvHandler中的`onNegotiate`以及`onHeartbeat`这两个方法，前者用于设置心跳的时间，后者用于心跳发送时的函数。\n\n   ~~~cpp\n   >> 23 class MyHandler : public AMQP::LibEvHandler {\n      24  \n      25    public:\n   >> 26     MyHandler(struct ev_loop* loop) : AMQP::LibEvHandler(loop) {}\n      27     //解决consume在处理任务时的连接超时的问题\n   >> 28     uint16_t onNegotiate(AMQP::TcpConnection* connection, uint16_t timeout) {\n      29         return 70;//必须设置一个值\n      30     }\n   >> 31     virtual void onHeartbeat(AMQP::TcpConnection* connection) {\n      32         connection->heartbeat();\n      33     }\n      34 };\n   \n   ~~~\n\n2. 另外开一个线程，定时手动的发送心跳给rabbitmq\n\n   ~~~cpp\n      46     void run() {\n   >> 47         struct ev_loop* loop = ev_loop_new();\n      48         // AMQP::LibEvHandler handler(loop);\n      49         MyHandler handler(loop);\n      50         AMQP::TcpConnection connection(&handler, *_address);\n      51         _connection = &connection;\n      52         AMQP::TcpChannel channel(&connection);\n      53         //// channel.setQos(1);\n      54         _channel = &channel;\n                 //另外开一个线程，用于检测rabbitmq的链接，以及定时的发送心跳\n      55         std::thread check(&Consume::checkConnect, this);\n      56         // 1s后执行一次回调，之后每10s执行一次\n      57         ev_timer_init(&_timer, TClass::callback, 1, 0);\n      58         _timer.data = this;\n      59         ev_timer_start(loop, &_timer);\n      60         ev_run(loop, 0);\n      61         check.join();\n      62     }\n   \n   ~~~\n\n   ~~~cpp\n     165     void checkConnect() {\n     166         while (true) {\n                     //判读链接是否可用，可用即发送心跳\n     167             if (_connection->usable()) _connection->heartbeat();\n                     //判读当前通道是否可用，如果失败则杀死当前程序\n     168             _channel->onError([&](const char* message) {\n     169                 LOG(ERROR) << \"The channel is error, exit: \" << message;\n     170                 killAll();\n     171             });\n                     //判读当前连接是否关闭，如果关闭则杀死当前程序\n     172             if (_connection->closed()) {\n     173                 if (_connection != NULL) _connection->close();\n     174                 LOG(ERROR) << \"The connection is closed,exit\";\n     175                 killAll();\n     176             }\n                     //sleep 5s\n     177             Poco::Thread::sleep(5000);\n     178         }\n     179     }\n     180     void killAll() { kill(0, SIGABRT); }\n   \n   ~~~\n\n### 每次仅仅处理一个任务的问题\n\n​\t\t对于消息者来说，监听一个队列，如果队列里面有多条的数据，其会一下子都消费掉（有个最大值可查文档），比如你的队列里面有100条数据，其会都拿到放到内存中，如果过程中你的服务挂掉，则数据会丢失，为了解决这个问题，我们需要设置消费者每次拿到的数据量。AMQP_CPP中使用`setQos()`来进行设置\n\n<font color=\"red\">`注意：仅对手动ack有效`</font>\n\n~~~cpp\n AMQP::TcpChannel channel(&connection);\n channel.setQos(1);\n~~~\n\n### 无法重新连接的问题\n\n如果我们的rabbitmq挂了我们的服务应该怎么办了，一般对于这种有两种方法来处理\n\n1. 实现rabbitmq的重试机制，rabbitmq连接断开后，我们能够自动的恢复；\n2. 服务中断机制，rabbitmq连接断开，我们的服务也中断，再通过某个服务能够拉起（守护进程）\n\n再AMQP_CPP中重连的机制不好处理，所以我们选择第二种方法","source":"_posts/rabbitmq-AMQPCPP使用问题记录.md","raw":"---\ntitle: rabbitmq-AMQPCPP使用问题记录\ncategories: [Database,rabbitmq]\ntags: rabbitmq\nabbrlink: 3077642244\ndate: 2020-09-29 16:57:46\n---\n\n​\t\t记录[AMQP_CPP](https://github.com/CopernicaMarketingSoftware/AMQP-CPP)的使用过程中出现的问题，我是用的主要是`LibEvHandler`这个类来进行处理的,以下所有的问题都是在这个基础上面,仔细的查看头文件可以了解更多的使用方法。\n\n### 任务执行长时间后导致连接丢失的问题\n\n`LibEvHandler`中对于rabbitmq的默认心跳是60s，如果当前队列没有任务处理，则其会自动的发送心跳，保持client和server之间的连接，如果你执行某个任务的时间过长，大于60s，则在执行任务期间，其不会自动的发送心跳导致两者之间的连接断开，导致下次获取数据时提示链接错误，获取数据失败。解决办法：\n\n1. 重写LibEvHandler中的`onNegotiate`以及`onHeartbeat`这两个方法，前者用于设置心跳的时间，后者用于心跳发送时的函数。\n\n   ~~~cpp\n   >> 23 class MyHandler : public AMQP::LibEvHandler {\n      24  \n      25    public:\n   >> 26     MyHandler(struct ev_loop* loop) : AMQP::LibEvHandler(loop) {}\n      27     //解决consume在处理任务时的连接超时的问题\n   >> 28     uint16_t onNegotiate(AMQP::TcpConnection* connection, uint16_t timeout) {\n      29         return 70;//必须设置一个值\n      30     }\n   >> 31     virtual void onHeartbeat(AMQP::TcpConnection* connection) {\n      32         connection->heartbeat();\n      33     }\n      34 };\n   \n   ~~~\n\n2. 另外开一个线程，定时手动的发送心跳给rabbitmq\n\n   ~~~cpp\n      46     void run() {\n   >> 47         struct ev_loop* loop = ev_loop_new();\n      48         // AMQP::LibEvHandler handler(loop);\n      49         MyHandler handler(loop);\n      50         AMQP::TcpConnection connection(&handler, *_address);\n      51         _connection = &connection;\n      52         AMQP::TcpChannel channel(&connection);\n      53         //// channel.setQos(1);\n      54         _channel = &channel;\n                 //另外开一个线程，用于检测rabbitmq的链接，以及定时的发送心跳\n      55         std::thread check(&Consume::checkConnect, this);\n      56         // 1s后执行一次回调，之后每10s执行一次\n      57         ev_timer_init(&_timer, TClass::callback, 1, 0);\n      58         _timer.data = this;\n      59         ev_timer_start(loop, &_timer);\n      60         ev_run(loop, 0);\n      61         check.join();\n      62     }\n   \n   ~~~\n\n   ~~~cpp\n     165     void checkConnect() {\n     166         while (true) {\n                     //判读链接是否可用，可用即发送心跳\n     167             if (_connection->usable()) _connection->heartbeat();\n                     //判读当前通道是否可用，如果失败则杀死当前程序\n     168             _channel->onError([&](const char* message) {\n     169                 LOG(ERROR) << \"The channel is error, exit: \" << message;\n     170                 killAll();\n     171             });\n                     //判读当前连接是否关闭，如果关闭则杀死当前程序\n     172             if (_connection->closed()) {\n     173                 if (_connection != NULL) _connection->close();\n     174                 LOG(ERROR) << \"The connection is closed,exit\";\n     175                 killAll();\n     176             }\n                     //sleep 5s\n     177             Poco::Thread::sleep(5000);\n     178         }\n     179     }\n     180     void killAll() { kill(0, SIGABRT); }\n   \n   ~~~\n\n### 每次仅仅处理一个任务的问题\n\n​\t\t对于消息者来说，监听一个队列，如果队列里面有多条的数据，其会一下子都消费掉（有个最大值可查文档），比如你的队列里面有100条数据，其会都拿到放到内存中，如果过程中你的服务挂掉，则数据会丢失，为了解决这个问题，我们需要设置消费者每次拿到的数据量。AMQP_CPP中使用`setQos()`来进行设置\n\n<font color=\"red\">`注意：仅对手动ack有效`</font>\n\n~~~cpp\n AMQP::TcpChannel channel(&connection);\n channel.setQos(1);\n~~~\n\n### 无法重新连接的问题\n\n如果我们的rabbitmq挂了我们的服务应该怎么办了，一般对于这种有两种方法来处理\n\n1. 实现rabbitmq的重试机制，rabbitmq连接断开后，我们能够自动的恢复；\n2. 服务中断机制，rabbitmq连接断开，我们的服务也中断，再通过某个服务能够拉起（守护进程）\n\n再AMQP_CPP中重连的机制不好处理，所以我们选择第二种方法","slug":"rabbitmq-AMQPCPP使用问题记录","published":1,"updated":"2021-02-08T06:42:53.641Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxc003jlkq5hashqsf7","content":"<p>​        记录<a href=\"https://github.com/CopernicaMarketingSoftware/AMQP-CPP\" target=\"_blank\" rel=\"noopener\">AMQP_CPP</a>的使用过程中出现的问题，我是用的主要是<code>LibEvHandler</code>这个类来进行处理的,以下所有的问题都是在这个基础上面,仔细的查看头文件可以了解更多的使用方法。</p>\n<h3 id=\"任务执行长时间后导致连接丢失的问题\"><a href=\"#任务执行长时间后导致连接丢失的问题\" class=\"headerlink\" title=\"任务执行长时间后导致连接丢失的问题\"></a>任务执行长时间后导致连接丢失的问题</h3><p><code>LibEvHandler</code>中对于rabbitmq的默认心跳是60s，如果当前队列没有任务处理，则其会自动的发送心跳，保持client和server之间的连接，如果你执行某个任务的时间过长，大于60s，则在执行任务期间，其不会自动的发送心跳导致两者之间的连接断开，导致下次获取数据时提示链接错误，获取数据失败。解决办法：</p>\n<ol>\n<li><p>重写LibEvHandler中的<code>onNegotiate</code>以及<code>onHeartbeat</code>这两个方法，前者用于设置心跳的时间，后者用于心跳发送时的函数。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt; <span class=\"number\">23</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> :</span> <span class=\"keyword\">public</span> AMQP::LibEvHandler &#123;</span><br><span class=\"line\">   <span class=\"number\">24</span>  </span><br><span class=\"line\">   <span class=\"number\">25</span>    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">26</span>     MyHandler(struct ev_loop* loop) : AMQP::LibEvHandler(loop) &#123;&#125;</span><br><span class=\"line\">   <span class=\"number\">27</span>     <span class=\"comment\">//解决consume在处理任务时的连接超时的问题</span></span><br><span class=\"line\">&gt;&gt; <span class=\"number\">28</span>     <span class=\"function\"><span class=\"keyword\">uint16_t</span> <span class=\"title\">onNegotiate</span><span class=\"params\">(AMQP::TcpConnection* connection, <span class=\"keyword\">uint16_t</span> timeout)</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">29</span>         <span class=\"keyword\">return</span> <span class=\"number\">70</span>;<span class=\"comment\">//必须设置一个值</span></span><br><span class=\"line\">   <span class=\"number\">30</span>     &#125;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">31</span>     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">onHeartbeat</span><span class=\"params\">(AMQP::TcpConnection* connection)</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">32</span>         connection-&gt;heartbeat();</span><br><span class=\"line\">   <span class=\"number\">33</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">34</span> &#125;;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>另外开一个线程，定时手动的发送心跳给rabbitmq</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"number\">46</span>     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">47</span>         <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ev_loop</span>* <span class=\"title\">loop</span> = <span class=\"title\">ev_loop_new</span>();</span></span><br><span class=\"line\">   <span class=\"number\">48</span>         <span class=\"comment\">// AMQP::LibEvHandler handler(loop);</span></span><br><span class=\"line\">   <span class=\"number\">49</span>         <span class=\"function\">MyHandler <span class=\"title\">handler</span><span class=\"params\">(loop)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">50</span>         <span class=\"function\">AMQP::TcpConnection <span class=\"title\">connection</span><span class=\"params\">(&amp;handler, *_address)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">51</span>         _connection = &amp;connection;</span><br><span class=\"line\">   <span class=\"number\">52</span>         <span class=\"function\">AMQP::TcpChannel <span class=\"title\">channel</span><span class=\"params\">(&amp;connection)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">53</span>         <span class=\"comment\">//// channel.setQos(1);</span></span><br><span class=\"line\">   <span class=\"number\">54</span>         _channel = &amp;channel;</span><br><span class=\"line\">              <span class=\"comment\">//另外开一个线程，用于检测rabbitmq的链接，以及定时的发送心跳</span></span><br><span class=\"line\">   <span class=\"number\">55</span>         <span class=\"function\"><span class=\"built_in\">std</span>::thread <span class=\"title\">check</span><span class=\"params\">(&amp;Consume::checkConnect, <span class=\"keyword\">this</span>)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">56</span>         <span class=\"comment\">// 1s后执行一次回调，之后每10s执行一次</span></span><br><span class=\"line\">   <span class=\"number\">57</span>         ev_timer_init(&amp;_timer, TClass::callback, <span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">   <span class=\"number\">58</span>         _timer.data = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">   <span class=\"number\">59</span>         ev_timer_start(loop, &amp;_timer);</span><br><span class=\"line\">   <span class=\"number\">60</span>         ev_run(loop, <span class=\"number\">0</span>);</span><br><span class=\"line\">   <span class=\"number\">61</span>         check.join();</span><br><span class=\"line\">   <span class=\"number\">62</span>     &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">165</span>     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">checkConnect</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"><span class=\"number\">166</span>         <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//判读链接是否可用，可用即发送心跳</span></span><br><span class=\"line\"><span class=\"number\">167</span>             <span class=\"keyword\">if</span> (_connection-&gt;usable()) _connection-&gt;heartbeat();</span><br><span class=\"line\">                <span class=\"comment\">//判读当前通道是否可用，如果失败则杀死当前程序</span></span><br><span class=\"line\"><span class=\"number\">168</span>             _channel-&gt;onError([&amp;](<span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* message) &#123;</span><br><span class=\"line\"><span class=\"number\">169</span>                 LOG(ERROR) &lt;&lt; <span class=\"string\">\"The channel is error, exit: \"</span> &lt;&lt; message;</span><br><span class=\"line\"><span class=\"number\">170</span>                 killAll();</span><br><span class=\"line\"><span class=\"number\">171</span>             &#125;);</span><br><span class=\"line\">                <span class=\"comment\">//判读当前连接是否关闭，如果关闭则杀死当前程序</span></span><br><span class=\"line\"><span class=\"number\">172</span>             <span class=\"keyword\">if</span> (_connection-&gt;closed()) &#123;</span><br><span class=\"line\"><span class=\"number\">173</span>                 <span class=\"keyword\">if</span> (_connection != <span class=\"literal\">NULL</span>) _connection-&gt;close();</span><br><span class=\"line\"><span class=\"number\">174</span>                 LOG(ERROR) &lt;&lt; <span class=\"string\">\"The connection is closed,exit\"</span>;</span><br><span class=\"line\"><span class=\"number\">175</span>                 killAll();</span><br><span class=\"line\"><span class=\"number\">176</span>             &#125;</span><br><span class=\"line\">                <span class=\"comment\">//sleep 5s</span></span><br><span class=\"line\"><span class=\"number\">177</span>             Poco::Thread::sleep(<span class=\"number\">5000</span>);</span><br><span class=\"line\"><span class=\"number\">178</span>         &#125;</span><br><span class=\"line\"><span class=\"number\">179</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">180</span>     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">killAll</span><span class=\"params\">()</span> </span>&#123; kill(<span class=\"number\">0</span>, SIGABRT); &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"每次仅仅处理一个任务的问题\"><a href=\"#每次仅仅处理一个任务的问题\" class=\"headerlink\" title=\"每次仅仅处理一个任务的问题\"></a>每次仅仅处理一个任务的问题</h3><p>​        对于消息者来说，监听一个队列，如果队列里面有多条的数据，其会一下子都消费掉（有个最大值可查文档），比如你的队列里面有100条数据，其会都拿到放到内存中，如果过程中你的服务挂掉，则数据会丢失，为了解决这个问题，我们需要设置消费者每次拿到的数据量。AMQP_CPP中使用<code>setQos()</code>来进行设置</p>\n<font color=\"red\"><code>注意：仅对手动ack有效</code></font>\n\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">AMQP::TcpChannel <span class=\"title\">channel</span><span class=\"params\">(&amp;connection)</span></span>;</span><br><span class=\"line\">channel.setQos(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"无法重新连接的问题\"><a href=\"#无法重新连接的问题\" class=\"headerlink\" title=\"无法重新连接的问题\"></a>无法重新连接的问题</h3><p>如果我们的rabbitmq挂了我们的服务应该怎么办了，一般对于这种有两种方法来处理</p>\n<ol>\n<li>实现rabbitmq的重试机制，rabbitmq连接断开后，我们能够自动的恢复；</li>\n<li>服务中断机制，rabbitmq连接断开，我们的服务也中断，再通过某个服务能够拉起（守护进程）</li>\n</ol>\n<p>再AMQP_CPP中重连的机制不好处理，所以我们选择第二种方法</p>\n","site":{"data":{}},"excerpt":"","more":"<p>​        记录<a href=\"https://github.com/CopernicaMarketingSoftware/AMQP-CPP\" target=\"_blank\" rel=\"noopener\">AMQP_CPP</a>的使用过程中出现的问题，我是用的主要是<code>LibEvHandler</code>这个类来进行处理的,以下所有的问题都是在这个基础上面,仔细的查看头文件可以了解更多的使用方法。</p>\n<h3 id=\"任务执行长时间后导致连接丢失的问题\"><a href=\"#任务执行长时间后导致连接丢失的问题\" class=\"headerlink\" title=\"任务执行长时间后导致连接丢失的问题\"></a>任务执行长时间后导致连接丢失的问题</h3><p><code>LibEvHandler</code>中对于rabbitmq的默认心跳是60s，如果当前队列没有任务处理，则其会自动的发送心跳，保持client和server之间的连接，如果你执行某个任务的时间过长，大于60s，则在执行任务期间，其不会自动的发送心跳导致两者之间的连接断开，导致下次获取数据时提示链接错误，获取数据失败。解决办法：</p>\n<ol>\n<li><p>重写LibEvHandler中的<code>onNegotiate</code>以及<code>onHeartbeat</code>这两个方法，前者用于设置心跳的时间，后者用于心跳发送时的函数。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;&gt; <span class=\"number\">23</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyHandler</span> :</span> <span class=\"keyword\">public</span> AMQP::LibEvHandler &#123;</span><br><span class=\"line\">   <span class=\"number\">24</span>  </span><br><span class=\"line\">   <span class=\"number\">25</span>    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">26</span>     MyHandler(struct ev_loop* loop) : AMQP::LibEvHandler(loop) &#123;&#125;</span><br><span class=\"line\">   <span class=\"number\">27</span>     <span class=\"comment\">//解决consume在处理任务时的连接超时的问题</span></span><br><span class=\"line\">&gt;&gt; <span class=\"number\">28</span>     <span class=\"function\"><span class=\"keyword\">uint16_t</span> <span class=\"title\">onNegotiate</span><span class=\"params\">(AMQP::TcpConnection* connection, <span class=\"keyword\">uint16_t</span> timeout)</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">29</span>         <span class=\"keyword\">return</span> <span class=\"number\">70</span>;<span class=\"comment\">//必须设置一个值</span></span><br><span class=\"line\">   <span class=\"number\">30</span>     &#125;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">31</span>     <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"keyword\">void</span> <span class=\"title\">onHeartbeat</span><span class=\"params\">(AMQP::TcpConnection* connection)</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"number\">32</span>         connection-&gt;heartbeat();</span><br><span class=\"line\">   <span class=\"number\">33</span>     &#125;</span><br><span class=\"line\">   <span class=\"number\">34</span> &#125;;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>另外开一个线程，定时手动的发送心跳给rabbitmq</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"number\">46</span>     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">&gt;&gt; <span class=\"number\">47</span>         <span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">ev_loop</span>* <span class=\"title\">loop</span> = <span class=\"title\">ev_loop_new</span>();</span></span><br><span class=\"line\">   <span class=\"number\">48</span>         <span class=\"comment\">// AMQP::LibEvHandler handler(loop);</span></span><br><span class=\"line\">   <span class=\"number\">49</span>         <span class=\"function\">MyHandler <span class=\"title\">handler</span><span class=\"params\">(loop)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">50</span>         <span class=\"function\">AMQP::TcpConnection <span class=\"title\">connection</span><span class=\"params\">(&amp;handler, *_address)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">51</span>         _connection = &amp;connection;</span><br><span class=\"line\">   <span class=\"number\">52</span>         <span class=\"function\">AMQP::TcpChannel <span class=\"title\">channel</span><span class=\"params\">(&amp;connection)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">53</span>         <span class=\"comment\">//// channel.setQos(1);</span></span><br><span class=\"line\">   <span class=\"number\">54</span>         _channel = &amp;channel;</span><br><span class=\"line\">              <span class=\"comment\">//另外开一个线程，用于检测rabbitmq的链接，以及定时的发送心跳</span></span><br><span class=\"line\">   <span class=\"number\">55</span>         <span class=\"function\"><span class=\"built_in\">std</span>::thread <span class=\"title\">check</span><span class=\"params\">(&amp;Consume::checkConnect, <span class=\"keyword\">this</span>)</span></span>;</span><br><span class=\"line\">   <span class=\"number\">56</span>         <span class=\"comment\">// 1s后执行一次回调，之后每10s执行一次</span></span><br><span class=\"line\">   <span class=\"number\">57</span>         ev_timer_init(&amp;_timer, TClass::callback, <span class=\"number\">1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">   <span class=\"number\">58</span>         _timer.data = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">   <span class=\"number\">59</span>         ev_timer_start(loop, &amp;_timer);</span><br><span class=\"line\">   <span class=\"number\">60</span>         ev_run(loop, <span class=\"number\">0</span>);</span><br><span class=\"line\">   <span class=\"number\">61</span>         check.join();</span><br><span class=\"line\">   <span class=\"number\">62</span>     &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">165</span>     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">checkConnect</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"><span class=\"number\">166</span>         <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">//判读链接是否可用，可用即发送心跳</span></span><br><span class=\"line\"><span class=\"number\">167</span>             <span class=\"keyword\">if</span> (_connection-&gt;usable()) _connection-&gt;heartbeat();</span><br><span class=\"line\">                <span class=\"comment\">//判读当前通道是否可用，如果失败则杀死当前程序</span></span><br><span class=\"line\"><span class=\"number\">168</span>             _channel-&gt;onError([&amp;](<span class=\"keyword\">const</span> <span class=\"keyword\">char</span>* message) &#123;</span><br><span class=\"line\"><span class=\"number\">169</span>                 LOG(ERROR) &lt;&lt; <span class=\"string\">\"The channel is error, exit: \"</span> &lt;&lt; message;</span><br><span class=\"line\"><span class=\"number\">170</span>                 killAll();</span><br><span class=\"line\"><span class=\"number\">171</span>             &#125;);</span><br><span class=\"line\">                <span class=\"comment\">//判读当前连接是否关闭，如果关闭则杀死当前程序</span></span><br><span class=\"line\"><span class=\"number\">172</span>             <span class=\"keyword\">if</span> (_connection-&gt;closed()) &#123;</span><br><span class=\"line\"><span class=\"number\">173</span>                 <span class=\"keyword\">if</span> (_connection != <span class=\"literal\">NULL</span>) _connection-&gt;close();</span><br><span class=\"line\"><span class=\"number\">174</span>                 LOG(ERROR) &lt;&lt; <span class=\"string\">\"The connection is closed,exit\"</span>;</span><br><span class=\"line\"><span class=\"number\">175</span>                 killAll();</span><br><span class=\"line\"><span class=\"number\">176</span>             &#125;</span><br><span class=\"line\">                <span class=\"comment\">//sleep 5s</span></span><br><span class=\"line\"><span class=\"number\">177</span>             Poco::Thread::sleep(<span class=\"number\">5000</span>);</span><br><span class=\"line\"><span class=\"number\">178</span>         &#125;</span><br><span class=\"line\"><span class=\"number\">179</span>     &#125;</span><br><span class=\"line\"><span class=\"number\">180</span>     <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">killAll</span><span class=\"params\">()</span> </span>&#123; kill(<span class=\"number\">0</span>, SIGABRT); &#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"每次仅仅处理一个任务的问题\"><a href=\"#每次仅仅处理一个任务的问题\" class=\"headerlink\" title=\"每次仅仅处理一个任务的问题\"></a>每次仅仅处理一个任务的问题</h3><p>​        对于消息者来说，监听一个队列，如果队列里面有多条的数据，其会一下子都消费掉（有个最大值可查文档），比如你的队列里面有100条数据，其会都拿到放到内存中，如果过程中你的服务挂掉，则数据会丢失，为了解决这个问题，我们需要设置消费者每次拿到的数据量。AMQP_CPP中使用<code>setQos()</code>来进行设置</p>\n<font color=\"red\"><code>注意：仅对手动ack有效</code></font>\n\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">AMQP::TcpChannel <span class=\"title\">channel</span><span class=\"params\">(&amp;connection)</span></span>;</span><br><span class=\"line\">channel.setQos(<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"无法重新连接的问题\"><a href=\"#无法重新连接的问题\" class=\"headerlink\" title=\"无法重新连接的问题\"></a>无法重新连接的问题</h3><p>如果我们的rabbitmq挂了我们的服务应该怎么办了，一般对于这种有两种方法来处理</p>\n<ol>\n<li>实现rabbitmq的重试机制，rabbitmq连接断开后，我们能够自动的恢复；</li>\n<li>服务中断机制，rabbitmq连接断开，我们的服务也中断，再通过某个服务能够拉起（守护进程）</li>\n</ol>\n<p>再AMQP_CPP中重连的机制不好处理，所以我们选择第二种方法</p>\n"},{"title":"s3-libs3源码编译","abbrlink":3714481837,"date":"2020-07-14T10:06:16.000Z","_content":"\n### 依赖\n\n~~~\nyum install libxml2-devel\n\nyum install libxml2\n\nyum install libcurl-devel\n~~~\n\n### 安装\n\n~~~\nmake\ncd build/lib\n~~~\n\n`有两个文件libs3.so.4`","source":"_posts/s3-libs3源码编译.md","raw":"---\ntitle: s3-libs3源码编译\ncategories: [Database,s3]\ntags:\n  - s3\nabbrlink: 3714481837\ndate: 2020-07-14 18:06:16\n---\n\n### 依赖\n\n~~~\nyum install libxml2-devel\n\nyum install libxml2\n\nyum install libcurl-devel\n~~~\n\n### 安装\n\n~~~\nmake\ncd build/lib\n~~~\n\n`有两个文件libs3.so.4`","slug":"s3-libs3源码编译","published":1,"updated":"2021-02-08T06:40:36.257Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxe003llkq5lpt4q5ce","content":"<h3 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libxml2-devel</span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2</span><br><span class=\"line\"></span><br><span class=\"line\">yum install libcurl-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make</span><br><span class=\"line\">cd build/lib</span><br></pre></td></tr></table></figure>\n<p><code>有两个文件libs3.so.4</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install libxml2-devel</span><br><span class=\"line\"></span><br><span class=\"line\">yum install libxml2</span><br><span class=\"line\"></span><br><span class=\"line\">yum install libcurl-devel</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make</span><br><span class=\"line\">cd build/lib</span><br></pre></td></tr></table></figure>\n<p><code>有两个文件libs3.so.4</code></p>\n"},{"title":"rabbitmq-AMQPCPP的编译","abbrlink":3142310907,"date":"2020-07-27T09:01:57.000Z","_content":"\n###  下载\n\n~~~\ngit clone https://github.com/CopernicaMarketingSoftware/AMQP-CPP.git\n~~~\n\n### 编译\n\n~~~\ncd AMQP-CPP\nmkdir build\ncd build\n~~~\n\n~~~\ncmake -DAMQP-CPP_BUILD_SHARED=true -DAMQP-CPP_LINUX_TCP=true -DCMAKE_INSTALL_PREFIX=/usr/local/amqpcpp ..\nmake\nmake install\n~~~\n\n","source":"_posts/rabbitmq-AMQPCPP的编译.md","raw":"---\ntitle: rabbitmq-AMQPCPP的编译\ncategories: [Database,rabbitmq]\ntags:\n  - rabbitmq\nabbrlink: 3142310907\ndate: 2020-07-27 17:01:57\n---\n\n###  下载\n\n~~~\ngit clone https://github.com/CopernicaMarketingSoftware/AMQP-CPP.git\n~~~\n\n### 编译\n\n~~~\ncd AMQP-CPP\nmkdir build\ncd build\n~~~\n\n~~~\ncmake -DAMQP-CPP_BUILD_SHARED=true -DAMQP-CPP_LINUX_TCP=true -DCMAKE_INSTALL_PREFIX=/usr/local/amqpcpp ..\nmake\nmake install\n~~~\n\n","slug":"rabbitmq-AMQPCPP的编译","published":1,"updated":"2021-02-08T06:42:42.846Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxh003qlkq5nzsy7aqr","content":"<h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/CopernicaMarketingSoftware/AMQP-CPP.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd AMQP-CPP</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake -DAMQP-CPP_BUILD_SHARED=true -DAMQP-CPP_LINUX_TCP=true -DCMAKE_INSTALL_PREFIX=/usr/local/amqpcpp ..</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/CopernicaMarketingSoftware/AMQP-CPP.git</span><br></pre></td></tr></table></figure>\n<h3 id=\"编译\"><a href=\"#编译\" class=\"headerlink\" title=\"编译\"></a>编译</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd AMQP-CPP</span><br><span class=\"line\">mkdir build</span><br><span class=\"line\">cd build</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake -DAMQP-CPP_BUILD_SHARED=true -DAMQP-CPP_LINUX_TCP=true -DCMAKE_INSTALL_PREFIX=/usr/local/amqpcpp ..</span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n"},{"title":"s3-关于s3cmd的下载","abbrlink":3778876136,"date":"2019-03-18T10:02:31.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;很多人都用过对象存储，比如亚马逊的s3平台，我想大家都比较熟悉，今天来介绍一款工具，用来在centos7平台上方便的操作对象存储的东西，比如查看自己的桶，创建桶等。\n\n## s3cmd的下载 ##\n\n### 第一步下载get-pip.py\n>wget  https://bootstrap.pypa.io/get-pip.py\n\n### 第二步安装get-pip.py\n>python get-pip.py\n\n### 第三步安装s3cmd\n>pip install s3cmd\n\n### 第四步设置.s3cfg\n>设置三个比较主要的  \n>![设置access_key](/images/access_key.png)  \n>![设置host_bucket](/images/host_bucket.png)  \n>![设置secret_key](/images/secret_key.png)  \n\n\n","source":"_posts/s3-关于s3cmd的下载.md","raw":"---\ntitle: s3-关于s3cmd的下载\ncategories: [Database,s3]\ntags: [s3,cmd]\nabbrlink: 3778876136\ndate: 2019-03-18 18:02:31\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;很多人都用过对象存储，比如亚马逊的s3平台，我想大家都比较熟悉，今天来介绍一款工具，用来在centos7平台上方便的操作对象存储的东西，比如查看自己的桶，创建桶等。\n\n## s3cmd的下载 ##\n\n### 第一步下载get-pip.py\n>wget  https://bootstrap.pypa.io/get-pip.py\n\n### 第二步安装get-pip.py\n>python get-pip.py\n\n### 第三步安装s3cmd\n>pip install s3cmd\n\n### 第四步设置.s3cfg\n>设置三个比较主要的  \n>![设置access_key](/images/access_key.png)  \n>![设置host_bucket](/images/host_bucket.png)  \n>![设置secret_key](/images/secret_key.png)  \n\n\n","slug":"s3-关于s3cmd的下载","published":1,"updated":"2021-02-08T06:40:48.913Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxj003tlkq5xl6flym1","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;很多人都用过对象存储，比如亚马逊的s3平台，我想大家都比较熟悉，今天来介绍一款工具，用来在centos7平台上方便的操作对象存储的东西，比如查看自己的桶，创建桶等。</p>\n<h2 id=\"s3cmd的下载\"><a href=\"#s3cmd的下载\" class=\"headerlink\" title=\"s3cmd的下载\"></a>s3cmd的下载</h2><h3 id=\"第一步下载get-pip-py\"><a href=\"#第一步下载get-pip-py\" class=\"headerlink\" title=\"第一步下载get-pip.py\"></a>第一步下载get-pip.py</h3><blockquote>\n<p>wget  <a href=\"https://bootstrap.pypa.io/get-pip.py\" target=\"_blank\" rel=\"noopener\">https://bootstrap.pypa.io/get-pip.py</a></p>\n</blockquote>\n<h3 id=\"第二步安装get-pip-py\"><a href=\"#第二步安装get-pip-py\" class=\"headerlink\" title=\"第二步安装get-pip.py\"></a>第二步安装get-pip.py</h3><blockquote>\n<p>python get-pip.py</p>\n</blockquote>\n<h3 id=\"第三步安装s3cmd\"><a href=\"#第三步安装s3cmd\" class=\"headerlink\" title=\"第三步安装s3cmd\"></a>第三步安装s3cmd</h3><blockquote>\n<p>pip install s3cmd</p>\n</blockquote>\n<h3 id=\"第四步设置-s3cfg\"><a href=\"#第四步设置-s3cfg\" class=\"headerlink\" title=\"第四步设置.s3cfg\"></a>第四步设置.s3cfg</h3><blockquote>\n<p>设置三个比较主要的<br><img src=\"/images/access_key.png\" alt=\"设置access_key\"><br><img src=\"/images/host_bucket.png\" alt=\"设置host_bucket\"><br><img src=\"/images/secret_key.png\" alt=\"设置secret_key\">  </p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;很多人都用过对象存储，比如亚马逊的s3平台，我想大家都比较熟悉，今天来介绍一款工具，用来在centos7平台上方便的操作对象存储的东西，比如查看自己的桶，创建桶等。</p>\n<h2 id=\"s3cmd的下载\"><a href=\"#s3cmd的下载\" class=\"headerlink\" title=\"s3cmd的下载\"></a>s3cmd的下载</h2><h3 id=\"第一步下载get-pip-py\"><a href=\"#第一步下载get-pip-py\" class=\"headerlink\" title=\"第一步下载get-pip.py\"></a>第一步下载get-pip.py</h3><blockquote>\n<p>wget  <a href=\"https://bootstrap.pypa.io/get-pip.py\" target=\"_blank\" rel=\"noopener\">https://bootstrap.pypa.io/get-pip.py</a></p>\n</blockquote>\n<h3 id=\"第二步安装get-pip-py\"><a href=\"#第二步安装get-pip-py\" class=\"headerlink\" title=\"第二步安装get-pip.py\"></a>第二步安装get-pip.py</h3><blockquote>\n<p>python get-pip.py</p>\n</blockquote>\n<h3 id=\"第三步安装s3cmd\"><a href=\"#第三步安装s3cmd\" class=\"headerlink\" title=\"第三步安装s3cmd\"></a>第三步安装s3cmd</h3><blockquote>\n<p>pip install s3cmd</p>\n</blockquote>\n<h3 id=\"第四步设置-s3cfg\"><a href=\"#第四步设置-s3cfg\" class=\"headerlink\" title=\"第四步设置.s3cfg\"></a>第四步设置.s3cfg</h3><blockquote>\n<p>设置三个比较主要的<br><img src=\"/images/access_key.png\" alt=\"设置access_key\"><br><img src=\"/images/host_bucket.png\" alt=\"设置host_bucket\"><br><img src=\"/images/secret_key.png\" alt=\"设置secret_key\">  </p>\n</blockquote>\n"},{"title":"spider-centos7安装selenium模拟浏览器请求","abbrlink":933612194,"date":"2020-07-22T01:32:16.000Z","_content":"\n### 安装selenium\n\n~~~\npip install selenium\n~~~\n\n### 安装chrome浏览器\n\n##### 1，配置yum源\n\n在目录/etc/yum.repos.d/ 下新建文件 google-chrome.repo\n\n~~~\ncd /etc/yum.repos.d/\nvim google-chrome.repo\n~~~\n\n写入以下内容\n\n~~~\n[google-chrome]\nname=google-chrome\nbaseurl=http://dl.google.com/linux/chrome/rpm/stable/$basearch\nenabled=1\ngpgcheck=1\ngpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub\n~~~\n\n安装google chrome浏览器\n\n~~~\n yum -y install google-chrome-stable\n~~~\n\ngoogle官方源可能在中国无法使用，导致安装失败或者在国内无法更新，可以添加以下参数来安装\n\n~~~\nyum -y install google-chrome-stable --nogpgcheck\n~~~\n\n##### 运行chrome\n\n找到chrome路径，并做个软连接，方便使用：\n\n~~~\nwhich google-chrome-stable\nln -s xxx /bin/chrome\n~~~\n\n使用root用户启动chrome示例时会提示添加参数–no-sandbox flag\n\n~~~\nchrome --no-sandbox flag\n~~~\n\n### 安装chromedriver\n\n查看google-chrome的版本\n\n~~~\ngoogle-chrome --version\n~~~\n\nchromedriver版本支持的Chrome版本\n\n[chromeDriver官网](https://sites.google.com/a/chromium.org/chromedriver/downloads)官网一般比较慢\n\n[淘宝镜像](http://npm.taobao.org/mirrors/chromedriver/)\n\n移动chromedriver到/usr/bin\n\n### selenium+python验证\n\n运行一段test.py\n\n~~~python\nfrom selenium import webdriver                                                                                                       \nfrom selenium.webdriver.chrome.options import Options\n \nchrome_options = Options()\nchrome_options.add_argument(\"--headless\")\nchrome_options.add_argument('--disable-gpu')\nchrome_options.add_argument('--no-sandbox')    # 禁止沙箱模式，否则肯能会报错遇到chrome异常\nurl=\"https://www.west.cn/login.asp\"\nbrower=webdriver.Chrome(executable_path=\"/usr/bin/chromedriver\", chrome_options=chrome_options)\nbrower.get(url)\nprint(brower.current_url)\nbrower.get(\"https://www.west.cn/Manager/\")\nprint(brower.current_url)\nbrower.quit()\n~~~\n\n~~~\npython3.6 test.py\n~~~\n\n结果：\n\n~~~\nhttps://www.west.cn/login.asp\nhttps://www.west.cn/login.asp?pageStr=/Manager/Default.asp\n~~~\n\n### 使用pyautogui\n\n对于一些元素虽然页面可以点击，但是获取的元素无法点击，我们可以使用pyautogui来模拟鼠标的点击更加的方便\n\n~~~\npip install pyautogui\n~~~\n\n### 远程调用\n\n使用selenium-server-standalone进行远程调用，[详解可以看这篇连接](https://www.xiehai.win/java/2019/05/24/selenium-server-standalone.html)\n\n[selenium-server-standalone下载](http://selenium-release.storage.googleapis.com/index.html)\n\n##### jar8环境的安装\n\n[jar环境的安装](https://www.yaosansi.com/post/install-java-jdk-on-centos/)\n\n##### 参数配置\n\n参数配置方式\n\n~~~\n# 启动hub\njava -jar selenium-server-standalone-3.141.59.jar -role hub -maxSession 10 -port 4444\n# 启动node\njava -jar  -\"Dwebdriver.chrome.driver=C:\\\\tools\\\\driver\\\\chromedriver.exe\" selenium-server-standalone-3.141.59.jar -role node  -hub http://localhost:4444/grid/register -port 4445\n~~~\n\n配置文件方式\n\n~~~\n# 启动hub\njava -jar selenium-server-standalone-3.141.59.jar -role hub -hubConfig hub.json\n# 启动node\njava -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register -nodeConfig node.json\n~~~\n\n`hub.json`\n\n~~~json\n{\n  \"port\": 4444,\n  \"newSessionWaitTimeout\": -1,\n  \"servlets\": [],\n  \"capabilityMatcher\": \"org.openqa.grid.internal.utils.DefaultCapabilityMatcher\",\n  \"throwOnCapabilityNotPresent\": true,\n  \"nodePolling\": 5000,\n  \"cleanUpCycle\": 5000,\n  \"timeout\": 60,\n  \"browserTimeout\": 60,\n  \"maxSession\": 10,\n  \"jettyMaxThreads\": -1\n}\n~~~\n\n`node.json`\n\n~~~\n{\n  \"capabilities\": [\n\t{\n\t  \"browserName\": \"firefox\",\n\t  \"marionette\": true,\n\t  \"maxInstances\": 1,\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t},\n\t{\n\t  \"browserName\": \"chrome\",\n\t  \"maxInstances\": 3,\n\t  \"platform\": \"WINDOWS\",\n\t  \"webdriver.chrome.driver\": \"D:\\\\javaproject\\\\oATFWeb\\\\External\\\\chromedriver2.4.1.exe\",\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t},\n\t{\n\t  \"browserName\": \"internet explorer\",\n\t  \"platform\": \"WINDOWS\",\n\t  \"maxInstances\": 1,\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t},\n\t{\n\t  \"browserName\": \"safari\",\n\t  \"technologyPreview\": false,\n\t  \"platform\": \"MAC\",\n\t  \"maxInstances\": 1,\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t}\n  ],\n  \"proxy\": \"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\",\n  \"maxSession\": 5,\n  \"port\": 5555,\n  \"register\": true,\n  \"registerCycle\": 5000,\n  \"hub\": \"http://10.12.1.140:4444\",\n  \"nodeStatusCheckTimeout\": 5000,\n  \"nodePolling\": 5000,\n  \"role\": \"node\",\n  \"unregisterIfStillDownAfter\": 60000,\n  \"downPollingLimit\": 2,\n  \"debug\": false,\n  \"servlets\": [],\n  \"withoutServlets\": [],\n  \"custom\": {},\n  \"browserTimeout\": 60,\n  \"timeout\": 60\n}\n~~~\n\n`访问http://hub.ip:port/grid/console可以看到node的详细配置`\n\n##### 例子\n\n~~~python\nfrom selenium import webdriver\nfrom selenium.webdriver.remote.webdriver import WebDriver as RemoteWebDriver\nfrom selenium.webdriver.chrome.options import Options\nimport time\n \n \nchrome_options = Options()\n \nproxy='58.254.220.116:53579'\n#chrome_options.add_experimental_option('excludeSwitches', ['enable-automation'])\n#chrome_options.add_argument(\"--proxy-server=http://\" + proxy)\nchrome_options.add_argument(\"start-maximized\")\nchrome_options.add_argument(\"enable-automation\")\nchrome_options.add_argument(\"--headless\")\n#chrome_options.add_argument(\"blink-settings=imagesEnabled=false\")\nchrome_options.add_argument('--disable-gpu')\n#chrome_options.add_argument(\"--dns-prefetch-disable\")\n#chrome_options.add_argument(\"--no-proxy-server\")\nchrome_options.add_argument('--no-sandbox')    # 禁止沙箱模式，否则肯能会报错遇到chrome异常\n#url=\"https://www.365365918.com/#/AC/B1/C1/D8/E91032124/F3/I1/\"\n#url=\"https://www.365365918.com/\"\nurl=\"https://www.betvictor68.mobi/\"\n#url=\"https://blog.csdn.net/tiantiantdx/article/details/79434550?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight\"\n#url=\"https://juejin.im/entry/5b2ca6316fb9a00e7747561a\"\n#url=\"https://stackoverflow.com/questions/48450594/selenium-timed-out-receiving-message-from-renderer\"\n#url=\"https://zhuanlan.zhihu.com/p/111859925\"\n#打开google浏览器\n#brower=webdriver.Chrome(executable_path=\"/usr/bin/chromedriver\", chrome_options=chrome_options)\nbrower=RemoteWebDriver(command_executor=\"http://192.168.50.74:4444/wd/hub\", desired_capabilities=chrome_options.to_capabilities())\n#访问地址\nbrower.get(url)\n#设置请求的时间，等待js执行完毕\n#time.sleep(5)\nbrower.implicitly_wait(30);\npageSource=brower.find_element_by_xpath(\"//*\").get_attribute(\"outerHTML\")\n#pageSource=brower.execute_script(\"return document.documentElement.outerHTML\")\nfo = open(\"/root/bet365.html\", \"w\")\nfo.write(pageSource)\nfo.close()\n#print(pageSource)\n#退出Google浏览器\nbrower.quit()\n~~~\n\n### windows搭建python的环境\n\n[直接到官网](https://www.python.org/downloads/windows/)下载对应版本的\n\nsubmit text3执行python\n\n##### 设置build\n\n~~~\n打开sublime，依次点击菜单Tools-->Build System-->New Build System\n~~~\n\n~~~\n{\n\t\"cmd\": [\"D:\\helios\\software\\python\\python.exe\", \"-u\", \"$file\"],\n\t\"file_regex\": \"[ ]File \\\"(…?)\\\", line ([0-9]*)\",\n\t\"selector\": \"source.python\"\n}\n~~~\n\n~~~\nctrl + b来执行python\n~~~\n\n\n\n","source":"_posts/spider-centos7安装selenium模拟浏览器请求.md","raw":"---\ntitle: spider-centos7安装selenium模拟浏览器请求\ncategories: [Tool,spider]\ntags:\n  - selenium\nabbrlink: 933612194\ndate: 2020-07-22 09:32:16\n---\n\n### 安装selenium\n\n~~~\npip install selenium\n~~~\n\n### 安装chrome浏览器\n\n##### 1，配置yum源\n\n在目录/etc/yum.repos.d/ 下新建文件 google-chrome.repo\n\n~~~\ncd /etc/yum.repos.d/\nvim google-chrome.repo\n~~~\n\n写入以下内容\n\n~~~\n[google-chrome]\nname=google-chrome\nbaseurl=http://dl.google.com/linux/chrome/rpm/stable/$basearch\nenabled=1\ngpgcheck=1\ngpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub\n~~~\n\n安装google chrome浏览器\n\n~~~\n yum -y install google-chrome-stable\n~~~\n\ngoogle官方源可能在中国无法使用，导致安装失败或者在国内无法更新，可以添加以下参数来安装\n\n~~~\nyum -y install google-chrome-stable --nogpgcheck\n~~~\n\n##### 运行chrome\n\n找到chrome路径，并做个软连接，方便使用：\n\n~~~\nwhich google-chrome-stable\nln -s xxx /bin/chrome\n~~~\n\n使用root用户启动chrome示例时会提示添加参数–no-sandbox flag\n\n~~~\nchrome --no-sandbox flag\n~~~\n\n### 安装chromedriver\n\n查看google-chrome的版本\n\n~~~\ngoogle-chrome --version\n~~~\n\nchromedriver版本支持的Chrome版本\n\n[chromeDriver官网](https://sites.google.com/a/chromium.org/chromedriver/downloads)官网一般比较慢\n\n[淘宝镜像](http://npm.taobao.org/mirrors/chromedriver/)\n\n移动chromedriver到/usr/bin\n\n### selenium+python验证\n\n运行一段test.py\n\n~~~python\nfrom selenium import webdriver                                                                                                       \nfrom selenium.webdriver.chrome.options import Options\n \nchrome_options = Options()\nchrome_options.add_argument(\"--headless\")\nchrome_options.add_argument('--disable-gpu')\nchrome_options.add_argument('--no-sandbox')    # 禁止沙箱模式，否则肯能会报错遇到chrome异常\nurl=\"https://www.west.cn/login.asp\"\nbrower=webdriver.Chrome(executable_path=\"/usr/bin/chromedriver\", chrome_options=chrome_options)\nbrower.get(url)\nprint(brower.current_url)\nbrower.get(\"https://www.west.cn/Manager/\")\nprint(brower.current_url)\nbrower.quit()\n~~~\n\n~~~\npython3.6 test.py\n~~~\n\n结果：\n\n~~~\nhttps://www.west.cn/login.asp\nhttps://www.west.cn/login.asp?pageStr=/Manager/Default.asp\n~~~\n\n### 使用pyautogui\n\n对于一些元素虽然页面可以点击，但是获取的元素无法点击，我们可以使用pyautogui来模拟鼠标的点击更加的方便\n\n~~~\npip install pyautogui\n~~~\n\n### 远程调用\n\n使用selenium-server-standalone进行远程调用，[详解可以看这篇连接](https://www.xiehai.win/java/2019/05/24/selenium-server-standalone.html)\n\n[selenium-server-standalone下载](http://selenium-release.storage.googleapis.com/index.html)\n\n##### jar8环境的安装\n\n[jar环境的安装](https://www.yaosansi.com/post/install-java-jdk-on-centos/)\n\n##### 参数配置\n\n参数配置方式\n\n~~~\n# 启动hub\njava -jar selenium-server-standalone-3.141.59.jar -role hub -maxSession 10 -port 4444\n# 启动node\njava -jar  -\"Dwebdriver.chrome.driver=C:\\\\tools\\\\driver\\\\chromedriver.exe\" selenium-server-standalone-3.141.59.jar -role node  -hub http://localhost:4444/grid/register -port 4445\n~~~\n\n配置文件方式\n\n~~~\n# 启动hub\njava -jar selenium-server-standalone-3.141.59.jar -role hub -hubConfig hub.json\n# 启动node\njava -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register -nodeConfig node.json\n~~~\n\n`hub.json`\n\n~~~json\n{\n  \"port\": 4444,\n  \"newSessionWaitTimeout\": -1,\n  \"servlets\": [],\n  \"capabilityMatcher\": \"org.openqa.grid.internal.utils.DefaultCapabilityMatcher\",\n  \"throwOnCapabilityNotPresent\": true,\n  \"nodePolling\": 5000,\n  \"cleanUpCycle\": 5000,\n  \"timeout\": 60,\n  \"browserTimeout\": 60,\n  \"maxSession\": 10,\n  \"jettyMaxThreads\": -1\n}\n~~~\n\n`node.json`\n\n~~~\n{\n  \"capabilities\": [\n\t{\n\t  \"browserName\": \"firefox\",\n\t  \"marionette\": true,\n\t  \"maxInstances\": 1,\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t},\n\t{\n\t  \"browserName\": \"chrome\",\n\t  \"maxInstances\": 3,\n\t  \"platform\": \"WINDOWS\",\n\t  \"webdriver.chrome.driver\": \"D:\\\\javaproject\\\\oATFWeb\\\\External\\\\chromedriver2.4.1.exe\",\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t},\n\t{\n\t  \"browserName\": \"internet explorer\",\n\t  \"platform\": \"WINDOWS\",\n\t  \"maxInstances\": 1,\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t},\n\t{\n\t  \"browserName\": \"safari\",\n\t  \"technologyPreview\": false,\n\t  \"platform\": \"MAC\",\n\t  \"maxInstances\": 1,\n\t  \"seleniumProtocol\": \"WebDriver\"\n\t}\n  ],\n  \"proxy\": \"org.openqa.grid.selenium.proxy.DefaultRemoteProxy\",\n  \"maxSession\": 5,\n  \"port\": 5555,\n  \"register\": true,\n  \"registerCycle\": 5000,\n  \"hub\": \"http://10.12.1.140:4444\",\n  \"nodeStatusCheckTimeout\": 5000,\n  \"nodePolling\": 5000,\n  \"role\": \"node\",\n  \"unregisterIfStillDownAfter\": 60000,\n  \"downPollingLimit\": 2,\n  \"debug\": false,\n  \"servlets\": [],\n  \"withoutServlets\": [],\n  \"custom\": {},\n  \"browserTimeout\": 60,\n  \"timeout\": 60\n}\n~~~\n\n`访问http://hub.ip:port/grid/console可以看到node的详细配置`\n\n##### 例子\n\n~~~python\nfrom selenium import webdriver\nfrom selenium.webdriver.remote.webdriver import WebDriver as RemoteWebDriver\nfrom selenium.webdriver.chrome.options import Options\nimport time\n \n \nchrome_options = Options()\n \nproxy='58.254.220.116:53579'\n#chrome_options.add_experimental_option('excludeSwitches', ['enable-automation'])\n#chrome_options.add_argument(\"--proxy-server=http://\" + proxy)\nchrome_options.add_argument(\"start-maximized\")\nchrome_options.add_argument(\"enable-automation\")\nchrome_options.add_argument(\"--headless\")\n#chrome_options.add_argument(\"blink-settings=imagesEnabled=false\")\nchrome_options.add_argument('--disable-gpu')\n#chrome_options.add_argument(\"--dns-prefetch-disable\")\n#chrome_options.add_argument(\"--no-proxy-server\")\nchrome_options.add_argument('--no-sandbox')    # 禁止沙箱模式，否则肯能会报错遇到chrome异常\n#url=\"https://www.365365918.com/#/AC/B1/C1/D8/E91032124/F3/I1/\"\n#url=\"https://www.365365918.com/\"\nurl=\"https://www.betvictor68.mobi/\"\n#url=\"https://blog.csdn.net/tiantiantdx/article/details/79434550?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight\"\n#url=\"https://juejin.im/entry/5b2ca6316fb9a00e7747561a\"\n#url=\"https://stackoverflow.com/questions/48450594/selenium-timed-out-receiving-message-from-renderer\"\n#url=\"https://zhuanlan.zhihu.com/p/111859925\"\n#打开google浏览器\n#brower=webdriver.Chrome(executable_path=\"/usr/bin/chromedriver\", chrome_options=chrome_options)\nbrower=RemoteWebDriver(command_executor=\"http://192.168.50.74:4444/wd/hub\", desired_capabilities=chrome_options.to_capabilities())\n#访问地址\nbrower.get(url)\n#设置请求的时间，等待js执行完毕\n#time.sleep(5)\nbrower.implicitly_wait(30);\npageSource=brower.find_element_by_xpath(\"//*\").get_attribute(\"outerHTML\")\n#pageSource=brower.execute_script(\"return document.documentElement.outerHTML\")\nfo = open(\"/root/bet365.html\", \"w\")\nfo.write(pageSource)\nfo.close()\n#print(pageSource)\n#退出Google浏览器\nbrower.quit()\n~~~\n\n### windows搭建python的环境\n\n[直接到官网](https://www.python.org/downloads/windows/)下载对应版本的\n\nsubmit text3执行python\n\n##### 设置build\n\n~~~\n打开sublime，依次点击菜单Tools-->Build System-->New Build System\n~~~\n\n~~~\n{\n\t\"cmd\": [\"D:\\helios\\software\\python\\python.exe\", \"-u\", \"$file\"],\n\t\"file_regex\": \"[ ]File \\\"(…?)\\\", line ([0-9]*)\",\n\t\"selector\": \"source.python\"\n}\n~~~\n\n~~~\nctrl + b来执行python\n~~~\n\n\n\n","slug":"spider-centos7安装selenium模拟浏览器请求","published":1,"updated":"2021-02-08T06:53:54.113Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxl003ylkq59ssuku0u","content":"<h3 id=\"安装selenium\"><a href=\"#安装selenium\" class=\"headerlink\" title=\"安装selenium\"></a>安装selenium</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install selenium</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装chrome浏览器\"><a href=\"#安装chrome浏览器\" class=\"headerlink\" title=\"安装chrome浏览器\"></a>安装chrome浏览器</h3><h5 id=\"1，配置yum源\"><a href=\"#1，配置yum源\" class=\"headerlink\" title=\"1，配置yum源\"></a>1，配置yum源</h5><p>在目录/etc/yum.repos.d/ 下新建文件 google-chrome.repo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/yum.repos.d/</span><br><span class=\"line\">vim google-chrome.repo</span><br></pre></td></tr></table></figure>\n<p>写入以下内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[google-chrome]</span><br><span class=\"line\">name=google-chrome</span><br><span class=\"line\">baseurl=http://dl.google.com/linux/chrome/rpm/stable/$basearch</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub</span><br></pre></td></tr></table></figure>\n<p>安装google chrome浏览器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install google-chrome-stable</span><br></pre></td></tr></table></figure>\n<p>google官方源可能在中国无法使用，导致安装失败或者在国内无法更新，可以添加以下参数来安装</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install google-chrome-stable --nogpgcheck</span><br></pre></td></tr></table></figure>\n<h5 id=\"运行chrome\"><a href=\"#运行chrome\" class=\"headerlink\" title=\"运行chrome\"></a>运行chrome</h5><p>找到chrome路径，并做个软连接，方便使用：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">which google-chrome-stable</span><br><span class=\"line\">ln -s xxx /bin/chrome</span><br></pre></td></tr></table></figure>\n<p>使用root用户启动chrome示例时会提示添加参数–no-sandbox flag</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chrome --no-sandbox flag</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装chromedriver\"><a href=\"#安装chromedriver\" class=\"headerlink\" title=\"安装chromedriver\"></a>安装chromedriver</h3><p>查看google-chrome的版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">google-chrome --version</span><br></pre></td></tr></table></figure>\n<p>chromedriver版本支持的Chrome版本</p>\n<p><a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" target=\"_blank\" rel=\"noopener\">chromeDriver官网</a>官网一般比较慢</p>\n<p><a href=\"http://npm.taobao.org/mirrors/chromedriver/\" target=\"_blank\" rel=\"noopener\">淘宝镜像</a></p>\n<p>移动chromedriver到/usr/bin</p>\n<h3 id=\"selenium-python验证\"><a href=\"#selenium-python验证\" class=\"headerlink\" title=\"selenium+python验证\"></a>selenium+python验证</h3><p>运行一段test.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver                                                                                                       </span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.chrome.options <span class=\"keyword\">import</span> Options</span><br><span class=\"line\"> </span><br><span class=\"line\">chrome_options = Options()</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"--headless\"</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--disable-gpu'</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--no-sandbox'</span>)    <span class=\"comment\"># 禁止沙箱模式，否则肯能会报错遇到chrome异常</span></span><br><span class=\"line\">url=<span class=\"string\">\"https://www.west.cn/login.asp\"</span></span><br><span class=\"line\">brower=webdriver.Chrome(executable_path=<span class=\"string\">\"/usr/bin/chromedriver\"</span>, chrome_options=chrome_options)</span><br><span class=\"line\">brower.get(url)</span><br><span class=\"line\">print(brower.current_url)</span><br><span class=\"line\">brower.get(<span class=\"string\">\"https://www.west.cn/Manager/\"</span>)</span><br><span class=\"line\">print(brower.current_url)</span><br><span class=\"line\">brower.quit()</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3.6 test.py</span><br></pre></td></tr></table></figure>\n<p>结果：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://www.west.cn/login.asp</span><br><span class=\"line\">https://www.west.cn/login.asp?pageStr=/Manager/Default.asp</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用pyautogui\"><a href=\"#使用pyautogui\" class=\"headerlink\" title=\"使用pyautogui\"></a>使用pyautogui</h3><p>对于一些元素虽然页面可以点击，但是获取的元素无法点击，我们可以使用pyautogui来模拟鼠标的点击更加的方便</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pyautogui</span><br></pre></td></tr></table></figure>\n<h3 id=\"远程调用\"><a href=\"#远程调用\" class=\"headerlink\" title=\"远程调用\"></a>远程调用</h3><p>使用selenium-server-standalone进行远程调用，<a href=\"https://www.xiehai.win/java/2019/05/24/selenium-server-standalone.html\" target=\"_blank\" rel=\"noopener\">详解可以看这篇连接</a></p>\n<p><a href=\"http://selenium-release.storage.googleapis.com/index.html\" target=\"_blank\" rel=\"noopener\">selenium-server-standalone下载</a></p>\n<h5 id=\"jar8环境的安装\"><a href=\"#jar8环境的安装\" class=\"headerlink\" title=\"jar8环境的安装\"></a>jar8环境的安装</h5><p><a href=\"https://www.yaosansi.com/post/install-java-jdk-on-centos/\" target=\"_blank\" rel=\"noopener\">jar环境的安装</a></p>\n<h5 id=\"参数配置\"><a href=\"#参数配置\" class=\"headerlink\" title=\"参数配置\"></a>参数配置</h5><p>参数配置方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动hub</span><br><span class=\"line\">java -jar selenium-server-standalone-3.141.59.jar -role hub -maxSession 10 -port 4444</span><br><span class=\"line\"># 启动node</span><br><span class=\"line\">java -jar  -&quot;Dwebdriver.chrome.driver=C:\\\\tools\\\\driver\\\\chromedriver.exe&quot; selenium-server-standalone-3.141.59.jar -role node  -hub http://localhost:4444/grid/register -port 4445</span><br></pre></td></tr></table></figure>\n<p>配置文件方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动hub</span><br><span class=\"line\">java -jar selenium-server-standalone-3.141.59.jar -role hub -hubConfig hub.json</span><br><span class=\"line\"># 启动node</span><br><span class=\"line\">java -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register -nodeConfig node.json</span><br></pre></td></tr></table></figure>\n<p><code>hub.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"port\"</span>: <span class=\"number\">4444</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"newSessionWaitTimeout\"</span>: <span class=\"number\">-1</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"servlets\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"capabilityMatcher\"</span>: <span class=\"string\">\"org.openqa.grid.internal.utils.DefaultCapabilityMatcher\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"throwOnCapabilityNotPresent\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nodePolling\"</span>: <span class=\"number\">5000</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"cleanUpCycle\"</span>: <span class=\"number\">5000</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"timeout\"</span>: <span class=\"number\">60</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"browserTimeout\"</span>: <span class=\"number\">60</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"maxSession\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"jettyMaxThreads\"</span>: <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>node.json</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;capabilities&quot;: [</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;firefox&quot;,</span><br><span class=\"line\">\t  &quot;marionette&quot;: true,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 1,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;chrome&quot;,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 3,</span><br><span class=\"line\">\t  &quot;platform&quot;: &quot;WINDOWS&quot;,</span><br><span class=\"line\">\t  &quot;webdriver.chrome.driver&quot;: &quot;D:\\\\javaproject\\\\oATFWeb\\\\External\\\\chromedriver2.4.1.exe&quot;,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;internet explorer&quot;,</span><br><span class=\"line\">\t  &quot;platform&quot;: &quot;WINDOWS&quot;,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 1,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;safari&quot;,</span><br><span class=\"line\">\t  &quot;technologyPreview&quot;: false,</span><br><span class=\"line\">\t  &quot;platform&quot;: &quot;MAC&quot;,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 1,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  &quot;proxy&quot;: &quot;org.openqa.grid.selenium.proxy.DefaultRemoteProxy&quot;,</span><br><span class=\"line\">  &quot;maxSession&quot;: 5,</span><br><span class=\"line\">  &quot;port&quot;: 5555,</span><br><span class=\"line\">  &quot;register&quot;: true,</span><br><span class=\"line\">  &quot;registerCycle&quot;: 5000,</span><br><span class=\"line\">  &quot;hub&quot;: &quot;http://10.12.1.140:4444&quot;,</span><br><span class=\"line\">  &quot;nodeStatusCheckTimeout&quot;: 5000,</span><br><span class=\"line\">  &quot;nodePolling&quot;: 5000,</span><br><span class=\"line\">  &quot;role&quot;: &quot;node&quot;,</span><br><span class=\"line\">  &quot;unregisterIfStillDownAfter&quot;: 60000,</span><br><span class=\"line\">  &quot;downPollingLimit&quot;: 2,</span><br><span class=\"line\">  &quot;debug&quot;: false,</span><br><span class=\"line\">  &quot;servlets&quot;: [],</span><br><span class=\"line\">  &quot;withoutServlets&quot;: [],</span><br><span class=\"line\">  &quot;custom&quot;: &#123;&#125;,</span><br><span class=\"line\">  &quot;browserTimeout&quot;: 60,</span><br><span class=\"line\">  &quot;timeout&quot;: 60</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>访问http://hub.ip:port/grid/console可以看到node的详细配置</code></p>\n<h5 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.remote.webdriver <span class=\"keyword\">import</span> WebDriver <span class=\"keyword\">as</span> RemoteWebDriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.chrome.options <span class=\"keyword\">import</span> Options</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">chrome_options = Options()</span><br><span class=\"line\"> </span><br><span class=\"line\">proxy=<span class=\"string\">'58.254.220.116:53579'</span></span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_experimental_option('excludeSwitches', ['enable-automation'])</span></span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"--proxy-server=http://\" + proxy)</span></span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"start-maximized\"</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"enable-automation\"</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"--headless\"</span>)</span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"blink-settings=imagesEnabled=false\")</span></span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--disable-gpu'</span>)</span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"--dns-prefetch-disable\")</span></span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"--no-proxy-server\")</span></span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--no-sandbox'</span>)    <span class=\"comment\"># 禁止沙箱模式，否则肯能会报错遇到chrome异常</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://www.365365918.com/#/AC/B1/C1/D8/E91032124/F3/I1/\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://www.365365918.com/\"</span></span><br><span class=\"line\">url=<span class=\"string\">\"https://www.betvictor68.mobi/\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://blog.csdn.net/tiantiantdx/article/details/79434550?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://juejin.im/entry/5b2ca6316fb9a00e7747561a\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://stackoverflow.com/questions/48450594/selenium-timed-out-receiving-message-from-renderer\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://zhuanlan.zhihu.com/p/111859925\"</span></span><br><span class=\"line\"><span class=\"comment\">#打开google浏览器</span></span><br><span class=\"line\"><span class=\"comment\">#brower=webdriver.Chrome(executable_path=\"/usr/bin/chromedriver\", chrome_options=chrome_options)</span></span><br><span class=\"line\">brower=RemoteWebDriver(command_executor=<span class=\"string\">\"http://192.168.50.74:4444/wd/hub\"</span>, desired_capabilities=chrome_options.to_capabilities())</span><br><span class=\"line\"><span class=\"comment\">#访问地址</span></span><br><span class=\"line\">brower.get(url)</span><br><span class=\"line\"><span class=\"comment\">#设置请求的时间，等待js执行完毕</span></span><br><span class=\"line\"><span class=\"comment\">#time.sleep(5)</span></span><br><span class=\"line\">brower.implicitly_wait(<span class=\"number\">30</span>);</span><br><span class=\"line\">pageSource=brower.find_element_by_xpath(<span class=\"string\">\"//*\"</span>).get_attribute(<span class=\"string\">\"outerHTML\"</span>)</span><br><span class=\"line\"><span class=\"comment\">#pageSource=brower.execute_script(\"return document.documentElement.outerHTML\")</span></span><br><span class=\"line\">fo = open(<span class=\"string\">\"/root/bet365.html\"</span>, <span class=\"string\">\"w\"</span>)</span><br><span class=\"line\">fo.write(pageSource)</span><br><span class=\"line\">fo.close()</span><br><span class=\"line\"><span class=\"comment\">#print(pageSource)</span></span><br><span class=\"line\"><span class=\"comment\">#退出Google浏览器</span></span><br><span class=\"line\">brower.quit()</span><br></pre></td></tr></table></figure>\n<h3 id=\"windows搭建python的环境\"><a href=\"#windows搭建python的环境\" class=\"headerlink\" title=\"windows搭建python的环境\"></a>windows搭建python的环境</h3><p><a href=\"https://www.python.org/downloads/windows/\" target=\"_blank\" rel=\"noopener\">直接到官网</a>下载对应版本的</p>\n<p>submit text3执行python</p>\n<h5 id=\"设置build\"><a href=\"#设置build\" class=\"headerlink\" title=\"设置build\"></a>设置build</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">打开sublime，依次点击菜单Tools--&gt;Build System--&gt;New Build System</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t&quot;cmd&quot;: [&quot;D:\\helios\\software\\python\\python.exe&quot;, &quot;-u&quot;, &quot;$file&quot;],</span><br><span class=\"line\">\t&quot;file_regex&quot;: &quot;[ ]File \\&quot;(…?)\\&quot;, line ([0-9]*)&quot;,</span><br><span class=\"line\">\t&quot;selector&quot;: &quot;source.python&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctrl + b来执行python</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"安装selenium\"><a href=\"#安装selenium\" class=\"headerlink\" title=\"安装selenium\"></a>安装selenium</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install selenium</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装chrome浏览器\"><a href=\"#安装chrome浏览器\" class=\"headerlink\" title=\"安装chrome浏览器\"></a>安装chrome浏览器</h3><h5 id=\"1，配置yum源\"><a href=\"#1，配置yum源\" class=\"headerlink\" title=\"1，配置yum源\"></a>1，配置yum源</h5><p>在目录/etc/yum.repos.d/ 下新建文件 google-chrome.repo</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /etc/yum.repos.d/</span><br><span class=\"line\">vim google-chrome.repo</span><br></pre></td></tr></table></figure>\n<p>写入以下内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[google-chrome]</span><br><span class=\"line\">name=google-chrome</span><br><span class=\"line\">baseurl=http://dl.google.com/linux/chrome/rpm/stable/$basearch</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=https://dl-ssl.google.com/linux/linux_signing_key.pub</span><br></pre></td></tr></table></figure>\n<p>安装google chrome浏览器</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install google-chrome-stable</span><br></pre></td></tr></table></figure>\n<p>google官方源可能在中国无法使用，导致安装失败或者在国内无法更新，可以添加以下参数来安装</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install google-chrome-stable --nogpgcheck</span><br></pre></td></tr></table></figure>\n<h5 id=\"运行chrome\"><a href=\"#运行chrome\" class=\"headerlink\" title=\"运行chrome\"></a>运行chrome</h5><p>找到chrome路径，并做个软连接，方便使用：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">which google-chrome-stable</span><br><span class=\"line\">ln -s xxx /bin/chrome</span><br></pre></td></tr></table></figure>\n<p>使用root用户启动chrome示例时会提示添加参数–no-sandbox flag</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chrome --no-sandbox flag</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装chromedriver\"><a href=\"#安装chromedriver\" class=\"headerlink\" title=\"安装chromedriver\"></a>安装chromedriver</h3><p>查看google-chrome的版本</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">google-chrome --version</span><br></pre></td></tr></table></figure>\n<p>chromedriver版本支持的Chrome版本</p>\n<p><a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" target=\"_blank\" rel=\"noopener\">chromeDriver官网</a>官网一般比较慢</p>\n<p><a href=\"http://npm.taobao.org/mirrors/chromedriver/\" target=\"_blank\" rel=\"noopener\">淘宝镜像</a></p>\n<p>移动chromedriver到/usr/bin</p>\n<h3 id=\"selenium-python验证\"><a href=\"#selenium-python验证\" class=\"headerlink\" title=\"selenium+python验证\"></a>selenium+python验证</h3><p>运行一段test.py</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver                                                                                                       </span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.chrome.options <span class=\"keyword\">import</span> Options</span><br><span class=\"line\"> </span><br><span class=\"line\">chrome_options = Options()</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"--headless\"</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--disable-gpu'</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--no-sandbox'</span>)    <span class=\"comment\"># 禁止沙箱模式，否则肯能会报错遇到chrome异常</span></span><br><span class=\"line\">url=<span class=\"string\">\"https://www.west.cn/login.asp\"</span></span><br><span class=\"line\">brower=webdriver.Chrome(executable_path=<span class=\"string\">\"/usr/bin/chromedriver\"</span>, chrome_options=chrome_options)</span><br><span class=\"line\">brower.get(url)</span><br><span class=\"line\">print(brower.current_url)</span><br><span class=\"line\">brower.get(<span class=\"string\">\"https://www.west.cn/Manager/\"</span>)</span><br><span class=\"line\">print(brower.current_url)</span><br><span class=\"line\">brower.quit()</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3.6 test.py</span><br></pre></td></tr></table></figure>\n<p>结果：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://www.west.cn/login.asp</span><br><span class=\"line\">https://www.west.cn/login.asp?pageStr=/Manager/Default.asp</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用pyautogui\"><a href=\"#使用pyautogui\" class=\"headerlink\" title=\"使用pyautogui\"></a>使用pyautogui</h3><p>对于一些元素虽然页面可以点击，但是获取的元素无法点击，我们可以使用pyautogui来模拟鼠标的点击更加的方便</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pyautogui</span><br></pre></td></tr></table></figure>\n<h3 id=\"远程调用\"><a href=\"#远程调用\" class=\"headerlink\" title=\"远程调用\"></a>远程调用</h3><p>使用selenium-server-standalone进行远程调用，<a href=\"https://www.xiehai.win/java/2019/05/24/selenium-server-standalone.html\" target=\"_blank\" rel=\"noopener\">详解可以看这篇连接</a></p>\n<p><a href=\"http://selenium-release.storage.googleapis.com/index.html\" target=\"_blank\" rel=\"noopener\">selenium-server-standalone下载</a></p>\n<h5 id=\"jar8环境的安装\"><a href=\"#jar8环境的安装\" class=\"headerlink\" title=\"jar8环境的安装\"></a>jar8环境的安装</h5><p><a href=\"https://www.yaosansi.com/post/install-java-jdk-on-centos/\" target=\"_blank\" rel=\"noopener\">jar环境的安装</a></p>\n<h5 id=\"参数配置\"><a href=\"#参数配置\" class=\"headerlink\" title=\"参数配置\"></a>参数配置</h5><p>参数配置方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动hub</span><br><span class=\"line\">java -jar selenium-server-standalone-3.141.59.jar -role hub -maxSession 10 -port 4444</span><br><span class=\"line\"># 启动node</span><br><span class=\"line\">java -jar  -&quot;Dwebdriver.chrome.driver=C:\\\\tools\\\\driver\\\\chromedriver.exe&quot; selenium-server-standalone-3.141.59.jar -role node  -hub http://localhost:4444/grid/register -port 4445</span><br></pre></td></tr></table></figure>\n<p>配置文件方式</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 启动hub</span><br><span class=\"line\">java -jar selenium-server-standalone-3.141.59.jar -role hub -hubConfig hub.json</span><br><span class=\"line\"># 启动node</span><br><span class=\"line\">java -jar selenium-server-standalone-3.141.59.jar -role node -hub http://localhost:4444/grid/register -nodeConfig node.json</span><br></pre></td></tr></table></figure>\n<p><code>hub.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"port\"</span>: <span class=\"number\">4444</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"newSessionWaitTimeout\"</span>: <span class=\"number\">-1</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"servlets\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"capabilityMatcher\"</span>: <span class=\"string\">\"org.openqa.grid.internal.utils.DefaultCapabilityMatcher\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"throwOnCapabilityNotPresent\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nodePolling\"</span>: <span class=\"number\">5000</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"cleanUpCycle\"</span>: <span class=\"number\">5000</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"timeout\"</span>: <span class=\"number\">60</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"browserTimeout\"</span>: <span class=\"number\">60</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"maxSession\"</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"jettyMaxThreads\"</span>: <span class=\"number\">-1</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>node.json</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;capabilities&quot;: [</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;firefox&quot;,</span><br><span class=\"line\">\t  &quot;marionette&quot;: true,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 1,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;chrome&quot;,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 3,</span><br><span class=\"line\">\t  &quot;platform&quot;: &quot;WINDOWS&quot;,</span><br><span class=\"line\">\t  &quot;webdriver.chrome.driver&quot;: &quot;D:\\\\javaproject\\\\oATFWeb\\\\External\\\\chromedriver2.4.1.exe&quot;,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;internet explorer&quot;,</span><br><span class=\"line\">\t  &quot;platform&quot;: &quot;WINDOWS&quot;,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 1,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t  &quot;browserName&quot;: &quot;safari&quot;,</span><br><span class=\"line\">\t  &quot;technologyPreview&quot;: false,</span><br><span class=\"line\">\t  &quot;platform&quot;: &quot;MAC&quot;,</span><br><span class=\"line\">\t  &quot;maxInstances&quot;: 1,</span><br><span class=\"line\">\t  &quot;seleniumProtocol&quot;: &quot;WebDriver&quot;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  &quot;proxy&quot;: &quot;org.openqa.grid.selenium.proxy.DefaultRemoteProxy&quot;,</span><br><span class=\"line\">  &quot;maxSession&quot;: 5,</span><br><span class=\"line\">  &quot;port&quot;: 5555,</span><br><span class=\"line\">  &quot;register&quot;: true,</span><br><span class=\"line\">  &quot;registerCycle&quot;: 5000,</span><br><span class=\"line\">  &quot;hub&quot;: &quot;http://10.12.1.140:4444&quot;,</span><br><span class=\"line\">  &quot;nodeStatusCheckTimeout&quot;: 5000,</span><br><span class=\"line\">  &quot;nodePolling&quot;: 5000,</span><br><span class=\"line\">  &quot;role&quot;: &quot;node&quot;,</span><br><span class=\"line\">  &quot;unregisterIfStillDownAfter&quot;: 60000,</span><br><span class=\"line\">  &quot;downPollingLimit&quot;: 2,</span><br><span class=\"line\">  &quot;debug&quot;: false,</span><br><span class=\"line\">  &quot;servlets&quot;: [],</span><br><span class=\"line\">  &quot;withoutServlets&quot;: [],</span><br><span class=\"line\">  &quot;custom&quot;: &#123;&#125;,</span><br><span class=\"line\">  &quot;browserTimeout&quot;: 60,</span><br><span class=\"line\">  &quot;timeout&quot;: 60</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>访问http://hub.ip:port/grid/console可以看到node的详细配置</code></p>\n<h5 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h5><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.remote.webdriver <span class=\"keyword\">import</span> WebDriver <span class=\"keyword\">as</span> RemoteWebDriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.chrome.options <span class=\"keyword\">import</span> Options</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">chrome_options = Options()</span><br><span class=\"line\"> </span><br><span class=\"line\">proxy=<span class=\"string\">'58.254.220.116:53579'</span></span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_experimental_option('excludeSwitches', ['enable-automation'])</span></span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"--proxy-server=http://\" + proxy)</span></span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"start-maximized\"</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"enable-automation\"</span>)</span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">\"--headless\"</span>)</span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"blink-settings=imagesEnabled=false\")</span></span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--disable-gpu'</span>)</span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"--dns-prefetch-disable\")</span></span><br><span class=\"line\"><span class=\"comment\">#chrome_options.add_argument(\"--no-proxy-server\")</span></span><br><span class=\"line\">chrome_options.add_argument(<span class=\"string\">'--no-sandbox'</span>)    <span class=\"comment\"># 禁止沙箱模式，否则肯能会报错遇到chrome异常</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://www.365365918.com/#/AC/B1/C1/D8/E91032124/F3/I1/\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://www.365365918.com/\"</span></span><br><span class=\"line\">url=<span class=\"string\">\"https://www.betvictor68.mobi/\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://blog.csdn.net/tiantiantdx/article/details/79434550?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-8.edu_weight\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://juejin.im/entry/5b2ca6316fb9a00e7747561a\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://stackoverflow.com/questions/48450594/selenium-timed-out-receiving-message-from-renderer\"</span></span><br><span class=\"line\"><span class=\"comment\">#url=\"https://zhuanlan.zhihu.com/p/111859925\"</span></span><br><span class=\"line\"><span class=\"comment\">#打开google浏览器</span></span><br><span class=\"line\"><span class=\"comment\">#brower=webdriver.Chrome(executable_path=\"/usr/bin/chromedriver\", chrome_options=chrome_options)</span></span><br><span class=\"line\">brower=RemoteWebDriver(command_executor=<span class=\"string\">\"http://192.168.50.74:4444/wd/hub\"</span>, desired_capabilities=chrome_options.to_capabilities())</span><br><span class=\"line\"><span class=\"comment\">#访问地址</span></span><br><span class=\"line\">brower.get(url)</span><br><span class=\"line\"><span class=\"comment\">#设置请求的时间，等待js执行完毕</span></span><br><span class=\"line\"><span class=\"comment\">#time.sleep(5)</span></span><br><span class=\"line\">brower.implicitly_wait(<span class=\"number\">30</span>);</span><br><span class=\"line\">pageSource=brower.find_element_by_xpath(<span class=\"string\">\"//*\"</span>).get_attribute(<span class=\"string\">\"outerHTML\"</span>)</span><br><span class=\"line\"><span class=\"comment\">#pageSource=brower.execute_script(\"return document.documentElement.outerHTML\")</span></span><br><span class=\"line\">fo = open(<span class=\"string\">\"/root/bet365.html\"</span>, <span class=\"string\">\"w\"</span>)</span><br><span class=\"line\">fo.write(pageSource)</span><br><span class=\"line\">fo.close()</span><br><span class=\"line\"><span class=\"comment\">#print(pageSource)</span></span><br><span class=\"line\"><span class=\"comment\">#退出Google浏览器</span></span><br><span class=\"line\">brower.quit()</span><br></pre></td></tr></table></figure>\n<h3 id=\"windows搭建python的环境\"><a href=\"#windows搭建python的环境\" class=\"headerlink\" title=\"windows搭建python的环境\"></a>windows搭建python的环境</h3><p><a href=\"https://www.python.org/downloads/windows/\" target=\"_blank\" rel=\"noopener\">直接到官网</a>下载对应版本的</p>\n<p>submit text3执行python</p>\n<h5 id=\"设置build\"><a href=\"#设置build\" class=\"headerlink\" title=\"设置build\"></a>设置build</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">打开sublime，依次点击菜单Tools--&gt;Build System--&gt;New Build System</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t&quot;cmd&quot;: [&quot;D:\\helios\\software\\python\\python.exe&quot;, &quot;-u&quot;, &quot;$file&quot;],</span><br><span class=\"line\">\t&quot;file_regex&quot;: &quot;[ ]File \\&quot;(…?)\\&quot;, line ([0-9]*)&quot;,</span><br><span class=\"line\">\t&quot;selector&quot;: &quot;source.python&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctrl + b来执行python</span><br></pre></td></tr></table></figure>\n"},{"title":"博客的分类","abbrlink":2992991387,"date":"2021-01-06T03:51:26.000Z","_content":"\n​\t本篇文档介绍一个该博客的分类情况，方便以后写博客时目录的清晰。博客的分类如下（一级分类，二级标签）：\n\n- `AI`  AI相关的知识；\n  - PaddleHUb\n- `Centos7`  服务器系统方面的知识；\n  - zsh\n  - yum\n  - cmd\n  - network\n  - io\n- `Docker`  容器方面的知识；\n  - cmd\n- `Media`  音视频，图片，文档等媒体处理方面的知识；\n  - doc\n    - pdf\n  - image\n    - libraw\n    - libvips\n    - opencv\n  - video\n    - cuda\n    - ffmpeg\n      - io\n      - avfilter\n      - GPU\n- `Database`  数据存储，缓存等方面的知识；\n  - mysql\n  - rabbitmq\n  - s3\n- `Tool`  常用的一些工具；\n  - git\n    - cmd\n    - lfs\n  - hexo\n    - cmd\n    - gulp\n    - next\n  - spider 爬虫\n    - selenium\n- `Talk` 生活感悟文章；\n- `Cpp` c cpp 开发； \n  - gcc\n    - env\n  - protocol\n    - grpc\n    - json\n  - restful\n  - log\n  - poco\n  - unitTest\n    - gtest+lcov\n- `Blog`  本博客的说明","source":"_posts/博客的分类.md","raw":"---\ntitle: 博客的分类\ncategories: Blog\ntags: Blog\nabbrlink: 2992991387\ndate: 2021-01-06 11:51:26\n---\n\n​\t本篇文档介绍一个该博客的分类情况，方便以后写博客时目录的清晰。博客的分类如下（一级分类，二级标签）：\n\n- `AI`  AI相关的知识；\n  - PaddleHUb\n- `Centos7`  服务器系统方面的知识；\n  - zsh\n  - yum\n  - cmd\n  - network\n  - io\n- `Docker`  容器方面的知识；\n  - cmd\n- `Media`  音视频，图片，文档等媒体处理方面的知识；\n  - doc\n    - pdf\n  - image\n    - libraw\n    - libvips\n    - opencv\n  - video\n    - cuda\n    - ffmpeg\n      - io\n      - avfilter\n      - GPU\n- `Database`  数据存储，缓存等方面的知识；\n  - mysql\n  - rabbitmq\n  - s3\n- `Tool`  常用的一些工具；\n  - git\n    - cmd\n    - lfs\n  - hexo\n    - cmd\n    - gulp\n    - next\n  - spider 爬虫\n    - selenium\n- `Talk` 生活感悟文章；\n- `Cpp` c cpp 开发； \n  - gcc\n    - env\n  - protocol\n    - grpc\n    - json\n  - restful\n  - log\n  - poco\n  - unitTest\n    - gtest+lcov\n- `Blog`  本博客的说明","slug":"博客的分类","published":1,"updated":"2021-02-08T07:08:11.785Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxm0040lkq5mj6gtlhd","content":"<p>​    本篇文档介绍一个该博客的分类情况，方便以后写博客时目录的清晰。博客的分类如下（一级分类，二级标签）：</p>\n<ul>\n<li><code>AI</code>  AI相关的知识；<ul>\n<li>PaddleHUb</li>\n</ul>\n</li>\n<li><code>Centos7</code>  服务器系统方面的知识；<ul>\n<li>zsh</li>\n<li>yum</li>\n<li>cmd</li>\n<li>network</li>\n<li>io</li>\n</ul>\n</li>\n<li><code>Docker</code>  容器方面的知识；<ul>\n<li>cmd</li>\n</ul>\n</li>\n<li><code>Media</code>  音视频，图片，文档等媒体处理方面的知识；<ul>\n<li>doc<ul>\n<li>pdf</li>\n</ul>\n</li>\n<li>image<ul>\n<li>libraw</li>\n<li>libvips</li>\n<li>opencv</li>\n</ul>\n</li>\n<li>video<ul>\n<li>cuda</li>\n<li>ffmpeg<ul>\n<li>io</li>\n<li>avfilter</li>\n<li>GPU</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Database</code>  数据存储，缓存等方面的知识；<ul>\n<li>mysql</li>\n<li>rabbitmq</li>\n<li>s3</li>\n</ul>\n</li>\n<li><code>Tool</code>  常用的一些工具；<ul>\n<li>git<ul>\n<li>cmd</li>\n<li>lfs</li>\n</ul>\n</li>\n<li>hexo<ul>\n<li>cmd</li>\n<li>gulp</li>\n<li>next</li>\n</ul>\n</li>\n<li>spider 爬虫<ul>\n<li>selenium</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Talk</code> 生活感悟文章；</li>\n<li><code>Cpp</code> c cpp 开发； <ul>\n<li>gcc<ul>\n<li>env</li>\n</ul>\n</li>\n<li>protocol<ul>\n<li>grpc</li>\n<li>json</li>\n</ul>\n</li>\n<li>restful</li>\n<li>log</li>\n<li>poco</li>\n<li>unitTest<ul>\n<li>gtest+lcov</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Blog</code>  本博客的说明</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>​    本篇文档介绍一个该博客的分类情况，方便以后写博客时目录的清晰。博客的分类如下（一级分类，二级标签）：</p>\n<ul>\n<li><code>AI</code>  AI相关的知识；<ul>\n<li>PaddleHUb</li>\n</ul>\n</li>\n<li><code>Centos7</code>  服务器系统方面的知识；<ul>\n<li>zsh</li>\n<li>yum</li>\n<li>cmd</li>\n<li>network</li>\n<li>io</li>\n</ul>\n</li>\n<li><code>Docker</code>  容器方面的知识；<ul>\n<li>cmd</li>\n</ul>\n</li>\n<li><code>Media</code>  音视频，图片，文档等媒体处理方面的知识；<ul>\n<li>doc<ul>\n<li>pdf</li>\n</ul>\n</li>\n<li>image<ul>\n<li>libraw</li>\n<li>libvips</li>\n<li>opencv</li>\n</ul>\n</li>\n<li>video<ul>\n<li>cuda</li>\n<li>ffmpeg<ul>\n<li>io</li>\n<li>avfilter</li>\n<li>GPU</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Database</code>  数据存储，缓存等方面的知识；<ul>\n<li>mysql</li>\n<li>rabbitmq</li>\n<li>s3</li>\n</ul>\n</li>\n<li><code>Tool</code>  常用的一些工具；<ul>\n<li>git<ul>\n<li>cmd</li>\n<li>lfs</li>\n</ul>\n</li>\n<li>hexo<ul>\n<li>cmd</li>\n<li>gulp</li>\n<li>next</li>\n</ul>\n</li>\n<li>spider 爬虫<ul>\n<li>selenium</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Talk</code> 生活感悟文章；</li>\n<li><code>Cpp</code> c cpp 开发； <ul>\n<li>gcc<ul>\n<li>env</li>\n</ul>\n</li>\n<li>protocol<ul>\n<li>grpc</li>\n<li>json</li>\n</ul>\n</li>\n<li>restful</li>\n<li>log</li>\n<li>poco</li>\n<li>unitTest<ul>\n<li>gtest+lcov</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>Blog</code>  本博客的说明</li>\n</ul>\n"},{"title":"相机底片的解析","abbrlink":4054922039,"date":"2019-04-16T03:31:36.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;公司要求对相机原生格式如后缀为dng,CR2等的图片进行转码，然后预览，自己查找了一下资料，目前仅仅是用命令行来进行处理的，因为我们是linux端的服务，所以直接封装命令行比较的简单。\n\n### DNG数据格式的介绍\n```\nhttp://www.cnblogs.com/adong7639/p/4446828.html\nhttps://blog.csdn.net/wgx571859177/article/details/80755793?utm_source=blogxgwz1\n```\n\n### DNG格式基本的概念\n```\n  DNG格式是在TIFF的基础上扩展出来的，要了解DNG，需要清楚TIFF,\nTIFF/EP,DNG,RAW之间的关系。\n  DNG（Digital Negative）是Adobe开发的一种开发的raw image file format ,\n主要是为了统一不同厂商的raw格式。里面使用的tag基本上都定义在TIFF或者TIFF/EP 中，\n在DNG Sepcification中只是定义或者建议了数据的组织方式，颜色空间的转换等等。\n\n```\n\n### TIFF/EP\n```\nTIFF是一个灵活适应性强的文件格式。通过在文件标头中使用\"标签\"，它能够在一个\n文件中处理多幅图像和数据。标签能够标明图像的如图像大小这样的基本几何尺寸，\n或者定义图像数据是如何排列的，或者是否使用了各种各样的图像压缩选项。\n\nTIFF/EP的全称是\"Tag Image File Format / Electronic Photography\"。 \n它是一个名为\"Electronic still-picture imaging – Removable \nmemory – Part 2: TIFF/EP image data format\"ISO标准， 标准号为\nISO12234-2。TIFF/EP对TIFF文件扩展部分标记属性。\n```\n\n### RAW\n```\nRAW文件包含创建一个可视图像所必须的相机传感器数据信息。RAW文件的结构，包括ISO标准的RAW图像格式ISO 12234-2 ，TIFF / EP，往往遵循一个共同的模式，那就是：\n\n一个短的文件头，它通常包含文件的字节顺序，文件标识符和主数据的文件偏移量摄像传感器元数据，用来描述图像传感器的数据，包括传感器的尺寸， 颜色滤波矩阵(color filter array)的属性和它的颜色配置文件\n\n列入任何CMS环境或数据库中需要的图像元数据。这些措施包括曝光设定，相机/扫描仪/镜头模型，拍摄/扫描日期（和可选的位置信息），创作信息和其他。一些原始文件包含可交换图像格式的标准化元数据节；\n\n图像缩略图；\n\n可选的JPEG格式缩小尺寸的图像，可用于快速预览；\n\n在电影胶片扫描中，无论是文件序列的时间码，序列码或帧编号都代表在扫描卷轴中的帧顺序。这个项目允许文件被被按帧顺序排列（不依赖于它的文件名​）；\n\n传感器图像数据；\n```\n\n### 常见的RAW格式\n```\n许多RAW格式, 包括 3FR (Hasselblad), DCR, K25, KDC (Kodak), IIQ (Phase One), CR2 (Canon), \nERF (Epson), MEF (Mamiya), MOS (Leaf), NEF (Nikon), ORF (Olympus), PEF (Pentax), \nRW2 (Panasonic) and ARW, SRF, SR2 (Sony), 都是基于TIFF格式。 这些文件可能在许多方面偏离TIFF标准，\n包括使用一个非标准的文件头，列入额外的图像标记和一些标签的数据加密。\n```\n\n### TIFF, TIFF/EP, DNG, RAW之间的关系\n```\nTIFF和DNG同为Specification，分别定义了后缀名为.tif/.tiff和.dng的文件格式同时在TIFF Specification也定义个baseline及部分扩展的tag。\n\nTIFF/EP则定义并规范了在电子影像中所使用的TAG。\n\nDNG同时与TIFF和TIFF/EP兼容，并包含了EXIF和XMP信息。DNG实际上就是扩张的TIFF， 把DNG的扩展名改成TIF就可以直接预览图片。\n\n在DNG出现以前，各个数码相机制造商都有自己的格式，比如Canon(cr2/crw), Nikon(nef), Olympus(orf), Pentex(pef)等等。之所以出现这么多格式，一方面的原因是在这之前没有统一的raw格式， 但更重要的是，各个厂商希望用这个只对自己公开的数据格式来保护自己的私密信息。Adobe推出DNG希望能一统raw的天下。\n```\n\n### 处理不同格式RAW或者DNG底片的方法\n&nbsp;&nbsp;&nbsp;&nbsp;为了能够得到RAW格式或者DNG格式的jpg图片供我们预览，可以使用DCRAW和ffmpeg来结合使用\n#### dcraw介绍\n```\nhttps://blog.csdn.net/bi_diu1368/article/details/80411304\n```\n```\n1,dcraw 下载   yum  install dcraw\n2.1,如果相机底片有缩略图，则直接可以通过  dcraw  -e   test.dng  获得其缩略图（注意，缩略图也有不存在的时候）\n\n2.2,如果没有缩略图，则可以先将RAW格式的转化为ppm   dcraw  -v  test.dng  获取其ppm的图片；\n然后在通过ffmpeg可以将 ppm格式的图片转码jpg  ffmpeg  -i  test.ppm out.jpg \n\n```","source":"_posts/相机底片的解析.md","raw":"---\ntitle: 相机底片的解析\ncategories: Media\ntags: [image,RAW]\nabbrlink: 4054922039\ndate: 2019-04-16 11:31:36\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;公司要求对相机原生格式如后缀为dng,CR2等的图片进行转码，然后预览，自己查找了一下资料，目前仅仅是用命令行来进行处理的，因为我们是linux端的服务，所以直接封装命令行比较的简单。\n\n### DNG数据格式的介绍\n```\nhttp://www.cnblogs.com/adong7639/p/4446828.html\nhttps://blog.csdn.net/wgx571859177/article/details/80755793?utm_source=blogxgwz1\n```\n\n### DNG格式基本的概念\n```\n  DNG格式是在TIFF的基础上扩展出来的，要了解DNG，需要清楚TIFF,\nTIFF/EP,DNG,RAW之间的关系。\n  DNG（Digital Negative）是Adobe开发的一种开发的raw image file format ,\n主要是为了统一不同厂商的raw格式。里面使用的tag基本上都定义在TIFF或者TIFF/EP 中，\n在DNG Sepcification中只是定义或者建议了数据的组织方式，颜色空间的转换等等。\n\n```\n\n### TIFF/EP\n```\nTIFF是一个灵活适应性强的文件格式。通过在文件标头中使用\"标签\"，它能够在一个\n文件中处理多幅图像和数据。标签能够标明图像的如图像大小这样的基本几何尺寸，\n或者定义图像数据是如何排列的，或者是否使用了各种各样的图像压缩选项。\n\nTIFF/EP的全称是\"Tag Image File Format / Electronic Photography\"。 \n它是一个名为\"Electronic still-picture imaging – Removable \nmemory – Part 2: TIFF/EP image data format\"ISO标准， 标准号为\nISO12234-2。TIFF/EP对TIFF文件扩展部分标记属性。\n```\n\n### RAW\n```\nRAW文件包含创建一个可视图像所必须的相机传感器数据信息。RAW文件的结构，包括ISO标准的RAW图像格式ISO 12234-2 ，TIFF / EP，往往遵循一个共同的模式，那就是：\n\n一个短的文件头，它通常包含文件的字节顺序，文件标识符和主数据的文件偏移量摄像传感器元数据，用来描述图像传感器的数据，包括传感器的尺寸， 颜色滤波矩阵(color filter array)的属性和它的颜色配置文件\n\n列入任何CMS环境或数据库中需要的图像元数据。这些措施包括曝光设定，相机/扫描仪/镜头模型，拍摄/扫描日期（和可选的位置信息），创作信息和其他。一些原始文件包含可交换图像格式的标准化元数据节；\n\n图像缩略图；\n\n可选的JPEG格式缩小尺寸的图像，可用于快速预览；\n\n在电影胶片扫描中，无论是文件序列的时间码，序列码或帧编号都代表在扫描卷轴中的帧顺序。这个项目允许文件被被按帧顺序排列（不依赖于它的文件名​）；\n\n传感器图像数据；\n```\n\n### 常见的RAW格式\n```\n许多RAW格式, 包括 3FR (Hasselblad), DCR, K25, KDC (Kodak), IIQ (Phase One), CR2 (Canon), \nERF (Epson), MEF (Mamiya), MOS (Leaf), NEF (Nikon), ORF (Olympus), PEF (Pentax), \nRW2 (Panasonic) and ARW, SRF, SR2 (Sony), 都是基于TIFF格式。 这些文件可能在许多方面偏离TIFF标准，\n包括使用一个非标准的文件头，列入额外的图像标记和一些标签的数据加密。\n```\n\n### TIFF, TIFF/EP, DNG, RAW之间的关系\n```\nTIFF和DNG同为Specification，分别定义了后缀名为.tif/.tiff和.dng的文件格式同时在TIFF Specification也定义个baseline及部分扩展的tag。\n\nTIFF/EP则定义并规范了在电子影像中所使用的TAG。\n\nDNG同时与TIFF和TIFF/EP兼容，并包含了EXIF和XMP信息。DNG实际上就是扩张的TIFF， 把DNG的扩展名改成TIF就可以直接预览图片。\n\n在DNG出现以前，各个数码相机制造商都有自己的格式，比如Canon(cr2/crw), Nikon(nef), Olympus(orf), Pentex(pef)等等。之所以出现这么多格式，一方面的原因是在这之前没有统一的raw格式， 但更重要的是，各个厂商希望用这个只对自己公开的数据格式来保护自己的私密信息。Adobe推出DNG希望能一统raw的天下。\n```\n\n### 处理不同格式RAW或者DNG底片的方法\n&nbsp;&nbsp;&nbsp;&nbsp;为了能够得到RAW格式或者DNG格式的jpg图片供我们预览，可以使用DCRAW和ffmpeg来结合使用\n#### dcraw介绍\n```\nhttps://blog.csdn.net/bi_diu1368/article/details/80411304\n```\n```\n1,dcraw 下载   yum  install dcraw\n2.1,如果相机底片有缩略图，则直接可以通过  dcraw  -e   test.dng  获得其缩略图（注意，缩略图也有不存在的时候）\n\n2.2,如果没有缩略图，则可以先将RAW格式的转化为ppm   dcraw  -v  test.dng  获取其ppm的图片；\n然后在通过ffmpeg可以将 ppm格式的图片转码jpg  ffmpeg  -i  test.ppm out.jpg \n\n```","slug":"相机底片的解析","published":1,"updated":"2021-02-08T06:34:03.016Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxo0045lkq5fmbjy4zg","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;公司要求对相机原生格式如后缀为dng,CR2等的图片进行转码，然后预览，自己查找了一下资料，目前仅仅是用命令行来进行处理的，因为我们是linux端的服务，所以直接封装命令行比较的简单。</p>\n<h3 id=\"DNG数据格式的介绍\"><a href=\"#DNG数据格式的介绍\" class=\"headerlink\" title=\"DNG数据格式的介绍\"></a>DNG数据格式的介绍</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.cnblogs.com/adong7639/p/4446828.html</span><br><span class=\"line\">https://blog.csdn.net/wgx571859177/article/details/80755793?utm_source=blogxgwz1</span><br></pre></td></tr></table></figure>\n<h3 id=\"DNG格式基本的概念\"><a href=\"#DNG格式基本的概念\" class=\"headerlink\" title=\"DNG格式基本的概念\"></a>DNG格式基本的概念</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  DNG格式是在TIFF的基础上扩展出来的，要了解DNG，需要清楚TIFF,</span><br><span class=\"line\">TIFF/EP,DNG,RAW之间的关系。</span><br><span class=\"line\">  DNG（Digital Negative）是Adobe开发的一种开发的raw image file format ,</span><br><span class=\"line\">主要是为了统一不同厂商的raw格式。里面使用的tag基本上都定义在TIFF或者TIFF/EP 中，</span><br><span class=\"line\">在DNG Sepcification中只是定义或者建议了数据的组织方式，颜色空间的转换等等。</span><br></pre></td></tr></table></figure>\n<h3 id=\"TIFF-EP\"><a href=\"#TIFF-EP\" class=\"headerlink\" title=\"TIFF/EP\"></a>TIFF/EP</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIFF是一个灵活适应性强的文件格式。通过在文件标头中使用&quot;标签&quot;，它能够在一个</span><br><span class=\"line\">文件中处理多幅图像和数据。标签能够标明图像的如图像大小这样的基本几何尺寸，</span><br><span class=\"line\">或者定义图像数据是如何排列的，或者是否使用了各种各样的图像压缩选项。</span><br><span class=\"line\"></span><br><span class=\"line\">TIFF/EP的全称是&quot;Tag Image File Format / Electronic Photography&quot;。 </span><br><span class=\"line\">它是一个名为&quot;Electronic still-picture imaging – Removable </span><br><span class=\"line\">memory – Part 2: TIFF/EP image data format&quot;ISO标准， 标准号为</span><br><span class=\"line\">ISO12234-2。TIFF/EP对TIFF文件扩展部分标记属性。</span><br></pre></td></tr></table></figure>\n<h3 id=\"RAW\"><a href=\"#RAW\" class=\"headerlink\" title=\"RAW\"></a>RAW</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RAW文件包含创建一个可视图像所必须的相机传感器数据信息。RAW文件的结构，包括ISO标准的RAW图像格式ISO 12234-2 ，TIFF / EP，往往遵循一个共同的模式，那就是：</span><br><span class=\"line\"></span><br><span class=\"line\">一个短的文件头，它通常包含文件的字节顺序，文件标识符和主数据的文件偏移量摄像传感器元数据，用来描述图像传感器的数据，包括传感器的尺寸， 颜色滤波矩阵(color filter array)的属性和它的颜色配置文件</span><br><span class=\"line\"></span><br><span class=\"line\">列入任何CMS环境或数据库中需要的图像元数据。这些措施包括曝光设定，相机/扫描仪/镜头模型，拍摄/扫描日期（和可选的位置信息），创作信息和其他。一些原始文件包含可交换图像格式的标准化元数据节；</span><br><span class=\"line\"></span><br><span class=\"line\">图像缩略图；</span><br><span class=\"line\"></span><br><span class=\"line\">可选的JPEG格式缩小尺寸的图像，可用于快速预览；</span><br><span class=\"line\"></span><br><span class=\"line\">在电影胶片扫描中，无论是文件序列的时间码，序列码或帧编号都代表在扫描卷轴中的帧顺序。这个项目允许文件被被按帧顺序排列（不依赖于它的文件名​）；</span><br><span class=\"line\"></span><br><span class=\"line\">传感器图像数据；</span><br></pre></td></tr></table></figure>\n<h3 id=\"常见的RAW格式\"><a href=\"#常见的RAW格式\" class=\"headerlink\" title=\"常见的RAW格式\"></a>常见的RAW格式</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">许多RAW格式, 包括 3FR (Hasselblad), DCR, K25, KDC (Kodak), IIQ (Phase One), CR2 (Canon), </span><br><span class=\"line\">ERF (Epson), MEF (Mamiya), MOS (Leaf), NEF (Nikon), ORF (Olympus), PEF (Pentax), </span><br><span class=\"line\">RW2 (Panasonic) and ARW, SRF, SR2 (Sony), 都是基于TIFF格式。 这些文件可能在许多方面偏离TIFF标准，</span><br><span class=\"line\">包括使用一个非标准的文件头，列入额外的图像标记和一些标签的数据加密。</span><br></pre></td></tr></table></figure>\n<h3 id=\"TIFF-TIFF-EP-DNG-RAW之间的关系\"><a href=\"#TIFF-TIFF-EP-DNG-RAW之间的关系\" class=\"headerlink\" title=\"TIFF, TIFF/EP, DNG, RAW之间的关系\"></a>TIFF, TIFF/EP, DNG, RAW之间的关系</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIFF和DNG同为Specification，分别定义了后缀名为.tif/.tiff和.dng的文件格式同时在TIFF Specification也定义个baseline及部分扩展的tag。</span><br><span class=\"line\"></span><br><span class=\"line\">TIFF/EP则定义并规范了在电子影像中所使用的TAG。</span><br><span class=\"line\"></span><br><span class=\"line\">DNG同时与TIFF和TIFF/EP兼容，并包含了EXIF和XMP信息。DNG实际上就是扩张的TIFF， 把DNG的扩展名改成TIF就可以直接预览图片。</span><br><span class=\"line\"></span><br><span class=\"line\">在DNG出现以前，各个数码相机制造商都有自己的格式，比如Canon(cr2/crw), Nikon(nef), Olympus(orf), Pentex(pef)等等。之所以出现这么多格式，一方面的原因是在这之前没有统一的raw格式， 但更重要的是，各个厂商希望用这个只对自己公开的数据格式来保护自己的私密信息。Adobe推出DNG希望能一统raw的天下。</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理不同格式RAW或者DNG底片的方法\"><a href=\"#处理不同格式RAW或者DNG底片的方法\" class=\"headerlink\" title=\"处理不同格式RAW或者DNG底片的方法\"></a>处理不同格式RAW或者DNG底片的方法</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;为了能够得到RAW格式或者DNG格式的jpg图片供我们预览，可以使用DCRAW和ffmpeg来结合使用</p>\n<h4 id=\"dcraw介绍\"><a href=\"#dcraw介绍\" class=\"headerlink\" title=\"dcraw介绍\"></a>dcraw介绍</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://blog.csdn.net/bi_diu1368/article/details/80411304</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,dcraw 下载   yum  install dcraw</span><br><span class=\"line\">2.1,如果相机底片有缩略图，则直接可以通过  dcraw  -e   test.dng  获得其缩略图（注意，缩略图也有不存在的时候）</span><br><span class=\"line\"></span><br><span class=\"line\">2.2,如果没有缩略图，则可以先将RAW格式的转化为ppm   dcraw  -v  test.dng  获取其ppm的图片；</span><br><span class=\"line\">然后在通过ffmpeg可以将 ppm格式的图片转码jpg  ffmpeg  -i  test.ppm out.jpg</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;公司要求对相机原生格式如后缀为dng,CR2等的图片进行转码，然后预览，自己查找了一下资料，目前仅仅是用命令行来进行处理的，因为我们是linux端的服务，所以直接封装命令行比较的简单。</p>\n<h3 id=\"DNG数据格式的介绍\"><a href=\"#DNG数据格式的介绍\" class=\"headerlink\" title=\"DNG数据格式的介绍\"></a>DNG数据格式的介绍</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.cnblogs.com/adong7639/p/4446828.html</span><br><span class=\"line\">https://blog.csdn.net/wgx571859177/article/details/80755793?utm_source=blogxgwz1</span><br></pre></td></tr></table></figure>\n<h3 id=\"DNG格式基本的概念\"><a href=\"#DNG格式基本的概念\" class=\"headerlink\" title=\"DNG格式基本的概念\"></a>DNG格式基本的概念</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  DNG格式是在TIFF的基础上扩展出来的，要了解DNG，需要清楚TIFF,</span><br><span class=\"line\">TIFF/EP,DNG,RAW之间的关系。</span><br><span class=\"line\">  DNG（Digital Negative）是Adobe开发的一种开发的raw image file format ,</span><br><span class=\"line\">主要是为了统一不同厂商的raw格式。里面使用的tag基本上都定义在TIFF或者TIFF/EP 中，</span><br><span class=\"line\">在DNG Sepcification中只是定义或者建议了数据的组织方式，颜色空间的转换等等。</span><br></pre></td></tr></table></figure>\n<h3 id=\"TIFF-EP\"><a href=\"#TIFF-EP\" class=\"headerlink\" title=\"TIFF/EP\"></a>TIFF/EP</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIFF是一个灵活适应性强的文件格式。通过在文件标头中使用&quot;标签&quot;，它能够在一个</span><br><span class=\"line\">文件中处理多幅图像和数据。标签能够标明图像的如图像大小这样的基本几何尺寸，</span><br><span class=\"line\">或者定义图像数据是如何排列的，或者是否使用了各种各样的图像压缩选项。</span><br><span class=\"line\"></span><br><span class=\"line\">TIFF/EP的全称是&quot;Tag Image File Format / Electronic Photography&quot;。 </span><br><span class=\"line\">它是一个名为&quot;Electronic still-picture imaging – Removable </span><br><span class=\"line\">memory – Part 2: TIFF/EP image data format&quot;ISO标准， 标准号为</span><br><span class=\"line\">ISO12234-2。TIFF/EP对TIFF文件扩展部分标记属性。</span><br></pre></td></tr></table></figure>\n<h3 id=\"RAW\"><a href=\"#RAW\" class=\"headerlink\" title=\"RAW\"></a>RAW</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RAW文件包含创建一个可视图像所必须的相机传感器数据信息。RAW文件的结构，包括ISO标准的RAW图像格式ISO 12234-2 ，TIFF / EP，往往遵循一个共同的模式，那就是：</span><br><span class=\"line\"></span><br><span class=\"line\">一个短的文件头，它通常包含文件的字节顺序，文件标识符和主数据的文件偏移量摄像传感器元数据，用来描述图像传感器的数据，包括传感器的尺寸， 颜色滤波矩阵(color filter array)的属性和它的颜色配置文件</span><br><span class=\"line\"></span><br><span class=\"line\">列入任何CMS环境或数据库中需要的图像元数据。这些措施包括曝光设定，相机/扫描仪/镜头模型，拍摄/扫描日期（和可选的位置信息），创作信息和其他。一些原始文件包含可交换图像格式的标准化元数据节；</span><br><span class=\"line\"></span><br><span class=\"line\">图像缩略图；</span><br><span class=\"line\"></span><br><span class=\"line\">可选的JPEG格式缩小尺寸的图像，可用于快速预览；</span><br><span class=\"line\"></span><br><span class=\"line\">在电影胶片扫描中，无论是文件序列的时间码，序列码或帧编号都代表在扫描卷轴中的帧顺序。这个项目允许文件被被按帧顺序排列（不依赖于它的文件名​）；</span><br><span class=\"line\"></span><br><span class=\"line\">传感器图像数据；</span><br></pre></td></tr></table></figure>\n<h3 id=\"常见的RAW格式\"><a href=\"#常见的RAW格式\" class=\"headerlink\" title=\"常见的RAW格式\"></a>常见的RAW格式</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">许多RAW格式, 包括 3FR (Hasselblad), DCR, K25, KDC (Kodak), IIQ (Phase One), CR2 (Canon), </span><br><span class=\"line\">ERF (Epson), MEF (Mamiya), MOS (Leaf), NEF (Nikon), ORF (Olympus), PEF (Pentax), </span><br><span class=\"line\">RW2 (Panasonic) and ARW, SRF, SR2 (Sony), 都是基于TIFF格式。 这些文件可能在许多方面偏离TIFF标准，</span><br><span class=\"line\">包括使用一个非标准的文件头，列入额外的图像标记和一些标签的数据加密。</span><br></pre></td></tr></table></figure>\n<h3 id=\"TIFF-TIFF-EP-DNG-RAW之间的关系\"><a href=\"#TIFF-TIFF-EP-DNG-RAW之间的关系\" class=\"headerlink\" title=\"TIFF, TIFF/EP, DNG, RAW之间的关系\"></a>TIFF, TIFF/EP, DNG, RAW之间的关系</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIFF和DNG同为Specification，分别定义了后缀名为.tif/.tiff和.dng的文件格式同时在TIFF Specification也定义个baseline及部分扩展的tag。</span><br><span class=\"line\"></span><br><span class=\"line\">TIFF/EP则定义并规范了在电子影像中所使用的TAG。</span><br><span class=\"line\"></span><br><span class=\"line\">DNG同时与TIFF和TIFF/EP兼容，并包含了EXIF和XMP信息。DNG实际上就是扩张的TIFF， 把DNG的扩展名改成TIF就可以直接预览图片。</span><br><span class=\"line\"></span><br><span class=\"line\">在DNG出现以前，各个数码相机制造商都有自己的格式，比如Canon(cr2/crw), Nikon(nef), Olympus(orf), Pentex(pef)等等。之所以出现这么多格式，一方面的原因是在这之前没有统一的raw格式， 但更重要的是，各个厂商希望用这个只对自己公开的数据格式来保护自己的私密信息。Adobe推出DNG希望能一统raw的天下。</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理不同格式RAW或者DNG底片的方法\"><a href=\"#处理不同格式RAW或者DNG底片的方法\" class=\"headerlink\" title=\"处理不同格式RAW或者DNG底片的方法\"></a>处理不同格式RAW或者DNG底片的方法</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;为了能够得到RAW格式或者DNG格式的jpg图片供我们预览，可以使用DCRAW和ffmpeg来结合使用</p>\n<h4 id=\"dcraw介绍\"><a href=\"#dcraw介绍\" class=\"headerlink\" title=\"dcraw介绍\"></a>dcraw介绍</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://blog.csdn.net/bi_diu1368/article/details/80411304</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1,dcraw 下载   yum  install dcraw</span><br><span class=\"line\">2.1,如果相机底片有缩略图，则直接可以通过  dcraw  -e   test.dng  获得其缩略图（注意，缩略图也有不存在的时候）</span><br><span class=\"line\"></span><br><span class=\"line\">2.2,如果没有缩略图，则可以先将RAW格式的转化为ppm   dcraw  -v  test.dng  获取其ppm的图片；</span><br><span class=\"line\">然后在通过ffmpeg可以将 ppm格式的图片转码jpg  ffmpeg  -i  test.ppm out.jpg</span><br></pre></td></tr></table></figure>"},{"title":"系统io状态排查","abbrlink":4148759935,"date":"2019-04-28T06:36:56.000Z","_content":"\n&nbsp;&nbsp;&nbsp;&nbsp;这几天在排查自己写的转码服务性能上不去，转码特别慢，正常情况下，转码时CPU可以飙到很高，但是在问题机器上CPU只要50%左右，排查了好久，最终确定是某个其它服务io资源占用了太多，导致了我的转码服务io占用几乎没有，所以出现了问题，介绍几个io的工具，帮助以后查看系统的情况。\n\n### iostat\n&nbsp;&nbsp;&nbsp;&nbsp;iostat主要是用来查看系统的io使用情况，\n只记录自己使用的命令\n\n#### 下载\n```\nyum install sysstat\n```\n\n#### 使用\n```\niostat [-c ] [ -d ] [ -k ] [ -m ] [ -x ]\n```\n","source":"_posts/系统io状态排查.md","raw":"---\ntitle: 系统io状态排查\ncategories: Centos7\ntags: io\nabbrlink: 4148759935\ndate: 2019-04-28 14:36:56\n---\n\n&nbsp;&nbsp;&nbsp;&nbsp;这几天在排查自己写的转码服务性能上不去，转码特别慢，正常情况下，转码时CPU可以飙到很高，但是在问题机器上CPU只要50%左右，排查了好久，最终确定是某个其它服务io资源占用了太多，导致了我的转码服务io占用几乎没有，所以出现了问题，介绍几个io的工具，帮助以后查看系统的情况。\n\n### iostat\n&nbsp;&nbsp;&nbsp;&nbsp;iostat主要是用来查看系统的io使用情况，\n只记录自己使用的命令\n\n#### 下载\n```\nyum install sysstat\n```\n\n#### 使用\n```\niostat [-c ] [ -d ] [ -k ] [ -m ] [ -x ]\n```\n","slug":"系统io状态排查","published":1,"updated":"2021-02-08T06:33:21.765Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckkw8rxxp0047lkq5g3tjen6m","content":"<p>&nbsp;&nbsp;&nbsp;&nbsp;这几天在排查自己写的转码服务性能上不去，转码特别慢，正常情况下，转码时CPU可以飙到很高，但是在问题机器上CPU只要50%左右，排查了好久，最终确定是某个其它服务io资源占用了太多，导致了我的转码服务io占用几乎没有，所以出现了问题，介绍几个io的工具，帮助以后查看系统的情况。</p>\n<h3 id=\"iostat\"><a href=\"#iostat\" class=\"headerlink\" title=\"iostat\"></a>iostat</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;iostat主要是用来查看系统的io使用情况，<br>只记录自己使用的命令</p>\n<h4 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install sysstat</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iostat [-c ] [ -d ] [ -k ] [ -m ] [ -x ]</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>&nbsp;&nbsp;&nbsp;&nbsp;这几天在排查自己写的转码服务性能上不去，转码特别慢，正常情况下，转码时CPU可以飙到很高，但是在问题机器上CPU只要50%左右，排查了好久，最终确定是某个其它服务io资源占用了太多，导致了我的转码服务io占用几乎没有，所以出现了问题，介绍几个io的工具，帮助以后查看系统的情况。</p>\n<h3 id=\"iostat\"><a href=\"#iostat\" class=\"headerlink\" title=\"iostat\"></a>iostat</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;iostat主要是用来查看系统的io使用情况，<br>只记录自己使用的命令</p>\n<h4 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install sysstat</span><br></pre></td></tr></table></figure>\n<h4 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">iostat [-c ] [ -d ] [ -k ] [ -m ] [ -x ]</span><br></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckkw8rxvp0008lkq5yjvsgtgb","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxvu000glkq5yqk2rjiu"},{"post_id":"ckkw8rxve0000lkq5nmgvwibm","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxvw000llkq5158m9jun"},{"post_id":"ckkw8rxvs000dlkq57in06h77","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxvx000olkq5ieo4r4ha"},{"post_id":"ckkw8rxvu000flkq577sycu18","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxw0000slkq56q2anze7"},{"post_id":"ckkw8rxvv000klkq5cful1yla","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxw1000vlkq5nclq7trl"},{"post_id":"ckkw8rxvx000nlkq5op4ywh3b","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxw3000zlkq5lxzzvxb3"},{"post_id":"ckkw8rxw3000ylkq5bm1prthe","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxw70017lkq5wuwvqjpn"},{"post_id":"ckkw8rxvi0002lkq5ss7heqq2","category_id":"ckkw8rxvr000alkq5pjb1boyz","_id":"ckkw8rxw80019lkq5kdga7b5c"},{"post_id":"ckkw8rxvi0002lkq5ss7heqq2","category_id":"ckkw8rxw2000wlkq5x0q7kccy","_id":"ckkw8rxwa001elkq5abmkmvfw"},{"post_id":"ckkw8rxvn0006lkq5fo7xgx2e","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxwb001hlkq58kpzcwqe"},{"post_id":"ckkw8rxvn0006lkq5fo7xgx2e","category_id":"ckkw8rxw40012lkq5j0a4d236","_id":"ckkw8rxwd001llkq5nhdwuci3"},{"post_id":"ckkw8rxvq0009lkq5r72ttba0","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxwh001tlkq509aw58vg"},{"post_id":"ckkw8rxvq0009lkq5r72ttba0","category_id":"ckkw8rxw40012lkq5j0a4d236","_id":"ckkw8rxwk001wlkq5fsrzmr3g"},{"post_id":"ckkw8rxw60016lkq5yc84vdhn","category_id":"ckkw8rxwp0025lkq55bbcrjgp","_id":"ckkw8rxwu002flkq5z869mwze"},{"post_id":"ckkw8rxw70018lkq5k5k7tpzf","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxwy002nlkq57nbz2t5w"},{"post_id":"ckkw8rxw70018lkq5k5k7tpzf","category_id":"ckkw8rxws002blkq5frjd0xya","_id":"ckkw8rxwz002qlkq5up02e49n"},{"post_id":"ckkw8rxw9001dlkq5duet7ugg","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxx1002ulkq5k9p42u1r"},{"post_id":"ckkw8rxw9001dlkq5duet7ugg","category_id":"ckkw8rxws002blkq5frjd0xya","_id":"ckkw8rxx3002ylkq5abj9iuo9"},{"post_id":"ckkw8rxvz000rlkq5qnpmhdfv","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxx50032lkq5al19ewkg"},{"post_id":"ckkw8rxvz000rlkq5qnpmhdfv","category_id":"ckkw8rxwy002mlkq5g9jecvnk","_id":"ckkw8rxx60036lkq5w17tkn5l"},{"post_id":"ckkw8rxwb001glkq5oqmj3bka","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxx8003alkq5wbhfi72v"},{"post_id":"ckkw8rxwb001glkq5oqmj3bka","category_id":"ckkw8rxx2002wlkq5pcs4c8q9","_id":"ckkw8rxx9003dlkq51p8kby3h"},{"post_id":"ckkw8rxx40031lkq5cr1g1kz5","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxxb003ilkq5dos0yqlo"},{"post_id":"ckkw8rxx40031lkq5cr1g1kz5","category_id":"ckkw8rxw40012lkq5j0a4d236","_id":"ckkw8rxxe003klkq5jsg7ln99"},{"post_id":"ckkw8rxwc001klkq54lr8bi2n","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxxg003olkq5aw72dbow"},{"post_id":"ckkw8rxwc001klkq54lr8bi2n","category_id":"ckkw8rxws002blkq5frjd0xya","_id":"ckkw8rxxi003rlkq52qiyuula"},{"post_id":"ckkw8rxwd001nlkq50ax311eq","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxxk003wlkq548f3b1s1"},{"post_id":"ckkw8rxwd001nlkq50ax311eq","category_id":"ckkw8rxws002blkq5frjd0xya","_id":"ckkw8rxxm003zlkq52a53ilqt"},{"post_id":"ckkw8rxxa003glkq5496b7ant","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxn0043lkq5vuugxqnf"},{"post_id":"ckkw8rxwf001qlkq5inin6wpg","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxxp0046lkq5ay6rb7h2"},{"post_id":"ckkw8rxwf001qlkq5inin6wpg","category_id":"ckkw8rxws002blkq5frjd0xya","_id":"ckkw8rxxr004alkq5rq0avkq8"},{"post_id":"ckkw8rxw1000ulkq5p8r0r25y","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxr004blkq5n89qz406"},{"post_id":"ckkw8rxw1000ulkq5p8r0r25y","category_id":"ckkw8rxwy002mlkq5g9jecvnk","_id":"ckkw8rxxr004dlkq54r1q2p4j"},{"post_id":"ckkw8rxwg001rlkq5isz3c27u","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxs004hlkq5ygm4rxzw"},{"post_id":"ckkw8rxwg001rlkq5isz3c27u","category_id":"ckkw8rxwy002mlkq5g9jecvnk","_id":"ckkw8rxxu004jlkq5bgjuvz0j"},{"post_id":"ckkw8rxxo0045lkq5fmbjy4zg","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxxu004mlkq57v16gog4"},{"post_id":"ckkw8rxwh001ulkq5fkeclqog","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxxv004olkq5kvpeoya0"},{"post_id":"ckkw8rxwh001ulkq5fkeclqog","category_id":"ckkw8rxws002blkq5frjd0xya","_id":"ckkw8rxxv004rlkq5z25o7xk3"},{"post_id":"ckkw8rxxp0047lkq5g3tjen6m","category_id":"ckkw8rxvl0004lkq5lxopgpu8","_id":"ckkw8rxxw004tlkq56nmpvann"},{"post_id":"ckkw8rxw40011lkq5j9gbpsa5","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxw004wlkq5jk2i289i"},{"post_id":"ckkw8rxw40011lkq5j9gbpsa5","category_id":"ckkw8rxxq0049lkq533bg9ome","_id":"ckkw8rxxx004ylkq54ljhjxt3"},{"post_id":"ckkw8rxw50013lkq5nf0wsm5h","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxy0050lkq5qbh9sapa"},{"post_id":"ckkw8rxw50013lkq5nf0wsm5h","category_id":"ckkw8rxxv004plkq5xlypw2xj","_id":"ckkw8rxxy0053lkq5oawmnhqn"},{"post_id":"ckkw8rxwq0027lkq59m0a3er3","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxxz0058lkq5p1eptvb7"},{"post_id":"ckkw8rxwq0027lkq59m0a3er3","category_id":"ckkw8rxxx004zlkq594h74m51","_id":"ckkw8rxy0005alkq587xkzsl4"},{"post_id":"ckkw8rxwy002plkq5yqs16a1j","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxy3005olkq5m5r2ce6q"},{"post_id":"ckkw8rxwy002plkq5yqs16a1j","category_id":"ckkw8rxy2005ilkq5695121zo","_id":"ckkw8rxy4005qlkq5klvvoist"},{"post_id":"ckkw8rxx0002slkq5wib51qx8","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxy5005tlkq5q9zlfmyr"},{"post_id":"ckkw8rxx0002slkq5wib51qx8","category_id":"ckkw8rxy2005ilkq5695121zo","_id":"ckkw8rxy6005vlkq5iw465cc3"},{"post_id":"ckkw8rxx1002vlkq5ys9nrlkj","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxy7005ylkq5dpvie3ba"},{"post_id":"ckkw8rxx1002vlkq5ys9nrlkj","category_id":"ckkw8rxy2005ilkq5695121zo","_id":"ckkw8rxy70060lkq5d57edhzg"},{"post_id":"ckkw8rxx3002zlkq5w3cn927x","category_id":"ckkw8rxw8001alkq56trud88l","_id":"ckkw8rxy70061lkq5lg2jk2py"},{"post_id":"ckkw8rxx3002zlkq5w3cn927x","category_id":"ckkw8rxxx004zlkq594h74m51","_id":"ckkw8rxy80065lkq5x128pjn9"},{"post_id":"ckkw8rxx9003clkq5s7vf6qf9","category_id":"ckkw8rxvv000hlkq5l09okgp5","_id":"ckkw8rxya006dlkq5sr1hc4uv"},{"post_id":"ckkw8rxx9003clkq5s7vf6qf9","category_id":"ckkw8rxy2005ilkq5695121zo","_id":"ckkw8rxyb006flkq5anogi7z5"},{"post_id":"ckkw8rxxm0040lkq5mj6gtlhd","category_id":"ckkw8rxye006rlkq5zghualwo","_id":"ckkw8rxyf006vlkq5w35lb433"},{"post_id":"ckkw8rxwl001ylkq53dwmdwzw","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyg006zlkq5fmbr46ju"},{"post_id":"ckkw8rxwl001ylkq53dwmdwzw","category_id":"ckkw8rxyf006tlkq5k9tlitvr","_id":"ckkw8rxyg0070lkq5cigs0oyf"},{"post_id":"ckkw8rxwn0021lkq5lmuczl9v","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyh0072lkq5u73q4ut0"},{"post_id":"ckkw8rxwn0021lkq5lmuczl9v","category_id":"ckkw8rxyf006tlkq5k9tlitvr","_id":"ckkw8rxyh0073lkq508rpbiol"},{"post_id":"ckkw8rxwo0024lkq572w41guu","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyh0074lkq5b0ebd1zm"},{"post_id":"ckkw8rxwo0024lkq572w41guu","category_id":"ckkw8rxyf006tlkq5k9tlitvr","_id":"ckkw8rxyi0076lkq5dahsmimy"},{"post_id":"ckkw8rxwt002clkq5r13u1lac","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyi0078lkq5xjiytbt3"},{"post_id":"ckkw8rxwt002clkq5r13u1lac","category_id":"ckkw8rxyh0071lkq593ikqlkz","_id":"ckkw8rxyi0079lkq5dblsgec3"},{"post_id":"ckkw8rxwu002elkq5lpdhuciy","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyj007blkq5cdyohzap"},{"post_id":"ckkw8rxwu002elkq5lpdhuciy","category_id":"ckkw8rxyh0071lkq593ikqlkz","_id":"ckkw8rxyj007clkq5bb26h7r7"},{"post_id":"ckkw8rxwv002ilkq5fbo3es0n","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyk007elkq5y7lgrstv"},{"post_id":"ckkw8rxwv002ilkq5fbo3es0n","category_id":"ckkw8rxyh0071lkq593ikqlkz","_id":"ckkw8rxyk007flkq5zzh197xf"},{"post_id":"ckkw8rxwx002klkq5294qc9wb","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyk007glkq5w6l3rbvy"},{"post_id":"ckkw8rxwx002klkq5294qc9wb","category_id":"ckkw8rxyh0071lkq593ikqlkz","_id":"ckkw8rxyl007ilkq5977od88y"},{"post_id":"ckkw8rxx60035lkq5jg3alhbt","category_id":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyl007klkq5o4yovrbd"},{"post_id":"ckkw8rxx60035lkq5jg3alhbt","category_id":"ckkw8rxyj007dlkq5ibnup4zc","_id":"ckkw8rxyl007llkq554ss0vh1"},{"post_id":"ckkw8rxx70038lkq58pswdq3k","category_id":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyl007mlkq5bf2sr6ov"},{"post_id":"ckkw8rxx70038lkq58pswdq3k","category_id":"ckkw8rxyj007dlkq5ibnup4zc","_id":"ckkw8rxym007olkq5l7polg0s"},{"post_id":"ckkw8rxxc003jlkq5hashqsf7","category_id":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxym007plkq5bv2zl58h"},{"post_id":"ckkw8rxxc003jlkq5hashqsf7","category_id":"ckkw8rxyl007jlkq54z25d3rh","_id":"ckkw8rxyn007rlkq5kko1auds"},{"post_id":"ckkw8rxxe003llkq5lpt4q5ce","category_id":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyn007tlkq5o76ybzfu"},{"post_id":"ckkw8rxxe003llkq5lpt4q5ce","category_id":"ckkw8rxym007nlkq59exnfxpw","_id":"ckkw8rxyn007ulkq57m4d31a3"},{"post_id":"ckkw8rxxh003qlkq5nzsy7aqr","category_id":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyo007wlkq5ewfpwfan"},{"post_id":"ckkw8rxxh003qlkq5nzsy7aqr","category_id":"ckkw8rxyl007jlkq54z25d3rh","_id":"ckkw8rxyo007xlkq5hrdf3y7j"},{"post_id":"ckkw8rxxj003tlkq5xl6flym1","category_id":"ckkw8rxy7005xlkq5u14uzo0d","_id":"ckkw8rxyo007ylkq5b326kodm"},{"post_id":"ckkw8rxxj003tlkq5xl6flym1","category_id":"ckkw8rxym007nlkq59exnfxpw","_id":"ckkw8rxyo007zlkq5hu8qt2z0"},{"post_id":"ckkw8rxxl003ylkq59ssuku0u","category_id":"ckkw8rxxs004flkq58heksqrq","_id":"ckkw8rxyo0080lkq5y1vrufh1"},{"post_id":"ckkw8rxxl003ylkq59ssuku0u","category_id":"ckkw8rxyo007vlkq5j5dlptc5","_id":"ckkw8rxyp0081lkq52b267kld"}],"PostTag":[{"post_id":"ckkw8rxvp0008lkq5yjvsgtgb","tag_id":"ckkw8rxvn0005lkq5n6ujc415","_id":"ckkw8rxvs000clkq5bx4l6e0x"},{"post_id":"ckkw8rxve0000lkq5nmgvwibm","tag_id":"ckkw8rxvn0005lkq5n6ujc415","_id":"ckkw8rxvt000elkq5penvbomg"},{"post_id":"ckkw8rxvs000dlkq57in06h77","tag_id":"ckkw8rxvn0005lkq5n6ujc415","_id":"ckkw8rxvv000jlkq5f05dv341"},{"post_id":"ckkw8rxvi0002lkq5ss7heqq2","tag_id":"ckkw8rxvs000blkq5botcjcl4","_id":"ckkw8rxvx000mlkq5k7cpk8x9"},{"post_id":"ckkw8rxvn0006lkq5fo7xgx2e","tag_id":"ckkw8rxvv000ilkq5l3k1ycb9","_id":"ckkw8rxw0000tlkq5tyg4xdqj"},{"post_id":"ckkw8rxvq0009lkq5r72ttba0","tag_id":"ckkw8rxvy000qlkq52knr6azg","_id":"ckkw8rxw30010lkq5gmdtwkfe"},{"post_id":"ckkw8rxvu000flkq577sycu18","tag_id":"ckkw8rxw2000xlkq5lv40uwsp","_id":"ckkw8rxw60015lkq5wb0t8uod"},{"post_id":"ckkw8rxw60016lkq5yc84vdhn","tag_id":"ckkw8rxw60014lkq53r1vr76a","_id":"ckkw8rxw9001clkq5uxzj1dxn"},{"post_id":"ckkw8rxvv000klkq5cful1yla","tag_id":"ckkw8rxw60014lkq53r1vr76a","_id":"ckkw8rxwa001flkq5cv0wadi4"},{"post_id":"ckkw8rxvx000nlkq5op4ywh3b","tag_id":"ckkw8rxw9001blkq500dcv1t9","_id":"ckkw8rxwd001mlkq585nfrttg"},{"post_id":"ckkw8rxwg001rlkq5isz3c27u","tag_id":"ckkw8rxwc001jlkq5ogdmifml","_id":"ckkw8rxwk001xlkq5zsr3t8mz"},{"post_id":"ckkw8rxvz000rlkq5qnpmhdfv","tag_id":"ckkw8rxwc001jlkq5ogdmifml","_id":"ckkw8rxwm0020lkq5cuyq8gho"},{"post_id":"ckkw8rxvz000rlkq5qnpmhdfv","tag_id":"ckkw8rxwf001plkq5ex5l7zyr","_id":"ckkw8rxwo0023lkq5nqublgbj"},{"post_id":"ckkw8rxw1000ulkq5p8r0r25y","tag_id":"ckkw8rxwk001vlkq5jh1s4rfh","_id":"ckkw8rxwp0026lkq5re7jprhx"},{"post_id":"ckkw8rxwn0021lkq5lmuczl9v","tag_id":"ckkw8rxw60014lkq53r1vr76a","_id":"ckkw8rxwr0029lkq5m2iwszu7"},{"post_id":"ckkw8rxw40011lkq5j9gbpsa5","tag_id":"ckkw8rxwn0022lkq5nd8x7ya2","_id":"ckkw8rxwv002glkq58enm02i4"},{"post_id":"ckkw8rxw40011lkq5j9gbpsa5","tag_id":"ckkw8rxwr0028lkq5oweq7df2","_id":"ckkw8rxwx002jlkq56o2zii00"},{"post_id":"ckkw8rxw50013lkq5nf0wsm5h","tag_id":"ckkw8rxwt002dlkq5hqi9p03k","_id":"ckkw8rxwy002olkq5qmvaxafq"},{"post_id":"ckkw8rxwx002klkq5294qc9wb","tag_id":"ckkw8rxw60014lkq53r1vr76a","_id":"ckkw8rxwz002rlkq50oibyt8y"},{"post_id":"ckkw8rxw70018lkq5k5k7tpzf","tag_id":"ckkw8rxwx002llkq54aaji04n","_id":"ckkw8rxx2002xlkq52kfpqn25"},{"post_id":"ckkw8rxw9001dlkq5duet7ugg","tag_id":"ckkw8rxx0002tlkq5d5j08zoc","_id":"ckkw8rxx50034lkq5caw531h3"},{"post_id":"ckkw8rxwb001glkq5oqmj3bka","tag_id":"ckkw8rxx40030lkq5fu0ew7cc","_id":"ckkw8rxx8003blkq5cct43xgf"},{"post_id":"ckkw8rxx70038lkq58pswdq3k","tag_id":"ckkw8rxw60014lkq53r1vr76a","_id":"ckkw8rxxa003elkq5wtqdygbs"},{"post_id":"ckkw8rxwc001klkq54lr8bi2n","tag_id":"ckkw8rxx0002tlkq5d5j08zoc","_id":"ckkw8rxxh003plkq5e2vdreqw"},{"post_id":"ckkw8rxwc001klkq54lr8bi2n","tag_id":"ckkw8rxxa003flkq5hq152qrb","_id":"ckkw8rxxi003slkq5p9h4pmdt"},{"post_id":"ckkw8rxwd001nlkq50ax311eq","tag_id":"ckkw8rxx0002tlkq5d5j08zoc","_id":"ckkw8rxxl003xlkq5kbg4n3f5"},{"post_id":"ckkw8rxwf001qlkq5inin6wpg","tag_id":"ckkw8rxx0002tlkq5d5j08zoc","_id":"ckkw8rxxo0044lkq5s715w40p"},{"post_id":"ckkw8rxxp0047lkq5g3tjen6m","tag_id":"ckkw8rxxa003flkq5hq152qrb","_id":"ckkw8rxxr004clkq54q5ieyvr"},{"post_id":"ckkw8rxwh001ulkq5fkeclqog","tag_id":"ckkw8rxx0002tlkq5d5j08zoc","_id":"ckkw8rxxs004glkq529phgg51"},{"post_id":"ckkw8rxwh001ulkq5fkeclqog","tag_id":"ckkw8rxxq0048lkq5gmsphvf5","_id":"ckkw8rxxt004ilkq5xy8t9mq7"},{"post_id":"ckkw8rxwl001ylkq53dwmdwzw","tag_id":"ckkw8rxxr004elkq5y5vc2s5x","_id":"ckkw8rxxu004nlkq59w2yyv8g"},{"post_id":"ckkw8rxwo0024lkq572w41guu","tag_id":"ckkw8rxxu004klkq5tdzylrtt","_id":"ckkw8rxxv004slkq5y8tucvhd"},{"post_id":"ckkw8rxwq0027lkq59m0a3er3","tag_id":"ckkw8rxxv004qlkq5l8rkxjm3","_id":"ckkw8rxxx004xlkq5harulqbn"},{"post_id":"ckkw8rxwt002clkq5r13u1lac","tag_id":"ckkw8rxxw004vlkq5othwh4zx","_id":"ckkw8rxxy0052lkq53tpqb4e2"},{"post_id":"ckkw8rxwu002elkq5lpdhuciy","tag_id":"ckkw8rxxy0051lkq57c7d3ns2","_id":"ckkw8rxxz0056lkq5qc8hgi55"},{"post_id":"ckkw8rxwv002ilkq5fbo3es0n","tag_id":"ckkw8rxxz0055lkq5g7tpis23","_id":"ckkw8rxy0005blkq5aiuw7wia"},{"post_id":"ckkw8rxwy002plkq5yqs16a1j","tag_id":"ckkw8rxy00059lkq5vc1r88yx","_id":"ckkw8rxy1005elkq58cbc6wsl"},{"post_id":"ckkw8rxx0002slkq5wib51qx8","tag_id":"ckkw8rxy1005dlkq544m5wqae","_id":"ckkw8rxy2005hlkq5lqjz84ht"},{"post_id":"ckkw8rxx3002zlkq5w3cn927x","tag_id":"ckkw8rxy1005glkq5nou94nzg","_id":"ckkw8rxy2005klkq5kiezsy3t"},{"post_id":"ckkw8rxx40031lkq5cr1g1kz5","tag_id":"ckkw8rxy2005jlkq5vehti61l","_id":"ckkw8rxy4005plkq57l5mj04l"},{"post_id":"ckkw8rxx60035lkq5jg3alhbt","tag_id":"ckkw8rxy3005mlkq58jb194dd","_id":"ckkw8rxy6005ulkq53oqkr81l"},{"post_id":"ckkw8rxx9003clkq5s7vf6qf9","tag_id":"ckkw8rxy4005rlkq5y2o91uks","_id":"ckkw8rxy7005zlkq5i6zpmbeb"},{"post_id":"ckkw8rxxa003glkq5496b7ant","tag_id":"ckkw8rxy6005wlkq5rsle0gjn","_id":"ckkw8rxy80064lkq5q57z37gu"},{"post_id":"ckkw8rxxc003jlkq5hashqsf7","tag_id":"ckkw8rxy70062lkq5k83qeqvp","_id":"ckkw8rxy90068lkq5hfufvogu"},{"post_id":"ckkw8rxxe003llkq5lpt4q5ce","tag_id":"ckkw8rxy90067lkq5yn2byymc","_id":"ckkw8rxya006blkq5x4ftguxw"},{"post_id":"ckkw8rxxh003qlkq5nzsy7aqr","tag_id":"ckkw8rxy70062lkq5k83qeqvp","_id":"ckkw8rxyb006glkq5j6e7mdzk"},{"post_id":"ckkw8rxxj003tlkq5xl6flym1","tag_id":"ckkw8rxy90067lkq5yn2byymc","_id":"ckkw8rxyc006jlkq5jyz0o6c0"},{"post_id":"ckkw8rxxj003tlkq5xl6flym1","tag_id":"ckkw8rxw60014lkq53r1vr76a","_id":"ckkw8rxyd006llkq5is0nk17k"},{"post_id":"ckkw8rxxl003ylkq59ssuku0u","tag_id":"ckkw8rxyc006ilkq5s1mx8khr","_id":"ckkw8rxyd006nlkq5xg3bovf9"},{"post_id":"ckkw8rxxm0040lkq5mj6gtlhd","tag_id":"ckkw8rxyd006mlkq5rrauy3wc","_id":"ckkw8rxye006qlkq5wygrnvjt"},{"post_id":"ckkw8rxxo0045lkq5fmbjy4zg","tag_id":"ckkw8rxye006plkq58ef4898j","_id":"ckkw8rxyf006ulkq5eshjxvt5"},{"post_id":"ckkw8rxxo0045lkq5fmbjy4zg","tag_id":"ckkw8rxyf006slkq5kj0szgjy","_id":"ckkw8rxyg006xlkq53t0n1kev"}],"Tag":[{"name":"yum","_id":"ckkw8rxvn0005lkq5n6ujc415"},{"name":"PaddleHub","_id":"ckkw8rxvs000blkq5botcjcl4"},{"name":"libreoffice","_id":"ckkw8rxvv000ilkq5l3k1ycb9"},{"name":"openoffice","_id":"ckkw8rxvy000qlkq52knr6azg"},{"name":"zsh","_id":"ckkw8rxw2000xlkq5lv40uwsp"},{"name":"cmd","_id":"ckkw8rxw60014lkq53r1vr76a"},{"name":"network","_id":"ckkw8rxw9001blkq500dcv1t9"},{"name":"gcc","_id":"ckkw8rxwc001jlkq5ogdmifml"},{"name":"devtoolset","_id":"ckkw8rxwf001plkq5ex5l7zyr"},{"name":"env","_id":"ckkw8rxwk001vlkq5jh1s4rfh"},{"name":"gtest","_id":"ckkw8rxwn0022lkq5nd8x7ya2"},{"name":"lcov","_id":"ckkw8rxwr0028lkq5oweq7df2"},{"name":"pistache","_id":"ckkw8rxwt002dlkq5hqi9p03k"},{"name":"cuda","_id":"ckkw8rxwx002llkq54aaji04n"},{"name":"ffmpeg","_id":"ckkw8rxx0002tlkq5d5j08zoc"},{"name":"easyloggingcpp","_id":"ckkw8rxx40030lkq5fu0ew7cc"},{"name":"io","_id":"ckkw8rxxa003flkq5hq152qrb"},{"name":"GPU","_id":"ckkw8rxxq0048lkq5gmsphvf5"},{"name":"lfs","_id":"ckkw8rxxr004elkq5y5vc2s5x"},{"name":"git","_id":"ckkw8rxxu004klkq5tdzylrtt"},{"name":"grpc","_id":"ckkw8rxxv004qlkq5l8rkxjm3"},{"name":"gulp","_id":"ckkw8rxxw004vlkq5othwh4zx"},{"name":"next","_id":"ckkw8rxxy0051lkq57c7d3ns2"},{"name":"hexo","_id":"ckkw8rxxz0055lkq5g7tpis23"},{"name":"libraw","_id":"ckkw8rxy00059lkq5vc1r88yx"},{"name":"libvips","_id":"ckkw8rxy1005dlkq544m5wqae"},{"name":"json","_id":"ckkw8rxy1005glkq5nou94nzg"},{"name":"mupdf","_id":"ckkw8rxy2005jlkq5vehti61l"},{"name":"mysql","_id":"ckkw8rxy3005mlkq58jb194dd"},{"name":"opencv","_id":"ckkw8rxy4005rlkq5y2o91uks"},{"name":"poco","_id":"ckkw8rxy6005wlkq5rsle0gjn"},{"name":"rabbitmq","_id":"ckkw8rxy70062lkq5k83qeqvp"},{"name":"s3","_id":"ckkw8rxy90067lkq5yn2byymc"},{"name":"selenium","_id":"ckkw8rxyc006ilkq5s1mx8khr"},{"name":"Blog","_id":"ckkw8rxyd006mlkq5rrauy3wc"},{"name":"image","_id":"ckkw8rxye006plkq58ef4898j"},{"name":"RAW","_id":"ckkw8rxyf006slkq5kj0szgjy"}]}}